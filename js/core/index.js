"use strict";const e=window.tracingOrigin||u(),o=u();require('../js/unpack/hackrequire/index.js');const t=u(),i=require('../core.wxvpkg/fb234dd516321fadc9732d99111bc45e.js').default,n=require('../core.wxvpkg/11eeae22117722b1350fb9fead80437b.js').sendToPerformance,r=require('../core.wxvpkg/4c528c696f2a800d668db6ee4d7c42a7.js');(!!process.execPath.match("nw.exe")||!!process.execPath.match("nwjs.app")||!!process.execPath.match("nwjs.exe"))&&(i.start(),i.complete("startup,report","DOMContentLoaded",e,o),i.complete("startup","hackRequire",o,t));const s=require('../core.wxvpkg/d5412d2773b861711912958f9f5b10f7.js'),l=require('../core.wxvpkg/e90b7cb007787228bc8fe5535731b603.js'),a=require('../core.wxvpkg/0322709e47d35f2deac5acd1748dddf4.js'),g=require('../core.wxvpkg/9e358ebfb64a7d64d6b1c44b6e560381.js').default,d=require('../core.wxvpkg/30b1550fa2e235a30c3f8b4bec7c59a3.js');function u(){return Math.round(1e3*performance.now())}i.complete("startup","initialRequire",t,u());const p=()=>{var o,t;const u=i.asyncBegin("startup,report","meaningfulRender",null,{},{ts:e});i.begin("startup,report","init"),function(){var e;i.begin("startup","initGlobal");const o=require('../core.wxvpkg/28241807b29451e8d39d305e9396a62a.js');o.initGlobal(global,nw.Window.get()),o.preventDefault(document),o.initCli(global);const t=global.Win;global.windowMap.set("LOGIN",t);const n=r.getUserInfo();if(3===(null===(e=null==n?void 0:n.eduInfo)||void 0===e?void 0:e.type)&&r.setOptions({loginType:r.LoginType.TestTicket,isTemp:!1}),global.onWindowClose(()=>{const e=require('../core.wxvpkg/b7691e109ad844af265d9385e5205802.js'),o=require('../core.wxvpkg/076fb63825c9515d9694caf6b2eb66fc.js'),t=e.getState(),i=t.project.current;i&&t.window.remoteDebugWindow.debuggingProjectId===i.projectid&&e.dispatch(o.setRemoteDebugWindow({show:!1,debuggingProjectId:null})),!s.isSimpleOrAutoTest()&&(null==i?void 0:i.projectid)&&l.removeFromLastAllProject({project:null==i?void 0:i.projectid,plainTextEditProject:null==i?void 0:i.plainTextEditProject}),l.removePushTips();const{WindowManager:n}=require('../core.wxvpkg/9c877b26f7e2d379fdad1105a8a1a5de.js');n.sharedManager.closeDevWindow()}),Object.defineProperties(global.worker,{bbsLogWorker:{get(){return this._bbsLogWoker||(this._bbsLogWoker=new Worker("../js/unpack/workers/bbslog.js")),this._bbsLogWoker}}}),location.search){const e=s.getQuery(location.search);global.runtimeId=e.runtimeid||"0",global.sessionId=""+Date.now(),global.isDevWindow=!0;const o=location.search.match(/devtype=(.*?)(&|$)/);switch(global.devType=null==o?void 0:o[1],global.devType){case"webdebugger":global.devInfo.id=e.devid,global.devInfo.bgwsurl=e.bgwsurl,global.devInfo.bgwstoken=e.bgwstoken;break;default:if(global.devInfo.parentid=e.parentid,global.devInfo.id=e.devid,global.devInfo.appid=e.appid,global.devInfo.projectname=e.projectname,global.devInfo.projectpath=e.projectpath,global.devInfo.projectid=e.projectpath,e.autoPort){require('../core.wxvpkg/fa74583bdd5636c7399965b2d43d2c88.js').default.start(+e.autoPort)}if(global.devInfo.isTemp=Boolean(e.isTemp),global.devInfo.isOnline=Boolean(e.isOnline),global.devInfo.bgwsurl=e.bgwsurl,global.devInfo.bgwstoken=e.bgwstoken,global.devInfo.openedFile=e.openedFile,global.devInfo.isTemp){const e=`temp_${global.devInfo.appid}_${global.devInfo.projectname}`;global.devInfo.project=JSON.parse(localStorage[e]),delete localStorage[e]}}if(e.autoPort||e.autotest){const o=require('../core.wxvpkg/fa74583bdd5636c7399965b2d43d2c88.js').default;if(e.testTicket){const t=o.getTestUserInfo(e.testTicket);r.setOptions({loginType:r.LoginType.TestTicket,isTemp:!0}),r.updateUserInfo(t)}else if(e.ticket){const t=o.getTestUserInfo(e.ticket);r.setOptions({loginType:r.LoginType.Normal,isTemp:!0}),r.updateUserInfo(t)}e.autoPort&&o.start(+e.autoPort)}if(e.simple||e.autotest)try{if(e.testuserinfo){const o=JSON.parse(e.testuserinfo);r.setOptions({loginType:r.LoginType.TestUser,isTemp:!0}),r.updateUserInfo(o)}else if(e.userinfo){const o=JSON.parse(e.userinfo);r.setOptions({loginType:r.LoginType.Normal,isTemp:!0}),r.updateUserInfo(o)}}catch(e){console.error(e)}e.simple&&(global.isSimple=!0),e.autotest&&(global.isAutoTestRecord=!0),e.trustProject&&(global.tempTrustProject=!0),e.engine&&(global.isEngine=!0,e.engineSimple?(global.engineSimple=JSON.parse(e.engineSimple),global.isEngineSimulator=global.engineSimple.isEngineSimulator,global.isEngineIDE=global.engineSimple.isEngineIDE,global.isEngineMainAccount=!!global.engineSimple.isEngineMainAccount,global.ideVersion=global.engineSimple.ideVersion,global.engineVersion=global.engineSimple.engineVersion):(global.isEngineIDE=!0,global.gameEngineResourceId=e.gameEngineResourceId||"")),e.isHybird&&(global.isHybird=!0,global.hybirdPlugin=e.hybirdPlugin,global.hybirdEnv=e.hybirdEnv&&JSON.parse(e.hybirdEnv)||{}),e.masterH2ProxyPort&&(global.masterH2ProxyPort=e.masterH2ProxyPort),e.masterProxyPort&&(global.masterProxyPort=e.masterProxyPort),e.masterUAToken&&(global.masterUAToken=e.masterUAToken)}i.end()}(),i.begin("startup,report","initStore");const p=require('../core.wxvpkg/b7691e109ad844af265d9385e5205802.js');if(i.end(),a.addRecoveryMenu(global.Win),"win32"===process.platform&&"function"==typeof correctWindowPos&&correctWindowPos(),global.isDevWindow)!function(){i.begin("startup","initTitleBar");const e=require('../core.wxvpkg/aec9a4aceafbe25f3dd79d7ded95016e.js');global.useStandaloneMenubar&&e.install(),i.end()}();else{require('../core.wxvpkg/aec9a4aceafbe25f3dd79d7ded95016e.js').hideTitlebar()}let c,b="unknown";const m=["firstRender"],f=["meaningfulRender"];if(global.isAutoTestRecord)b="autotest",c=require('../core.wxvpkg/0194eac713e0550158d7ca3f23ba6785.js');else if(global.isHybird)b="hybird",c=require('../core.wxvpkg/a6a60b396c51394e2de824ee7b8fbc56.js');else if(global.isSimple)global.isEngine?(b="engine/simple",c=require('../core.wxvpkg/a0a5b2b956066f4516bc8b01c6541133.js')):(b="simple",c=require('../core.wxvpkg/31e839651ce32048a25e8dd020fe0f0e.js'));else{const{initTutorialServer:e}=require('../core.wxvpkg/35ca7f5480026ccf0d54ddc2f92f1eb7.js');e();require('../core.wxvpkg/36a64af66922f8ba03faddeab7c82048.js').default.start(),c=require('../core.wxvpkg/3a67b0cd649abaa7a873f3edfc2be587.js'),"miniprogram"===global.devType?(b="devwindow",m.push("editor","inspector"),f.push("simulator")):b="webdebugger"}d.setConfig({version:global.appVersion,pageUrl:b,uin:null===(t=null===(o=p.getState().project)||void 0===o?void 0:o.current)||void 0===t?void 0:t.appid}),g.ready(m,()=>{i.asyncEnd(u),g.signal("meaningfulRender")}),g.ready(f,()=>{g.signal("fullRender"),global.appConfig.isDev&&setTimeout(()=>{i.stop(n)},5e3)}),c.launch(),i.end()};if("complete"===window.document.readyState)p();else{const e=i.asyncBegin("startup,report","waitForLoadEvent");window.addEventListener("load",()=>{i.asyncEnd(e),p()})}module.exports={};
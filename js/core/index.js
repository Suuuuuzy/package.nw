"use strict";const e=window.tracingOrigin||d(),o=d();require('../js/unpack/hackrequire/index.js');const i=d(),t=require('../core.wxvpkg/fb234dd516321fadc9732d99111bc45e.js').default,n=require('../core.wxvpkg/11eeae22117722b1350fb9fead80437b.js').sendToPerformance;(!!process.execPath.match("nw.exe")||!!process.execPath.match("nwjs.app")||!!process.execPath.match("nwjs.exe"))&&(t.start(),t.complete("startup,report","DOMContentLoaded",e,o),t.complete("startup","hackRequire",o,i));const r=require('../core.wxvpkg/d5412d2773b861711912958f9f5b10f7.js'),s=require('../core.wxvpkg/e90b7cb007787228bc8fe5535731b603.js'),l=require('../core.wxvpkg/0322709e47d35f2deac5acd1748dddf4.js'),a=require('../core.wxvpkg/9e358ebfb64a7d64d6b1c44b6e560381.js').default,g=require('../core.wxvpkg/30b1550fa2e235a30c3f8b4bec7c59a3.js');function d(){return Math.round(1e3*performance.now())}t.complete("startup","initialRequire",i,d());const c=()=>{var o,i;const d=t.asyncBegin("startup,report","meaningfulRender",null,{},{ts:e});t.begin("startup,report","init"),function(){t.begin("startup","initGlobal");const e=require('../core.wxvpkg/28241807b29451e8d39d305e9396a62a.js');e.initGlobal(global,nw.Window.get()),e.preventDefault(document),e.initCli(global);const o=global.Win;if(global.windowMap.set("LOGIN",o),global.onWindowClose(()=>{const e=require('../core.wxvpkg/b7691e109ad844af265d9385e5205802.js'),o=require('../core.wxvpkg/076fb63825c9515d9694caf6b2eb66fc.js'),i=e.getState(),t=i.project.current;t&&i.window.remoteDebugWindow.debuggingProjectId===t.projectid&&e.dispatch(o.setRemoteDebugWindow({show:!1,debuggingProjectId:null})),!r.isSimpleOrAutoTest()&&(null==t?void 0:t.projectid)&&s.removeFromLastAllProject({project:null==t?void 0:t.projectid,plainTextEditProject:null==t?void 0:t.plainTextEditProject}),s.removePushTips();const{WindowManager:n}=require('../core.wxvpkg/9c877b26f7e2d379fdad1105a8a1a5de.js');n.sharedManager.closeDevWindow()}),Object.defineProperties(global.worker,{bbsLogWorker:{get(){return this._bbsLogWoker||(this._bbsLogWoker=new Worker("../js/unpack/workers/bbslog.js")),this._bbsLogWoker}}}),location.search){const e=r.getQuery(location.search);global.runtimeId=e.runtimeid||"0",global.sessionId=""+Date.now(),global.isDevWindow=!0;const o=location.search.match(/devtype=(.*?)(&|$)/);switch(global.devType=null==o?void 0:o[1],global.devType){case"webdebugger":global.devInfo.id=e.devid,global.devInfo.bgwsurl=e.bgwsurl,global.devInfo.bgwstoken=e.bgwstoken;break;default:if(global.devInfo.parentid=e.parentid,global.devInfo.id=e.devid,global.devInfo.appid=e.appid,global.devInfo.projectname=e.projectname,global.devInfo.projectpath=e.projectpath,global.devInfo.projectid=e.projectpath,e.autoPort){require('../core.wxvpkg/fa74583bdd5636c7399965b2d43d2c88.js').default.start(+e.autoPort)}if(global.devInfo.isTemp=Boolean(e.isTemp),global.devInfo.isOnline=Boolean(e.isOnline),global.devInfo.bgwsurl=e.bgwsurl,global.devInfo.bgwstoken=e.bgwstoken,global.devInfo.openedFile=e.openedFile,global.devInfo.isTemp){const e=`temp_${global.devInfo.appid}_${global.devInfo.projectname}`;global.devInfo.project=JSON.parse(localStorage[e]),delete localStorage[e]}}const i=require('../core.wxvpkg/4c528c696f2a800d668db6ee4d7c42a7.js');if(e.autoPort||e.autotest){const o=require('../core.wxvpkg/fa74583bdd5636c7399965b2d43d2c88.js').default;if(e.testTicket){const t=o.getTestUserInfo(e.testTicket);i.setOptions({loginType:i.LoginType.TestTicket,isTemp:!0}),i.updateUserInfo(t)}else if(e.ticket){const t=o.getTestUserInfo(e.ticket);i.setOptions({loginType:i.LoginType.Normal,isTemp:!0}),i.updateUserInfo(t)}e.autoPort&&o.start(+e.autoPort)}if(e.simple||e.autotest)try{if(e.testuserinfo){const o=JSON.parse(e.testuserinfo);i.setOptions({loginType:i.LoginType.TestUser,isTemp:!0}),i.updateUserInfo(o)}else if(e.userinfo){const o=JSON.parse(e.userinfo);i.setOptions({loginType:i.LoginType.Normal,isTemp:!0}),i.updateUserInfo(o)}}catch(e){console.error(e)}e.simple&&(global.isSimple=!0),e.autotest&&(global.isAutoTestRecord=!0),e.engine&&(global.isEngine=!0,e.engineSimple?(global.engineSimple=JSON.parse(e.engineSimple),global.isEngineSimulator=global.engineSimple.isEngineSimulator,global.isEngineIDE=global.engineSimple.isEngineIDE,global.isEngineMainAccount=!!global.engineSimple.isEngineMainAccount,global.ideVersion=global.engineSimple.ideVersion,global.engineVersion=global.engineSimple.engineVersion):(global.isEngineIDE=!0,global.gameEngineResourceId=e.gameEngineResourceId||"")),e.isHybird&&(global.isHybird=!0,global.hybirdPlugin=e.hybirdPlugin,global.hybirdEnv=e.hybirdEnv&&JSON.parse(e.hybirdEnv)||{}),e.masterH2ProxyPort&&(global.masterH2ProxyPort=e.masterH2ProxyPort),e.masterProxyPort&&(global.masterProxyPort=e.masterProxyPort),e.masterUAToken&&(global.masterUAToken=e.masterUAToken)}t.end()}(),t.begin("startup,report","initStore");const c=require('../core.wxvpkg/b7691e109ad844af265d9385e5205802.js');if(t.end(),l.addRecoveryMenu(global.Win),"win32"===process.platform&&"function"==typeof correctWindowPos&&correctWindowPos(),global.isDevWindow)!function(){t.begin("startup","initTitleBar");const e=require('../core.wxvpkg/aec9a4aceafbe25f3dd79d7ded95016e.js');global.useStandaloneMenubar&&e.install(),t.end()}();else{require('../core.wxvpkg/aec9a4aceafbe25f3dd79d7ded95016e.js').hideTitlebar()}let u,p="unknown";const b=["firstRender"],m=["meaningfulRender"];if(global.isAutoTestRecord)p="autotest",u=require('../core.wxvpkg/0194eac713e0550158d7ca3f23ba6785.js');else if(global.isHybird)p="hybird",u=require('../core.wxvpkg/a6a60b396c51394e2de824ee7b8fbc56.js');else if(global.isSimple)global.isEngine?(p="engine/simple",u=require('../core.wxvpkg/a0a5b2b956066f4516bc8b01c6541133.js')):(p="simple",u=require('../core.wxvpkg/31e839651ce32048a25e8dd020fe0f0e.js'));else{const{initTutorialServer:e}=require('../core.wxvpkg/35ca7f5480026ccf0d54ddc2f92f1eb7.js');e();require('../core.wxvpkg/36a64af66922f8ba03faddeab7c82048.js').default.start(),u=require('../core.wxvpkg/3a67b0cd649abaa7a873f3edfc2be587.js'),"miniprogram"===global.devType?(p="devwindow",b.push("editor","inspector"),m.push("simulator")):p="webdebugger"}g.setConfig({version:global.appVersion,pageUrl:p,uin:null===(i=null===(o=c.getState().project)||void 0===o?void 0:o.current)||void 0===i?void 0:i.appid}),a.ready(b,()=>{t.asyncEnd(d),a.signal("meaningfulRender")}),a.ready(m,()=>{a.signal("fullRender"),global.appConfig.isDev&&setTimeout(()=>{t.stop(n)},5e3)}),u.launch(),t.end()};if("complete"===window.document.readyState)c();else{const e=t.asyncBegin("startup,report","waitForLoadEvent");window.addEventListener("load",()=>{t.asyncEnd(e),c()})}module.exports={};
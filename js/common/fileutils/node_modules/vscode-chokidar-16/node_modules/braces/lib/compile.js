"use strict";const fill=require("fill-range"),utils=require("./utils"),compile=(e,l={})=>{let r=(e,i={})=>{let t=utils.isInvalidBrace(i),n=!0===e.invalid&&!0===l.escapeInvalid,u=!0===t||!0===n,s=!0===l.escapeInvalid?"\\":"",a="";if(!0===e.isOpen)return s+e.value;if(!0===e.isClose)return s+e.value;if("open"===e.type)return u?s+e.value:"(";if("close"===e.type)return u?s+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":u?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=utils.reduce(e.nodes),i=fill(...r,{...l,wrap:!1,toRegex:!0});if(0!==i.length)return r.length>1&&i.length>1?`(${i})`:i}if(e.nodes)for(let l of e.nodes)a+=r(l,e);return a};return r(e)};module.exports=compile;
var _WORKLET = false;/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!
  \*****************************************************************/
/***/ ((module) => {

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

module.exports = _asyncToGenerator;
module.exports.default = module.exports, module.exports.__esModule = true;

/***/ }),

/***/ "./lib/exparser.js":
/*!*************************!*\
  !*** ./lib/exparser.js ***!
  \*************************/
/***/ ((module) => {

module.exports = function (modules) {
  // webpackBootstrap
  var installedModules = {};

  function __nested_webpack_require_92__(moduleId) {
    if (installedModules[moduleId]) return installedModules[moduleId].exports;
    var module = installedModules[moduleId] = {
      exports: {},
      id: moduleId,
      loaded: false
    };
    modules[moduleId].call(module.exports, module, module.exports, __nested_webpack_require_92__);
    module.loaded = true;
    return module.exports;
  }

  __nested_webpack_require_92__.m = modules;
  __nested_webpack_require_92__.c = installedModules;
  __nested_webpack_require_92__.p = "";
  return __nested_webpack_require_92__(0);
}([function (module, exports, __nested_webpack_require_645__) {
  var LLParser = __nested_webpack_require_645__(1);

  var FuncArr = __nested_webpack_require_645__(3);

  var dataUtils = __nested_webpack_require_645__(5);

  var eventSystem = __nested_webpack_require_645__(6);

  var dataPath = __nested_webpack_require_645__(7);

  var Behavior = __nested_webpack_require_645__(8);

  var Element = __nested_webpack_require_645__(9);

  var Component = __nested_webpack_require_645__(15);

  var TextNode = __nested_webpack_require_645__(12);

  var NativeNode = __nested_webpack_require_645__(17);

  var VirtualNode = __nested_webpack_require_645__(18);

  var ShadowRoot = __nested_webpack_require_645__(19);

  var DataGroup = __nested_webpack_require_645__(16);

  var Observer = __nested_webpack_require_645__(10);

  var ElementIterator = __nested_webpack_require_645__(20);

  var FakeDomElement = __nested_webpack_require_645__(14);

  var backend = __nested_webpack_require_645__(21);

  var globalOptions = __nested_webpack_require_645__(4);

  var globalState = __nested_webpack_require_645__(13);

  var ClassList = __nested_webpack_require_645__(11);

  exports.LLParser = LLParser;
  exports.dataPath = dataPath;
  exports.dataUtils = dataUtils;
  exports.Event = eventSystem;
  exports.Element = Element;
  exports.TextNode = TextNode;
  exports.NativeNode = NativeNode;
  exports.VirtualNode = VirtualNode;
  exports.ShadowRoot = ShadowRoot;
  exports.Behavior = Behavior;
  exports.Component = Component;
  exports.Observer = Observer;
  exports.DataGroup = DataGroup;
  exports.ElementIterator = ElementIterator;
  exports.FakeDomElement = FakeDomElement;
  exports.registerBehavior = Behavior.create;
  exports.registerElement = Component.register;
  exports.createElement = Component.create;
  exports.createTextNode = TextNode.create;
  exports.createVirtualNode = VirtualNode.create;
  exports.appendChild = Element.appendChild;
  exports.insertBefore = Element.insertBefore;
  exports.removeChild = Element.removeChild;
  exports.replaceChild = Element.replaceChild;
  exports.addListenerToElement = eventSystem.addListenerToElement;
  exports.removeListenerFromElement = eventSystem.removeListenerFromElement;
  exports.triggerEvent = eventSystem.triggerEvent;
  exports.triggerRender = backend.triggerRender;
  exports.safeCallback = FuncArr.safeCallback;
  exports.addGlobalErrorListener = FuncArr.addGlobalErrorListener;
  exports.removeGlobalErrorListener = FuncArr.removeGlobalErrorListener;
  exports.addGlobalWarningListener = FuncArr.addGlobalWarningListener;
  exports.removeGlobalWarningListener = FuncArr.removeGlobalWarningListener;
  exports.globalOptions = globalOptions;
  exports.globalState = globalState;
  exports.getStyleScopeId = ClassList._getStyleScopeId;

  var updateDefaultComponent = exports.updateDefaultComponent = function () {
    delete Component._list[''];
    Component.register({
      is: '',
      options: {
        writeOnly: true,
        allowInWriteOnly: true,
        lazyRegistration: false,
        classPrefix: '',
        addGlobalClass: false,
        templateEngine: null,
        renderingMode: 'full',
        multipleSlots: false,
        reflectToAttributes: false
      }
    });
  };

  exports.initBackend = function () {
    updateDefaultComponent();
  };

  var dumpAttributesToString = function (elem) {
    var ret = '';

    if (elem instanceof exports.Element) {
      if (elem.id) ret += ' id="' + elem.id + '"';
      if (elem.slot) ret += ' slot="' + elem.slot + '"';
      if (elem.__slotName) ret += ' name="' + elem.__slotName + '"';
      if (elem.classList) ret += ' class="' + elem.class + '"';

      if (globalOptions.documentBackend === 'dom' && elem.$$) {
        if (elem.$$.getAttribute('style')) ret += ' style="' + elem.$$.getAttribute('style') + '"';
      }
    }

    if (elem instanceof exports.VirtualNode) {
      return ret;
    }

    if (elem instanceof exports.Component) {
      Component.listPublicProperties(elem).forEach(function (propName) {
        ret += ' ' + propName + '=' + JSON.stringify(elem[propName]);
      });
      return ret;
    }

    var attrs = elem.attributes;

    for (var i = 0; i < attrs.length; i++) {
      ret += ' ' + attrs[i].name + '="' + attrs[i].value + '"';
    }

    return ret;
  };

  var dumpElementToString = exports.dumpElementToString = function (elem, composed, tabDepth) {
    var globalObj = null;
    if (globalOptions.documentBackend === 'dom') globalObj = window;
    var i = 0;
    tabDepth = tabDepth || 0;
    var linePrefix = '';

    for (i = tabDepth; i; i--) {
      linePrefix += '  ';
    }

    var ret = '';

    if (elem instanceof exports.Element) {
      var tagName = globalOptions.documentBackend === 'dom' && elem.$$ ? elem.$$.tagName.toLowerCase() + ':' : '';
      ret += linePrefix + '<' + tagName + elem.is + dumpAttributesToString(elem) + '>';

      if (elem instanceof exports.VirtualNode) {
        ret += ' [Exp-Virtual]';
      } else if (elem instanceof exports.NativeNode) {
        ret += ' [Exp-Native]';
      } else {
        ret += ' [Exp-Component]';
      }

      ret += '\n' + dumpElementToString(composed ? elem.__wxSlotChildren : elem.childNodes, composed, tabDepth + 1);
    } else if (elem instanceof exports.TextNode) {
      ret += linePrefix + elem.textContent + ' [Exp-Text]\n';
    } else if (globalObj && globalObj.HTMLElement && elem instanceof globalObj.HTMLElement) {
      ret += linePrefix + '<' + elem.tagName.toLowerCase() + dumpAttributesToString(elem) + '> [DOM-Element]';
      ret += '\n' + dumpElementToString(composed ? elem.__wxSlotChildren || elem.childNodes : elem.childNodes, composed, tabDepth + 1);
    } else if (globalObj && globalObj.Text && elem instanceof globalObj.Text) {
      ret += linePrefix + elem.textContent + ' [DOM-Text]\n';
    } else if (elem.length !== undefined) {
      for (i = 0; i < elem.length; i++) {
        ret += dumpElementToString(elem[i], composed, tabDepth);
      }
    } else {
      ret = linePrefix + '[unknown node]\n';
    }

    return ret;
  };

  exports.dumpElement = function (elem, composed) {
    console.log(dumpElementToString(elem, composed));
  };
}, function (module, exports, __nested_webpack_require_6646__) {
  var asm = null;
  var INPUT_LEN_LIMIT_DEFAULT = 16 * 1024;
  var DESCRIPTOR_LIMIT = 128;
  var RULE_LIMIT = 128;
  var HANDLER_CUSTOM = 0;
  var HANDLER_STRING = 1;
  var HANDLER_KEEP_SINGLE = 0x10000;

  var LLParser = function LLParser() {};

  var stats = LLParser.stats = {
    all: 0,
    copyIn: 0,
    parse: 0,
    constructOut: 0
  };

  var generateUndetermined = function (llp) {
    var descriptor = asm.llparser_create_descriptor(llp, 1);
    return descriptor;
  };

  var generateDetermined = function (llp, str) {
    var descriptor = asm.llparser_create_descriptor(llp, 0);
    var reverted = false;

    if (str[0] === '^') {
      reverted = true;
    }

    for (var i = reverted ? 1 : 0; i < str.length; i++) {
      var start = str.charCodeAt(i);

      if (str[i + 1] === '-') {
        var end = str.charCodeAt(i + 2);

        if (start <= end) {
          asm.llparser_descriptor_add_range(descriptor, start, end);
          i += 2;
        } else {
          asm.llparser_descriptor_add_char(descriptor, start);
        }
      } else {
        asm.llparser_descriptor_add_char(descriptor, start);
      }
    }

    if (reverted) {
      asm.llparser_descriptor_revert(descriptor);
    }

    return descriptor;
  };

  LLParser.create = function (allStatesDef, cbs, charCountLimit) {
    if (!asm) {
      asm = __nested_webpack_require_6646__(2);
    }

    var parser = new LLParser();
    charCountLimit = charCountLimit || INPUT_LEN_LIMIT_DEFAULT;
    var llp = parser._llp = asm.llparser_create(charCountLimit, DESCRIPTOR_LIMIT, RULE_LIMIT);
    var stateIdMap = {};
    var ruleCbMap = {};
    var stateName = '';
    stateIdMap.ALL = asm.llparser_create_descriptor(llp, 0);
    asm.llparser_descriptor_set_all(stateIdMap.ALL);
    stateIdMap.NULL = asm.llparser_create_descriptor(llp, 0);
    asm.llparser_descriptor_set_nil(stateIdMap.NULL);

    for (stateName in allStatesDef) {
      stateIdMap[stateName] = generateUndetermined(llp);
    }

    for (stateName in allStatesDef) {
      var rules = allStatesDef[stateName];
      var lstate = stateIdMap[stateName];

      for (var i = 0; i < rules.length; i++) {
        var id = rules[i].id;
        var states = rules[i].states;
        var rstates = [];

        for (var j = 0; j < states.length; j++) {
          var rstateName = states[j];

          if (!stateIdMap[rstateName]) {
            stateIdMap[rstateName] = generateDetermined(llp, rstateName);
          }

          rstates.push(stateIdMap[rstateName]);
        }

        var handler = HANDLER_CUSTOM;
        if (id === '_raw') handler = HANDLER_STRING;else if (id === '_jump') handler = HANDLER_KEEP_SINGLE + 0;else if (id === '_blank') handler = HANDLER_KEEP_SINGLE + 1;
        var ruleId = asm.llparser_add_rule(llp, handler, lstate, rstates.length, rstates[0], rstates[1], rstates[2], rstates[3], rstates[4], rstates[5], rstates[6], rstates[7]);
        if (handler === HANDLER_CUSTOM) ruleCbMap[ruleId] = cbs[id];
      }
    }

    asm.llparser_prepare(llp);
    parser._inputPtr = asm.llparser_get_input_buffer(llp);
    parser._resultPtr = asm.llparser_get_result(llp);
    parser._stateIdMap = stateIdMap;
    parser._ruleCbMap = ruleCbMap;
    parser._charCountLimit = charCountLimit;
    return parser;
  };

  var parseResultBuffer = function (caller, mem, str, ruleCbMap, status) {
    var stack = [];
    var root = {
      i: 0,
      r: 0,
      n: false,
      cc: -1,
      c: []
    };
    var cur = root;
    var start = status.pos;
    var isRec = false;
    var nextIsRec = false;
    var isString = false;

    for (;;) {
      var strStart = mem[start];
      var strEnd = mem[start + 1];

      if (strEnd < 0) {
        nextIsRec = true;
        strEnd = -strEnd - 1;
      } else {
        nextIsRec = false;
      }

      if (strStart >= 0) {
        isString = true;
        var slice = str.slice(strStart, strEnd);
        cur.c.push(slice);
        isRec = nextIsRec;
      } else if (strStart === -1 && strEnd === 0) {
        break;
      } else {
        isString = false;
        var ruleId = -strStart;
        var rstateCount = strEnd;
        var obj = {
          i: cur.c.length - (isRec ? 1 : 0),
          r: ruleId,
          n: nextIsRec,
          cc: rstateCount,
          c: []
        };

        if (isRec) {
          var cPos = cur.c.length - 1;
          var firstChild = cur.c[cPos];
          obj.c.push(firstChild);
          cur.c[cPos] = obj;
        } else {
          cur.c.push(obj);
        }

        stack.push(cur);
        cur = obj;
        isRec = false;
      }

      if (!isString || !isRec) {
        while (cur.c.length === cur.cc) {
          isRec = cur.n;
          var prev = stack.pop();
          prev.c[cur.i] = ruleCbMap[cur.r].call(caller, cur.c);
          cur = prev;
          if (isRec) break;
        }
      }

      start += 2;
    }

    return root.c[0];
  };

  var stringToUTF16 = function (str, mem, ptr, charLimit) {
    var len = charLimit > str.length ? str.length : charLimit;

    for (var i = 0; i < len; i++) {
      mem[ptr + i] = str.charCodeAt(i);
    }

    mem[ptr + len] = 0;
  };

  LLParser.prototype.parse = function (initialState, str) {
    var startTime = Date.now();
    stringToUTF16(str, new Uint16Array(asm.memory.buffer), this._inputPtr >> 1, this._charCountLimit);
    stats.copyIn = stats.copyIn + Date.now() - startTime;
    startTime = Date.now();
    var err = asm.llparser_parse(this._llp, this._stateIdMap[initialState]);
    stats.parse = stats.parse + Date.now() - startTime;
    startTime = Date.now();
    if (err) throw new Error('Parsing failed at character position ' + (err - 1) + ' near "' + str.slice(err - 20, err) + '"');
    var ret = parseResultBuffer(this, new Int32Array(asm.memory.buffer), str, this._ruleCbMap, {
      pos: this._resultPtr >> 2
    });
    stats.constructOut = stats.constructOut + Date.now() - startTime;
    return ret;
  };

  LLParser.prototype.destroy = function () {
    asm.llparser_destroy(this._llp);
  };

  module.exports = LLParser;
}, function (module, exports) {
  module.exports = function (r) {
    var e = {};

    function n(t) {
      if (e[t]) return e[t].exports;
      var a = e[t] = {
        i: t,
        l: !1,
        exports: {}
      };
      return r[t].call(a.exports, a, a.exports, n), a.l = !0, a.exports;
    }

    return n.m = r, n.c = e, n.d = function (r, e, t) {
      n.o(r, e) || Object.defineProperty(r, e, {
        enumerable: !0,
        get: t
      });
    }, n.r = function (r) {
      "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(r, Symbol.toStringTag, {
        value: "Module"
      }), Object.defineProperty(r, "__esModule", {
        value: !0
      });
    }, n.t = function (r, e) {
      if (1 & e && (r = n(r)), 8 & e) return r;
      if (4 & e && "object" == typeof r && r && r.__esModule) return r;
      var t = Object.create(null);
      if (n.r(t), Object.defineProperty(t, "default", {
        enumerable: !0,
        value: r
      }), 2 & e && "string" != typeof r) for (var a in r) {
        n.d(t, a, function (e) {
          return r[e];
        }.bind(null, a));
      }
      return t;
    }, n.n = function (r) {
      var e = r && r.__esModule ? function () {
        return r.default;
      } : function () {
        return r;
      };
      return n.d(e, "a", e), e;
    }, n.o = function (r, e) {
      return Object.prototype.hasOwnProperty.call(r, e);
    }, n.p = "", n(n.s = 0);
  }([function (r, e, n) {
    "use strict";

    function t(r, e, n) {
      return y.llparser_create(r, e, n);
    }

    function a(r) {
      y.llparser_destroy(r);
    }

    function i(r, e) {
      return y.llparser_create_descriptor(r, e);
    }

    function f(r) {
      y.llparser_descriptor_set_all(r);
    }

    function u(r) {
      y.llparser_descriptor_set_nil(r);
    }

    function o(r, e) {
      y.llparser_descriptor_add_char(r, e);
    }

    function l(r, e, n) {
      y.llparser_descriptor_add_range(r, e, n);
    }

    function c(r) {
      y.llparser_descriptor_revert(r);
    }

    function _(r, e, n, t, a, i, f, u, o, l, c, _) {
      return y.llparser_add_rule(r, e, n, t, a, i, f, u, o, l, c, _);
    }

    function s(r) {
      y.llparser_prepare(r);
    }

    function p(r, e) {
      return y.llparser_parse(r, e);
    }

    function d(r) {
      return y.llparser_get_input_buffer(r);
    }

    function b(r) {
      return y.llparser_get_result(r);
    }

    function k() {
      y.wasm_main();
    }

    n.r(e), n.d(e, "llparser_create", function () {
      return t;
    }), n.d(e, "llparser_destroy", function () {
      return a;
    }), n.d(e, "llparser_create_descriptor", function () {
      return i;
    }), n.d(e, "llparser_descriptor_set_all", function () {
      return f;
    }), n.d(e, "llparser_descriptor_set_nil", function () {
      return u;
    }), n.d(e, "llparser_descriptor_add_char", function () {
      return o;
    }), n.d(e, "llparser_descriptor_add_range", function () {
      return l;
    }), n.d(e, "llparser_descriptor_revert", function () {
      return c;
    }), n.d(e, "llparser_add_rule", function () {
      return _;
    }), n.d(e, "llparser_prepare", function () {
      return s;
    }), n.d(e, "llparser_parse", function () {
      return p;
    }), n.d(e, "llparser_get_input_buffer", function () {
      return d;
    }), n.d(e, "llparser_get_result", function () {
      return b;
    }), n.d(e, "wasm_main", function () {
      return k;
    }), n.d(e, "memory", function () {
      return v;
    });
    var y = n(1),
        v = y.memory;

    y.__wbindgen_start();
  }, function (r, e, n) {
    "use strict";

    n.r(e), n.d(e, "memory", function () {
      return i;
    }), n.d(e, "rust_calloc", function () {
      return f;
    }), n.d(e, "rust_free", function () {
      return u;
    }), n.d(e, "llparser_create", function () {
      return o;
    }), n.d(e, "llparser_destroy", function () {
      return l;
    }), n.d(e, "llparser_create_descriptor", function () {
      return c;
    }), n.d(e, "llparser_descriptor_set_all", function () {
      return _;
    }), n.d(e, "llparser_descriptor_set_nil", function () {
      return s;
    }), n.d(e, "llparser_descriptor_add_char", function () {
      return p;
    }), n.d(e, "llparser_descriptor_add_range", function () {
      return d;
    }), n.d(e, "llparser_descriptor_revert", function () {
      return b;
    }), n.d(e, "llparser_add_rule", function () {
      return k;
    }), n.d(e, "llparser_prepare", function () {
      return y;
    }), n.d(e, "llparser_parse", function () {
      return v;
    }), n.d(e, "llparser_get_input_buffer", function () {
      return A;
    }), n.d(e, "llparser_get_result", function () {
      return w;
    }), n.d(e, "wasm_main", function () {
      return m;
    }), n.d(e, "__wbindgen_start", function () {
      return g;
    });

    var t = new ArrayBuffer(1114112),
        a = function (r, e, n) {
      var t = new r.Int8Array(n),
          a = (new r.Int16Array(n), new r.Int32Array(n)),
          i = new r.Uint8Array(n),
          f = new r.Uint16Array(n),
          u = new r.Uint32Array(n),
          o = (new r.Float32Array(n), new r.Float64Array(n), r.Math.imul),
          l = (r.Math.fround, r.Math.abs, r.Math.clz32),
          c = (r.Math.min, r.Math.max, r.Math.floor, r.Math.ceil, r.Math.sqrt, e.abort, r.NaN, r.Infinity, 1048576);

      function _(r) {
        var e = 0,
            n = 0,
            t = 0,
            i = 0,
            f = 0,
            u = 0,
            o = 0;
        n = (e = r + -8 | 0) + (r = -8 & (i = a[r + -4 >> 2])) | 0;

        r: {
          e: {
            n: {
              t: {
                a: if (!(1 & i)) {
                  if (!(3 & i)) break t;

                  if (r = (i = a[e >> 2]) + r | 0, (0 | (e = e - i | 0)) == a[262246]) {
                    if (3 != (3 & a[n + 4 >> 2])) break a;
                    return a[262244] = r, a[n + 4 >> 2] = -2 & a[n + 4 >> 2], a[e + 4 >> 2] = 1 | r, void (a[r + e >> 2] = r);
                  }

                  i >>> 0 >= 256 ? k(e) : (0 | (t = a[e + 8 >> 2])) == (0 | (f = a[e + 12 >> 2])) ? (u = 1048576, o = a[262144] & g(i >>> 3), a[u >> 2] = o) : (a[t + 12 >> 2] = f, a[f + 8 >> 2] = t);
                }

                if (2 & (i = a[n + 4 >> 2])) a[n + 4 >> 2] = -2 & i, a[e + 4 >> 2] = 1 | r, a[r + e >> 2] = r;else {
                  a: {
                    if (a[262247] != (0 | n)) {
                      if ((0 | n) != a[262246]) break a;
                      return a[262246] = e, r = a[262244] + r | 0, a[262244] = r, a[e + 4 >> 2] = 1 | r, void (a[r + e >> 2] = r);
                    }

                    if (a[262247] = e, r = a[262245] + r | 0, a[262245] = r, a[e + 4 >> 2] = 1 | r, (0 | e) == a[262246] && (a[262244] = 0, a[262246] = 0), (n = a[262254]) >>> 0 >= r >>> 0) break t;
                    if (!(r = a[262247])) break t;

                    i: if (!((i = a[262245]) >>> 0 < 41)) for (e = 1049e3;;) {
                      if ((t = a[e >> 2]) + a[e + 4 >> 2] >>> 0 > r >>> 0 && t >>> 0 <= r >>> 0) break i;
                      if (!(e = a[e + 8 >> 2])) break;
                    }

                    if (t = 4095, r = a[262252]) {
                      for (e = 0; e = e + 1 | 0, r = a[r + 8 >> 2];) {
                        ;
                      }

                      t = e >>> 0 > 4095 ? e : 4095;
                    }

                    if (a[262256] = t, i >>> 0 <= n >>> 0) break t;
                    return void (a[262254] = -1);
                  }

                  if (r = (t = -8 & i) + r | 0, t >>> 0 >= 256 ? k(n) : (0 | (t = a[n + 12 >> 2])) == (0 | (n = a[n + 8 >> 2])) ? (u = 1048576, o = a[262144] & g(i >>> 3), a[u >> 2] = o) : (a[n + 12 >> 2] = t, a[t + 8 >> 2] = n), a[e + 4 >> 2] = 1 | r, a[r + e >> 2] = r, a[262246] == (0 | e)) {
                    a[262244] = r;
                    break t;
                  }
                }
                if (r >>> 0 < 256) break n;

                if (b(e, r), r = a[262256] + -1 | 0, a[262256] = r, !r) {
                  if (r = a[262252]) break e;
                  r = 4095;
                  break r;
                }
              }

              return;
            }

            return r = 1048584 + ((n = r >>> 3) << 3) | 0, i = a[262144], n = 1 << (31 & n), t = a[r + 8 >> 2], i & n || (a[262144] = n | i, t = r), n = t, a[r + 8 >> 2] = e, a[n + 12 >> 2] = e, a[e + 12 >> 2] = r, void (a[e + 8 >> 2] = n);
          }

          for (e = 0; e = e + 1 | 0, r = a[r + 8 >> 2];) {
            ;
          }

          r = e >>> 0 > 4095 ? e : 4095;
        }

        a[262256] = r;
      }

      function s(r, e, n, t, i, f, u, l, _, s, p, d) {
        var b;
        return c = b = c + -64 | 0, a[b + 60 >> 2] = r, a[b + 56 >> 2] = e, a[b + 52 >> 2] = n, a[b + 48 >> 2] = t, a[b + 44 >> 2] = i, a[b + 40 >> 2] = f, a[b + 36 >> 2] = u, a[b + 32 >> 2] = l, a[b + 28 >> 2] = _, a[b + 24 >> 2] = s, a[b + 20 >> 2] = p, a[b + 16 >> 2] = d, e = a[a[b + 60 >> 2] + 28 >> 2], n = a[b + 60 >> 2], r = a[n >> 2], a[n >> 2] = r + 1, a[b + 12 >> 2] = e + o(r, 44), a[a[b + 12 >> 2] >> 2] = a[b + 52 >> 2], a[a[b + 12 >> 2] + 4 >> 2] = a[b + 48 >> 2], a[b + 48 >> 2] > 0 && (a[a[b + 12 >> 2] + 8 >> 2] = a[b + 44 >> 2]), a[b + 48 >> 2] > 1 && (a[a[b + 12 >> 2] + 12 >> 2] = a[b + 40 >> 2]), a[b + 48 >> 2] > 2 && (a[a[b + 12 >> 2] + 16 >> 2] = a[b + 36 >> 2]), a[b + 48 >> 2] > 3 && (a[a[b + 12 >> 2] + 20 >> 2] = a[b + 32 >> 2]), a[b + 48 >> 2] > 4 && (a[a[b + 12 >> 2] + 24 >> 2] = a[b + 28 >> 2]), a[b + 48 >> 2] > 5 && (a[a[b + 12 >> 2] + 28 >> 2] = a[b + 24 >> 2]), a[b + 48 >> 2] > 6 && (a[a[b + 12 >> 2] + 32 >> 2] = a[b + 20 >> 2]), a[b + 48 >> 2] > 7 && (a[a[b + 12 >> 2] + 36 >> 2] = a[b + 16 >> 2]), a[a[b + 12 >> 2] + 40 >> 2] = a[b + 56 >> 2], a[b + 48 >> 2] > 0 && function (r, e, n) {
          var t = 0;
          a[28 + (t = c - 32 | 0) >> 2] = r, a[t + 24 >> 2] = e, a[t + 20 >> 2] = n, a[t + 16 >> 2] = (a[t + 20 >> 2] - a[a[t + 28 >> 2] + 24 >> 2] | 0) / 140, 1 == a[a[t + 20 >> 2] + 4 >> 2] && (e = a[a[t + 28 >> 2] + 40 >> 2], n = a[t + 28 >> 2], r = a[n + 8 >> 2], a[n + 8 >> 2] = r + 1, a[t + 12 >> 2] = e + (r << 3), a[a[t + 12 >> 2] >> 2] = a[t + 24 >> 2], a[a[t + 12 >> 2] + 4 >> 2] = a[a[t + 20 >> 2] + 136 >> 2], a[a[t + 20 >> 2] + 136 >> 2] = a[t + 12 >> 2]);
        }(a[b + 60 >> 2], a[b + 12 >> 2], a[b + 52 >> 2]), c = b - -64 | 0, a[b + 12 >> 2];
      }

      function p(r, e, n, t, f) {
        var o;
        if (c = o = c - 48 | 0, a[o + 44 >> 2] = r, a[o + 40 >> 2] = e, a[o + 36 >> 2] = n, a[o + 32 >> 2] = t, a[o + 28 >> 2] = f, a[a[o + 40 >> 2] >> 2] != a[o + 36 >> 2]) for (a[a[o + 40 >> 2] >> 2] = a[o + 36 >> 2], a[o + 24 >> 2] = a[a[o + 40 >> 2] + 136 >> 2], a[o + 20 >> 2] = 1 & (0 != a[o + 28 >> 2] ^ -1 ^ -1); a[o + 24 >> 2];) {
          for (a[o + 20 >> 2] || (a[o + 28 >> 2] = a[o + 24 >> 2]), a[o + 16 >> 2] = a[a[a[o + 24 >> 2] >> 2] + 8 >> 2], 1 == a[a[o + 16 >> 2] + 4 >> 2] && p(a[o + 44 >> 2], a[o + 16 >> 2], a[o + 36 >> 2], a[o + 32 >> 2], a[o + 28 >> 2]), a[o + 12 >> 2] = 0; !(a[o + 12 >> 2] >= 128);) {
            i[a[o + 12 >> 2] + (a[o + 16 >> 2] + 8 | 0) | 0] && (u[a[o + 28 >> 2] >> 2] >= u[a[o + 32 >> 2] + (a[o + 12 >> 2] << 2) >> 2] && a[a[o + 32 >> 2] + (a[o + 12 >> 2] << 2) >> 2] || (a[a[o + 32 >> 2] + (a[o + 12 >> 2] << 2) >> 2] = a[a[o + 28 >> 2] >> 2])), a[o + 12 >> 2] = a[o + 12 >> 2] + 1;
          }

          a[o + 24 >> 2] = a[a[o + 24 >> 2] + 4 >> 2];
        }
        c = o + 48 | 0;
      }

      function d(r, e, n, t) {
        var f;

        for (a[44 + (f = c - 48 | 0) >> 2] = r, a[f + 40 >> 2] = e, a[f + 36 >> 2] = n, a[f + 32 >> 2] = t, a[f + 28 >> 2] = a[a[f + 40 >> 2] + 136 >> 2]; a[f + 28 >> 2];) {
          if (a[f + 24 >> 2] = a[a[a[f + 28 >> 2] >> 2] + 8 >> 2], a[f + 24 >> 2] == a[f + 40 >> 2]) for (a[f + 20 >> 2] = a[a[a[f + 28 >> 2] >> 2] + 12 >> 2], a[f + 16 >> 2] = 0; !(a[f + 16 >> 2] >= 128);) {
            r: {
              if (1 != a[a[f + 20 >> 2] + 4 >> 2]) {
                if (!i[a[f + 16 >> 2] + (a[f + 20 >> 2] + 8 | 0) | 0]) break r;
              } else if (a[f + 12 >> 2] = a[a[f + 44 >> 2] + 32 >> 2] + ((a[f + 20 >> 2] - a[a[f + 44 >> 2] + 24 >> 2] | 0) / 140 << 9), !a[a[f + 12 >> 2] + (a[f + 16 >> 2] << 2) >> 2]) break r;

              u[a[f + 28 >> 2] >> 2] >= u[a[f + 32 >> 2] + (a[f + 16 >> 2] << 2) >> 2] && a[a[f + 32 >> 2] + (a[f + 16 >> 2] << 2) >> 2] || (a[a[f + 32 >> 2] + (a[f + 16 >> 2] << 2) >> 2] = a[a[f + 28 >> 2] >> 2]);
            }

            a[f + 16 >> 2] = a[f + 16 >> 2] + 1;
          }
          a[f + 28 >> 2] = a[a[f + 28 >> 2] + 4 >> 2];
        }
      }

      function b(r, e) {
        var n = 0,
            t = 0,
            i = 0,
            f = 0;
        a[r + 16 >> 2] = 0, a[r + 20 >> 2] = 0, i = r, n = 0, (t = e >>> 8) && (n = 31, e >>> 0 > 16777215 || (n = 62 + ((e >>> (6 - (t = l(t)) & 31) & 1) - (t << 1) | 0) | 0)), a[i + 28 >> 2] = n, i = 1048848 + (n << 2) | 0;

        r: {
          e: {
            n: {
              t: {
                if ((f = a[262145]) & (t = 1 << (31 & n))) {
                  if (t = a[i >> 2], (-8 & a[t + 4 >> 2]) != (0 | e)) break t;
                  n = t;
                  break n;
                }

                a[262145] = t | f, a[i >> 2] = r, a[r + 24 >> 2] = i;
                break r;
              }

              for (i = e << (31 == (0 | n) ? 0 : 25 - (n >>> 1) & 31);;) {
                if (!(n = a[(f = 16 + ((i >>> 29 & 4) + t | 0) | 0) >> 2])) break e;
                if (i <<= 1, t = n, (-8 & a[n + 4 >> 2]) == (0 | e)) break;
              }
            }

            return e = a[n + 8 >> 2], a[e + 12 >> 2] = r, a[n + 8 >> 2] = r, a[r + 24 >> 2] = 0, a[r + 12 >> 2] = n, void (a[r + 8 >> 2] = e);
          }

          a[f >> 2] = r, a[r + 24 >> 2] = t;
        }

        a[r + 12 >> 2] = r, a[r + 8 >> 2] = r;
      }

      function k(r) {
        var e,
            n = 0,
            t = 0,
            i = 0,
            f = 0,
            u = 0,
            o = 0;
        e = a[r + 24 >> 2];

        r: {
          e: {
            if ((0 | r) == (0 | (n = a[r + 12 >> 2]))) {
              if (i = a[(n = r + 20 | 0) >> 2], t = a[(i ? 20 : 16) + r >> 2]) break e;
              n = 0;
              break r;
            }

            t = a[r + 8 >> 2], a[t + 12 >> 2] = n, a[n + 8 >> 2] = t;
            break r;
          }

          for (i = i ? n : r + 16 | 0; f = i, (t = a[(i = (n = t) + 20 | 0) >> 2]) || (i = n + 16 | 0, t = a[n + 16 >> 2]), t;) {
            ;
          }

          a[f >> 2] = 0;
        }

        r: if (e) {
          t = 1048848 + (a[r + 28 >> 2] << 2) | 0;

          e: {
            if ((0 | r) == a[t >> 2]) {
              if (a[t >> 2] = n, n) break e;
              return u = 1048580, o = a[262145] & g(a[r + 28 >> 2]), void (a[u >> 2] = o);
            }

            if (a[(a[e + 16 >> 2] == (0 | r) ? 16 : 20) + e >> 2] = n, !n) break r;
          }

          a[n + 24 >> 2] = e, (t = a[r + 16 >> 2]) && (a[n + 16 >> 2] = t, a[t + 24 >> 2] = n), (r = a[r + 20 >> 2]) && (a[n + 20 >> 2] = r, a[r + 24 >> 2] = n);
        }
      }

      function y(r, e) {
        var n, t, o;
        return c = n = c - 32 | 0, a[n + 24 >> 2] = r, a[n + 20 >> 2] = e, a[n + 16 >> 2] = 0, a[n + 12 >> 2] = 0, t = n, o = function r(e, n, t, o, l, _, s) {
          var p,
              d = 0,
              b = 0;
          c = p = c - 96 | 0, a[p + 88 >> 2] = e, a[p + 84 >> 2] = n, a[p + 80 >> 2] = t, a[p + 76 >> 2] = o, a[p + 72 >> 2] = l, a[p + 68 >> 2] = _, a[p + 64 >> 2] = s, a[p + 60 >> 2] = f[a[p + 80 >> 2] + (a[a[p + 76 >> 2] >> 2] << 1) >> 1], u[p + 60 >> 2] >= 128 && (a[p + 60 >> 2] = 1);

          r: if (a[a[p + 72 >> 2] >> 2] > (a[p + 64 >> 2] - 4 | 0)) a[p + 92 >> 2] = -1;else if (1 == a[a[p + 84 >> 2] + 4 >> 2]) {
            if (a[p + 56 >> 2] = a[a[p + 76 >> 2] >> 2], a[p + 52 >> 2] = a[a[p + 72 >> 2] >> 2], a[p + 48 >> 2] = 0, a[p + 44 >> 2] = 0, a[p + 40 >> 2] = a[a[p + 88 >> 2] + 32 >> 2] + ((a[p + 84 >> 2] - a[a[p + 88 >> 2] + 24 >> 2] | 0) / 140 << 9), a[p + 36 >> 2] = 0, !a[a[p + 40 >> 2] + (a[p + 60 >> 2] << 2) >> 2] | u[p + 60 >> 2] <= 0 | u[p + 60 >> 2] >= 127 ? !a[p + 60 >> 2] | !a[a[p + 40 >> 2] + 508 >> 2] ? a[a[p + 40 >> 2] >> 2] && (a[p + 36 >> 2] = a[a[p + 40 >> 2] >> 2]) : a[p + 36 >> 2] = a[a[p + 40 >> 2] + 508 >> 2] : a[p + 36 >> 2] = a[a[p + 40 >> 2] + (a[p + 60 >> 2] << 2) >> 2], a[p + 36 >> 2]) {
              for (a[p + 68 >> 2] || a[a[p + 36 >> 2] + 40 >> 2] || (a[p + 48 >> 2] = a[a[p + 72 >> 2] >> 2], e = a[p + 72 >> 2], a[e >> 2] = a[e >> 2] + 2), a[p + 32 >> 2] = 0; a[p + 32 >> 2] < a[a[p + 36 >> 2] + 4 >> 2];) {
                if (a[p + 28 >> 2] = a[p + 68 >> 2], a[p + 68 >> 2] || !a[a[p + 36 >> 2] + 40 >> 2] | a[a[p + 36 >> 2] + 40 >> 2] == (a[p + 32 >> 2] + 65536 | 0) || (a[p + 28 >> 2] = 1), d = p, b = r(a[p + 88 >> 2], a[(a[p + 36 >> 2] + 8 | 0) + (a[p + 32 >> 2] << 2) >> 2], a[p + 80 >> 2], a[p + 76 >> 2], a[p + 72 >> 2], a[p + 28 >> 2], a[p + 64 >> 2]), a[d + 24 >> 2] = b, a[p + 24 >> 2] < 0) {
                  a[p + 92 >> 2] = -1;
                  break r;
                }

                a[p + 68 >> 2] | a[a[p + 36 >> 2] + 40 >> 2] != (a[p + 32 >> 2] + 65536 | 0) || (a[p + 44 >> 2] = a[p + 24 >> 2]), a[p + 32 >> 2] = a[p + 32 >> 2] + 1;
              }

              for (a[p + 68 >> 2] || (a[a[p + 36 >> 2] + 40 >> 2] ? 1 == a[a[p + 36 >> 2] + 40 >> 2] && (n = a[p + 56 >> 2], t = a[a[p + 88 >> 2] + 48 >> 2], o = a[p + 72 >> 2], e = a[o >> 2], a[o >> 2] = e + 1, a[t + (e << 2) >> 2] = n, a[p + 44 >> 2] = a[a[p + 72 >> 2] >> 2], n = a[a[p + 76 >> 2] >> 2], t = a[a[p + 88 >> 2] + 48 >> 2], o = a[p + 72 >> 2], e = a[o >> 2], a[o >> 2] = e + 1, a[t + (e << 2) >> 2] = n) : (a[a[a[p + 88 >> 2] + 48 >> 2] + (a[p + 48 >> 2] << 2) >> 2] = 0 - a[p + 36 >> 2], a[a[a[p + 88 >> 2] + 48 >> 2] + (a[p + 48 >> 2] + 1 << 2) >> 2] = a[a[p + 36 >> 2] + 4 >> 2], a[p + 44 >> 2] = a[p + 48 >> 2] + 1));;) {
                if (a[a[p + 72 >> 2] >> 2] > (a[p + 64 >> 2] - 4 | 0)) {
                  a[p + 92 >> 2] = -1;
                  break r;
                }

                if (a[p + 20 >> 2] = a[a[p + 88 >> 2] + 36 >> 2] + ((a[p + 84 >> 2] - a[a[p + 88 >> 2] + 24 >> 2] | 0) / 140 << 9), a[p + 16 >> 2] = 0, a[p + 60 >> 2] = f[a[p + 80 >> 2] + (a[a[p + 76 >> 2] >> 2] << 1) >> 1], u[p + 60 >> 2] >= 128 && (a[p + 60 >> 2] = 1), !a[a[p + 20 >> 2] + (a[p + 60 >> 2] << 2) >> 2] | u[p + 60 >> 2] <= 0 | u[p + 60 >> 2] >= 127 ? !a[p + 60 >> 2] | !a[a[p + 20 >> 2] + 508 >> 2] || (a[p + 16 >> 2] = a[a[p + 20 >> 2] + 508 >> 2]) : a[p + 16 >> 2] = a[a[p + 20 >> 2] + (a[p + 60 >> 2] << 2) >> 2], !a[p + 16 >> 2]) break;

                for (a[p + 68 >> 2] || (a[a[p + 16 >> 2] + 40 >> 2] ? 65536 != a[a[p + 16 >> 2] + 40 >> 2] && (a[a[p + 72 >> 2] >> 2] = a[p + 52 >> 2]) : (a[a[a[p + 88 >> 2] + 48 >> 2] + (a[p + 44 >> 2] << 2) >> 2] = (0 - a[a[a[p + 88 >> 2] + 48 >> 2] + (a[p + 44 >> 2] << 2) >> 2] | 0) - 1, a[p + 48 >> 2] = a[a[p + 72 >> 2] >> 2], e = a[p + 72 >> 2], a[e >> 2] = a[e >> 2] + 2)), a[p + 12 >> 2] = 1; a[p + 12 >> 2] < a[a[p + 16 >> 2] + 4 >> 2];) {
                  if (a[p + 8 >> 2] = a[p + 68 >> 2], a[p + 68 >> 2] || !a[a[p + 16 >> 2] + 40 >> 2] | a[a[p + 16 >> 2] + 40 >> 2] == (a[p + 12 >> 2] + 65536 | 0) || (a[p + 8 >> 2] = 1), d = p, b = r(a[p + 88 >> 2], a[(a[p + 16 >> 2] + 8 | 0) + (a[p + 12 >> 2] << 2) >> 2], a[p + 80 >> 2], a[p + 76 >> 2], a[p + 72 >> 2], a[p + 8 >> 2], a[p + 64 >> 2]), a[d + 4 >> 2] = b, a[p + 4 >> 2] < 0) {
                    a[p + 92 >> 2] = -1;
                    break r;
                  }

                  a[p + 68 >> 2] | a[a[p + 16 >> 2] + 40 >> 2] != (a[p + 12 >> 2] + 65536 | 0) || (a[p + 44 >> 2] = a[p + 4 >> 2]), a[p + 12 >> 2] = a[p + 12 >> 2] + 1;
                }

                a[p + 68 >> 2] || (a[a[p + 16 >> 2] + 40 >> 2] ? 1 == a[a[p + 16 >> 2] + 40 >> 2] && (n = a[p + 56 >> 2], t = a[a[p + 88 >> 2] + 48 >> 2], o = a[p + 72 >> 2], e = a[o >> 2], a[o >> 2] = e + 1, a[t + (e << 2) >> 2] = n, a[p + 44 >> 2] = a[a[p + 72 >> 2] >> 2], n = a[a[p + 76 >> 2] >> 2], t = a[a[p + 88 >> 2] + 48 >> 2], o = a[p + 72 >> 2], e = a[o >> 2], a[o >> 2] = e + 1, a[t + (e << 2) >> 2] = n) : (a[a[a[p + 88 >> 2] + 48 >> 2] + (a[p + 48 >> 2] << 2) >> 2] = 0 - a[p + 16 >> 2], a[a[a[p + 88 >> 2] + 48 >> 2] + (a[p + 48 >> 2] + 1 << 2) >> 2] = a[a[p + 16 >> 2] + 4 >> 2], a[p + 44 >> 2] = a[p + 48 >> 2] + 1));
              }

              a[p + 92 >> 2] = a[p + 44 >> 2];
            } else a[p + 92 >> 2] = -1;
          } else {
            if (a[p + 60 >> 2] && (-1 == a[a[p + 84 >> 2] + 4 >> 2] && (e = a[p + 76 >> 2], a[e >> 2] = a[e >> 2] + 1), !a[a[p + 84 >> 2] + 4 >> 2])) {
              if (!i[a[p + 60 >> 2] + (a[p + 84 >> 2] + 8 | 0) | 0]) {
                a[p + 92 >> 2] = -1;
                break r;
              }

              e = a[p + 76 >> 2], a[e >> 2] = a[e >> 2] + 1;
            }

            a[p + 68 >> 2] || (n = a[a[p + 76 >> 2] >> 2], t = a[a[p + 84 >> 2] + 4 >> 2], o = a[a[p + 88 >> 2] + 48 >> 2], l = a[p + 72 >> 2], e = a[l >> 2], a[l >> 2] = e + 1, a[o + (e << 2) >> 2] = n - (-2 == (0 | t) ? 0 : 1), n = a[a[p + 76 >> 2] >> 2], t = a[a[p + 88 >> 2] + 48 >> 2], o = a[p + 72 >> 2], e = a[o >> 2], a[o >> 2] = e + 1, a[t + (e << 2) >> 2] = n), a[p + 92 >> 2] = a[a[p + 72 >> 2] >> 2] - 1;
          }

          return c = p + 96 | 0, a[p + 92 >> 2];
        }(a[n + 24 >> 2], a[n + 20 >> 2], a[a[n + 24 >> 2] + 44 >> 2], n + 12 | 0, n + 16 | 0, 0, a[a[n + 24 >> 2] + 12 >> 2] << 1), a[t + 8 >> 2] = o, r = a[a[n + 24 >> 2] + 48 >> 2], e = a[n + 16 >> 2], a[n + 16 >> 2] = e + 1, a[r + (e << 2) >> 2] = -1, r = a[a[n + 24 >> 2] + 48 >> 2], e = a[n + 16 >> 2], a[n + 16 >> 2] = e + 1, a[r + (e << 2) >> 2] = 0, f[a[a[n + 24 >> 2] + 44 >> 2] + (a[n + 12 >> 2] << 1) >> 1] | a[n + 8 >> 2] < 0 ? a[n + 28 >> 2] = a[n + 12 >> 2] + 1 : a[n + 28 >> 2] = 0, c = n + 32 | 0, a[n + 28 >> 2];
      }

      function v(r) {
        var e;
        return !(e = function (r) {
          var e = 0,
              n = 0,
              t = 0,
              i = 0,
              f = 0,
              o = 0,
              c = 0,
              _ = 0,
              s = 0,
              p = 0,
              d = 0;

          r: {
            e: {
              n: {
                if (r >>> 0 >= 245) {
                  if (r >>> 0 >= 4294901709) break e;
                  if (i = -8 & (r = r + 11 | 0), !(_ = a[262145])) break n;
                  n = 0 - i | 0, c = 0, (r >>>= 8) && (c = 31, i >>> 0 > 16777215 || (c = 62 + ((i >>> (6 - (r = l(r)) & 31) & 1) - (r << 1) | 0) | 0));

                  t: {
                    a: {
                      if (r = a[1048848 + (c << 2) >> 2]) {
                        for (f = i << (31 == (0 | c) ? 0 : 25 - (c >>> 1) & 31);;) {
                          if (!((o = -8 & a[r + 4 >> 2]) >>> 0 < i >>> 0 || (o = o - i | 0) >>> 0 >= n >>> 0 || (t = r, n = o))) {
                            n = 0;
                            break a;
                          }

                          if (o = a[r + 20 >> 2], r = a[16 + ((f >>> 29 & 4) + r | 0) >> 2], e = o && (0 | o) != (0 | r) ? o : e, f <<= 1, !r) break;
                        }

                        if (e) {
                          r = e;
                          break a;
                        }

                        if (t) break t;
                      }

                      if (t = 0, !(r = (0 - (r = 2 << (31 & c)) | r) & _)) break n;
                      if (!(r = a[1048848 + (m(r & 0 - r) << 2) >> 2])) break n;
                    }

                    for (; t = (o = (f = (e = -8 & a[r + 4 >> 2]) - i | 0) >>> 0 < n >>> 0 & e >>> 0 >= i >>> 0) ? r : t, n = o ? f : n, r = (e = a[r + 16 >> 2]) || a[r + 20 >> 2];) {
                      ;
                    }

                    if (!t) break n;
                  }

                  if (n >>> 0 >= (r = a[262244]) - i >>> 0 && r >>> 0 >= i >>> 0) break n;
                  k(t);

                  t: if (n >>> 0 >= 16) {
                    if (a[t + 4 >> 2] = 3 | i, a[4 + (e = t + i | 0) >> 2] = 1 | n, a[e + n >> 2] = n, n >>> 0 >= 256) {
                      b(e, n);
                      break t;
                    }

                    r = 1048584 + ((n >>>= 3) << 3) | 0, f = a[262144], n = 1 << (31 & n), c = a[r + 8 >> 2], f & n || (a[262144] = n | f, c = r), n = c, a[r + 8 >> 2] = e, a[n + 12 >> 2] = e, a[e + 12 >> 2] = r, a[e + 8 >> 2] = n;
                  } else r = n + i | 0, a[t + 4 >> 2] = 3 | r, a[4 + (r = r + t | 0) >> 2] = 1 | a[r + 4 >> 2];

                  return t + 8 | 0;
                }

                t: {
                  a: {
                    if (!(3 & (r = (e = a[262144]) >>> (t = 31 & (n = (i = r >>> 0 < 11 ? 16 : r + 11 & -8) >>> 3))))) {
                      if (i >>> 0 <= u[262244]) break n;
                      if (r) break a;
                      if (!(r = a[262145])) break n;

                      for (e = a[1048848 + (m(r & 0 - r) << 2) >> 2], n = (-8 & a[e + 4 >> 2]) - i | 0, f = e;;) {
                        if (!(r = a[e + 16 >> 2]) && !(r = a[e + 20 >> 2])) break t;
                        n = (e = (t = (-8 & a[r + 4 >> 2]) - i | 0) >>> 0 < n >>> 0) ? t : n, f = e ? r : f, e = r;
                      }
                    }

                    n = (r = a[1048592 + (o = (t = n + (1 & (-1 ^ r)) | 0) << 3) >> 2]) + 8 | 0, (0 | (f = a[r + 8 >> 2])) == (0 | (o = o + 1048584 | 0)) ? (p = 1048576, d = g(t) & e, a[p >> 2] = d) : (a[f + 12 >> 2] = o, a[o + 8 >> 2] = f), e = t << 3, a[r + 4 >> 2] = 3 | e, a[4 + (r = r + e | 0) >> 2] = 1 | a[r + 4 >> 2];
                    break e;
                  }

                  return t = m(0 - (r = (n = r << t) & (0 - (r = 2 << t) | r)) & r), r = a[1048592 + (f = t << 3) >> 2], (0 | (n = a[r + 8 >> 2])) == (0 | (f = f + 1048584 | 0)) ? (p = 1048576, d = g(t) & e, a[p >> 2] = d) : (a[n + 12 >> 2] = f, a[f + 8 >> 2] = n), f = r + 8 | 0, a[r + 4 >> 2] = 3 | i, n = (e = t << 3) - i | 0, a[4 + (o = r + i | 0) >> 2] = 1 | n, a[r + e >> 2] = n, (r = a[262244]) && (r = 1048584 + ((t = r >>> 3) << 3) | 0, e = a[262246], i = a[262144], t = 1 << (31 & t), c = a[r + 8 >> 2], i & t || (a[262144] = t | i, c = r), t = c, a[r + 8 >> 2] = e, a[t + 12 >> 2] = e, a[e + 12 >> 2] = r, a[e + 8 >> 2] = t), a[262246] = o, a[262244] = n, f;
                }

                return k(f), n >>> 0 >= 16 ? (a[f + 4 >> 2] = 3 | i, a[4 + (o = i + f | 0) >> 2] = 1 | n, a[n + o >> 2] = n, (r = a[262244]) && (r = 1048584 + ((t = r >>> 3) << 3) | 0, e = a[262246], i = a[262144], t = 1 << (31 & t), c = a[r + 8 >> 2], i & t || (a[262144] = t | i, c = r), t = c, a[r + 8 >> 2] = e, a[t + 12 >> 2] = e, a[e + 12 >> 2] = r, a[e + 8 >> 2] = t), a[262246] = o, a[262244] = n) : (r = n + i | 0, a[f + 4 >> 2] = 3 | r, a[4 + (r = r + f | 0) >> 2] = 1 | a[r + 4 >> 2]), f + 8 | 0;
              }

              n: {
                t: {
                  a: {
                    i: {
                      if ((e = a[262244]) >>> 0 < i >>> 0) {
                        if ((r = a[262245]) >>> 0 > i >>> 0) break r;
                        if (n = 0, -1 == (0 | (e = h((r = i + 65583 | 0) >>> 16)))) break e;
                        if (!(t = e << 16)) break e;
                        if (r = (f = -65536 & r) + a[262248] | 0, a[262248] = r, e = a[262249], a[262249] = e >>> 0 > r >>> 0 ? e : r, !(n = a[262247])) break i;

                        for (r = 1049e3;;) {
                          if ((0 | t) == ((e = a[r >> 2]) + (o = a[r + 4 >> 2]) | 0)) break a;
                          if (!(r = a[r + 8 >> 2])) break;
                        }

                        break t;
                      }

                      return r = a[262246], (t = e - i | 0) >>> 0 <= 15 ? (a[262246] = 0, a[262244] = 0, a[r + 4 >> 2] = 3 | e, i = 4 + (e = r + e | 0) | 0, n = 1 | a[e + 4 >> 2]) : (a[262244] = t, n = r + i | 0, a[262246] = n, a[n + 4 >> 2] = 1 | t, a[r + e >> 2] = t, n = 3 | i, i = r + 4 | 0), a[i >> 2] = n, r + 8 | 0;
                    }

                    for ((r = a[262255]) >>> 0 <= t >>> 0 && r || (a[262255] = t), r = 0, a[262256] = 4095, a[262251] = f, a[262250] = t, a[262253] = 0; e = r + 1048584 | 0, a[r + 1048592 >> 2] = e, a[r + 1048596 >> 2] = e, 256 != (0 | (r = r + 8 | 0));) {
                      ;
                    }

                    a[262247] = t, r = f + -40 | 0, a[262245] = r, a[t + 4 >> 2] = 1 | r, a[4 + (r + t | 0) >> 2] = 40, a[262254] = 2097152;
                    break n;
                  }

                  if (!(a[r + 12 >> 2] | t >>> 0 <= n >>> 0 | e >>> 0 > n >>> 0)) {
                    a[r + 4 >> 2] = f + o, e = (r = a[262247]) + 15 & -8, a[262247] = e + -8, n = 8 + ((t = f + a[262245] | 0) + (r - e | 0) | 0) | 0, a[262245] = n, a[e + -4 >> 2] = 1 | n, a[4 + (r + t | 0) >> 2] = 40, a[262254] = 2097152;
                    break n;
                  }
                }

                r = a[262255], a[262255] = r >>> 0 < t >>> 0 ? r : t, e = t + f | 0, r = 1049e3;

                t: {
                  for (;;) {
                    if ((0 | e) != a[r >> 2]) {
                      if (r = a[r + 8 >> 2]) continue;
                      break t;
                    }

                    break;
                  }

                  if (!a[r + 12 >> 2]) {
                    a[r >> 2] = t, a[r + 4 >> 2] = f + a[r + 4 >> 2], a[t + 4 >> 2] = 3 | i, f = t + i | 0, i = (e - t | 0) - i | 0;

                    a: {
                      i: {
                        if ((0 | e) != a[262247]) {
                          if (a[262246] == (0 | e)) break i;

                          if (1 == (3 & (r = a[e + 4 >> 2])) && ((n = -8 & r) >>> 0 >= 256 ? k(e) : (0 | (o = a[e + 12 >> 2])) == (0 | (c = a[e + 8 >> 2])) ? (p = 1048576, d = a[262144] & g(r >>> 3), a[p >> 2] = d) : (a[c + 12 >> 2] = o, a[o + 8 >> 2] = c), i = n + i | 0, e = e + n | 0), a[e + 4 >> 2] = -2 & a[e + 4 >> 2], a[f + 4 >> 2] = 1 | i, a[i + f >> 2] = i, i >>> 0 >= 256) {
                            b(f, i);
                            break a;
                          }

                          r = 1048584 + ((e = i >>> 3) << 3) | 0, n = a[262144], e = 1 << (31 & e), c = a[r + 8 >> 2], n & e || (a[262144] = e | n, c = r), n = c, a[r + 8 >> 2] = f, a[n + 12 >> 2] = f, a[f + 12 >> 2] = r, a[f + 8 >> 2] = n;
                          break a;
                        }

                        a[262247] = f, r = a[262245] + i | 0, a[262245] = r, a[f + 4 >> 2] = 1 | r;
                        break a;
                      }

                      a[262246] = f, r = a[262244] + i | 0, a[262244] = r, a[f + 4 >> 2] = 1 | r, a[r + f >> 2] = r;
                    }

                    return t + 8 | 0;
                  }
                }

                for (r = 1049e3; !((e = a[r >> 2]) >>> 0 <= n >>> 0 && (o = e + a[r + 4 >> 2] | 0) >>> 0 > n >>> 0);) {
                  r = a[r + 8 >> 2];
                }

                for (a[262247] = t, r = f + -40 | 0, a[262245] = r, a[t + 4 >> 2] = 1 | r, a[4 + (r + t | 0) >> 2] = 40, a[262254] = 2097152, a[(e = (r = (o + -32 & -8) - 8 | 0) >>> 0 < n + 16 >>> 0 ? n : r) + 4 >> 2] = 27, r = a[262250], c = a[262251], s = a[262253], a[(_ = e + 16 | 0) >> 2] = a[262252], a[_ + 4 >> 2] = s, a[e + 8 >> 2] = r, a[e + 12 >> 2] = c, a[262251] = f, a[262250] = t, a[262252] = e + 8, a[262253] = 0, r = e + 28 | 0; a[r >> 2] = 7, o >>> 0 > (r = r + 4 | 0) >>> 0;) {
                  ;
                }

                (0 | e) != (0 | n) && (a[e + 4 >> 2] = -2 & a[e + 4 >> 2], r = e - n | 0, a[n + 4 >> 2] = 1 | r, a[e >> 2] = r, r >>> 0 >= 256 ? b(n, r) : (r = 1048584 + ((e = r >>> 3) << 3) | 0, t = a[262144], e = 1 << (31 & e), c = a[r + 8 >> 2], t & e || (a[262144] = e | t, c = r), e = c, a[r + 8 >> 2] = n, a[e + 12 >> 2] = n, a[n + 12 >> 2] = r, a[n + 8 >> 2] = e));
              }

              if (n = 0, !((r = a[262245]) >>> 0 <= i >>> 0)) break r;
            }

            return n;
          }

          return e = r - i | 0, a[262245] = e, t = (r = a[262247]) + i | 0, a[262247] = t, a[t + 4 >> 2] = 1 | e, a[r + 4 >> 2] = 3 | i, r + 8 | 0;
        }(r)) | !(3 & i[e + -4 | 0]) || function (r, e) {
          if (e) for (; t[0 | r] = 0, r = r + 1 | 0, e = e + -1 | 0;) {
            ;
          }
        }(e, r), e;
      }

      function A(r, e) {
        return 0 | v(o(r |= 0, e |= 0));
      }

      function w() {}

      function m(r) {
        return r ? 31 - l(r + -1 ^ r) | 0 : 32;
      }

      function g(r) {
        var e;
        return (-1 >>> (e = 31 & r) & -2) << e | (-1 << (r = 0 - r & 31) & -2) >>> r;
      }

      function h(e) {
        e |= 0;
        var l = 0 | n.byteLength / 65536,
            c = l + e | 0;

        if (l < c && c < 65536) {
          var _ = new ArrayBuffer(o(c, 65536)),
              s = new r.Int8Array(_);

          s.set(t), t = s, t = new r.Int8Array(_), new r.Int16Array(_), a = new r.Int32Array(_), i = new r.Uint8Array(_), f = new r.Uint16Array(_), u = new r.Uint32Array(_), new r.Float32Array(_), new r.Float64Array(_), n = _;
        }

        return l;
      }

      return {
        memory: Object.create(Object.prototype, {
          grow: {
            value: h
          },
          buffer: {
            get: function () {
              return n;
            }
          }
        }),
        rust_calloc: A,
        rust_free: function (r) {
          _(r |= 0);
        },
        llparser_create: function (r, e, n) {
          return 0 | function (r, e, n) {
            var t, i, f;
            return c = t = c - 32 | 0, a[t + 28 >> 2] = r, a[t + 24 >> 2] = e, a[t + 20 >> 2] = n, r = t, e = a[t + 28 >> 2] ? a[t + 28 >> 2] : 256, a[r + 28 >> 2] = e, r = t, e = a[t + 24 >> 2] ? a[t + 24 >> 2] : 256, a[r + 24 >> 2] = e, r = t, e = a[t + 20 >> 2] ? a[t + 20 >> 2] : 256, a[r + 20 >> 2] = e, i = t, f = A(((((((o(a[t + 24 >> 2], 140) + 52 | 0) + o(a[t + 20 >> 2], 44) | 0) + (a[t + 24 >> 2] << 9) | 0) + (a[t + 24 >> 2] << 9) | 0) + o(a[t + 20 >> 2], a[t + 24 >> 2] << 3) | 0) + (a[t + 28 >> 2] << 1) | 0) + (a[t + 28 >> 2] << 3) | 0, 1), a[i + 16 >> 2] = f, a[a[t + 16 >> 2] + 12 >> 2] = a[t + 28 >> 2], a[a[t + 16 >> 2] + 16 >> 2] = a[t + 24 >> 2], a[a[t + 16 >> 2] + 20 >> 2] = a[t + 20 >> 2], a[a[t + 16 >> 2] + 4 >> 2] = 0, a[a[t + 16 >> 2] >> 2] = 0, a[a[t + 16 >> 2] + 8 >> 2] = 0, a[t + 12 >> 2] = a[t + 16 >> 2] + 52, a[a[t + 16 >> 2] + 24 >> 2] = a[t + 12 >> 2], a[t + 12 >> 2] = a[t + 12 >> 2] + o(a[t + 24 >> 2], 140), a[a[t + 16 >> 2] + 28 >> 2] = a[t + 12 >> 2], a[t + 12 >> 2] = a[t + 12 >> 2] + o(a[t + 20 >> 2], 44), a[a[t + 16 >> 2] + 32 >> 2] = a[t + 12 >> 2], a[t + 12 >> 2] = a[t + 12 >> 2] + (a[t + 24 >> 2] << 9), a[a[t + 16 >> 2] + 36 >> 2] = a[t + 12 >> 2], a[t + 12 >> 2] = a[t + 12 >> 2] + (a[t + 24 >> 2] << 9), a[a[t + 16 >> 2] + 40 >> 2] = a[t + 12 >> 2], a[t + 12 >> 2] = a[t + 12 >> 2] + o(a[t + 20 >> 2], a[t + 24 >> 2] << 3), a[a[t + 16 >> 2] + 44 >> 2] = a[t + 12 >> 2], a[t + 12 >> 2] = a[t + 12 >> 2] + (a[t + 28 >> 2] << 1), a[a[t + 16 >> 2] + 48 >> 2] = a[t + 12 >> 2], c = t + 32 | 0, a[t + 16 >> 2];
          }(r |= 0, e |= 0, n |= 0);
        },
        llparser_destroy: function (r) {
          !function (r) {
            var e;
            c = e = c - 16 | 0, a[e + 12 >> 2] = r, _(a[e + 12 >> 2]), c = e + 16 | 0;
          }(r |= 0);
        },
        llparser_create_descriptor: function (r, e) {
          return 0 | function (r, e) {
            var n, t;
            return a[12 + (n = c - 16 | 0) >> 2] = r, a[n + 8 >> 2] = e, e = a[a[n + 12 >> 2] + 24 >> 2], t = a[n + 12 >> 2], r = a[t + 4 >> 2], a[t + 4 >> 2] = r + 1, a[n + 4 >> 2] = e + o(r, 140), a[a[n + 4 >> 2] + 4 >> 2] = a[n + 8 >> 2] ? 1 : 0, a[n + 4 >> 2];
          }(r |= 0, e |= 0);
        },
        llparser_descriptor_set_all: function (r) {
          var e;
          r |= 0, a[12 + (e = c - 16 | 0) >> 2] = r, a[a[e + 12 >> 2] + 4 >> 2] = -1, t[a[e + 12 >> 2] + 135 | 0] = 1;
        },
        llparser_descriptor_set_nil: function (r) {
          var e;
          r |= 0, a[12 + (e = c - 16 | 0) >> 2] = r, a[a[e + 12 >> 2] + 4 >> 2] = -2, t[a[e + 12 >> 2] + 8 | 0] = 1;
        },
        llparser_descriptor_add_char: function (r, e) {
          !function (r, e) {
            var n;
            a[12 + (n = c - 16 | 0) >> 2] = r, a[n + 8 >> 2] = e, t[a[n + 8 >> 2] + (a[n + 12 >> 2] + 8 | 0) | 0] = 1;
          }(r |= 0, e |= 0);
        },
        llparser_descriptor_add_range: function (r, e, n) {
          !function (r, e, n) {
            var i;

            for (a[12 + (i = c - 16 | 0) >> 2] = r, a[i + 8 >> 2] = e, a[i + 4 >> 2] = n, a[i >> 2] = a[i + 8 >> 2]; !(a[i >> 2] > a[i + 4 >> 2]);) {
              t[a[i >> 2] + (a[i + 12 >> 2] + 8 | 0) | 0] = 1, a[i >> 2] = a[i >> 2] + 1;
            }
          }(r |= 0, e |= 0, n |= 0);
        },
        llparser_descriptor_revert: function (r) {
          !function (r) {
            var e;

            for (a[12 + (e = c - 16 | 0) >> 2] = r, a[e + 8 >> 2] = 1; !(a[e + 8 >> 2] >= 127);) {
              t[a[e + 8 >> 2] + (a[e + 12 >> 2] + 8 | 0) | 0] = 1 & (0 != i[a[e + 8 >> 2] + (a[e + 12 >> 2] + 8 | 0) | 0] ^ -1), a[e + 8 >> 2] = a[e + 8 >> 2] + 1;
            }
          }(r |= 0);
        },
        llparser_add_rule: function (r, e, n, t, a, i, f, u, o, l, c, _) {
          return 0 | s(r |= 0, e |= 0, n |= 0, t |= 0, a |= 0, i |= 0, f |= 0, u |= 0, o |= 0, l |= 0, c |= 0, _ |= 0);
        },
        llparser_prepare: function (r) {
          !function (r) {
            var e;

            for (c = e = c - 32 | 0, a[e + 28 >> 2] = r, a[e + 24 >> 2] = 0; !(a[e + 24 >> 2] >= a[a[e + 28 >> 2] + 4 >> 2]);) {
              a[e + 20 >> 2] = a[a[e + 28 >> 2] + 24 >> 2] + o(a[e + 24 >> 2], 140), 1 == a[a[e + 20 >> 2] + 4 >> 2] && p(a[e + 28 >> 2], a[e + 20 >> 2], a[e + 20 >> 2], a[a[e + 28 >> 2] + 32 >> 2] + (a[e + 24 >> 2] << 9) | 0, 0), a[e + 24 >> 2] = a[e + 24 >> 2] + 1;
            }

            for (a[e + 16 >> 2] = 0; !(a[e + 16 >> 2] >= a[a[e + 28 >> 2] + 4 >> 2]);) {
              a[e + 12 >> 2] = a[a[e + 28 >> 2] + 24 >> 2] + o(a[e + 16 >> 2], 140), 1 == a[a[e + 12 >> 2] + 4 >> 2] && (a[a[e + 12 >> 2] >> 2] = 0, d(a[e + 28 >> 2], a[e + 12 >> 2], a[e + 12 >> 2], a[a[e + 28 >> 2] + 36 >> 2] + (a[e + 16 >> 2] << 9) | 0)), a[e + 16 >> 2] = a[e + 16 >> 2] + 1;
            }

            c = e + 32 | 0;
          }(r |= 0);
        },
        llparser_parse: function (r, e) {
          return 0 | y(r |= 0, e |= 0);
        },
        llparser_get_input_buffer: function (r) {
          var e;
          return r |= 0, a[12 + (e = c - 16 | 0) >> 2] = r, a[a[e + 12 >> 2] + 44 >> 2];
        },
        llparser_get_result: function (r) {
          var e;
          return r |= 0, a[12 + (e = c - 16 | 0) >> 2] = r, a[a[e + 12 >> 2] + 48 >> 2];
        },
        wasm_main: w,
        __wbindgen_start: w
      };
    }({
      Math: Math,
      Int8Array: Int8Array,
      Uint8Array: Uint8Array,
      Int16Array: Int16Array,
      Uint16Array: Uint16Array,
      Int32Array: Int32Array,
      Uint32Array: Uint32Array,
      Float32Array: Float32Array,
      Float64Array: Float64Array,
      NaN: NaN,
      Infinity: 1 / 0
    }, {
      abort: function () {
        throw new Error("abort");
      }
    }, t),
        i = a.memory,
        f = a.rust_calloc,
        u = a.rust_free,
        o = a.llparser_create,
        l = a.llparser_destroy,
        c = a.llparser_create_descriptor,
        _ = a.llparser_descriptor_set_all,
        s = a.llparser_descriptor_set_nil,
        p = a.llparser_descriptor_add_char,
        d = a.llparser_descriptor_add_range,
        b = a.llparser_descriptor_revert,
        k = a.llparser_add_rule,
        y = a.llparser_prepare,
        v = a.llparser_parse,
        A = a.llparser_get_input_buffer,
        w = a.llparser_get_result,
        m = a.wasm_main,
        g = a.__wbindgen_start;
  }]);
}, function (module, exports, __nested_webpack_require_52892__) {
  var globalOptions = __nested_webpack_require_52892__(4);

  var FuncArr = function ExparserFuncArr(type) {
    this.empty = true;
    this._type = type;
    this._arr = [];
    this._index = 0;
  };

  FuncArr.create = function (type) {
    return new FuncArr(type);
  };

  FuncArr.prototype.add = function (func) {
    var id = this._index++;

    this._arr.push({
      id: id,
      func: func
    });

    this.empty = false;
    return id;
  };

  FuncArr.prototype.remove = function (id) {
    var arr = this._arr;
    var i = 0;

    if (typeof id === 'function') {
      for (i = 0; i < arr.length; i++) {
        var func = arr[i].func;

        if (func === id) {
          arr.splice(i, 1);
          this.empty = !arr.length;
          return func;
        }
      }
    } else {
      for (i = 0; i < arr.length; i++) {
        if (arr[i].id === id) {
          var idFunc = arr[i].func;
          arr.splice(i, 1);
          this.empty = !arr.length;
          return idFunc;
        }
      }
    }

    return null;
  };

  FuncArr.prototype.call = function (caller, args, relatedComponent) {
    var arr = this._arr;
    var retFalse = false;

    for (var i = 0; i < arr.length; i++) {
      var ret = safeCallback(this._type, arr[i].func, caller, args, relatedComponent);
      if (ret === false) retFalse = true;
    }

    if (retFalse) return false;
  };

  var dispatchError = function (err, info) {
    if (info.type && errorFuncArr.call(null, [err, info]) === false) return;

    if (globalOptions.throwGlobalError) {
      throw err;
    } else {
      console.error(err.message + '\n' + err.stack);
    }
  };

  var safeCallback = FuncArr.safeCallback = function (type, method, caller, args, relatedComponent) {
    try {
      return method.apply(caller, args);
    } catch (e) {
      var msg = '[Exparser] [Error] [Component] ' + (type || 'Error Listener') + ' Error @ ';
      if (caller && caller.is) msg += caller.is;
      msg += '#' + (method.name || '(anonymous)');

      if (relatedComponent) {
        relatedComponent.triggerLifeTime('error', [e]);
      }

      dispatchError(e, {
        message: msg,
        type: type,
        element: caller,
        method: method,
        args: args
      });
    }
  };

  var errorFuncArr = FuncArr.create();

  FuncArr.addGlobalErrorListener = function (func) {
    return errorFuncArr.add(func);
  };

  FuncArr.removeGlobalErrorListener = function (id) {
    return errorFuncArr.remove(id);
  };

  var warningFuncArr = null;

  FuncArr.addGlobalWarningListener = function (func) {
    warningFuncArr = FuncArr.create();
    return warningFuncArr.add(func);
  };

  FuncArr.removeGlobalWarningListener = function (id) {
    if (warningFuncArr) {
      var ret = warningFuncArr.remove(id);

      if (warningFuncArr.empty) {
        warningFuncArr = null;
      }

      return ret;
    }

    return null;
  };

  FuncArr.hasGlobalWarningListeners = function () {
    return !!warningFuncArr;
  };

  FuncArr.triggerWarning = function (msg) {
    var message = '[Exparser] [Warning] [Component] ' + msg;
    warningFuncArr.call(null, [message], null);
  };

  module.exports = FuncArr;
}, function (module, exports) {
  var globalOptions = {
    lazyRegistration: true,
    publicProperties: false,
    availability: null,
    domain: '',
    writeOnly: false,
    allowInWriteOnly: false,
    classPrefix: null,
    addGlobalClass: false,
    templateEngine: null,
    renderingMode: 'full',
    multipleSlots: false,
    reflectToAttributes: false,
    writeFieldsToNode: true,
    writeIdToDOM: false,
    separateInnerData: true,
    innerDataExclude: null,
    listenerChangeLifeTimes: false,
    randomizeTagName: false,
    virtualHost: false,
    throwGlobalError: false,
    writeExtraInfoToAttr: false,
    documentBackend: 'none',
    hasDOMBackend: false,
    customContext: null
  };
  module.exports = globalOptions;
}, function (module, exports) {
  var hasOwnProperty = Object.prototype.hasOwnProperty;

  var deepCopyField = function (src, visited) {
    var srcType = typeof src;

    if (srcType === 'object' && src !== null) {
      var dest = visited ? visited.get(src) : undefined;
      if (dest !== undefined) return dest;

      if (src instanceof Array) {
        dest = [];
        if (visited) visited.set(src, dest);

        for (var i = 0; i < src.length; i++) {
          dest[i] = deepCopyField(src[i], visited);
        }
      } else {
        dest = {};
        if (visited) visited.set(src, dest);

        for (var k in src) {
          if (hasOwnProperty.call(src, k)) {
            dest[k] = deepCopyField(src[k], visited);
          }
        }
      }

      return dest;
    }

    if (srcType === 'symbol') return undefined;
    return src;
  };

  exports.deepCopy = function (src, withRecursive) {
    var visited = withRecursive && typeof WeakMap !== 'undefined' ? new WeakMap() : null;
    return deepCopyField(src, visited);
  };
}, function (module, exports, __nested_webpack_require_57903__) {
  var FuncArr = __nested_webpack_require_57903__(3);

  var hasOwnProperty = Object.prototype.hasOwnProperty;

  var Event = function ExparserEvent() {};

  Event.prototype = Object.create(Object.prototype, {
    constructor: {
      value: Event,
      writable: true,
      configurable: true
    }
  });
  var Element = null;

  Event._setElementSystem = function (es) {
    Element = es;
    Event._setElementSystem = null;
  };

  var Component = null;

  Event._setComponent = function (c) {
    Component = c;
    Event._setComponent = null;
  };

  var initTimeStamp = Date.now();

  Event.setInitTimeStamp = function (ts) {
    initTimeStamp = ts === undefined ? Date.now() : ts;
    return initTimeStamp;
  };

  Event.getInitTimeStamp = function (ts) {
    return initTimeStamp;
  };

  Event.create = function (evName, detail, options) {
    options = options || {};
    var originalEvent = options.originalEvent;
    var extraFields = options.extraFields || {};
    var timeStamp = Date.now() - initTimeStamp;
    var eventObj = new Event();
    eventObj.currentTarget = null;
    eventObj.type = evName;
    eventObj.timeStamp = timeStamp;
    eventObj.mark = null;
    eventObj.detail = detail;
    eventObj.bubbles = !!options.bubbles;
    eventObj.composed = !!options.composed;
    eventObj.__originalEvent = originalEvent;
    eventObj.__hasCapture = !!options.capturePhase;
    eventObj.__stopped = false;
    eventObj.__dispatched = false;

    for (var k in extraFields) {
      eventObj[k] = extraFields[k];
    }

    return eventObj;
  };

  Event.prototype.preventDefault = function () {
    if (this.__originalEvent) this.__originalEvent.preventDefault();
  };

  Event.prototype.stopPropagation = function () {
    this.__stopped = true;
  };

  Event.prototype.isStopped = function () {
    return !!this.__stopped;
  };

  var collectMark = function (target) {
    var mark = {};

    if (target instanceof Element) {
      for (var current = target; current; current = current.parentNode) {
        if (current.__marks) {
          for (var k in current.__marks) {
            if (hasOwnProperty.call(mark, k)) continue;
            mark[k] = current.__marks[k];
          }
        }
      }
    }

    return mark;
  };

  Event.prototype.markMutated = function () {
    this.__mutatedMarked = true;
  };

  Event.prototype.mutatedMarked = function () {
    return !!this.__mutatedMarked;
  };

  var bubbleEvent = function (target, evName, noCrossShadow, stepCb) {
    var nextParentNodeInShadowTree = target;
    var mark = target instanceof Element ? target.collectMarks() : {};
    var targetStack = [];
    var markStack = [];

    for (var currentTarget = target; currentTarget;) {
      if (nextParentNodeInShadowTree !== currentTarget) {
        targetStack.push(target);
        target = currentTarget;
        markStack.push(mark);
        mark = target instanceof Element ? target.collectMarks() : {};
      }

      nextParentNodeInShadowTree = currentTarget.parentNode;
      if (stepCb(currentTarget, target, mark) === false) return;

      if (currentTarget.__wxHost) {
        if (noCrossShadow) break;
        target = targetStack.pop() || currentTarget.__wxHost;
        mark = markStack.pop() || (target instanceof Element ? target.collectMarks() : {});
        currentTarget = currentTarget.__wxHost;
        nextParentNodeInShadowTree = currentTarget;
      } else {
        var currentTargetIsNative = true;
        if (currentTarget instanceof Element) currentTargetIsNative = false;

        if (currentTargetIsNative || noCrossShadow) {
          currentTarget = currentTarget.parentNode;
        } else {
          currentTarget = currentTarget.__wxSlotParent;
        }
      }
    }
  };

  Event.dispatchEvent = function (target, eventObj) {
    if (eventObj.__dispatched) return;
    eventObj.__dispatched = true;

    if (target.__wxElement && target.__wxHost !== target.__wxElement) {
      target = target.__wxElement;

      if (target.shadowRoot instanceof Element) {
        target = target.shadowRoot;
      }
    }

    eventObj.target = target instanceof Element ? target.__methodCaller : target;

    var callEventFuncArr = function (funcs, mutated, self) {
      if (mutated && mutated.length && eventObj.mutatedMarked()) return;
      var caller = eventObj.currentTarget = self instanceof Element ? self.__methodCaller : self;
      var ret = funcs.call(caller, [eventObj], self instanceof Component ? self : undefined);
      if (mutated && mutated.length) eventObj.markMutated();

      if (ret === false) {
        if (eventObj.__originalEvent) eventObj.__originalEvent.preventDefault();
        eventObj.__stopped = true;
      }
    };

    var evName = eventObj.type;
    var noCrossShadow = !eventObj.composed;

    if (eventObj.__hasCapture) {
      var bubblingPath = [];
      bubbleEvent(target, evName, noCrossShadow, function (currentTarget, target, mark) {
        if (currentTarget.__wxCaptureEvents && currentTarget.__wxCaptureEvents[evName]) bubblingPath.push([currentTarget, target, mark]);
        return true;
      });

      for (var i = bubblingPath.length - 1; i >= 0; i--) {
        var captureTargetAndTarget = bubblingPath[i];
        var captureTarget = captureTargetAndTarget[0];
        var targetForCaptureTarget = captureTargetAndTarget[1];
        eventObj.target = targetForCaptureTarget instanceof Element ? targetForCaptureTarget.__methodCaller : targetForCaptureTarget;
        eventObj.mark = captureTargetAndTarget[2];
        var captureMutated = captureTarget.__wxCaptureMutated && captureTarget.__wxCaptureMutated[evName];
        callEventFuncArr(captureTarget.__wxCaptureEvents[evName], captureMutated, captureTarget);
        if (eventObj.__stopped) break;
      }
    }

    eventObj.target = target instanceof Element ? target.__methodCaller : target;
    if (eventObj.__stopped) return;
    var noBubbles = !eventObj.bubbles;
    bubbleEvent(target, evName, noCrossShadow, function (currentTarget, target, mark) {
      eventObj.target = target instanceof Element ? target.__methodCaller : target;
      eventObj.mark = mark;
      var mutated = currentTarget.__wxMutated && currentTarget.__wxMutated[evName];
      if (currentTarget.__wxEvents && currentTarget.__wxEvents[evName]) callEventFuncArr(currentTarget.__wxEvents[evName], mutated, currentTarget);
      if (noBubbles || eventObj.__stopped) return false;
      return true;
    });
  };

  Event.triggerEvent = function (target, evName, detail, options) {
    var eventObj = Event.create(evName, detail, options);
    Event.dispatchEvent(target, eventObj);
  };

  Event.addListenerToElement = function (elem, evName, func, options) {
    var mutatedMarked = options && options.mutated;

    if (mutatedMarked) {
      var originalFunc = func;

      func = function (e) {
        if (e.mutatedMarked()) return;
        var args = Array.prototype.slice.call(arguments);
        return originalFunc.apply(this, args);
      };
    }

    var ret = undefined;

    if (options && (options.useCapture || options.capture)) {
      if (!elem.__wxCaptureEvents) elem.__wxCaptureEvents = Object.create(null);
      if (!elem.__wxCaptureEvents[evName]) elem.__wxCaptureEvents[evName] = FuncArr.create('Event Listener');
      ret = elem.__wxCaptureEvents[evName].add(func);

      if (mutatedMarked) {
        if (!elem.__wxCaptureMutated) elem.__wxCaptureMutated = Object.create(null);
        if (!elem.__wxCaptureMutated[evName]) elem.__wxCaptureMutated[evName] = [];

        elem.__wxCaptureMutated[evName].push(ret);
      }
    } else {
      if (!elem.__wxEvents) elem.__wxEvents = Object.create(null);
      if (!elem.__wxEvents[evName]) elem.__wxEvents[evName] = FuncArr.create('Event Listener');
      ret = elem.__wxEvents[evName].add(func);

      if (mutatedMarked) {
        if (!elem.__wxMutated) elem.__wxMutated = Object.create(null);
        if (!elem.__wxMutated[evName]) elem.__wxMutated[evName] = [];

        elem.__wxMutated[evName].push(ret);
      }
    }

    if (elem instanceof Component && elem.__componentOptions.listenerChangeLifeTimes) {
      elem.triggerLifeTime('listenerChanged', [true, evName, func, options]);
    }

    return ret;
  };

  Event.removeListenerFromElement = function (elem, evName, id, options) {
    var func = null;

    if (options && (options.useCapture || options.capture)) {
      if (elem.__wxCaptureEvents && elem.__wxCaptureEvents[evName]) {
        func = elem.__wxCaptureEvents[evName].remove(id);
      }

      if (elem.__wxCaptureMutated && elem.__wxCaptureMutated[evName]) {
        var index = elem.__wxCaptureMutated[evName].indexOf(id);

        if (index !== -1) elem.__wxCaptureMutated[evName].splice(index, 1);
      }
    } else {
      if (elem.__wxEvents && elem.__wxEvents[evName]) {
        func = elem.__wxEvents[evName].remove(id);
      }

      if (elem.__wxMutated && elem.__wxMutated[evName]) {
        var index = elem.__wxMutated[evName].indexOf(id);

        if (index !== -1) elem.__wxMutated[evName].splice(index, 1);
      }
    }

    if (func && elem instanceof Component && elem.__componentOptions.listenerChangeLifeTimes) {
      elem.triggerLifeTime('listenerChanged', [false, evName, func, options]);
    }
  };

  module.exports = Event;
}, function (module, exports, __nested_webpack_require_67257__) {
  var LLParser = __nested_webpack_require_67257__(1);

  var SPACE_CHARS = ' \n\r\t\f';
  var parser = null;

  var createParser = function () {
    parser = LLParser.create({
      'MULTIPLE_PATHS': [{
        id: 'arrayConcat',
        states: ['MULTIPLE_PATHS', ',', 'SINGLE_PATH']
      }, {
        id: 'array',
        states: ['SINGLE_PATH']
      }],
      'SINGLE_PATH': [{
        id: 'arrayConcat',
        states: ['SINGLE_PATH', '.', 'VAR_NAME']
      }, {
        id: 'arrayConcat',
        states: ['SINGLE_PATH', '[', 'INT', ']']
      }, {
        id: 'array',
        states: ['VAR_NAME']
      }, {
        id: '_jump',
        states: ['SINGLE_PATH', SPACE_CHARS]
      }],
      'VAR_NAME': [{
        id: '_blank',
        states: [SPACE_CHARS, 'VAR_NAME']
      }, {
        id: '_jump',
        states: ['VAR_NAME', SPACE_CHARS]
      }, {
        id: '_raw',
        states: ['*', '*']
      }, {
        id: '_raw',
        states: ['_a-zA-Z$', 'VAR_NAME_AFTER']
      }],
      'VAR_NAME_AFTER': [{
        id: '_raw',
        states: ['_a-zA-Z0-9$', 'VAR_NAME_AFTER']
      }, {
        id: '_raw',
        states: ['NULL']
      }],
      'INT': [{
        id: '_blank',
        states: [SPACE_CHARS, 'INT']
      }, {
        id: '_jump',
        states: ['INT', SPACE_CHARS]
      }, {
        id: 'toNumber',
        states: ['0-9', 'INT_AFTER']
      }],
      'INT_AFTER': [{
        id: '_raw',
        states: ['0-9', 'INT_AFTER']
      }, {
        id: '_raw',
        states: ['NULL']
      }]
    }, {
      arrayConcat: function (states) {
        states[0].push(states[2]);
        return states[0];
      },
      array: function (states) {
        return states;
      },
      toNumber: function (states) {
        return parseInt(states[0] + states[1], 10);
      }
    });
  };

  exports.parseMultiPaths = function (str) {
    if (!parser) createParser();
    return parser.parse('MULTIPLE_PATHS', str);
  };

  exports.parseSinglePath = function (pathStr) {
    var length = pathStr.length;
    var path = [];
    var slice = '';
    var number = 0;
    var hasNumber = false;
    var inBracket = false;

    for (var i = 0; i < length; i++) {
      var c = pathStr[i];

      if (c === '\\') {
        if (i + 1 < length && (pathStr[i + 1] === '.' || pathStr[i + 1] === '[' || pathStr[i + 1] === ']' || pathStr[i + 1] === '\\')) {
          slice += pathStr[i + 1];
          i++;
        } else {
          slice += '\\';
        }
      } else if (c === '.') {
        if (slice) {
          path.push(slice);
          slice = '';
        }
      } else if (c === '[') {
        if (slice) {
          path.push(slice);
          slice = '';
        }

        if (path.length === 0) {
          throw new Error('The path string should not start with []: ' + pathStr);
        }

        inBracket = true;
        hasNumber = false;
      } else if (c === ']') {
        if (!hasNumber) {
          throw new Error('There should be digits inside [] in the path string: ' + pathStr);
        }

        inBracket = false;
        path.push(number);
        number = 0;
      } else if (inBracket) {
        if (c < '0' || c > '9') {
          throw new Error('Only digits (0-9) can be put inside [] in the path string: ' + pathStr);
        }

        hasNumber = true;
        number = number * 10 + c.charCodeAt(0) - 48;
      } else {
        slice += c;
      }
    }

    if (slice) {
      path.push(slice);
    }

    if (length === 0) {
      throw new Error('The path string should not be empty');
    }

    return path;
  };
}, function (module, exports, __nested_webpack_require_70884__) {
  var FuncArr = __nested_webpack_require_70884__(3);

  var globalOptions = __nested_webpack_require_70884__(4);

  var dataPath = __nested_webpack_require_70884__(7);

  var LIFETIMES = ['created', 'ready', 'cacheAttached', 'attached', 'moved', 'detached', 'route', 'saved', 'restored', 'error', 'listenerChanged', 'performanceData'];
  var BLACKLIST = ['parentNode', 'childNodes', 'shadowRoot', 'ownerShadowRoot', 'data', 'dataset', 'classList'];
  var PROP_TYPES = [String, Number, Boolean, Object, Array, null];

  var EMPTY_FUNC = function () {};

  var parseMultiPaths = dataPath.parseMultiPaths;

  var Behavior = function ExparserBehavior() {};

  Behavior.matchTypeWithValue = function (type, value) {
    if (type === String) {
      if (typeof value !== 'string') return false;
    } else if (type === Number) {
      if (!Number.isFinite(value)) return false;
    } else if (type === Boolean) {
      if (typeof value !== 'boolean') return false;
    } else if (type === Object) {
      if (value === null || value.constructor !== Object) return false;
    } else if (type === Array) {
      if (value === null || value.constructor !== Array) return false;
    } else {
      if (value === undefined) return false;
    }

    return true;
  };

  var shallowCopyArr = function (src) {
    var dest = [];

    for (var i = 0; i < src.length; i++) {
      dest[i] = src[i];
    }

    return dest;
  };

  var shallowCopyObj = function (src) {
    var dest = {};

    for (var k in src) {
      dest[k] = src[k];
    }

    return dest;
  };

  var shallowMerge = function (dest, src) {
    for (var k in src) {
      if (hasOwnProperty.call(dest, k)) {
        if (FuncArr.hasGlobalWarningListeners()) {
          if (k.charAt(0) === '_') {
            FuncArr.triggerWarning('data field "' + k + '" from different behaviors is overriding or merging.');
          }
        }

        if (typeof dest[k] === 'object' && typeof src[k] === 'object' && src[k] !== null && !(src[k] instanceof Array)) {
          if (dest[k] instanceof Array) {
            dest[k] = shallowCopyArr(dest[k]);
          } else {
            dest[k] = shallowCopyObj(dest[k]);
          }

          shallowMerge(dest[k], src[k]);
        } else {
          dest[k] = src[k];
        }
      } else {
        dest[k] = src[k];
      }
    }
  };

  Behavior.create = function (def) {
    var behavior = new Behavior();
    behavior.is = def.is || '';
    behavior.using = def.using || {};
    behavior.generics = def.generics || {};
    behavior.placeholder = def.placeholder || {};
    behavior.template = def.template;
    behavior.externalClasses = def.externalClasses || [];
    behavior.data = typeof def.data === 'object' ? {} : null;
    behavior.properties = Object.create(null);
    behavior.methods = Object.create(null);
    behavior.listeners = Object.create(null);
    behavior.relations = Object.create(null);
    behavior.ancestors = [];
    behavior.initiator = def.initiator;
    behavior.lifetimes = Object.create(null);
    behavior.pageLifetimes = Object.create(null);
    behavior.observers = [];
    behavior.options = {
      publicProperties: !!(def.options && def.options.publicProperties !== undefined ? def.options.publicProperties : globalOptions.publicProperties)
    };
    behavior.definitionFilter = def.definitionFilter;
    behavior._unprepared = def;

    if (!(def.options && def.options.lazyRegistration !== undefined ? def.options.lazyRegistration : globalOptions.lazyRegistration)) {
      Behavior.prepare(behavior);
    }

    if (def.is) {
      Behavior._list[def.is] = behavior;
    }

    return behavior;
  };

  Behavior.prepare = function (behavior) {
    var def = behavior._unprepared;
    if (!def) return;
    behavior._unprepared = null;
    var ancestors = behavior.ancestors;
    var k = '';
    var i = 0;

    for (i = 0; i < (def.behaviors || []).length; i++) {
      var parentName = def.behaviors[i];
      var parent = parentName;

      if (typeof parent === 'string') {
        parent = Behavior._list[parentName];

        if (FuncArr.hasGlobalWarningListeners()) {
          if (!(parent instanceof Behavior)) {
            FuncArr.triggerWarning('behavior "' + parentName + '" is not found (when preparing behavior "' + behavior.is + '").');
          }
        }
      }

      if (parent._unprepared) Behavior.prepare(parent);
      if (typeof parent.data === 'object') behavior.data === null ? behavior.data = parent.data : shallowMerge(behavior.data, parent.data);

      for (k in parent.generics) {
        var genericDef = parent.generics[k];
        if (typeof genericDef !== 'object') genericDef = {};
        behavior.generics[k] = {
          'default': genericDef.default
        };
      }

      for (k in parent.properties) {
        if (FuncArr.hasGlobalWarningListeners()) {
          if (k.charAt(0) === '_' && behavior.properties[k] !== undefined) {
            FuncArr.triggerWarning('property "' + k + '" from different behaviors is overriding (when preparing behavior "' + behavior.is + '").');
          }
        }

        behavior.properties[k] = parent.properties[k];
      }

      for (k in parent.relations) {
        behavior.relations[k] = parent.relations[k];
      }

      for (k in parent.methods) {
        if (FuncArr.hasGlobalWarningListeners()) {
          if (k.charAt(0) === '_' && behavior.methods[k]) {
            FuncArr.triggerWarning('method "' + k + '" from different behaviors is overriding (when preparing behavior "' + behavior.is + '").');
          }
        }

        behavior.methods[k] = parent.methods[k];
      }

      for (var j = 0; j < parent.ancestors.length; j++) {
        if (ancestors.indexOf(parent.ancestors[j]) < 0) ancestors.push(parent.ancestors[j]);
      }
    }

    if (typeof def.data === 'object') {
      behavior.data === null ? behavior.data = def.data : shallowMerge(behavior.data, def.data);
    }

    for (k in def.properties) {
      if (FuncArr.hasGlobalWarningListeners()) {
        if (k.charAt(0) === '_' && behavior.properties[k] !== undefined) {
          FuncArr.triggerWarning('property "' + k + '" from different behaviors is overriding (when preparing behavior "' + behavior.is + '").');
        }
      } //# DEBUG-END


      var propDef = def.properties[k];

      if (PROP_TYPES.indexOf(propDef) >= 0) {
        propDef = {
          type: propDef
        };
      } else if (PROP_TYPES.indexOf(propDef.type) < 0 && propDef.optionalTypes && propDef.optionalTypes.length > 0) {
        propDef.type = propDef.optionalTypes[0];
      }

      if (FuncArr.hasGlobalWarningListeners()) {
        if (PROP_TYPES.indexOf(propDef.type) < 0) {
          FuncArr.triggerWarning('the type of property "' + k + '" is illegal (when preparing behavior "' + behavior.is + '").');
        }
      }

      if (propDef.value === undefined) {
        if (propDef.type === String) propDef.value = '';else if (propDef.type === Number) propDef.value = 0;else if (propDef.type === Boolean) propDef.value = false;else if (propDef.type === Array) propDef.value = [];else propDef.value = null;
      }

      behavior.properties[k] = {
        type: propDef.type,
        optionalTypes: propDef.optionalTypes,
        value: propDef.value,
        filter: propDef.filter,
        observer: propDef.observer,
        public: !!(propDef.public === undefined ? behavior.options.publicProperties : propDef.public),
        availability: propDef.availability,
        observeAssignments: !!propDef.observeAssignments
      };
    }

    if (def.lifetimes && typeof def.lifetimes === 'object') {
      for (k in def.lifetimes) {
        behavior.lifetimes[k] = def.lifetimes[k];
      }
    }

    for (i = 0; i < LIFETIMES.length; i++) {
      if (behavior.lifetimes[LIFETIMES[i]] !== undefined) continue;
      behavior.lifetimes[LIFETIMES[i]] = def[LIFETIMES[i]];
    }

    for (k in def.listeners) {
      behavior.listeners[k] = def.listeners[k];
    }

    var observersDef = def.observers;

    if (observersDef instanceof Array) {
      for (i = 0; i < observersDef.length; i++) {
        var observerDef = observersDef[i];
        behavior.observers.push({
          paths: parseMultiPaths(observerDef.fields || '**'),
          observer: observerDef.observer
        });
      }
    } else {
      for (k in observersDef) {
        behavior.observers.push({
          paths: parseMultiPaths(k),
          observer: observersDef[k]
        });
      }
    }

    if (def.pageLifetimes && typeof def.pageLifetimes === 'object') {
      for (k in def.pageLifetimes) {
        behavior.pageLifetimes[k] = def.pageLifetimes[k];
      }
    }

    for (k in def.relations) {
      var relationDef = def.relations[k];
      behavior.relations[k] = {
        target: relationDef.target || k,
        type: relationDef.type,
        linked: relationDef.linked || EMPTY_FUNC,
        linkChanged: relationDef.linkChanged || EMPTY_FUNC,
        unlinked: relationDef.unlinked || EMPTY_FUNC,
        linkFailed: relationDef.linkFailed || EMPTY_FUNC
      };
    }

    for (k in def.methods) {
      if (typeof def.methods[k] !== 'function') {
        continue;
      }

      if (FuncArr.hasGlobalWarningListeners()) {
        if (k.charAt(0) === '_' && behavior.methods[k]) {
          FuncArr.triggerWarning('method "' + k + '" from different behaviors is overriding (when preparing behavior "' + behavior.is + '").');
        }
      }

      behavior.methods[k] = def.methods[k];
    }

    ancestors.push(behavior);
  };

  Behavior._list = Object.create(null);

  Behavior.prototype.hasBehavior = function (name) {
    if (this._unprepared) Behavior.prepare(this);

    for (var i = 0; i < this.ancestors.length; i++) {
      if (name instanceof Behavior) {
        if (this.ancestors[i] === name) return true;
      } else {
        if (this.ancestors[i] === Behavior._list[name]) return true;
      }
    }

    return false;
  };

  Behavior.prototype._getAllListeners = function () {
    var ret = {};
    var ancestors = this.ancestors;

    for (var i = 0; i < ancestors.length; i++) {
      var ancestor = this.ancestors[i];

      for (var k in ancestor.listeners) {
        if (Object.prototype.hasOwnProperty.call(ret, k)) ret[k].push(ancestor.listeners[k]);else ret[k] = [ancestor.listeners[k]];
      }
    }

    return ret;
  };

  Behavior.prototype._addObserversToDataProxy = function (observerTree) {
    var ancestors = this.ancestors;

    for (var i = 0; i < ancestors.length; i++) {
      var observers = this.ancestors[i].observers;

      for (var j = 0; j < observers.length; j++) {
        var observerItem = observers[j];
        observerTree.addObserver(observerItem.observer, observerItem.paths);
      }
    }
  };

  Behavior.prototype._getAllLifeTimeFuncs = function () {
    var ret = {};
    var ancestors = this.ancestors;
    LIFETIMES.forEach(function (lt) {
      ret[lt] = FuncArr.create('Lifetime Method');
    });

    for (var i = 0; i < ancestors.length; i++) {
      var ancestor = ancestors[i];

      for (var k in ancestor.lifetimes) {
        if (ancestor.lifetimes[k]) {
          if (!ret[k]) ret[k] = FuncArr.create('Lifetime Method');
          ret[k].add(ancestor.lifetimes[k]);
        }
      }
    }

    return ret;
  };

  Behavior.prototype._getAllPageLifeTimeFuncs = function () {
    var ret = {};
    var ancestors = this.ancestors;

    for (var i = 0; i < ancestors.length; i++) {
      var ancestor = ancestors[i];

      for (var k in ancestor.pageLifetimes) {
        if (ancestor.pageLifetimes[k]) {
          if (!ret[k]) ret[k] = FuncArr.create('Page Lifetime Method');
          ret[k].add(ancestor.pageLifetimes[k]);
        }
      }
    }

    return ret;
  };

  Behavior.callDefinitionFilter = function (def) {
    var definitionFilterInDef = def.definitionFilter;
    var parentDefinitionFilters = [];

    if (def.behaviors instanceof Array) {
      def.behaviors.forEach(function (parent) {
        parent = typeof parent === 'string' ? Behavior._list[parent] : parent;

        if (parent && parent.definitionFilter) {
          parentDefinitionFilters.push(parent.definitionFilter);
          parent.definitionFilter.call(null, def);
        }
      });
    }

    return typeof definitionFilterInDef === 'function' ? function (childDef) {
      definitionFilterInDef(childDef, parentDefinitionFilters);
    } : null;
  };

  module.exports = Behavior;
}, function (module, exports, __nested_webpack_require_83363__) {
  var FuncArr = __nested_webpack_require_83363__(3);

  var eventSystem = __nested_webpack_require_83363__(6);

  var Observer = __nested_webpack_require_83363__(10);

  var ClassList = __nested_webpack_require_83363__(11);

  var TextNode = __nested_webpack_require_83363__(12);

  var FakeDomElement = __nested_webpack_require_83363__(14);

  var globalOptions = __nested_webpack_require_83363__(4);

  var globalState = __nested_webpack_require_83363__(13);

  var Element = function ExparserElement(domElement) {
    initialize(this, domElement || null);
  };

  Element.prototype = Object.create(Object.prototype, {
    constructor: {
      value: Element,
      writable: true,
      configurable: true
    },
    id: {
      get: function () {
        return this.__id;
      },
      set: function (_newId) {
        var newId = String(_newId);
        if (this.__id === newId) return;
        this.__id = newId;

        if (this.ownerShadowRoot) {
          var host = this.ownerShadowRoot.__wxHost;
          host.__idCacheDirty = true;

          if (this.__domElement && host.__componentOptions.writeIdToDOM) {
            if (globalOptions.documentBackend === 'dom') {
              this.__domElement.id = newId;
            } else if (globalOptions.documentBackend === 'custom') {
              this.__domElement.setId(newId);
            }
          }
        }

        if (globalOptions.writeExtraInfoToAttr && this.__domElement) {
          if (globalOptions.documentBackend === 'dom') {
            this.__domElement.setAttribute('exparser:info-attr-id', newId);
          }
        }

        if (this.__propObservers && !this.__propObservers.empty || this.__subtreeObserversCount) {
          Observer._callObservers(this, '__propObservers', {
            type: 'properties',
            target: this,
            propertyName: 'id'
          });
        }
      },
      configurable: true
    },
    slot: {
      get: function () {
        return this.__slot;
      },
      set: function (newSlot) {
        newSlot = String(newSlot);
        if (this.__slot === newSlot) return;

        if (this.__inheritSlots) {
          if (FuncArr.hasGlobalWarningListeners()) {
            FuncArr.triggerWarning('slots-inherited nodes do not support "slot" attribute.');
          }

          return;
        }

        this.__slot = newSlot;
        reassignSlotForChild(this);

        if (this.__propObservers && !this.__propObservers.empty || this.__subtreeObserversCount) {
          Observer._callObservers(this, '__propObservers', {
            type: 'properties',
            target: this,
            propertyName: 'slot'
          });
        }
      },
      configurable: true
    },
    attributes: {
      get: function () {
        var ret = [];
        if (!this.__attributes) return ret;

        for (var k in this.__attributes) {
          ret.push({
            name: k,
            value: this.__attributes[k]
          });
        }

        return ret;
      },
      set: function () {},
      configurable: true
    },
    class: {
      get: function () {
        return this.classList.getClassNames();
      },
      set: function (classNames) {
        if (this.classList) this.classList.setClassNames(classNames);

        if (this.__propObservers && !this.__propObservers.empty || this.__subtreeObserversCount) {
          Observer._callObservers(this, '__propObservers', {
            type: 'properties',
            target: this,
            propertyName: 'class'
          });
        }
      },
      configurable: true
    },
    style: {
      get: function () {
        if (this.__domElement) {
          return this.__domElement.style;
        }

        return null;
      },
      set: function (style) {
        return setNodeStyle.call(this, style);
      },
      configurable: true
    }
  });

  eventSystem._setElementSystem(Element);

  ClassList._setElementSystem(Element);

  var initialize = Element.initialize = function (element, domElement, ownerShadowRoot, backendContext) {
    element.__id = '';
    element.__slot = '';
    element.__virtual = false;
    element.__inheritSlots = false;
    element.__attributes = null;
    element.__marks = null;
    element.__attached = false;
    element.parentNode = null;
    element.childNodes = [];
    element.ownerShadowRoot = ownerShadowRoot;
    element.__wxSlotParent = null;
    element.__wxSlotChildren = element.childNodes;
    element.__subtreeObserversCount = 0;
    element.classList = null;
    element.__styleSegments = [];
    element.__methodCaller = element;
    element.__relationHandler = null;
    element.__backendContext = backendContext;
    element.__backendExtracted = globalState.backendExtractedDefault;
    element.__domElement = domElement;
    element.__autoDestroy = true;
    element.$$ = domElement;
    if (domElement) domElement.__wxElement = element;
  };

  Element._clone = function (element, source, domElement, ownerShadowRoot) {
    element.__id = source.__id;
    element.__slot = source.__slot;
    element.__virtual = source.__virtual;
    element.__inheritSlots = source.__inheritSlots;
    element.__marks = source.__marks ? {} : null;

    if (source.__marks) {
      for (var markKey in source.__marks) {
        element.__marks[markKey] = source.__marks[markKey];
      }
    }

    element.__attributes = Object.create(null);

    for (var k in source.__attributes) {
      element.__attributes[k] = source.__attributes[k];
    }

    element.__attached = false;
    element.parentNode = null;
    element.childNodes = [];
    element.ownerShadowRoot = ownerShadowRoot;
    element.__wxSlotParent = null;
    element.__wxSlotChildren = element.childNodes;
    element.__subtreeObserversCount = 0;
    element.classList = null;
    element.__styleSegments = [];
    element.__methodCaller = element;
    element.__relationHandler = null;
    element.__backendContext = source.__backendContext;
    element.__backendExtracted = globalState.backendExtractedDefault;
    element.__domElement = domElement;
    element.$$ = domElement;
    if (domElement) domElement.__wxElement = element;
  };

  Element.prototype.setAutoDestroy = function (autoDestroy) {
    this.__autoDestroy = !!autoDestroy;
  };

  Element.prototype.destroy = function () {
    if (globalOptions.documentBackend === 'custom' && this.__domElement) {
      this.__domElement.release();

      this.__domElement = null;
    }
  };

  var checkAndCallAttached = function (node) {
    if (node.parentNode && !node.parentNode.__attached) return;

    var callFunc = function (node) {
      if (!(node instanceof Element)) return;
      node.__attached = true;
      if (node.__lifeTimeFuncs) node.__lifeTimeFuncs.attached.call(node.__methodCaller, [], node);
      if (node.__relationHandler) node.__relationHandler('attached');

      if (node.__attachedObservers && !node.__attachedObservers.empty) {
        Observer._callSingleObserver(node, '__attachedObservers', {
          type: 'attachStatus',
          target: node,
          status: 'attached'
        });
      }

      if (node.shadowRoot instanceof Element) callFunc(node.shadowRoot);
      var children = node.childNodes;

      for (var i = 0; i < children.length; i++) {
        callFunc(children[i]);
      }
    };

    callFunc(node);
  };

  var checkAndCallDetached = function (node) {
    if (!node.__attached) return;

    var callFunc = function (node) {
      if (!(node instanceof Element)) {
        if (node.__autoDestroy) node.destroy();
        return;
      }

      var children = node.childNodes;

      for (var i = 0; i < children.length; i++) {
        callFunc(children[i]);
      }

      if (node.shadowRoot instanceof Element) callFunc(node.shadowRoot);
      node.__attached = false;
      if (node.__autoDestroy) node.destroy();
      if (node.__lifeTimeFuncs) node.__lifeTimeFuncs.detached.call(node.__methodCaller, [], node);
      if (node.__relationHandler) node.__relationHandler('detached');

      if (node.__attachedObservers && !node.__attachedObservers.empty) {
        Observer._callSingleObserver(node, '__attachedObservers', {
          type: 'attachStatus',
          target: node,
          status: 'detached'
        });
      }
    };

    callFunc(node);
  };

  var checkAndCallMoved = function (node) {
    if (!node.__attached) return checkAndCallAttached(node);

    var callFunc = function (node) {
      if (!(node instanceof Element)) return;
      var children = node.childNodes;

      for (var i = 0; i < children.length; i++) {
        callFunc(children[i]);
      }

      if (node.shadowRoot instanceof Element) callFunc(node.shadowRoot);
      if (node.__lifeTimeFuncs) node.__lifeTimeFuncs.moved.call(node.__methodCaller, [], node);
      if (node.__relationHandler) node.__relationHandler('moved');
    };

    callFunc(node);
  };

  var checkChildObservers = function (node, type, child) {
    if (!(node.__childObservers && !node.__childObservers.empty || node.__subtreeObserversCount)) {
      return;
    }

    var childEventObj = null;
    var childList = [child];

    if (type === 'add') {
      childEventObj = {
        type: 'childList',
        target: node,
        addedNodes: childList
      };
    } else if (type === 'remove') {
      childEventObj = {
        type: 'childList',
        target: node,
        removedNodes: childList
      };
    } else {
      childEventObj = {
        type: 'childList',
        target: node,
        addedNodes: childList,
        removedNodes: childList
      };
    }

    Observer._callObservers(node, '__childObservers', childEventObj);
  };

  var checkSlotDirty = function (node, ownerShadowRoot) {
    if (!(node instanceof Element)) return;
    if (ownerShadowRoot.__wxHost.__idCacheDirty && ownerShadowRoot.__slotCacheDirty) return;

    var dfs = function (node) {
      if (node.__id) ownerShadowRoot.__wxHost.__idCacheDirty = true;
      if (node.__slotName !== undefined) ownerShadowRoot.__slotCacheDirty = true;
      var children = node.childNodes;

      for (var i = 0; i < children.length; i++) {
        var child = children[i];

        if (child instanceof Element) {
          dfs(child);
        }
      }
    };

    dfs(node);
  };

  Element._updateIdMap = function (host) {
    var shadowRoot = host.shadowRoot;
    if (!host.__idCacheDirty) return;
    host.__idCacheDirty = false;
    var idMap = host.__idCache = Object.create(null);

    var dfs = function (node) {
      if (node.__id) {
        if (!idMap[node.__id]) idMap[node.__id] = node;
      }

      var children = node.childNodes;

      for (var i = 0; i < children.length; i++) {
        if (children[i] instanceof Element) dfs(children[i]);
      }
    };

    dfs(shadowRoot);
  };

  var updateSlotCache = function (shadowRoot) {
    if (!shadowRoot.__hostAssociated || !shadowRoot.__slotCacheDirty) return;
    shadowRoot.__slotCacheDirty = false;
    var host = shadowRoot.__wxHost;
    var oldSlots = null;
    var slots = Object.create(null);

    if (host.__singleSlot !== undefined) {
      oldSlots = {
        '': host.__singleSlot
      };
    } else {
      oldSlots = host.__slots;
    }

    var dfs = function (node) {
      if (node.__slotName !== undefined) {
        if (!slots[node.__slotName]) slots[node.__slotName] = node;else if (FuncArr.hasGlobalWarningListeners()) {
          FuncArr.triggerWarning('slot "' + node.__slotName + '" duplication is found under a single shadow root. The first one was accepted.');
        }
      }

      var children = node.childNodes;

      for (var i = 0; i < children.length; i++) {
        if (children[i] instanceof Element) dfs(children[i]);
      }
    };

    dfs(shadowRoot);

    if (host.__singleSlot !== undefined) {
      if (host.__singleSlot !== slots['']) {
        if (slots['']) slots[''].__wxSlotChildren = host.childNodes;
        reassignSlots(host, slots, oldSlots, true);
        if (host.__singleSlot) host.__singleSlot.__wxSlotChildren = [];
        host.__singleSlot = slots[''] || null;
      }
    } else {
      reassignSlots(host, slots, oldSlots, false);
      host.__slots = slots;
    }
  };

  var reassignSlots = function (host, slots, oldSlots, isSingle) {
    var children = host.childNodes;
    var i = 0;

    if (isSingle) {
      var defaultSlot = slots[''];

      if (defaultSlot) {
        for (; i < children.length; i++) {
          insertChildInSlot(defaultSlot, children[i], null, false, false, false, -1);
        }
      } else {
        defaultSlot = oldSlots[''];

        if (defaultSlot) {
          for (; i < children.length; i++) {
            insertChildInSlot(defaultSlot, null, children[i], true, false, false, i);
          }
        }
      }
    } else {
      var dfsInherited = function (children) {
        for (var i = 0; i < children.length; i++) {
          var child = children[i];
          var slotName = child.__slot || '';
          var slot = slots[slotName];

          if (slot) {
            insertChildInSlot(slot, child, null, false, true, true);
          } else {
            slot = oldSlots[slotName];
            if (slot) insertChildInSlot(slot, null, child, true, true, true);
          }

          if (child.__inheritSlots) dfsInherited(child.childNodes);
        }
      };

      dfsInherited(children);
    }
  };

  var findSlotRelativeChild = function (host, curNode, slotName, includeCurNode) {
    var findInChildren = function (parent, fromNode, includeNode) {
      var children = parent.childNodes;
      var i = 0;
      if (fromNode) i = children.indexOf(fromNode) + (includeNode ? 0 : 1);

      for (; i < children.length; i++) {
        var child = children[i];

        if (child.__slot === slotName) {
          return child;
        }

        if (child.__inheritSlots) {
          var rel = findInChildren(child, null, false);
          if (rel) return rel;
        }
      }

      return null;
    };

    for (; curNode !== host; curNode = curNode.parentNode) {
      var rel = findInChildren(curNode.parentNode, curNode, includeCurNode);
      if (rel) return rel;
      includeCurNode = false;
    }

    return null;
  };

  var reassignSlotForChild = function (child) {
    var host = child.parentNode;

    while (host && host.__inheritSlots) {
      host = host.parentNode;
    }

    if (!host || host.__singleSlot !== undefined) return;
    var slotName = child.__slot || '';
    var slot = host.__slots[slotName];

    if (slot) {
      var relativeChild = findSlotRelativeChild(host, child, slotName, false);
      insertChildInSlot(slot, child, relativeChild, false, true, true);
    } else {
      if (FuncArr.hasGlobalWarningListeners()) {
        FuncArr.triggerWarning('slot "' + slotName + '" is not found.');
      }

      slot = child.__wxSlotParent;
      if (slot) insertChildInSlot(slot, null, child, true, true, true);
    }
  };

  var insertChildInDom = function (elem, newChild, oldChild, removal, newPosIndex) {
    var contentElement = elem;

    if (contentElement instanceof Element) {
      while (contentElement.__virtual) {
        var contentElementParent = contentElement.__wxSlotParent;

        if (!contentElementParent) {
          contentElement = null;
          break;
        }

        if (newChild && !oldChild) {
          var indexInParent = contentElementParent.__wxSlotChildren.indexOf(contentElement);

          oldChild = contentElementParent.__wxSlotChildren[indexInParent + 1];
        }

        contentElement = contentElementParent;
      }

      if (contentElement instanceof Element) {
        contentElement = contentElement.__domElement;
      }
    }

    if (contentElement) {
      var removalInDom = removal;
      var newChildDom = null;
      var oldChildDom = null;

      if (newChild) {
        if (newChild.__virtual) {
          var frag = document.createDocumentFragment();

          var addChildToFrag = function (c) {
            for (var i = 0; i < c.__wxSlotChildren.length; i++) {
              var cc = c.__wxSlotChildren[i];
              if (cc.__virtual) addChildToFrag(cc);else frag.appendChild(cc.__domElement);
            }
          };

          addChildToFrag(newChild);
          newChildDom = frag;
        } else {
          newChildDom = newChild.__domElement;
        }
      }

      if (oldChild) {
        if (oldChild.__virtual) {
          var oldChildParent = elem;
          var findFromIndex = 0;

          if (removal) {
            var removeChildFromContent = function (c) {
              for (var i = 0; i < c.__wxSlotChildren.length; i++) {
                var cc = c.__wxSlotChildren[i];
                if (cc.__virtual) removeChildFromContent(cc);else contentElement.removeChild(cc.__domElement);
              }
            };

            removeChildFromContent(oldChild);
            removalInDom = false;
            findFromIndex = newPosIndex + 1;
          } else {
            oldChildParent = oldChild.__wxSlotParent;
            if (oldChild === newChild) findFromIndex = newPosIndex;else findFromIndex = oldChildParent.__wxSlotChildren.indexOf(oldChild);
          }

          if (newChild) {
            var findFirstNonVirtual = function (parent, index) {
              for (; index < parent.__wxSlotChildren.length; index++) {
                var c = parent.__wxSlotChildren[index];

                if (c.__virtual) {
                  var ret = findFirstNonVirtual(c, 0);
                  if (ret) return ret;
                } else {
                  return c;
                }
              }

              return undefined;
            };

            oldChild = null;

            for (var curParent = oldChildParent;; curParent = curParent.__wxSlotParent) {
              oldChild = findFirstNonVirtual(curParent, findFromIndex);
              if (oldChild || !curParent.__virtual) break;
              findFromIndex = curParent.__wxSlotParent.__wxSlotChildren.indexOf(curParent) + 1;
            }

            if (oldChild) oldChildDom = oldChild.__domElement;
          }
        } else {
          oldChildDom = oldChild.__domElement;
        }
      }

      if (removalInDom) {
        if (newChildDom) {
          contentElement.replaceChild(newChildDom, oldChildDom);
        } else {
          contentElement.removeChild(oldChildDom);
        }
      } else if (newChildDom) {
        if (oldChildDom) {
          contentElement.insertBefore(newChildDom, oldChildDom);
        } else {
          contentElement.appendChild(newChildDom);
        }
      }
    } else {
      if (newChild && newChild.__wxSlotParent) {
        var removeNewChild = function (c) {
          if (c.__virtual) {
            for (var i = 0; i < c.__wxSlotChildren.length; i++) {
              removeNewChild(c.__wxSlotChildren[i]);
            }
          } else {
            var danglingDom = c.__domElement;
            if (danglingDom && danglingDom.parentNode) danglingDom.parentNode.removeChild(danglingDom);
          }
        };

        removeNewChild(newChild);
      }
    }
  };

  var insertChildInCustom = function (elem, newChild, oldChild, removal, newPosIndex) {
    var contentElement = elem;

    if (contentElement instanceof Element) {
      while (contentElement.__virtual) {
        var contentElementParent = contentElement.__wxSlotParent;

        if (!contentElementParent) {
          contentElement = null;
          break;
        }

        if (newChild && !oldChild) {
          var indexInParent = contentElementParent.__wxSlotChildren.indexOf(contentElement);

          oldChild = contentElementParent.__wxSlotChildren[indexInParent + 1];
        }

        contentElement = contentElementParent;
      }

      if (contentElement instanceof Element) {
        contentElement = contentElement.__domElement;
      }
    }

    if (contentElement) {
      if (newChild && !oldChild && !newChild.__virtual) {
        contentElement.appendChild(newChild.__domElement);
      } else {
        var multiNewChildDom = elem.__backendContext.createElement('fragment', '');

        var oldChildDomCount = 0;
        var insertPos = -1;

        if (newChild) {
          var addChildToFrag = function (c) {
            if (c.__virtual) {
              for (var i = 0; i < c.__wxSlotChildren.length; i++) {
                var cc = c.__wxSlotChildren[i];
                addChildToFrag(cc);
              }
            } else {
              multiNewChildDom.appendChild(c.__domElement);
            }
          };

          addChildToFrag(newChild);
        }

        if (oldChild) {
          var oldChildParent = elem;
          var findFromIndex = 0;
          var firstOldChild = null;

          if (removal) {
            var sumNonVirtualChild = function (c) {
              if (c.__virtual) {
                var ret = 0;

                for (var i = 0; i < c.__wxSlotChildren.length; i++) {
                  ret += sumNonVirtualChild(c.__wxSlotChildren[i]);
                }

                return ret;
              }

              if (!firstOldChild) firstOldChild = c;
              return 1;
            };

            oldChildDomCount = sumNonVirtualChild(oldChild);
            findFromIndex = newPosIndex + 1;
          } else {
            oldChildParent = oldChild.__wxSlotParent;
            if (oldChild === newChild) findFromIndex = newPosIndex;else findFromIndex = oldChildParent.__wxSlotChildren.indexOf(oldChild);
          }

          if (newChild && !firstOldChild) {
            var findFirstNonVirtual = function (parent, index) {
              for (; index < parent.__wxSlotChildren.length; index++) {
                var c = parent.__wxSlotChildren[index];

                if (c.__virtual) {
                  var ret = findFirstNonVirtual(c, 0);
                  if (ret) return ret;
                } else {
                  return c;
                }
              }

              return null;
            };

            for (var curParent = oldChildParent;; curParent = curParent.__wxSlotParent) {
              firstOldChild = findFirstNonVirtual(curParent, findFromIndex);
              if (firstOldChild || !curParent.__virtual) break;
              findFromIndex = curParent.__wxSlotParent.__wxSlotChildren.indexOf(curParent) + 1;
            }
          }

          if (firstOldChild) {
            insertPos = contentElement.findChildPosition(firstOldChild.__domElement);
          }
        }

        contentElement.splice(insertPos, oldChildDomCount, multiNewChildDom);
        multiNewChildDom.release();
      }
    } else {
      if (newChild && newChild.__wxSlotParent) {
        var emptyFragment = newChild.__backendContext.createElement('fragment', '');

        var removeNewChild = function (c) {
          if (c.__virtual) {
            for (var i = 0; i < c.__wxSlotChildren.length; i++) {
              removeNewChild(c.__wxSlotChildren[i]);
            }
          } else {
            var danglingDom = c.__domElement;
            emptyFragment.appendChild(danglingDom);
          }
        };

        removeNewChild(newChild);
        emptyFragment.release();
      }
    }
  };

  var insertChildInSlot = function (slot, newChild, oldChild, removal, updateSlotChildren, updateSlotChildrenInOldPos, newPosIndex) {
    if (removal) oldChild.__wxSlotParent = null;
    if (updateSlotChildren) newPosIndex = slot.__wxSlotChildren.indexOf(oldChild);

    if (newChild) {
      var oldPos = newChild.__wxSlotParent;
      newChild.__wxSlotParent = slot;

      if (oldPos && updateSlotChildrenInOldPos) {
        var oldPosIndex = oldPos.__wxSlotChildren.indexOf(newChild);

        oldPos.__wxSlotChildren.splice(oldPosIndex, 1);

        if (oldPos === slot && oldPosIndex < newPosIndex) newPosIndex--;
      }
    }

    var documentExtracted = false;
    if (newChild && newChild.__backendExtracted) documentExtracted = true;else if (oldChild && oldChild.__backendExtracted) documentExtracted = true;

    if (globalOptions.documentBackend === 'dom') {
      if (!documentExtracted) insertChildInDom(slot, newChild, oldChild, removal, newPosIndex);
    } else if (globalOptions.documentBackend === 'custom' && slot.__backendContext) {
      insertChildInCustom(slot, newChild, oldChild, removal, newPosIndex);
    }

    if (globalOptions.writeExtraInfoToAttr && globalOptions.documentBackend === 'dom') {
      if (removal && oldChild instanceof Element && oldChild.__domElement) oldChild.__domElement.removeAttribute('exparser:info-in-slot-of');

      if (newChild instanceof Element && newChild.__domElement) {
        if (slot.__slotName !== undefined && slot.ownerShadowRoot) {
          newChild.__domElement.setAttribute('exparser:info-in-slot-of', slot.ownerShadowRoot.__wxHost.__componentInstanceId);
        } else {
          newChild.__domElement.removeAttribute('exparser:info-in-slot-of');
        }
      }
    }

    if (updateSlotChildren) {
      if (newPosIndex === -1) newPosIndex = slot.__wxSlotChildren.length;

      if (newChild) {
        slot.__wxSlotChildren.splice(newPosIndex, removal ? 1 : 0, newChild);
      } else {
        slot.__wxSlotChildren.splice(newPosIndex, removal ? 1 : 0);
      }
    }
  };

  var dfsInherit = function (parent, itemCb) {
    var children = parent.childNodes;

    for (var i = 0; i < children.length; i++) {
      var child = children[i];
      itemCb(parent, child);

      if (child.__inheritSlots) {
        dfsInherit(child, itemCb);
      }
    }
  };

  var insertChildToElement = Element.insertChildToElement = function (parent, newChild, newPosIndex, removal) {
    if (parent.__slotName !== undefined) return false;
    var oldChild = newPosIndex >= 0 ? parent.childNodes[newPosIndex] : null;

    if (removal && newChild === oldChild) {
      removal = false;
    }

    var oldPos = null;
    var newChildSlot = parent;
    var oldChildSlot = parent;

    if (newChild) {
      oldPos = newChild.parentNode;
      newChild.parentNode = parent;
      var subtreeCountChanges = parent.__subtreeObserversCount;

      if (oldPos) {
        var oldPosIndex = oldPos.childNodes.indexOf(newChild);
        oldPos.childNodes.splice(oldPosIndex, 1);
        if (oldPos === parent && oldPosIndex < newPosIndex) newPosIndex--;
        subtreeCountChanges -= oldPos.__subtreeObserversCount;
      }

      if (subtreeCountChanges) Observer._updateSubtreeCaches(newChild, subtreeCountChanges);
    }

    var slotParent = parent;

    while (slotParent && slotParent.__inheritSlots) {
      slotParent = slotParent.parentNode;
    }

    var isSingle = !slotParent || !slotParent.__slots;
    var hasSeparateSlots = !isSingle || parent.__inheritSlots;
    var oldPosSlotParent = oldPos;

    while (oldPosSlotParent && oldPosSlotParent.__inheritSlots) {
      oldPosSlotParent = oldPosSlotParent.parentNode;
    }

    var isOldPosSingle = !oldPosSlotParent || !oldPosSlotParent.__slots;
    var hasOldPosSeparateSlots = !isOldPosSingle || oldPos && oldPos.__inheritSlots;

    if (isSingle) {
      if (parent.__singleSlot !== undefined) {
        newChildSlot = oldChildSlot = parent.__singleSlot;

        if (FuncArr.hasGlobalWarningListeners()) {
          if (!newChildSlot) {
            FuncArr.triggerWarning('slot is not found.');
          }
        }
      }

      if (newChildSlot) insertChildInSlot(newChildSlot, newChild, oldChild, removal, hasSeparateSlots, hasOldPosSeparateSlots, newPosIndex);else if (newChild.__wxSlotParent) insertChildInSlot(newChild.__wxSlotParent, null, newChild, true, hasOldPosSeparateSlots, false);

      if (newChild && !isOldPosSingle && newChild.__inheritSlots) {
        dfsInherit(newChild, function (parent, newChild) {
          insertChildInSlot(parent, newChild, null, false, true, true, -1);
        });
      }
    } else {
      var slotName = '';

      if (newChild) {
        slotName = newChild.__slot || '';
        newChildSlot = slotParent.__slots[slotName] || null;

        if (FuncArr.hasGlobalWarningListeners()) {
          if (!newChildSlot) {
            FuncArr.triggerWarning('slot "' + slotName + '" is not found.');
          }
        }
      }

      if (oldChild) oldChildSlot = slotParent.__slots[oldChild.__slot || ''] || null;
      if (oldChild && oldChildSlot && removal) insertChildInSlot(oldChildSlot, null, oldChild, removal, true, false);

      if (newChild) {
        if (!newChildSlot) {
          if (newChild.__wxSlotParent) insertChildInSlot(newChild.__wxSlotParent, null, newChild, true, hasOldPosSeparateSlots, false);
        } else {
          var relativeChild = oldChild ? findSlotRelativeChild(slotParent, oldChild, slotName, !removal) : findSlotRelativeChild(slotParent, parent, slotName, false);
          insertChildInSlot(newChildSlot, newChild, relativeChild, false, true, hasOldPosSeparateSlots);
        }
      }

      if (oldChild && removal && oldChild.__inheritSlots) {
        dfsInherit(oldChild, function (parent, oldChild) {
          insertChildInSlot(parent, oldChild, null, false, true, true, -1);
        });
      }

      if (newChild && newChild.__inheritSlots) {
        dfsInherit(newChild, function (newChildParent, newChild) {
          var slotName = newChild.__slot || '';
          var newChildSlot = slotParent.__slots[slotName] || null;

          if (!newChildSlot) {
            if (FuncArr.hasGlobalWarningListeners()) {
              FuncArr.triggerWarning('slot "' + slotName + '" is not found.');
            }

            if (newChild.__wxSlotParent) insertChildInSlot(newChild.__wxSlotParent, null, newChild, true, true, false);
          } else {
            var relativeChild = oldChild ? findSlotRelativeChild(slotParent, oldChild, slotName, !removal) : findSlotRelativeChild(slotParent, parent, slotName, false);
            insertChildInSlot(newChildSlot, newChild, relativeChild, false, true, true);
          }
        });
      }
    }

    if (removal) {
      if (parent.__subtreeObserversCount) Observer._updateSubtreeCaches(oldChild, -parent.__subtreeObserversCount);
      oldChild.parentNode = null;
    }

    if (newPosIndex === -1) newPosIndex = parent.childNodes.length;

    if (newChild) {
      parent.childNodes.splice(newPosIndex, removal ? 1 : 0, newChild);
    } else {
      parent.childNodes.splice(newPosIndex, removal ? 1 : 0);
    }

    if (parent.ownerShadowRoot) {
      if (removal) {
        checkSlotDirty(oldChild, parent.ownerShadowRoot);
      }

      if (newChild) {
        checkSlotDirty(newChild, parent.ownerShadowRoot);
      }

      updateSlotCache(parent.ownerShadowRoot);
    }

    if (removal) {
      checkAndCallDetached(oldChild);
      checkChildObservers(parent, 'remove', oldChild);
    }

    if (newChild) {
      if (oldPos) {
        checkAndCallMoved(newChild);
      } else {
        checkAndCallAttached(newChild);
      }

      if (oldPos === parent) {
        checkChildObservers(parent, 'move', newChild);
      } else {
        if (oldPos) {
          checkChildObservers(oldPos, 'remove', newChild);
        }

        checkChildObservers(parent, 'add', newChild);
      }
    }

    return true;
  };

  var insertChild = function (parent, newChild, oldChild, removal) {
    if (newChild && parent.ownerShadowRoot !== newChild.ownerShadowRoot) {
      throw new Error('Cannot move the node from one shadow tree to another shadow tree.');
    }

    var ret = removal ? oldChild : newChild;
    var newPosIndex = -1;

    if (oldChild) {
      newPosIndex = parent.childNodes.indexOf(oldChild);
      if (newPosIndex < 0) return null;
    }

    var success = insertChildToElement(parent, newChild, newPosIndex, removal);
    if (success) return ret;
    return null;
  };

  Element._attachShadowRoot = function (shadowRoot) {
    var elem = shadowRoot.__wxHost;
    elem.__wxSlotChildren = [shadowRoot];
    insertChildInSlot(elem, shadowRoot, null, false, false, 0);
    shadowRoot.__hostAssociated = true;
    updateSlotCache(shadowRoot);
  };

  Element.appendChild = function (elem, child) {
    return insertChild(elem, child, null, false);
  };

  Element.insertBefore = function (elem, child, before) {
    return insertChild(elem, child, before, false);
  };

  Element.removeChild = function (elem, child) {
    return insertChild(elem, null, child, true);
  };

  Element.replaceChild = function (elem, child, oldChild) {
    return insertChild(elem, child, oldChild, true);
  };

  Element.prototype.appendChild = function (child) {
    return insertChild(this, child, null, false);
  };

  Element.prototype.insertBefore = function (child, before) {
    return insertChild(this, child, before, false);
  };

  Element.prototype.removeChild = function (child) {
    return insertChild(this, null, child, true);
  };

  Element.prototype.replaceChild = function (child, oldChild) {
    return insertChild(this, child, oldChild, true);
  };

  var extractBackend = function (element) {
    var shouldTrySlotChildren = true;
    var shouldTryChildren = true;

    if (element instanceof Element) {
      element.__backendExtracted = true;
      element.$$ = element.__domElement = null;
      shouldTryChildren = false;
    } else if (element instanceof TextNode) {
      element.__backendExtracted = true;
      element.$$ = element.__domElement = null;
      shouldTrySlotChildren = false;
      shouldTryChildren = false;
    }

    if (shouldTrySlotChildren && element.__wxSlotChildren) {
      for (var i = 0; i < element.__wxSlotChildren.length; i++) {
        var child = element.__wxSlotChildren[i];
        extractBackend(child);
      }
    } else if (shouldTryChildren && element.childNodes) {
      for (var j = 0; j < element.childNodes.length; j++) {
        extractBackend(element.childNodes[j]);
      }
    }
  };

  Element.extractBackend = function (element) {
    if (element.__backendExtracted) return null;
    var ret = element.__domElement;
    extractBackend(element);
    return ret;
  };

  var compareElementInjection = function (element, injected) {
    if (!injected) {
      var newElement = FakeDomElement.toElement(element.__domElement);
      element.$$ = element.__domElement = newElement;
      return newElement;
    }

    if (element.__domElement.tagName.toUpperCase() === injected.tagName) {
      element.$$ = element.__domElement = injected;
    } else {
      var replacer = FakeDomElement.toElement(element.__domElement);
      element.$$ = element.__domElement = replacer;
      injected.parentNode.replaceChild(replacer, injected);
    }

    return null;
  };

  var compareTextNodeInjection = function (element, injected) {
    if (!injected) {
      var textNode = document.createTextNode(element.textContent);
      element.$$ = element.__domElement = textNode;
      return textNode;
    }

    if (typeof injected.textContent !== 'undefined') {
      injected.textContent = element.textContent;
      element.$$ = element.__domElement = injected;
    } else {
      var replacer = document.createTextNode(element.textContent);
      element.$$ = element.__domElement = replacer;
      injected.parentNode.replaceChild(replacer, injected);
    }

    return null;
  };

  var compareDomInjection = function (domElement, injected) {
    if (!injected) return domElement;

    while (domElement.childNodes && injected.childNodes && injected.childNodes.length) {
      domElement.appendChild(injected.childNodes[0]);
    }

    injected.parentNode.replaceChild(domElement, injected);
    return null;
  };

  var injectBackend = function (element, domParent, domChildIndex) {
    var isVirtual = element instanceof Element && element.__virtual;
    var domElement = domParent ? domParent.childNodes[domChildIndex] : undefined;
    var shouldTrySlotChildren = true;
    var shouldTryChildren = true;
    var generatedElement = null;

    if (element instanceof Element) {
      element.__backendExtracted = false;
      if (!isVirtual) generatedElement = compareElementInjection(element, domElement);
      shouldTryChildren = false;
    } else if (element instanceof TextNode) {
      element.__backendExtracted = false;
      generatedElement = compareTextNodeInjection(element, domElement);
      shouldTrySlotChildren = false;
      shouldTryChildren = false;
    } else {
      var frag = document.createDocumentFragment();
      frag.__wxSlotChildren = element.__wxSlotChildren;

      if (domElement && domElement.childNodes) {
        while (domElement.childNodes.length) {
          frag.appendChild(domElement.childNodes[0]);
        }
      }

      generatedElement = compareDomInjection(element, domElement);
      element = frag;
    }

    if (generatedElement) {
      domParent.appendChild(generatedElement);
      domElement = generatedElement;
    } else {
      domElement = domParent ? domParent.childNodes[domChildIndex] : undefined;
    }

    var newDomChildIndex = 0;

    if (shouldTrySlotChildren && element.__wxSlotChildren) {
      for (var i = 0; i < element.__wxSlotChildren.length; i++) {
        var child = element.__wxSlotChildren[i];

        if (isVirtual) {
          domChildIndex = injectBackend(child, domParent, domChildIndex);
        } else if (child.asShadowRoot) {
          for (var ci = 0; ci < child.asShadowRoot.childNodes.length; ci++) {
            newDomChildIndex = injectBackend(child.asShadowRoot.childNodes[ci], domElement, newDomChildIndex);
          }

          element.shadowRoot = domElement;
          domElement.__wxHost = element;
          element.__wxSlotChildren[0] = domElement;
          domElement.__wxSlotParent = element;
          if (element.__singleSlot === child) element.__singleSlot = domElement;
        } else {
          newDomChildIndex = injectBackend(child, domElement, newDomChildIndex);
        }
      }
    } else if (shouldTryChildren && element.childNodes) {
      for (var j = 0; j < element.childNodes.length; j++) {
        newDomChildIndex = injectBackend(element.childNodes[j], domElement, newDomChildIndex);
      }
    }

    if (isVirtual) return domChildIndex;

    while (domElement.childNodes.length > newDomChildIndex) {
      domElement.removeChild(domElement.childNodes[newDomChildIndex]);
    }

    return domChildIndex + 1;
  };

  Element.injectBackend = function (element, domElement) {
    if (!element.__backendExtracted) return;
    var frag = document.createDocumentFragment();
    frag.appendChild(domElement);
    injectBackend(element, frag, 0);
  };

  Element.prototype.triggerEvent = function (evName, detail, options) {
    eventSystem.triggerEvent(this, evName, detail, options);
  };

  Element.prototype.dispatchEvent = function (eventObj) {
    eventSystem.dispatchEvent(this, eventObj);
  };

  Element.prototype.addListener = function (evName, func, options) {
    eventSystem.addListenerToElement(this, evName, func, options);
  };

  Element.prototype.removeListener = function (evName, func, options) {
    eventSystem.removeListenerFromElement(this, evName, func, options);
  };

  Element.setMethodCaller = function (elem, caller) {
    elem.__methodCaller = caller;
  };

  Element.getMethodCaller = function (elem) {
    return elem.__methodCaller;
  };

  Element.prototype.getAttribute = function (name) {
    if (!this.__attributes) return null;
    var value = this.__attributes[name];
    return value === undefined ? null : value;
  };

  Element.prototype.setAttribute = function (name, value) {
    if (!this.__attributes) this.__attributes = Object.create(null);
    if (this.__attributes[name] === value) return;
    this.__attributes[name] = value;

    if (this.__domElement && this.__domElement.setAttribute) {
      this.__domElement.setAttribute(name, value);
    }
  };

  Element.prototype.setStyle = function (value) {
    if (this.__domElement && globalOptions.documentBackend === 'custom') {
      this.__domElement.setStyle(value);
    }
  };

  Element.prototype.removeAttribute = function (name) {
    if (!this.__attributes) return;
    delete this.__attributes[name];

    if (this.__domElement && this.__domElement.removeAttribute) {
      this.__domElement.removeAttribute(name);
    }
  };

  Element.prototype.getBoundingClientRect = function () {
    if (this.__domElement) {
      return this.__domElement.getBoundingClientRect();
    }

    return {
      left: 0,
      top: 0,
      width: 0,
      height: 0
    };
  };

  Element.prototype.setMark = function (name, value) {
    if (!this.__marks) this.__marks = {};
    this.__marks[name] = value;
  };

  Element.prototype.collectMarks = function () {
    var mark = {};

    for (var current = this; current; current = current.parentNode) {
      if (current.__marks) {
        for (var k in current.__marks) {
          if (hasOwnProperty.call(mark, k)) continue;
          mark[k] = current.__marks[k];
        }
      }
    }

    return mark;
  };

  var setNodeStyle = Element.prototype.setNodeStyle = function (styleSegment, index) {
    if (this.__styleSegments[index || 0] === styleSegment) return;
    this.__styleSegments[index || 0] = styleSegment;

    var style = this.__styleSegments.join(';');

    if (this.__domElement && this.ownerShadowRoot && this.ownerShadowRoot.__childrenPropsFilter) {
      var childrenPropsFilter = this.ownerShadowRoot.__childrenPropsFilter;
      var propFilter = childrenPropsFilter.style;

      if (typeof propFilter === 'function') {
        if (globalOptions.documentBackend === 'dom') {
          this.__domElement.setAttribute('style', propFilter.call(this, style));
        } else if (globalOptions.documentBackend === 'custom') {
          this.__domElement.setStyle(propFilter.call(this, style));
        }

        return;
      }
    }

    if (this.__domElement) {
      if (globalOptions.documentBackend === 'dom') {
        this.__domElement.setAttribute('style', style);
      } else if (globalOptions.documentBackend === 'custom') {
        this.__domElement.setStyle(style);
      }
    }

    if (this.__propObservers && !this.__propObservers.empty || this.__subtreeObserversCount) {
      Observer._callObservers(this, '__propObservers', {
        type: 'properties',
        target: this,
        propertyName: 'style'
      });
    }
  };

  Element.replaceDocumentElement = function (elem, domElement, index) {
    if (elem.__attached) return;

    if (globalOptions.documentBackend === 'dom') {
      domElement.parentNode.replaceChild(elem.__domElement, domElement);
    } else if (globalOptions.documentBackend === 'custom') {
      domElement.replaceChild(elem.__domElement, index);
    }

    checkAndCallAttached(elem);
  };

  Element.pretendAttached = function (elem) {
    if (elem.__attached) return;
    checkAndCallAttached(elem);
  };

  Element.pretendDetached = function (elem) {
    if (!elem.__attached) return;
    checkAndCallDetached(elem);
  };

  Element.isAttached = function (elem) {
    return elem.__attached;
  };

  Element.setSlotName = function (elem, name) {
    name = name == null ? '' : String(name);

    if (elem.__slotName === undefined) {
      if (elem.childNodes.length !== 0 || elem.__wxSlotChildren.length !== 0) return;
      elem.__wxSlotChildren = [];
    }

    elem.__slotName = name;

    if (elem.ownerShadowRoot) {
      elem.ownerShadowRoot.__slotCacheDirty = true;
      updateSlotCache(elem.ownerShadowRoot);
    }
  };

  Element.setInheritSlots = function (elem) {
    if (elem.__singleSlot || elem.__slots || elem.__wxSlotChildren.length) return;
    elem.__wxSlotChildren = [];
    elem.__inheritSlots = true;
  };

  Element.getInheritSlots = function (elem) {
    return elem.__inheritSlots;
  };

  var parseSelectorSegment = function (seg, relation) {
    var matches = seg.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);
    if (!matches) return null;
    var id = matches[1].slice(1);
    var classes = matches[2].split('.');
    classes.shift();
    if (!id && !classes.length) return null;
    return {
      id: id,
      classes: classes,
      relation: relation || ''
    };
  };

  var parseSelector = Element.parseSelector = function (str) {
    var union = String(str || '').split(',');
    var parsedUnion = [];
    var crossShadow = false;

    for (var i = 0; i < union.length; i++) {
      var segments = union[i].split(/( |\t|>+)/g);
      var parsedSegs = [];
      var relation = '';
      var j = 0;

      for (; j < segments.length; j++) {
        var seg = segments[j];
        if (!seg || seg === ' ' || seg === '\t') continue;

        if (seg[0] === '>') {
          if (relation !== '') break;
          relation = seg;
          if (seg === '>>>') crossShadow = true;
          continue;
        }

        var parsedSeg = parseSelectorSegment(seg, relation);
        relation = '';
        if (!parsedSeg) break;
        parsedSegs.push(parsedSeg);
      }

      if (j !== segments.length) continue;
      if (parsedSegs.length) parsedUnion.push(parsedSegs);
    }

    if (!parsedUnion.length) return null;
    return {
      crossShadow: crossShadow,
      union: parsedUnion
    };
  };

  var testSelectorSegment = function (root, node, segments, offset, relation) {
    if (node === root) return false;
    var segment = segments[offset];
    var match = true;
    if (segment.id && segment.id !== node.__id) match = false;
    var classes = segment.classes;

    for (var i = 0; match && i < classes.length; i++) {
      if (!node.classList.contains(classes[i])) match = false;
    }

    if (!match && relation === '>') return false;
    var nextNode = node;

    if (match && offset === 0) {
      if (root === null) return true;

      for (nextNode = nextNode.parentNode; nextNode; nextNode = nextNode.parentNode) {
        if (nextNode === root) return true;
      }

      if (relation !== '>>>') return false;
      nextNode = node;
      match = false;
    }

    var nextRelation = match ? segment.relation : relation;

    do {
      if (!nextNode.parentNode) {
        if (nextRelation === '>>>') {
          nextNode = nextNode.__wxHost;
        } else if (relation === '>>>') {
          match = false;
          nextNode = nextNode.__wxHost;
        } else {
          nextNode = null;
        }
      } else {
        nextNode = nextNode.parentNode;
      }

      if (nextNode === root) nextNode = null;
    } while (nextNode && nextNode.__virtual);

    if (!nextNode) return false;

    if (match) {
      var matchRes = testSelectorSegment(root, nextNode, segments, offset - 1, nextRelation);
      if (matchRes) return true;
      if (relation !== '>>>') return false;
    }

    return testSelectorSegment(root, nextNode, segments, offset, relation);
  };

  var testSelector = function (parsedSelector, root, node) {
    if (node.__virtual) return false;
    var union = parsedSelector.union;

    for (var i = 0; i < union.length; i++) {
      var segments = union[i];
      if (testSelectorSegment(root, node, segments, segments.length - 1, '>')) return true;
    }

    return false;
  };

  var testSelectorOnRoot = function (ret, parsedSelector, root, node, findOne) {
    if (testSelector(parsedSelector, root, node)) {
      ret.push(node);
      if (findOne) return true;
    }

    if (node.shadowRoot && parsedSelector.crossShadow) {
      var parentDomain = node.ownerShadowRoot ? node.ownerShadowRoot.__wxHost.__componentOptions.domain : globalOptions.domain;
      var childDomain = node.__componentOptions.domain;

      if (parentDomain === childDomain && testSelectorOnRoot(ret, parsedSelector, root, node.shadowRoot, findOne)) {
        if (findOne) return true;
      }
    }

    var children = node.childNodes;

    for (var i = 0; i < children.length; i++) {
      if (children[i] instanceof Element) {
        if (testSelectorOnRoot(ret, parsedSelector, root, children[i], findOne)) {
          if (findOne) return true;
        }
      }
    }

    return false;
  };

  Element.prototype.querySelector = function (selectorStr) {
    var parsedSelector = typeof selectorStr === 'object' ? selectorStr : parseSelector(selectorStr);
    if (!parsedSelector) return null;
    var ret = [];
    testSelectorOnRoot(ret, parsedSelector, this, this, true);
    return ret[0] || null;
  };

  Element.prototype.querySelectorAll = function (selectorStr) {
    var parsedSelector = typeof selectorStr === 'object' ? selectorStr : parseSelector(selectorStr);
    var ret = [];
    if (!parsedSelector) return [];
    testSelectorOnRoot(ret, parsedSelector, this, this, false);
    return ret;
  };

  Element.matchSelector = function (selectorStr, targetNode) {
    var parsedSelector = typeof selectorStr === 'object' ? selectorStr : parseSelector(selectorStr);
    if (!parsedSelector) return false;
    return testSelector(parsedSelector, null, targetNode);
  };

  Element.prototype.matchSelector = function (selectorStr, targetNode) {
    var parsedSelector = typeof selectorStr === 'object' ? selectorStr : parseSelector(selectorStr);
    if (!parsedSelector) return false;
    return testSelector(parsedSelector, this, targetNode);
  };

  Element.prototype.getBackendContext = function () {
    if (!this.__backendContext) return globalOptions.customContext;
    return this.__backendContext;
  };

  module.exports = Element;
}, function (module, exports, __nested_webpack_require_132629__) {
  var FuncArr = __nested_webpack_require_132629__(3);

  var Observer = function ExparserObserver() {};

  Observer.prototype = Object.create(Object.prototype, {
    constructor: {
      value: Observer,
      writable: true,
      configurable: true
    }
  });

  Observer.create = function (cb) {
    var obs = new Observer();
    obs._cb = cb;

    obs._noSubtreeCb = function (e) {
      if (e.target === this) cb.call(this, e);
    };

    obs._binded = [];
    return obs;
  };

  Observer.prototype.observe = function (elem, options) {
    options = options || {};
    var count = 0;
    var cb = options.subtree ? this._cb : this._noSubtreeCb;

    if (options.properties) {
      if (!elem.__propObservers) {
        elem.__propObservers = FuncArr.create('Observer Callback');
      }

      this._binded.push({
        funcArr: elem.__propObservers,
        id: elem.__propObservers.add(cb),
        subtree: options.subtree ? elem : null
      });

      count++;
    }

    if (options.childList) {
      if (!elem.__childObservers) {
        elem.__childObservers = FuncArr.create('Observer Callback');
      }

      this._binded.push({
        funcArr: elem.__childObservers,
        id: elem.__childObservers.add(cb),
        subtree: options.subtree ? elem : null
      });

      count++;
    }

    if (options.characterData) {
      if (!elem.__textObservers) {
        elem.__textObservers = FuncArr.create('Observer Callback');
      }

      this._binded.push({
        funcArr: elem.__textObservers,
        id: elem.__textObservers.add(cb),
        subtree: options.subtree ? elem : null
      });

      count++;
    }

    if (options.subtree) {
      updateSubtreeCaches(elem, count);
    }

    if (options.attachStatus) {
      if (!elem.__attachedObservers) {
        elem.__attachedObservers = FuncArr.create('Observer Callback');
      }

      this._binded.push({
        funcArr: elem.__attachedObservers,
        id: elem.__attachedObservers.add(cb),
        subtree: null
      });
    }
  };

  Observer.prototype.disconnect = function () {
    var arr = this._binded;

    for (var i = 0; i < arr.length; i++) {
      var info = arr[i];
      info.funcArr.remove(info.id);

      if (info.subtree) {
        updateSubtreeCaches(info.subtree, -1);
      }
    }

    this._binded = [];
  };

  var updateSubtreeCaches = Observer._updateSubtreeCaches = function (node, count) {
    node.__subtreeObserversCount += count;
    var child = node.childNodes;
    if (!child) return;

    for (var i = 0; i < child.length; i++) {
      updateSubtreeCaches(child[i], count);
    }
  };

  Observer._callObservers = function (node, typeStr, eventObj) {
    do {
      if (node[typeStr]) node[typeStr].call(node, [eventObj]);
      node = node.parentNode;
    } while (node && node.__subtreeObserversCount);
  };

  Observer._callSingleObserver = function (node, typeStr, eventObj) {
    if (node[typeStr]) node[typeStr].call(node, [eventObj]);
  };

  module.exports = Observer;
}, function (module, exports, __nested_webpack_require_135677__) {
  var globalOptions = __nested_webpack_require_135677__(4);

  var ClassList = function ExparserClassList() {};

  var CLASS_NAME_REG_EXP = /(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/ig;
  ClassList._nextStyleScopeId = 2;
  ClassList._styleScopeIdMap = new Map();

  ClassList._getStyleScopeId = function (classPrefix) {
    if (!classPrefix) return 1;

    if (!ClassList._styleScopeIdMap.has(classPrefix)) {
      ClassList._styleScopeIdMap.set(classPrefix, ClassList._nextStyleScopeId++);
    }

    return ClassList._styleScopeIdMap.get(classPrefix);
  };

  var Element = null;

  ClassList._setElementSystem = function (es) {
    Element = es;
    ClassList._setElementSystem = null;
  };

  var hasOwnProperty = Object.prototype.hasOwnProperty;

  ClassList.create = function (elem, externalNameAlias) {
    var cl = new ClassList();
    cl._prefix = '';
    cl._styleScope = 0;
    cl._addOriginalClass = false;
    cl._alias = externalNameAlias;
    cl._resolvedAlias = {};

    for (var k in externalNameAlias) {
      cl._resolvedAlias[k] = [];
    }

    cl._rawNames = [];
    cl._elem = elem;
    cl._owner = null;
    cl._prevGenNames = '';
    cl._prevGenClasses = [];
    return cl;
  };

  var _complete = function (classes) {
    for (var i = 0; i < classes.length; ++i) {
      if (classes[i].length < 3) classes[i].push(ClassList._getStyleScopeId(classes[i][PREFIX]));

      if (classes[i].length < 4) {
        if (classes[i][PREFIX]) classes[i].push(classes[i][PREFIX] + '--' + classes[i][NAME]);else classes[i].push(classes[i][NAME]);
      }
    }
  };

  var PREFIX = 0;
  var NAME = 1;
  var SCOPE = 2;
  var COMPOSED = 3;

  var collectClasses = function (cl) {
    var ret = [];
    var arr = cl._rawNames;
    var prefix = cl._prefix;
    var alias = cl._owner ? cl._owner._resolvedAlias : [];
    var addOriginalClass = cl._addOriginalClass;

    for (var i = 0; i < arr.length; i++) {
      var name = arr[i];

      if (alias && hasOwnProperty.call(alias, name)) {
        ret.push(...alias[name]);
      } else if (name[0] === '~') {
        ret.push(['', name.slice(1)]);
      } else if (name[0] === '^') {
        name = name.slice(1);
        var owner = cl._owner || null;

        while (name[0] === '^') {
          name = name.slice(1);
          owner = owner ? owner._owner : null;
        }

        var ownerPrefix = owner ? owner._prefix : '';
        ret.push([ownerPrefix, name]);
      } else {
        if (addOriginalClass) ret.push(['', name]);
        ret.push([prefix, name]);
      }
    }

    _complete(ret);

    return ret;
  };

  var composeClasses = function (classes) {
    return classes.map(function (c) {
      return c[COMPOSED];
    }).join(' ');
  };

  var toClassName = function (cl) {
    return composeClasses(collectClasses(cl));
  };

  var updateToDom = function (cl) {
    var domElem = cl._elem.__domElement;

    if (domElem) {
      var classes = collectClasses(cl);

      if (globalOptions.documentBackend === 'dom') {
        var names = composeClasses(classes);
        if (names) domElem.setAttribute('class', names);else domElem.removeAttribute('class');
      } else if (globalOptions.documentBackend === 'custom') {
        if (typeof domElem.addClass === 'function') {
          var {
            add: add,
            remove: remove
          } = diff(cl._prevGenClasses, classes);
          add.forEach(function (c) {
            return domElem.addClass(c[0], c[1]);
          });
          remove.forEach(function (c) {
            return domElem.removeClass(c[0], c[1]);
          });
          cl._prevGenClasses = classes;
        } else {
          var names = composeClasses(classes);
          if (cl._prevGenNames === names) return;
          cl._prevGenNames = names;
          domElem.setClass(names);
        }
      }
    }
  };

  var diff = function (oldList, newList) {
    var add = [],
        remove = [];
    newList.sort(function (a, b) {
      return a[COMPOSED] === b[COMPOSED] ? 0 : a[COMPOSED] < b[COMPOSED] ? -1 : 1;
    });

    for (var i = 0, j = 0; i < newList.length || j < oldList.length;) {
      if (i >= newList.length) {
        remove.push([oldList[j][NAME], oldList[j][SCOPE]]);
        ++j;
        continue;
      }

      if (j >= oldList.length) {
        add.push([newList[i][NAME], newList[i][SCOPE]]);
        ++i;
        continue;
      }

      if (newList[i][COMPOSED] === oldList[j][COMPOSED]) {
        ++i;
        ++j;
        continue;
      }

      if (newList[i][COMPOSED] < oldList[j][COMPOSED]) {
        add.push([newList[i][NAME], newList[i][SCOPE]]);
        ++i;
        continue;
      }

      remove.push([oldList[j][NAME], oldList[j][SCOPE]]);
      ++j;
    }

    return {
      add: add,
      remove: remove
    };
  };

  var classChanged = function (oldList, newList) {
    var diffResult = diff(oldList, newList);
    return diffResult.add.length + diffResult.remove.length === 0;
  };

  var callClassListUpdate = function (node) {
    var cl = node.classList;

    if (cl instanceof ClassList) {
      if (cl._alias) checkAndUpdateAlias(cl);
      updateToDom(cl);
    }

    var children = node.childNodes;

    for (var i = 0; i < children.length; i++) {
      if (children[i] instanceof Element) callClassListUpdate(children[i]);
    }
  };

  var checkAndUpdateAlias = function (cl) {
    var owner = cl._owner;
    if (!owner) return false;
    var changed = false;

    for (var name in cl._alias) {
      var slices = cl._alias[name];
      var resolved = [];

      if (slices) {
        for (var i = 0; i < slices.length; i++) {
          var slice = slices[i];

          if (hasOwnProperty.call(owner._alias, slice)) {
            var resolvedTarget = owner._resolvedAlias[slice];
            resolved.push(...resolvedTarget);
          } else {
            resolved.push([cl._prefix, slice]);
          }
        }
      }

      _complete(resolved);

      changed = classChanged(cl._resolvedAlias[name], resolved);
      if (changed) cl._resolvedAlias[name] = resolved;
    }

    if (changed && cl._elem.shadowRoot instanceof Element) callClassListUpdate(cl._elem.shadowRoot);
  };

  ClassList.prototype.toggle = function (name, force) {
    var index = this._rawNames.indexOf(name);

    if (force === undefined) {
      if (index < 0) force = true;else force = false;
    }

    if (force) {
      if (index < 0) {
        this._rawNames.push(name);

        updateToDom(this);
      }
    } else {
      if (index >= 0) {
        this._rawNames.splice(index, 1);

        updateToDom(this);
      }
    }
  };

  ClassList.prototype.contains = function (name) {
    var rawNames = this._rawNames;

    for (var i = 0; i < rawNames.length; i++) {
      var rawName = rawNames[i];

      if (rawName[0] === '~') {
        if (rawName.slice(1) === name) return true;
      } else if (rawName[0] === '^') {
        var ri = 1;

        while (rawName[ri] === '^') {
          ri++;
        }

        if (rawName.slice(ri) === name) return true;
      } else {
        if (rawName === name) return true;
      }
    }

    return false;
  };

  ClassList.prototype._setOwnerOptions = function (ownerClassList, prefix, addOriginalClass) {
    var oldPrefix = this._prefix;
    this._prefix = prefix;
    if (oldPrefix === (prefix || '') && this._owner === ownerClassList) return;
    this._styleScope = ClassList._getStyleScopeId(prefix);
    this._addOriginalClass = addOriginalClass;
    this._owner = ownerClassList;
    if (this._alias) checkAndUpdateAlias(this);
    updateToDom(this);
  };

  ClassList.prototype._setAlias = function (name, target) {
    var owner = this._owner;
    var slices = String(target).match(CLASS_NAME_REG_EXP);
    this._alias[name] = slices;
    var resolved = [];

    if (slices) {
      for (var i = 0; i < slices.length; i++) {
        var slice = slices[i];

        if (owner && hasOwnProperty.call(owner._alias, slice)) {
          resolved.push(owner._resolvedAlias[slice]);
        } else {
          resolved.push([this._prefix, slice]);
        }
      }
    }

    this._resolvedAlias[name] = resolved;
    callClassListUpdate(this._elem.shadowRoot);
  };

  ClassList.prototype.setClassNames = function (names) {
    if (names === undefined || names === null) names = '';else names = String(names);
    this._rawNames = names.match(CLASS_NAME_REG_EXP) || [];
    updateToDom(this);
  };

  ClassList.prototype.getClassNames = function () {
    return toClassName(this);
  };

  ClassList.prototype.getPrefix = function () {
    return this._prefix;
  };

  ClassList.prototype.getStyleScope = function () {
    return this._styleScope;
  };

  ClassList.prototype.getAddOriginalClass = function () {
    return this._addOriginalClass;
  };

  ClassList.prototype.getRawNames = function () {
    return this._rawNames;
  };

  module.exports = ClassList;
}, function (module, exports, __nested_webpack_require_144588__) {
  var Observer = __nested_webpack_require_144588__(10);

  var globalOptions = __nested_webpack_require_144588__(4);

  var globalState = __nested_webpack_require_144588__(13);

  var TextNode = function ExparserTextNode() {};

  TextNode.prototype = Object.create(Object.prototype, {
    constructor: {
      value: TextNode,
      writable: true,
      configurable: true
    }
  });

  var advancedCreate = TextNode._advancedCreate = function (text, ownerShadowRoot, backendContext) {
    var textNode = new TextNode();
    textNode.__slot = '';
    var domElem = null;

    if (!globalState.backendExtractedDefault && globalOptions.documentBackend === 'dom') {
      domElem = document.createTextNode(text || '');
      domElem.__wxElement = textNode;
    } else if (globalOptions.documentBackend === 'custom') {
      var context = backendContext === undefined ? globalOptions.customContext : backendContext;
      textNode.__backendContext = context;

      if (context) {
        domElem = context.createElement('text', '');
        domElem.setText(text || '');
        domElem.textContent = text;
        domElem.__wxElement = textNode;
      } else {
        textNode.__textContent = text;
      }
    } else {
      textNode.__textContent = text;
    }

    textNode.$$ = textNode.__domElement = domElem;
    textNode.__backendExtracted = globalState.backendExtractedDefault;
    textNode.__subtreeObserversCount = 0;
    textNode.__autoDestroy = true;
    textNode.parentNode = null;
    textNode.ownerShadowRoot = ownerShadowRoot;
    return textNode;
  };

  TextNode.create = function (text) {
    return advancedCreate(text, null);
  };

  TextNode.prototype.setAutoDestroy = function (autoDestroy) {
    this.__autoDestroy = !!autoDestroy;
  };

  TextNode.prototype.destroy = function () {
    if (globalOptions.documentBackend === 'custom' && this.__domElement) {
      this.__domElement.release();

      this.__domElement = null;
    }
  };

  Object.defineProperty(TextNode.prototype, 'textContent', {
    get: function () {
      if (this.__domElement) return this.__domElement.textContent;
      return this.__textContent;
    },
    set: function (val) {
      val = String(val);

      if (this.__domElement) {
        if (this.__domElement.textContent === val) {
          return;
        }

        this.__domElement.textContent = val;

        if (globalOptions.documentBackend === 'custom') {
          this.__domElement.setText(val);
        }
      } else {
        if (this.__textContent === val) {
          return;
        }

        this.__textContent = val;
      }

      if (this.__textObservers && !this.__textObservers.empty || this.__subtreeObserversCount) {
        Observer._callObservers(this, '__textObservers', {
          type: 'characterData',
          target: this
        });
      }
    }
  });

  TextNode.prototype.getBackendContext = function () {
    if (!this.__backendContext) return globalOptions.customContext;
    return this.__backendContext;
  };

  module.exports = TextNode;
}, function (module, exports) {
  exports.backendExtractedDefault = false;

  exports.enableBackendExtractedDefault = function () {
    exports.backendExtractedDefault = true;
  };

  exports.disableBackendExtractedDefault = function () {
    exports.backendExtractedDefault = false;
  };
}, function (module, exports) {
  var FakeDomElement = function ExparserFakeDomElement(tagName) {
    this.tagName = tagName;
    this.id = '';
    this.attrs = {};
  };

  FakeDomElement.toElement = function (fake) {
    var newElement = document.createElement(fake.tagName);
    if (fake.id) newElement.id = fake.id;

    for (var attrName in fake.attrs) {
      newElement.setAttribute(attrName, fake.attrs[attrName]);
    }

    return newElement;
  };

  FakeDomElement.fromElement = function (element) {
    var fake = new FakeDomElement(element.tagName);
    fake.id = element.id;
    var attrs = element.attributes;

    for (var i = 0; i < attrs.length; i++) {
      fake.attrs[attrs[i].name] = attrs[i].value;
    }

    return fake;
  };

  FakeDomElement.prototype.cloneNode = function () {
    var cloned = new FakeDomElement();
    cloned.id = this.id;

    for (var name in this.attrs) {
      cloned.attrs[name] = this.attrs[name];
    }

    return cloned;
  };

  FakeDomElement.prototype.removeAttribute = function (name, value) {
    delete this.attrs[name];
  };

  FakeDomElement.prototype.setAttribute = function (name, value) {
    this.attrs[name] = value;
  };

  FakeDomElement.prototype.getAttribute = function (name) {
    return this.attrs[name];
  };

  module.exports = FakeDomElement;
}, function (module, exports, __nested_webpack_require_149246__) {
  var FuncArr = __nested_webpack_require_149246__(3);

  var dataUtils = __nested_webpack_require_149246__(5);

  var DataGroup = __nested_webpack_require_149246__(16);

  var eventSystem = __nested_webpack_require_149246__(6);

  var Behavior = __nested_webpack_require_149246__(8);

  var Element = __nested_webpack_require_149246__(9);

  var NativeNode = __nested_webpack_require_149246__(17);

  var Observer = __nested_webpack_require_149246__(10);

  var ClassList = __nested_webpack_require_149246__(11);

  var FakeDomElement = __nested_webpack_require_149246__(14);

  var globalOptions = __nested_webpack_require_149246__(4);

  var globalState = __nested_webpack_require_149246__(13);

  var dataPath = __nested_webpack_require_149246__(7);

  var addListenerToElement = eventSystem.addListenerToElement;
  var parsePathString = dataPath.parseSinglePath;
  var deepCopy = dataUtils.deepCopy;

  var Component = function ExparserComponent() {};

  Component.prototype = Object.create(Element.prototype, {
    constructor: {
      value: Component,
      writable: true,
      configurable: true
    },
    data: {
      get: function () {
        return this.__dataProxy._data;
      },
      set: function (newData) {
        var dataProxy = this.__dataProxy;

        for (var k in newData) {
          dataProxy.scheduleReplace([k], newData[k]);
        }

        dataProxy.doUpdates();
      },
      configurable: true
    },
    $: {
      get: function () {
        Element._updateIdMap(this);

        return this.__idCache;
      },
      set: function () {}
    }
  });

  var ComponentDefinition = function ExparserComponentDefinition() {};

  ComponentDefinition.prototype = Object.create(Object.prototype);

  eventSystem._setComponent(Component);

  var DefaultTemplateEngine = null;

  Component._setDefaultTemplateEngine = function (te) {
    DefaultTemplateEngine = te;
    Component._setDefaultTemplateEngine = null;
  };

  var convertValueToType = function (value, type, optionalTypes) {
    if (optionalTypes) {
      for (var i = 0; i < optionalTypes.length; i++) {
        if (Behavior.matchTypeWithValue(optionalTypes[i], value)) {
          return value;
        }
      }
    }

    if (type === String) {
      if (value === null || value === undefined) {
        if (FuncArr.hasGlobalWarningListeners()) {
          FuncArr.triggerWarning('property received type-uncompatible value: expected <String> but get null value. Used empty string instead.');
        }

        return '';
      } else if (FuncArr.hasGlobalWarningListeners()) {
        if (typeof value === 'object') FuncArr.triggerWarning('property received type-uncompatible value: expected <String> but got object-typed value. Forcely converted.');
      }

      return String(value);
    }

    if (type === Number) {
      if (isFinite(value)) return Number(value);

      if (FuncArr.hasGlobalWarningListeners()) {
        if (typeof value === 'number') FuncArr.triggerWarning('property received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead.');else FuncArr.triggerWarning('property received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.');
      }

      return 0;
    }

    if (type === Boolean) {
      return !!value;
    }

    if (type === Array) {
      if (value instanceof Array) return value;

      if (FuncArr.hasGlobalWarningListeners()) {
        FuncArr.triggerWarning('property received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead.');
      }

      return [];
    }

    if (type === Object) {
      if (typeof value === 'object') return value;

      if (FuncArr.hasGlobalWarningListeners()) {
        FuncArr.triggerWarning('property received type-uncompatible value: expected <Object> but got non-object value. Used null instead.');
      }

      return null;
    }

    if (value === undefined) return null;
    return value;
  };

  var reflectToAttribute = function (inst, propName, val) {
    if (globalOptions.documentBackend !== 'dom') return;
    var attrName = propName.replace(/[A-Z]/g, function (c) {
      return '-' + c.toLowerCase();
    });
    var type = typeof val;

    if (type === 'boolean') {
      if (val) inst.__domElement.setAttribute(attrName, '');else inst.__domElement.removeAttribute(attrName);
    } else if (type === 'object') {
      inst.__domElement.setAttribute(attrName, JSON.stringify(val));
    } else {
      inst.__domElement.setAttribute(attrName, val);
    }
  };

  var checkComponentAvailability = function (componentDef, ownerShadowRoot, func) {
    var args = [ownerShadowRoot ? ownerShadowRoot.__wxHost.__componentOptions.domain : undefined];
    var availability = FuncArr.safeCallback('Availablity Controller', func, componentDef, args);
    return !!availability;
  };

  var chackPropAvailability = function (elem, func, newVal, hidingValue) {
    var args = [elem.ownerShadowRoot ? elem.ownerShadowRoot.__wxHost.__componentOptions.domain : undefined, hidingValue ? undefined : newVal];
    var availability = FuncArr.safeCallback('Availablity Controller', func, elem.__methodCaller, args, elem);
    return !!availability;
  };

  DataGroup.setPropUpdater(function (updatePath, prop, newVal, hidingValue) {
    var propName = updatePath[0];
    var oldVal = this.__propData[propName];
    newVal = convertValueToType(newVal, prop.type, prop.optionalTypes);
    var availability = prop.availability ? chackPropAvailability(this, prop.availability, newVal, hidingValue) : true;

    if (!availability) {
      if (FuncArr.hasGlobalWarningListeners()) {
        FuncArr.triggerWarning('the new value for property "' + propName + '" in component "' + (this.is || '') + '" is currently not available. The value is not changed.');
      }

      return oldVal;
    }

    if (prop.filter) {
      var filteredVal = FuncArr.safeCallback('Property Filter', prop.filter, this.__methodCaller, hidingValue ? [] : [newVal, oldVal, updatePath], this);
      if (filteredVal !== undefined) newVal = filteredVal;
    }

    if (this.__domElement && this.__componentOptions.reflectToAttributes && this.__propPublic[propName]) reflectToAttribute(this, propName, newVal);
    return newVal;
  });
  DataGroup.setPropObserver(function (newVal, oldVal, updatePath, prop, hidingValue, skipPropertyChangeListener) {
    if (!prop.observeAssignments && newVal === oldVal) return;
    var propName = updatePath[0];

    if (this.__propertyChangeListeners && this.__propertyChangeListeners[propName] && !skipPropertyChangeListener) {
      FuncArr.safeCallback('Property Observer', this.__propertyChangeListeners[propName], this.__methodCaller, [newVal], this);
    }

    if (prop.observer) FuncArr.safeCallback('Property Observer', prop.observer, this.__methodCaller, hidingValue ? [] : [newVal, oldVal, updatePath], this);

    if (prop.public && (this.__propObservers && !this.__propObservers.empty || this.__subtreeObserversCount)) {
      Observer._callObservers(this, '__propObservers', {
        type: 'properties',
        target: this,
        propertyName: propName
      });
    }
  });

  var initLinkEvent = function (relations, node, type) {
    if (!node.__relationLinks) node.__relationLinks = {};
    var links = node.__relationLinks[type] = [];

    for (var i = 0; i < relations.length; i++) {
      links.push(null);
    }
  };

  var triggerLinkEvent = function (relations, links, node, parentType, isDetach) {
    var hasBehavior = Component.prototype.hasBehavior;
    var isParent = parentType === 'parent';
    var isShadowHost = parentType === 'shadowHost';

    for (var i = 0; i < relations.length; i++) {
      var relation = relations[i];
      var parentBehevior = null;

      if (typeof relation.target !== 'object') {
        parentBehevior = Behavior._list[relation.target];
      } else {
        parentBehevior = relation.target;
      }

      if (parentBehevior) {
        var oldLink = links[i];
        var newLink = null;

        if (!isDetach) {
          for (var parent = isShadowHost ? node.ownerShadowRoot && node.ownerShadowRoot.__wxHost : node.parentNode; parent; parent = isShadowHost ? parent.ownerShadowRoot && parent.ownerShadowRoot.__wxHost : parent.parentNode) {
            if (parent.__virtual) continue;

            if (hasBehavior.call(parent, parentBehevior)) {
              var parentRelations = null;
              if (isParent) parentRelations = parent.__relationMap.child;else if (isShadowHost) parentRelations = parent.__relationMap.shadowContent;else parentRelations = parent.__relationMap.descendant;

              for (var j = 0; j < parentRelations.length; j++) {
                var parentRelation = parentRelations[j];
                var childBehavior = null;

                if (typeof parentRelation.target !== 'object') {
                  childBehavior = Behavior._list[parentRelation.target];
                } else {
                  childBehavior = parentRelation.target;
                }

                if (!childBehavior) continue;

                if (hasBehavior.call(node, childBehavior)) {
                  newLink = {
                    parent: parent,
                    relation: parentRelation
                  };
                  break;
                }
              }
            }

            if (isParent || newLink) break;
          }
        }

        links[i] = newLink;

        if (oldLink && (!newLink || oldLink.parent !== newLink.parent)) {
          FuncArr.safeCallback('Relation Unlinked Callback', oldLink.relation.unlinked, oldLink.parent.__methodCaller, [node.__methodCaller], oldLink.parent);
          FuncArr.safeCallback('Relation Unlinked Callback', relation.unlinked, node.__methodCaller, [oldLink.parent.__methodCaller], node);
        }

        if (newLink && (!oldLink || oldLink.parent !== newLink.parent)) {
          FuncArr.safeCallback('Relation Linked Callback', newLink.relation.linked, newLink.parent.__methodCaller, [node.__methodCaller], newLink.parent);
          FuncArr.safeCallback('Relation Linked Callback', relation.linked, node.__methodCaller, [newLink.parent.__methodCaller], node);
        }

        if (oldLink && newLink && oldLink.parent === newLink.parent) {
          FuncArr.safeCallback('Relation Link Changed Callback', newLink.relation.linkChanged, newLink.parent.__methodCaller, [node.__methodCaller], newLink.parent);
          FuncArr.safeCallback('Relation Link Changed Callback', relation.linkChanged, node.__methodCaller, [newLink.parent.__methodCaller], node);
        }

        if (!isDetach && !newLink) {
          FuncArr.safeCallback('Relation Link Failed Callback', relation.linkFailed, node.__methodCaller, [], node);
        }
      }
    }
  };

  var searchLinksOnChildren = function (parent, relation) {
    var res = [];
    var parentType = relation.type;
    var isParent = parentType === 'child';
    var isShadowHost = parentType === 'shadowContent';

    var dfs = function (node) {
      var children = node.childNodes;

      for (var i = 0; i < children.length; i++) {
        var child = children[i];
        if (!(child instanceof Element)) continue;

        if (child.__virtual) {
          dfs(child);
          continue;
        }

        if (child.__relationLinks) {
          var links = null;
          if (isParent) links = child.__relationLinks.parent;else if (isShadowHost) links = child.__relationLinks.shadowHost;else links = child.__relationLinks.ancestor;

          if (links) {
            for (var j = 0; j < links.length; j++) {
              var link = links[j];

              if (link && link.parent === parent && link.relation === relation) {
                res.push(child);
                break;
              }
            }
          }
        }

        if (isShadowHost && child instanceof Component) dfs(child.shadowRoot);
        if (!isParent) dfs(child);
      }
    };

    dfs(isShadowHost ? parent.shadowRoot : parent);
    return res;
  };

  var triggerPageLifeTime = function (node, lifetimeName, args) {
    if (!(node instanceof Element)) return;
    var i = 0;
    var children = null;

    if (node instanceof Component) {
      if (node.__pageLifeTimeFuncs[lifetimeName]) node.__pageLifeTimeFuncs[lifetimeName].call(node.__methodCaller, args || []);
      children = node.childNodes;

      for (i = 0; i < children.length; i++) {
        triggerPageLifeTime(children[i], lifetimeName, args);
      }

      node = node.shadowRoot;
    }

    children = node.childNodes;

    for (i = 0; i < children.length; i++) {
      triggerPageLifeTime(children[i], lifetimeName, args);
    }
  };

  Component._list = {};

  Component.register = function (def) {
    var options = def.options || {};
    var behavior = Behavior.create(def);
    var classPrefix = options.classPrefix !== undefined ? options.classPrefix : globalOptions.classPrefix;
    if (classPrefix === null || classPrefix === undefined) classPrefix = behavior.is || '';
    var compDef = new ComponentDefinition();
    compDef._unprepared = behavior;
    compDef.is = def.is || '';
    compDef.behavior = behavior;
    compDef.protoFunc = null;
    compDef.props = null;
    compDef.template = null;
    compDef.innerEvents = null;
    compDef.generics = behavior.generics;
    compDef.placeholder = behavior.placeholder;
    compDef.initiator = behavior.initiator || null;
    compDef.options = {
      availability: options.availability || globalOptions.availability,
      domain: options.domain || globalOptions.domain,
      writeOnly: !!(options.writeOnly !== undefined ? options.writeOnly : globalOptions.writeOnly),
      allowInWriteOnly: !!(options.allowInWriteOnly !== undefined ? options.allowInWriteOnly : globalOptions.allowInWriteOnly),
      classPrefix: classPrefix,
      addGlobalClass: !!(options.addGlobalClass !== undefined ? options.addGlobalClass : globalOptions.addGlobalClass),
      templateEngine: options.templateEngine || globalOptions.templateEngine || DefaultTemplateEngine,
      renderingMode: options.renderingMode || globalOptions.renderingMode,
      multipleSlots: !!(options.multipleSlots !== undefined ? options.multipleSlots : globalOptions.multipleSlots),
      reflectToAttributes: !!(options.reflectToAttributes !== undefined ? options.reflectToAttributes : globalOptions.reflectToAttributes),
      writeFieldsToNode: !!(options.writeFieldsToNode !== undefined ? options.writeFieldsToNode : globalOptions.writeFieldsToNode),
      writeIdToDOM: !!(options.writeIdToDOM !== undefined ? options.writeIdToDOM : globalOptions.writeIdToDOM),
      separateInnerData: !!(options.separateInnerData !== undefined ? options.separateInnerData : globalOptions.separateInnerData),
      innerDataExclude: options.innerDataExclude || globalOptions.innerDataExclude,
      listenerChangeLifeTimes: !!(options.listenerChangeLifeTimes !== undefined ? options.listenerChangeLifeTimes : globalOptions.listenerChangeLifeTimes),
      randomizeTagName: !!(options.randomizeTagName !== undefined ? options.randomizeTagName : globalOptions.randomizeTagName),
      virtualHost: !!(options.virtualHost !== undefined ? options.virtualHost : globalOptions.virtualHost)
    };

    if (!behavior._unprepared) {
      Component.prepare(compDef);
    }

    if (def.is !== undefined) Component._list[behavior.is] = compDef;
    return compDef;
  };

  Component.isPrepared = function (compDef) {
    return !compDef._unprepared;
  };

  Component.prepare = function (compDef) {
    var behavior = compDef._unprepared;
    if (!behavior) return;
    compDef._unprepared = null;
    var options = compDef.options;
    var propSetters = {};

    if (behavior._unprepared) {
      Behavior.prepare(behavior);
    }

    if (options.writeOnly) {
      propSetters.data = {
        value: null
      };
    }

    var props = compDef.props = {};
    Object.keys(behavior.properties).forEach(function (propName) {
      var propDef = behavior.properties[propName];
      props[propName] = {
        type: propDef.type,
        optionalTypes: propDef.optionalTypes,
        value: propDef.value,
        filter: typeof propDef.filter === 'function' ? propDef.filter : propDef.filter == null ? null : behavior.methods[propDef.filter],
        observer: typeof propDef.observer === 'function' ? propDef.observer : propDef.observer == null ? null : behavior.methods[propDef.observer],
        public: propDef.public,
        availability: propDef.availability,
        observeAssignments: propDef.observeAssignments
      };
      if (!options.writeFieldsToNode) return;
      propSetters[propName] = {
        enumerable: true,
        get: function () {
          return this.__propData[propName];
        },
        set: function (newVal) {
          var dataProxy = this.__dataProxy;
          dataProxy.scheduleReplace([propName], newVal);
          dataProxy.doUpdates();
        }
      };
    });

    var protoFunc = function ExparserComponent() {};

    compDef.protoFunc = protoFunc;
    var proto = protoFunc.prototype = Object.create(Component.prototype, propSetters);
    proto.is = compDef.is;
    proto.__componentOptions = options;
    proto.__using = behavior.using;
    compDef.dataGroupObserverTree = DataGroup._createObserverTree(props);

    behavior._addObserversToDataProxy(compDef.dataGroupObserverTree);

    proto.__behavior = behavior;

    if (options.writeFieldsToNode) {
      for (var methodName in behavior.methods) {
        proto[methodName] = behavior.methods[methodName];
      }
    }

    proto.__lifeTimeFuncs = behavior._getAllLifeTimeFuncs();
    proto.__pageLifeTimeFuncs = behavior._getAllPageLifeTimeFuncs();
    var relations = behavior.relations;
    var relationMap = proto.__relationMap = {};

    for (var relationKey in relations) {
      var relation = relations[relationKey];
      var relationType = relation.type;

      if (relationMap[relationType]) {
        relationMap[relationType].push(relation);
      } else {
        relationMap[relationType] = [relation];
      }
    }

    var relationHandlers = [];

    if (relationMap.parent) {
      relationHandlers.push(function (type) {
        triggerLinkEvent(this.__relationMap.parent, this.__relationLinks.parent, this, 'parent', type === 'detached');
      });
    }

    if (relationMap.ancestor) {
      relationHandlers.push(function (type) {
        triggerLinkEvent(this.__relationMap.ancestor, this.__relationLinks.ancestor, this, 'ancestor', type === 'detached');
      });
    }

    if (relationMap.shadowHost) {
      relationHandlers.push(function (type) {
        triggerLinkEvent(this.__relationMap.shadowHost, this.__relationLinks.shadowHost, this, 'shadowHost', type === 'detached');
      });
    }

    compDef.relationHandler = function (type) {
      for (var i = 0; i < relationHandlers.length; i++) {
        relationHandlers[i].call(this, type);
      }
    };

    var propPublic = {};
    var defaultValues = {};
    var behaviorData = behavior.data;
    var k = '';

    for (k in behaviorData) {
      defaultValues[k] = behaviorData[k];
    }

    for (k in props) {
      var prop = props[k];

      if (FuncArr.hasGlobalWarningListeners()) {
        if (defaultValues[k] !== undefined) {
          FuncArr.triggerWarning('data field "' + k + '" is overwritten by property with the same name.');
        }
      }

      defaultValues[k] = prop.value;
      propPublic[k] = prop.public;
    }

    var innerData = defaultValues;
    var separateInnerData = options.separateInnerData;
    var innerDataExclude = options.innerDataExclude;

    if (innerDataExclude) {
      innerData = {};

      for (var innerDataKey in defaultValues) {
        if (innerDataExclude.test(innerDataKey)) continue;
        innerData[innerDataKey] = defaultValues[innerDataKey];
      }

      if (!separateInnerData) defaultValues = innerData;
    }

    var TemplateEngine = options.templateEngine;
    compDef.template = TemplateEngine.create(behavior, defaultValues, innerData, options);
    proto.__propPublic = propPublic;

    var listeners = behavior._getAllListeners();

    var innerEvents = compDef.innerEvents = [];

    for (var eventPath in listeners) {
      var eventHandlers = listeners[eventPath];
      var dotPosition = eventPath.indexOf('.');
      var eventName = eventPath.slice(dotPosition + 1);
      var eventTargetId = dotPosition < 1 ? '' : eventPath.slice(0, dotPosition);
      var listenerFuncs = [];

      for (var i = 0; i < eventHandlers.length; i++) {
        var handlerFunc = eventHandlers[i];
        if (typeof handlerFunc !== 'function') handlerFunc = handlerFunc == null ? null : behavior.methods[handlerFunc];
        listenerFuncs.push(handlerFunc);
      }

      innerEvents.push({
        id: eventTargetId,
        name: eventName,
        funcs: listenerFuncs
      });
    }
  };

  var componentInstanceIdInc = 1;
  var hasOwnProperty = Object.prototype.hasOwnProperty;

  var changeListenerCaller = function (func, elem) {
    return function (eventObj) {
      return func.call(elem.__methodCaller, eventObj, elem);
    };
  };

  var initantiateGanerics = function (genericsDef, genericImpls, options) {
    var generics = {};

    for (var genericKey in genericsDef) {
      var genericConfig = genericsDef[genericKey];
      var implDef = genericImpls[genericKey];
      if (typeof implDef !== 'object' && hasOwnProperty.call(Component._list, implDef)) implDef = Component._list[implDef];
      if (typeof implDef !== 'object' && genericConfig.default != null) implDef = Component._list[genericConfig.default];

      if (FuncArr.hasGlobalWarningListeners()) {
        if (!implDef) {
          FuncArr.triggerWarning('generic "' + genericKey + '" is not instantiated. The default component is used instead.');
        }
      }

      if (implDef) {
        generics[genericKey] = implDef;
      }
    }

    if (FuncArr.hasGlobalWarningListeners()) {
      for (var genericImplKey in genericImpls) {
        if (genericsDef[genericImplKey] === undefined) {
          FuncArr.triggerWarning('generic "' + genericImplKey + '" is not defined. It will be ignored.');
        }
      }
    } //# DEBUG-END


    return generics;
  };

  var combinePlaceholders = function (placeholder, placeholderDef) {
    var ret = {};

    for (var key in placeholderDef) {
      ret[key] = placeholderDef[key];
    }

    for (var key in placeholder) {
      ret[key] = placeholder[key];
    }

    return ret;
  };

  var createComponent = Component._advancedCreate = function (tagName, compDef, ownerShadowRoot, backendContext, genericImpls, placeholder, templateOptions) {
    var componentInfo = compDef;

    if (componentInfo._unprepared) {
      Component.prepare(componentInfo);
    }

    var options = componentInfo.options;
    var availability = options.availability ? checkComponentAvailability(componentInfo, ownerShadowRoot, options.availability) : true;

    if (!availability) {
      if (FuncArr.hasGlobalWarningListeners()) {
        FuncArr.triggerWarning('the component "' + (componentInfo.is || '') + '" is currently not available. The default component is used instead.');
      }

      componentInfo = Component._list[''];
    }

    var ExparserComponent = componentInfo.protoFunc;
    var elem = new ExparserComponent();
    elem.__placeholder = combinePlaceholders(placeholder, componentInfo.placeholder);
    var genericsDef = componentInfo.generics;
    if (genericsDef) elem.__generics = initantiateGanerics(genericsDef, genericImpls || {}, options);else elem.__generics = {};
    var domElem = null;
    var documentBackend = globalOptions.documentBackend;

    if (options.virtualHost) {
      var domElem = null;

      if (documentBackend === 'dom' || documentBackend === 'custom') {
        domElem = undefined;
      }

      var context = null;

      if (documentBackend === 'custom') {
        context = backendContext === undefined ? globalOptions.customContext : backendContext;
      }

      Element.initialize(elem, domElem, ownerShadowRoot, context);
      elem.__virtual = true;
    } else if (documentBackend === 'dom') {
      if (globalState.backendExtractedDefault) {
        domElem = new FakeDomElement(tagName);
      } else {
        domElem = document.createElement(tagName);
      }

      Element.initialize(elem, domElem, ownerShadowRoot, null);
    } else if (documentBackend === 'custom') {
      var context = backendContext === undefined ? globalOptions.customContext : backendContext;
      if (context) domElem = context.createElement('empty', tagName);
      Element.initialize(elem, domElem, ownerShadowRoot, context);
    } else {
      Element.initialize(elem, null, ownerShadowRoot, null);
    }

    var i = 0;
    var externalClassAlias = elem.__externalClassAlias = {};

    if (componentInfo.behavior.externalClasses) {
      var externalClasses = componentInfo.behavior.externalClasses;

      for (i = 0; i < externalClasses.length; i++) {
        externalClassAlias[externalClasses[i]] = null;
      }
    }

    elem.classList = ClassList.create(elem, externalClassAlias);

    if (ownerShadowRoot) {
      var ownerShadowRootHost = ownerShadowRoot.__wxHost;

      elem.classList._setOwnerOptions(ownerShadowRootHost.classList, ownerShadowRootHost.__componentOptions.classPrefix, ownerShadowRootHost.__componentOptions.addGlobalClass);

      if (domElem && documentBackend === 'custom') {
        domElem.setStyleScope(elem.classList.getStyleScope());
      }

      if (globalOptions.writeExtraInfoToAttr && domElem) {
        domElem.setAttribute('exparser:info-class-prefix', ownerShadowRootHost.__componentOptions.classPrefix && ownerShadowRootHost.__componentOptions.classPrefix + '--');
      }
    }

    if (documentBackend === 'dom' && globalOptions.writeExtraInfoToAttr && domElem) {
      elem.__componentInstanceId = componentInstanceIdInc++;
      domElem.setAttribute('exparser:info-component-id', elem.__componentInstanceId);
    }

    var elemTmpl = elem.__templateInstance = componentInfo.template.createInstance(elem, templateOptions);
    elem.__propData = elemTmpl.data;
    var separateInnerData = options.separateInnerData;
    elem.__innerData = separateInnerData ? deepCopy(elem.__propData) : null;
    var innerDataExclude = options.innerDataExclude;

    if (separateInnerData && innerDataExclude) {
      var filteredInnerData = {};

      for (var innerDataKey in elem.__innerData) {
        if (innerDataExclude.test(innerDataKey)) continue;
        filteredInnerData[innerDataKey] = elem.__innerData[innerDataKey];
      }

      elem.__innerData = filteredInnerData;
    }

    elem.__dataProxy = DataGroup._advancedCreate(elem, elem.__propData, elem.__innerData, innerDataExclude, componentInfo.dataGroupObserverTree, function (changedPaths, changedValues, changes, templateOptions) {
      elem.__templateInstance.updateValues(elem, separateInnerData ? elem.__innerData : elem.__propData, changedPaths, changedValues, changes, templateOptions);
    });

    if (elemTmpl.beforeMergeValues) {
      elem.__dataProxy.setBeforeMergeCb(function (changes, innerExcluded, templateOptions) {
        elem.__templateInstance.beforeMergeValues(changes, innerExcluded, templateOptions);
      });
    }

    if (elemTmpl.beforeUpdateValues) {
      elem.__dataProxy.setBeforeUpdateCb(function (templateOptions) {
        elem.__templateInstance.beforeUpdateValues(elem, separateInnerData ? elem.__innerData : elem.__propData, templateOptions);
      });
    }

    if (options.writeOnly) {
      elem.__dataProxy.setHidingValue(true);
    }

    elem.__idCacheDirty = false;
    elem.__idCache = elemTmpl.idMap;
    if (elemTmpl.slots[''] === null) elemTmpl.slots[''] = domElem;

    if (componentInfo.options.multipleSlots) {
      elem.__slots = elemTmpl.slots;
    } else {
      elem.__singleSlot = elemTmpl.slots[''] || null;
      if (elem.__singleSlot) elem.__singleSlot.__wxSlotChildren = elem.childNodes;
    }

    if (elemTmpl.shadowRoot instanceof Element) {
      elem.shadowRoot = elemTmpl.shadowRoot;

      Element._attachShadowRoot(elemTmpl.shadowRoot);
    } else if (domElem instanceof FakeDomElement) {
      elem.shadowRoot = domElem;
      domElem.__wxHost = elem;
      elem.__domElement.asShadowRoot = elemTmpl.shadowRoot;
      elem.__wxSlotChildren = [domElem];
      domElem.__wxSlotParent = elem;
    } else {
      elem.shadowRoot = domElem;
      domElem.__wxHost = elem;

      if (globalOptions.documentBackend !== '') {
        elem.__domElement.appendChild(elemTmpl.shadowRoot);
      }

      elem.__wxSlotChildren = [domElem];
      domElem.__wxSlotParent = elem;
    }

    var elemListeners = elemTmpl.listeners;

    for (var ei = 0; ei < elemListeners.length; ei++) {
      var elemListener = elemListeners[ei];
      addListenerToElement(elemListener.target, elemListener.name, changeListenerCaller(elemListener.func, elem));
    }

    var innerEvents = componentInfo.innerEvents;

    for (i = 0; i < innerEvents.length; i++) {
      var innerEvent = innerEvents[i];
      var eventTarget = innerEvent.id ? innerEvent.id === 'this' ? elem : elem.__idCache[innerEvent.id] : elem.shadowRoot;

      if (eventTarget) {
        var eventName = innerEvent.name;
        var eventFuncs = innerEvent.funcs;

        for (var j = 0; j < eventFuncs.length; j++) {
          addListenerToElement(eventTarget, eventName, changeListenerCaller(eventFuncs[j], elem));
        }
      }
    }

    var relationMap = elem.__relationMap;

    if (relationMap.parent) {
      initLinkEvent(relationMap.parent, elem, 'parent');
      elem.__relationHandler = componentInfo.relationHandler;
    }

    if (relationMap.ancestor) {
      initLinkEvent(relationMap.ancestor, elem, 'ancestor');
      elem.__relationHandler = componentInfo.relationHandler;
    }

    if (relationMap.shadowHost) {
      initLinkEvent(relationMap.shadowHost, elem, 'shadowHost');
      elem.__relationHandler = componentInfo.relationHandler;
    }

    elem.__propertyChangeListeners = null;

    if (documentBackend === 'custom' && domElem) {
      domElem.associateComponent(elem);
    }

    if (componentInfo.initiator) {
      FuncArr.safeCallback('Component Initiator', componentInfo.initiator, elem.__methodCaller, [], elem);
    }

    elem.__lifeTimeFuncs.created.call(elem.__methodCaller, [], elem);

    return elem;
  };

  Component.createWithGenericsAndContext = function (tagName, compDef, genericImpls, backendContext, templateOptions) {
    if (typeof tagName === 'object') {
      return createComponent(tagName.is, tagName, null, backendContext, genericImpls, null, templateOptions);
    }

    if (tagName) {
      if (['wx-view', 'wx-text'].includes(tagName)) {
        return NativeNode._advancedCreate(tagName, null, backendContext);
      }

      if (tagName.indexOf('-') < 0 && !compDef) {
        return NativeNode.create(tagName);
      }

      if (FuncArr.hasGlobalWarningListeners()) {
        if (!compDef && !hasOwnProperty.call(Component._list, tagName) && tagName !== 'virtual') {
          FuncArr.triggerWarning('component "' + tagName + '" is not found. The default component is used instead.');
        }
      }

      return createComponent(tagName.toLowerCase(), compDef || hasOwnProperty.call(Component._list, tagName) && Component._list[tagName] || Component._list[''], null, backendContext, genericImpls, null, templateOptions);
    }

    return createComponent('virtual', Component._list[''], null, backendContext, genericImpls, null, templateOptions);
  };

  Component.createWithGenerics = function (tagName, compDef, genericImpls, templateOptions) {
    return Component.createWithGenericsAndContext(tagName, compDef, genericImpls, undefined, templateOptions);
  };

  Component.createWithContext = function (tagName, compDef, backendContext, templateOptions) {
    return Component.createWithGenericsAndContext(tagName, compDef, null, backendContext, templateOptions);
  };

  Component.create = function (tagName, compDef, templateOptions) {
    return Component.createWithGenerics(tagName, compDef, null, templateOptions);
  };

  Component.listProperties = function (inst) {
    var ret = [];

    for (var k in inst.__propPublic) {
      if (inst.__propPublic[k] !== undefined) ret.push(k);
    }

    return ret;
  };

  Component.listPublicProperties = function (inst) {
    var ret = [];

    for (var k in inst.__propPublic) {
      if (inst.__propPublic[k] === true) ret.push(k);
    }

    return ret;
  };

  Component.hasProperty = function (inst, propName) {
    return inst.__propPublic[propName] !== undefined;
  };

  Component.hasPublicProperty = function (inst, propName) {
    return inst.__propPublic[propName] === true;
  };

  Component.getMethodsFromDef = function (compDef) {
    if (compDef.behavior._unprepared) Behavior.prepare(compDef.behavior);
    return compDef.behavior.methods;
  };

  Component.getMethod = function (inst, methodName) {
    return inst.__behavior.methods[methodName];
  };

  Component.getComponentOptions = function (inst) {
    return inst.__componentOptions;
  };

  Component.prototype.triggerLifeTime = function (lifetimeName, args) {
    this.__lifeTimeFuncs[lifetimeName].call(this.__methodCaller, args || []);
  };

  Component.prototype.triggerPageLifeTime = function (lifetimeName, args) {
    triggerPageLifeTime(this, lifetimeName, args);
  };

  Component.prototype.hasBehavior = function (name) {
    if (typeof name !== 'object' && Object.prototype.hasOwnProperty.call(this.__using, name)) {
      name = this.__using[name];
    }

    if (this.__behavior) return this.__behavior.hasBehavior(name);
    return false;
  };

  Component.prototype.getRootBehavior = function () {
    return this.__behavior;
  };

  Component.prototype.getPlaceholder = function (tag) {
    return this.__placeholder[tag];
  };

  Component.prototype.getRelationNodes = function (relationKey) {
    var relation = this.__behavior.relations[relationKey];
    if (!relation) return null;

    if (relation.type === 'parent' || relation.type === 'ancestor' || relation.type === 'shadowHost') {
      var relations = this.__relationMap[relation.type];
      var i = 0;

      for (; i < relations.length; i++) {
        if (relations[i] === relation) break;
      }

      if (this.__relationLinks[relation.type][i]) return [this.__relationLinks[relation.type][i].parent];
      return [];
    }

    return searchLinksOnChildren(this, relation);
  };

  Component.prototype.hasExternalClass = function (name) {
    return hasOwnProperty.call(this.__externalClassAlias, name);
  };

  Component.prototype.setExternalClass = function (name, target) {
    this.classList._setAlias(name, target);
  };

  Component.prototype.setPropertyChangeListener = function (propName, func) {
    if (!this.__propertyChangeListeners) this.__propertyChangeListeners = {};
    this.__propertyChangeListeners[propName] = func;
  };

  Component.prototype.replaceDataOnPath = function (path, data) {
    this.__dataProxy.scheduleReplace(path, data);
  };

  Component.prototype.isInnerDataExcluded = function (fieldName) {
    var innerDataExclude = this.__componentOptions.innerDataExclude;
    return innerDataExclude ? innerDataExclude.test(fieldName) : false;
  };

  Component.getInnerData = function (elem) {
    return elem.__innerData;
  };

  Component.getDataProxy = function (elem) {
    return elem.__dataProxy;
  };

  Component.replaceWholeData = function (elem, newData, newInnerData) {
    elem.__propData = newData;

    elem.__dataProxy.replaceWholeData(newData, newInnerData);
  };

  Component.prototype.applyDataUpdates = function () {
    this.__dataProxy.doUpdates();
  };

  Component.prototype.setData = function (newData) {
    var dataProxy = this.__dataProxy;

    for (var k in newData) {
      dataProxy.scheduleReplace(parsePathString(k), newData[k]);
    }

    dataProxy.doUpdates();
  };

  module.exports = Component;
}, function (module, exports, __nested_webpack_require_185196__) {
  var FuncArr = __nested_webpack_require_185196__(3);

  var dataUtils = __nested_webpack_require_185196__(5);

  var propUpdater = null;
  var propObserver = null;
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  var deepCopy = dataUtils.deepCopy;

  var DataGroup = function ExparserDataGroup(comp, data, innerData, innerDataExclude, observerTree, updateCb) {
    this._data = data;
    this._innerData = innerData;
    this._innerDataExclude = innerDataExclude;
    this._comp = comp;
    this._updateCb = updateCb;
    this._beforeMergeCb = null;
    this._beforeUpdateCb = null;
    this._hidingValue = false;
    this._changes = [];
    this._doingUpdates = null;
    this._propFields = observerTree._propFields;
    this._observers = observerTree._observers;
    this._observerTree = observerTree._observerTree;
    this._relatedObserverTreeObj = observerTree;
    this._observerStatus = [];
  };

  DataGroup._advancedCreate = function (comp, data, innerData, innerDataExclude, observerTree, updateCb) {
    return new DataGroup(comp, data, innerData, innerDataExclude, observerTree, updateCb);
  };

  var DataGroupObserverTree = function ExparserDataGroupObserverTree(propFields) {
    this._propFields = propFields;
    this._observerIdInc = 0;
    this._observers = [];
    this._observerTree = {};
  };

  DataGroup._createObserverTree = function (propFields) {
    return new DataGroupObserverTree(propFields);
  };

  DataGroup.create = function (caller, data, updateCb) {
    var observerTree = new DataGroupObserverTree({});
    return new DataGroup({
      __methodCaller: caller
    }, data, null, null, observerTree, updateCb);
  };

  DataGroup.setPropUpdater = function (func) {
    propUpdater = func;
  };

  DataGroup.setPropObserver = function (func) {
    propObserver = func;
  };

  DataGroup.prototype.replaceWholeData = function (data, innerData) {
    this._data = data;
  };

  DataGroup.prototype.setHidingValue = function (_hv) {
    this._hidingValue = !!_hv;
  };

  DataGroup.prototype.setBeforeMergeCb = function (cb) {
    this._beforeMergeCb = cb;
  };

  DataGroup.prototype.setBeforeUpdateCb = function (cb) {
    this._beforeUpdateCb = cb;
  };

  var attachToObserverNode = function (root, pathSlice, observerId) {
    var node = root;

    for (var i = 0; i < pathSlice.length; i++) {
      var key = pathSlice[i];

      if (key === '**') {
        if (FuncArr.hasGlobalWarningListeners()) {
          if (i !== pathSlice.length - 1) FuncArr.triggerWarning('"**" can only be used at the end of a path descriptor.');
        }

        if (!node['**']) node['**'] = [];
        node['**'].push(observerId);
        return;
      }

      if (!node[key]) node[key] = {};
      node = node[key];
    }

    if (!node['~']) node['~'] = [];
    node['~'].push(observerId);
  };

  var attachToObserverTree = function (root, pathObj, observerId) {
    for (var i = 0; i < pathObj.length; i++) {
      attachToObserverNode(root, pathObj[i], observerId);
    }
  };

  var detachFromObserverNode = function (root, pathSlice, observerId) {
    var node = root;
    var i = 0;
    var key = '';

    for (; i < pathSlice.length; i++) {
      key = pathSlice[i];

      if (key === '**') {
        break;
      }

      if (!node) return;
      node = node[key];
    }

    var arr = key === '**' ? node['**'] : node['~'];
    if (!arr) return;

    for (i = 0; i < arr.length; i++) {
      if (arr[i] === observerId) {
        arr.splice(i, 1);
        break;
      }
    }
  };

  var detachFromObserverTree = function (root, pathObj, observerId) {
    for (var i = 0; i < pathObj.length; i++) {
      detachFromObserverNode(root, pathObj[i], observerId);
    }
  };

  DataGroupObserverTree.prototype.addObserver = function (func, pathObj) {
    var observerId = this._observerIdInc++;
    this._observers[observerId] = {
      pathObj: pathObj,
      func: func
    };
    attachToObserverTree(this._observerTree, pathObj, observerId);
    return observerId;
  };

  DataGroupObserverTree.prototype.removeObserver = function (observerId) {
    var observerInfo = this._observers[observerId];
    detachFromObserverTree(this._observerTree, observerInfo.pathObj, observerId);
    this._observers[observerId] = null;
    return;
  };

  DataGroupObserverTree.prototype.moveObserver = function (observerId, pathObj) {
    var observerInfo = this._observers[observerId];
    detachFromObserverTree(this._observerTree, observerInfo.pathObj, observerId);
    observerInfo.pathObj = pathObj;
    attachToObserverTree(this._observerTree, pathObj, observerId);
  };

  DataGroup.prototype.getObserverTree = function () {
    return this._relatedObserverTreeObj;
  };

  var callObserver = function (comp, data, observerInfo) {
    var args = [];
    var pathObj = observerInfo.pathObj;

    for (var i = 0; i < pathObj.length; i++) {
      var pathSlice = pathObj[i];
      var val = data;

      for (var j = 0; j < pathSlice.length; j++) {
        var pathSeg = pathSlice[j];
        if (pathSeg === '**') break;

        if (typeof val === 'object') {
          val = val[pathSeg];
        } else {
          val = undefined;
          break;
        }
      }

      args[i] = val;
    }

    FuncArr.safeCallback('Data Observer', observerInfo.func, comp.__methodCaller, args, comp);
  };

  var dfsMarkTriggerBitOnPath = function (node, observerStatus) {
    var arr = null;
    var i = 0;
    var observerId = -1;

    for (var k in node) {
      if (k === '~') {
        arr = node['~'];

        for (i = 0; i < arr.length; i++) {
          observerId = arr[i];
          observerStatus[observerId] = true;
        }

        continue;
      }

      if (k === '**') {
        arr = node['**'];

        for (i = 0; i < arr.length; i++) {
          observerId = arr[i];
          observerStatus[observerId] = true;
        }

        continue;
      }

      dfsMarkTriggerBitOnPath(node[k], observerStatus);
    }
  };

  var markTriggerBitOnPath = function (root, observerStatus, pathSlice) {
    var node = root;

    for (var pathSliceIndex = 0; pathSliceIndex < pathSlice.length; pathSliceIndex++) {
      if (node['**']) {
        var arr = node['**'];

        for (var i = 0; i < arr.length; i++) {
          var observerId = arr[i];
          observerStatus[observerId] = true;
        }
      }

      var pathSeg = pathSlice[pathSliceIndex];

      if (typeof pathSeg === 'number') {
        if (!hasOwnProperty.call(node, pathSeg)) {
          node = null;
          break;
        }
      } else {
        if (/^[_a-zA-Z]/.test(pathSeg) && hasOwnProperty.call(node, pathSeg)) {} else {
          node = null;
          break;
        }
      }

      node = node[pathSeg];
    }

    if (node) dfsMarkTriggerBitOnPath(node, observerStatus);
  };

  var triggerAndCleanTriggerBit = function (observers, observerStatus, comp, data, hidingValue) {
    for (var i = 0; i < observers.length; i++) {
      var info = observers[i];
      var status = observerStatus[i];
      if (!status) continue;

      if (status) {
        observerStatus[i] = false;
        callObserver(comp, hidingValue ? undefined : data, info);
      }
    }
  };

  DataGroup.prototype.scheduleReplace = function (path, newData, customArgs) {
    this._changes.push([path, newData, customArgs]);
  };

  DataGroup.prototype.setChanges = function (changes) {
    this._changes = changes;
  };

  DataGroup.prototype.getChanges = function () {
    return this._changes;
  };

  DataGroup.prototype.doUpdates = function (customArgs, skipPropertyChangeListener) {
    var propFields = this._propFields;
    var comp = this._comp;
    var hidingValue = this._hidingValue;
    var innerDataExclude = this._innerDataExclude;
    var isChainedUpdates = !!this._doingUpdates;
    var hasObservers = this._relatedObserverTreeObj._observerIdInc;
    var changedPaths = null;
    var changedValues = null;
    var combinedChanges = null;

    if (hasObservers) {
      if (!isChainedUpdates) {
        this._doingUpdates = {
          changedPaths: [],
          changedValues: [],
          combinedChanges: [],
          changesTotal: 0
        };
      }

      changedPaths = this._doingUpdates.changedPaths;
      changedValues = this._doingUpdates.changedValues;
      combinedChanges = this._doingUpdates.combinedChanges;
    } else {
      changedPaths = [];
      changedValues = [];
      combinedChanges = [];
    }

    var changes = this._changes;
    this._changes = [];
    var innerExcluded = [];

    if (this._beforeMergeCb) {
      this._beforeMergeCb(changes, innerExcluded, customArgs);
    }

    for (var i = 0; i < changes.length; i++) {
      var change = changes[i];
      var path = change[0];
      var newData = change[1];
      var innerNewData = newData;
      var oldData = undefined;
      var propName = path[0];
      var excluded = innerDataExclude ? innerDataExclude.test(propName) : false;
      var prop = propFields[propName];

      if (prop && path.length === 1) {
        oldData = this._data[propName];
        newData = propUpdater.call(this._comp, path, prop, newData, this._hidingValue);

        if (!excluded) {
          if (this._innerData) {
            innerNewData = deepCopy(newData);
            if (!innerExcluded[i]) this._innerData[propName] = innerNewData;
          } else {
            innerNewData = newData;
          }

          change[1] = innerNewData;
        }

        if (!(excluded && !this._innerData)) {
          this._data[propName] = newData;
        }
      } else {
        var curData = this._data;
        var curSlice = propName;
        var nextSlice = null;
        var j = 1;

        if (!(excluded && !this._innerData)) {
          for (; j < path.length; j++) {
            nextSlice = path[j];

            if (typeof nextSlice === 'number' && isFinite(nextSlice)) {
              if (!hasOwnProperty.call(curData, curSlice) || !(curData[curSlice] instanceof Array)) {
                curData[curSlice] = [];
              }
            } else {
              if (!hasOwnProperty.call(curData, curSlice) || curData[curSlice] === null || typeof curData[curSlice] !== 'object' || curData[curSlice] instanceof Array) {
                curData[curSlice] = {};
              }
            }

            curData = curData[curSlice];
            curSlice = nextSlice;
          }

          curData[curSlice] = newData;
        }

        if (this._innerData) {
          curData = this._innerData;
          curSlice = propName;

          if (!excluded) {
            for (j = 1; j < path.length; j++) {
              nextSlice = path[j];

              if (typeof nextSlice === 'number' && isFinite(nextSlice)) {
                if (!hasOwnProperty.call(curData, curSlice) || !(curData[curSlice] instanceof Array)) {
                  curData[curSlice] = [];
                }
              } else {
                if (!hasOwnProperty.call(curData, curSlice) || curData[curSlice] === null || typeof curData[curSlice] !== 'object' || curData[curSlice] instanceof Array) {
                  curData[curSlice] = {};
                }
              }

              curData = curData[curSlice];
              curSlice = nextSlice;
            }

            innerNewData = deepCopy(newData);
            if (!innerExcluded[i]) curData[curSlice] = innerNewData;
            change[1] = innerNewData;
          }
        }
      }

      markTriggerBitOnPath(this._observerTree, this._observerStatus, path);

      if (!excluded) {
        changedPaths.push(path);
        changedValues.push([innerNewData, oldData, newData]);
        combinedChanges.push(change);
      }

      if (hasObservers) {
        this._doingUpdates.changesTotal += 1;
      }
    }

    if (isChainedUpdates) return;
    if (this._beforeUpdateCb) this._beforeUpdateCb(customArgs);

    if (hasObservers) {
      var changesCount = 0;

      do {
        changesCount = this._doingUpdates.changesTotal;
        triggerAndCleanTriggerBit(this._observers, this._observerStatus, comp, this._data, hidingValue);
      } while (changesCount !== this._doingUpdates.changesTotal);

      this._doingUpdates = null;
    }

    this._updateCb(changedPaths, changedValues, combinedChanges, customArgs);

    for (var k = 0; k < changedValues.length; k++) {
      var info = changedValues[k];
      if (!info) continue;
      var changedPath = changedPaths[k];
      var fieldName = changedPath[0];
      var propDef = propFields[fieldName];

      if (propDef) {
        propObserver.call(comp, info[2], info[1], changedPath, propDef, hidingValue, skipPropertyChangeListener);
      }
    }
  };

  module.exports = DataGroup;
}, function (module, exports, __nested_webpack_require_197915__) {
  var Element = __nested_webpack_require_197915__(9);

  var ClassList = __nested_webpack_require_197915__(11);

  var FakeDomElement = __nested_webpack_require_197915__(14);

  var globalOptions = __nested_webpack_require_197915__(4);

  var globalState = __nested_webpack_require_197915__(13);

  var NativeNode = function ExparserNativeNode() {};

  NativeNode.prototype = Object.create(Element.prototype, {
    constructor: {
      value: NativeNode,
      writable: true,
      configurable: true
    }
  });

  var advancedCreate = NativeNode._advancedCreate = function (tagName, ownerShadowRoot, backendContext) {
    var elem = new NativeNode();
    elem.is = tagName.toLowerCase();
    var domElem = null;
    var context = null;

    if (globalOptions.documentBackend === 'dom') {
      if (globalState.backendExtractedDefault) {
        domElem = new FakeDomElement(tagName);
      } else {
        domElem = document.createElement(tagName);
      }
    } else if (globalOptions.documentBackend === 'custom') {
      context = backendContext === undefined ? globalOptions.customContext : backendContext;
      if (context) domElem = context.createElement(tagName === 'image' ? tagName : 'empty', tagName);
    }

    Element.initialize(elem, domElem, ownerShadowRoot, context);
    elem.classList = ClassList.create(elem, null);

    if (domElem && globalOptions.documentBackend === 'custom') {
      domElem.associateComponent(elem);
    }

    if (ownerShadowRoot) {
      var ownerShadowRootHost = ownerShadowRoot.__wxHost;

      elem.classList._setOwnerOptions(ownerShadowRootHost.classList, ownerShadowRootHost.__componentOptions.classPrefix, ownerShadowRootHost.__componentOptions.addGlobalClass);

      if (domElem && globalOptions.documentBackend === 'custom') {
        domElem.setStyleScope(elem.classList.getStyleScope());
      }

      if (globalOptions.writeExtraInfoToAttr && domElem) {
        domElem.setAttribute('exparser:info-class-prefix', ownerShadowRootHost.__componentOptions.classPrefix && ownerShadowRootHost.__componentOptions.classPrefix + '--');
        domElem.setAttribute('exparser:info-style-scope', elem.classList.getStyleScope());
      }
    }

    return elem;
  };

  NativeNode.create = function (tagName) {
    return advancedCreate(tagName, null);
  };

  var advancedClone = NativeNode._advancedClone = function (srcElem, ownerShadowRoot) {
    var elem = new NativeNode();
    elem.is = srcElem.is;
    var domElem = null;

    if (srcElem.__domElement) {
      if (globalOptions.documentBackend === 'dom') {
        if (srcElem.__domElement instanceof FakeDomElement) {
          if (globalState.backendExtractedDefault) {
            domElem = srcElem.__domElement.cloneNode();
          } else {
            domElem = FakeDomElement.toElement(srcElem.__domElement);
          }
        } else {
          if (globalState.backendExtractedDefault) {
            domElem = FakeDomElement.fromElement(srcElem.__domElement);
          } else {
            if (document.importNode) domElem = document.importNode(srcElem.__domElement, false);else domElem = srcElem.__domElement.cloneNode(false);
          }
        }
      } else if (globalOptions.documentBackend === 'custom') {
        domElem = srcElem.__domElement.cloneNode();
      }
    }

    Element._clone(elem, srcElem, domElem, ownerShadowRoot);

    elem.classList = ClassList.create(elem, null);

    if (domElem && globalOptions.documentBackend === 'custom') {
      domElem.associateComponent(elem);
    }

    if (ownerShadowRoot) {
      var ownerShadowRootHost = ownerShadowRoot.__wxHost;

      elem.classList._setOwnerOptions(ownerShadowRootHost.classList, ownerShadowRootHost.__componentOptions.classPrefix, ownerShadowRootHost.__componentOptions.addGlobalClass);

      if (domElem && globalOptions.documentBackend === 'custom') {
        domElem.setStyleScope(elem.classList.getStyleScope());
      }

      if (globalOptions.writeExtraInfoToAttr && domElem) {
        domElem.setAttribute('exparser:info-class-prefix', ownerShadowRootHost.__componentOptions.classPrefix && ownerShadowRootHost.__componentOptions.classPrefix + '--');
        domElem.setAttribute('exparser:info-style-scope', elem.classList.getStyleScope());
      }
    }

    return elem;
  };

  NativeNode.cloneNode = function (srcElem) {
    return advancedClone(srcElem, null);
  };

  module.exports = NativeNode;
}, function (module, exports, __nested_webpack_require_202312__) {
  var Element = __nested_webpack_require_202312__(9);

  var globalOptions = __nested_webpack_require_202312__(4);

  var VirtualNode = function ExparserVirtualNode(virtualName, ownerShadowRoot, backendContext) {
    initialize(this, virtualName, ownerShadowRoot, backendContext);
  };

  VirtualNode.prototype = Object.create(Element.prototype);

  var initialize = VirtualNode.initialize = function (elem, virtualName, ownerShadowRoot, backendContext) {
    elem.is = virtualName || '';
    var domElem = null;
    var context = null;

    if (globalOptions.documentBackend === 'dom') {
      domElem = undefined;
    } else if (globalOptions.documentBackend === 'custom') {
      context = backendContext === undefined ? globalOptions.customContext : backendContext;
      if (context) domElem = undefined;
    }

    Element.initialize(elem, domElem, ownerShadowRoot, context);
    elem.__virtual = true;
  };

  VirtualNode._advancedCreate = function (virtualName, ownerShadowRoot, backendContext) {
    return new VirtualNode(virtualName, ownerShadowRoot, backendContext);
  };

  VirtualNode.create = function (virtualName) {
    return new VirtualNode(virtualName, null);
  };

  VirtualNode.prototype.getBackendContext = function () {
    if (!this.__backendContext) return globalOptions.customContext;
    return this.__backendContext;
  };

  module.exports = VirtualNode;
}, function (module, exports, __nested_webpack_require_203721__) {
  var Element = __nested_webpack_require_203721__(9);

  var Component = __nested_webpack_require_203721__(15);

  var VirtualNode = __nested_webpack_require_203721__(18);

  var NativeNode = __nested_webpack_require_203721__(17);

  var TextNode = __nested_webpack_require_203721__(12);

  var hasOwnProperty = Object.prototype.hasOwnProperty;

  var ShadowRoot = function ExparserShadowRoot(host) {
    VirtualNode.initialize(this, 'shadow', this, host.__backendContext);
    this.__hostAssociated = false;
    this.__wxHost = host;
    this.__childrenPropsFilter = null;
    this.__slotCacheDirty = false;
  };

  ShadowRoot.prototype = Object.create(VirtualNode.prototype);

  ShadowRoot.create = function (host) {
    var shadowRoot = new ShadowRoot(host);

    if (host.ownerShadowRoot && host.ownerShadowRoot.__childrenPropsFilter) {
      if (shadowRoot.__childrenPropsFilter) {
        for (var k in host.ownerShadowRoot.__childrenPropsFilter) {
          if (shadowRoot.__childrenPropsFilter[k]) continue;
          shadowRoot.__childrenPropsFilter[k] = host.ownerShadowRoot.__childrenPropsFilter[k];
        }
      } else {
        shadowRoot.__childrenPropsFilter = host.ownerShadowRoot.__childrenPropsFilter;
      }
    }

    return shadowRoot;
  };

  var convertGenericImpls = function (genericImpls, host) {
    var convertedGenericImpls = {};

    for (var implKey in genericImpls) {
      var implName = genericImpls[implKey];
      if (typeof implName === 'object') continue;

      if (hasOwnProperty.call(host.__using, implName)) {
        implName = host.__using[implName];
      } else if (hasOwnProperty.call(host.__generics, implName)) {
        implName = host.__generics[implName] || Component._list[''];
      }

      convertedGenericImpls[implKey] = implName;
    }

    return convertedGenericImpls;
  };

  var convertPlaceholder = function (genericImpls, host) {
    var convertedPlaceholder = {};

    for (var implKey in genericImpls) {
      var implName = genericImpls[implKey];
      if (typeof implName === 'object') continue;

      if (hasOwnProperty.call(host.__placeholder, implName)) {
        implName = host.__placeholder[implName];

        if (hasOwnProperty.call(host.__using, implName)) {
          implName = host.__using[implName];
        } else if (hasOwnProperty.call(host.__generics, implName)) {
          implName = host.__generics[implName] || Component._list[''];
        }
      }

      convertedPlaceholder[implKey] = implName;
    }

    return convertedPlaceholder;
  };

  var tagNameChars = 'abcdefghijklmnopqrstuvwxyz';

  var generateRandomTagName = function () {
    var d = Date.now();
    var ret = 'exparser-';

    for (var i = 0; i < 8; i++) {
      var r = (d + Math.floor(Math.random() * 26)) % 26;
      d = Math.floor(d / 26);
      ret += tagNameChars[r];
    }

    return ret;
  };

  ShadowRoot.prototype.createTextNode = function (textContent) {
    return TextNode._advancedCreate(textContent, this, this.__backendContext);
  };

  ShadowRoot.prototype.createNativeNode = function (tagName) {
    return NativeNode._advancedCreate(tagName, this, this.__backendContext);
  };

  ShadowRoot.prototype.cloneNativeNode = function (tagName) {
    return NativeNode._advancedClone(tagName, this);
  };

  ShadowRoot.prototype.createVirtualNode = function (virtualName) {
    return VirtualNode._advancedCreate(virtualName, this, this.__backendContext);
  };

  ShadowRoot.prototype.getCompDefByTagName = function (tagName) {
    var host = this.__wxHost;

    if (hasOwnProperty.call(host.__using, tagName)) {
      return host.__using[tagName];
    }

    if (hasOwnProperty.call(host.__generics, tagName)) {
      return host.__generics[tagName];
    }

    return tagName;
  };

  ShadowRoot.prototype.createComponent = function (tagName, compName, genericImpls, templateOptions) {
    if (['wx-view', 'wx-text'].includes(tagName)) {
      return this.createNativeNode(tagName);
    }

    var compDef = null;
    if (compName === undefined) compDef = tagName;else compDef = compName;
    var host = this.__wxHost;

    if (typeof compDef !== 'object') {
      compDef = this.getCompDefByTagName(compDef);

      if (typeof compDef !== 'object') {
        compDef = Component._list[compDef] || Component._list[''];
      }
    }

    var placeholder = convertPlaceholder(genericImpls, host);
    if (genericImpls) genericImpls = convertGenericImpls(genericImpls, host);
    if (typeof tagName === 'object') tagName = compDef.is;

    if (host.__componentOptions.randomizeTagName) {
      tagName = generateRandomTagName();
    }

    if (host.__componentOptions.writeOnly && !compDef.options.allowInWriteOnly) {
      compDef = Component._list[''];
    }

    return Component._advancedCreate(tagName, compDef, this, this.__backendContext, genericImpls, placeholder, templateOptions);
  };

  ShadowRoot.prototype.tagNameUsed = function (name) {
    var host = this.__wxHost;

    if (hasOwnProperty.call(host.__using, name)) {
      return true;
    }

    if (hasOwnProperty.call(host.__placeholder, name)) {
      return true;
    }

    if (hasOwnProperty.call(host.__generics, name)) {
      return true;
    }

    if (hasOwnProperty.call(host.__placeholder, name)) {
      return true;
    }

    return false;
  };

  ShadowRoot.prototype.getHostNode = function () {
    return this.__wxHost;
  };

  ShadowRoot.prototype.getElementById = function (id) {
    Element._updateIdMap(this.__wxHost);

    return this.__wxHost.__idCache[id];
  };

  ShadowRoot.prototype.getBackendContext = function () {
    if (!this.__backendContext) return globalOptions.customContext;
    return this.__backendContext;
  };

  module.exports = ShadowRoot;
}, function (module, exports, __nested_webpack_require_209436__) {
  var Element = __nested_webpack_require_209436__(9);

  var TextNode = __nested_webpack_require_209436__(12);

  var ElementIterator = function ExparserElementIterator() {};

  ElementIterator.create = function (elem, type, elemTypeLimit) {
    var iter = new ElementIterator();
    if (!(elem instanceof Element) && !(elem instanceof TextNode)) throw new Error('ElementIterator can only be used for exparser.Element or exparser.TextNode');
    iter._elem = elem;
    iter._elemTypeLimit = elemTypeLimit || Element;
    var typeArr = type.split('-');

    if (typeArr[0] === 'shadow') {
      iter._composed = false;
    } else if (typeArr[0] === 'composed') {
      iter._composed = true;
    } else {
      throw new Error('Unrecognized iterator type: ' + type);
    }

    if (typeArr[1] === 'ancestors') {
      iter._relation = 'ancestors';
      iter._order = 0;
    } else if (typeArr[1] === 'descendants') {
      iter._relation = 'descendants';
      if (typeArr[2] !== 'root') throw new Error('Unrecognized iterator type: ' + type);
      if (typeArr[3] === 'first') iter._order = -1;else if (typeArr[3] === 'last') iter._order = 1;else throw new Error('Unrecognized iterator type: ' + type);
    } else {
      throw new Error('Unrecognized iterator type: ' + type);
    }

    return iter;
  };

  var recParents = function (elem, elemTypeLimit, composed, func) {
    for (; elem; elem = composed ? elem.__wxSlotParent || elem.__wxHost || elem.parentNode : elem.parentNode) {
      if (!(elem instanceof elemTypeLimit)) continue;
      if (func(elem) === false) return false;
    }

    return true;
  };

  var recChildren = function (elem, elemTypeLimit, composed, order, func) {
    if (order < 0) {
      if (elem instanceof elemTypeLimit && func(elem) === false) return false;
    }

    var children = composed ? elem.__wxSlotChildren || elem.childNodes : elem.childNodes;

    if (children) {
      for (var i = 0; i < children.length; i++) {
        if (recChildren(children[i], elemTypeLimit, composed, order, func) === false) return false;
      }
    }

    if (order > 0) {
      if (elem instanceof elemTypeLimit && func(elem) === false) return false;
    }

    return true;
  };

  ElementIterator.prototype.forEach = function (func) {
    if (this._relation === 'ancestors') return recParents(this._elem, this._elemTypeLimit, this._composed, func);
    return recChildren(this._elem, this._elemTypeLimit, this._composed, this._order, func);
  };

  module.exports = ElementIterator;
}, function (module, exports, __nested_webpack_require_211973__) {
  var globalOptions = __nested_webpack_require_211973__(4);

  var FuncArr = __nested_webpack_require_211973__(3);

  var executingTriggerRender = false;
  var pendingTriggerRenderCallback = [];
  var pendingTriggerRenderContexts = [];

  var render = function (cb) {
    var cbs = pendingTriggerRenderCallback;
    pendingTriggerRenderCallback = [];
    var contexts = pendingTriggerRenderContexts;
    pendingTriggerRenderContexts = [];
    executingTriggerRender = true;
    var waiting = contexts.length;

    for (var i = 0; i < contexts.length; i++) {
      var context = contexts[i];
      context.render(function () {
        waiting--;
        if (waiting !== 0) return;
        executingTriggerRender = false;

        if (pendingTriggerRenderCallback.length) {
          if (globalOptions.hasDOMBackend && typeof requestAnimationFrame === 'function') {
            requestAnimationFrame(render);
          } else {
            setTimeout(render, 16);
          }
        }

        for (var i = 0; i < cbs.length; i++) {
          if (typeof cbs[i] === 'function') {
            FuncArr.safeCallback('render', cbs[i], null, []);
          }
        }
      });
    }
  };

  var triggerRenderOnContext = function (context, cb) {
    pendingTriggerRenderCallback.push(cb || null);

    if (pendingTriggerRenderContexts.indexOf(context) < 0) {
      pendingTriggerRenderContexts.push(context);
    }

    if (!executingTriggerRender && pendingTriggerRenderCallback.length === 1) {
      if (globalOptions.hasDOMBackend && typeof requestAnimationFrame === 'function') {
        requestAnimationFrame(render);
      } else {
        setTimeout(render, 16);
      }
    }
  };

  exports.triggerRender = function (element, cb) {
    if (typeof element === 'function') {
      if (globalOptions.documentBackend === 'custom' && globalOptions.customContext) {
        triggerRenderOnContext(globalOptions.customContext, element);
      }
    } else if (element.__backendContext) {
      triggerRenderOnContext(element.__backendContext, cb);
    }
  };
}]);

/***/ }),

/***/ "./lib/glass_easel_template.common.js":
/*!********************************************!*\
  !*** ./lib/glass_easel_template.common.js ***!
  \********************************************/
/***/ ((module) => {

module.exports = function (exparser) {
  // webpackBootstrap
  "use strict";

  var __webpack_modules__ = {
    674: function (__unused_webpack_module, __webpack_exports__, __nested_webpack_require_173__) {
      __nested_webpack_require_173__.r(__webpack_exports__);

      __nested_webpack_require_173__.d(__webpack_exports__, {
        "GlassEaselTemplate": function () {
          return GlassEaselTemplate;
        }
      });

      ;

      var checkSubFieldsUpdated = function (node) {
        for (var k in node) {
          if (Object.prototype.hasOwnProperty.call(node, k)) {
            var v = node[k];
            if (v === true) return true;
            if (!v) continue;
            var sub = checkSubFieldsUpdated(v);
            if (sub) return true;
          }
        }

        return false;
      };

      var evaluateExprWithUpdateCheck = function (valueType, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, returnValueWhenNotUpdated) {
        if (typeof valueType === 'object') {
          var indirectValueCache_1 = [];

          var w_1 = function (func, args) {
            var method = func;
            return exparser.safeCallback('Template Function', method, null, args);
          };

          var indirectValueCacheVisitor_1 = function (index) {
            if (indirectValueCache_1[index] === undefined) {
              var updater = valueType.I[index];
              var v = updater(data, scopes, indirectValueCacheVisitor_1, w_1);

              if (v === undefined) {
                indirectValueCache_1[index] = null;
              } else {
                indirectValueCache_1[index] = v;
              }
            }

            return indirectValueCache_1[index];
          };

          var updatePathTreeNode = dataUpdatePathTree === true || valueType.L(dataUpdatePathTree, scopeUpdatePathTrees, indirectValueCacheVisitor_1);
          var needReturnValue = returnValueWhenNotUpdated || updatePathTreeNode === true || updatePathTreeNode && checkSubFieldsUpdated(updatePathTreeNode);

          if (needReturnValue) {
            var value = valueType.F(data, scopes, indirectValueCacheVisitor_1, w_1);
            var lvaluePath = null;

            if (valueType.M) {
              var m = valueType.M;
              lvaluePath = [];

              for (var i = 0; i < m.length; i += 1) {
                var slice = m[i];

                if (typeof slice === 'number') {
                  if (i === 0) {
                    if (!scopeLvaluePaths[slice]) {
                      lvaluePath = null;
                      break;
                    }

                    lvaluePath.push.apply(lvaluePath, scopeLvaluePaths[slice]);
                  } else {
                    var v = indirectValueCacheVisitor_1(slice);
                    lvaluePath.push(typeof v === 'number' ? v : v.toString());
                  }
                } else {
                  lvaluePath.push(slice);
                }
              }
            }

            return [value, updatePathTreeNode, lvaluePath];
          }
        } else if (returnValueWhenNotUpdated) {
          return [valueType, undefined, null];
        }

        return null;
      };

      var evaluateExpr = function (valueType, data, scopes, scopeLvaluePaths) {
        if (typeof valueType === 'object') {
          var indirectValueCache_2 = [];

          var w_2 = function (func, args) {
            var method = func;
            return exparser.safeCallback('Template Function', method, null, args);
          };

          var indirectValueCacheVisitor_2 = function (index) {
            if (indirectValueCache_2[index] === undefined) {
              var updater = valueType.I[index];
              var v = updater(data, scopes, indirectValueCacheVisitor_2, w_2);

              if (v === undefined) {
                indirectValueCache_2[index] = null;
              } else {
                indirectValueCache_2[index] = v;
              }
            }

            return indirectValueCache_2[index];
          };

          var value = valueType.F(data, scopes, indirectValueCacheVisitor_2, w_2);
          var lvaluePath = null;

          if (valueType.M) {
            var m = valueType.M;
            lvaluePath = [];

            for (var i = 0; i < m.length; i += 1) {
              var slice = m[i];

              if (typeof slice === 'number') {
                if (i === 0) {
                  if (!scopeLvaluePaths[slice]) {
                    lvaluePath = null;
                    break;
                  }

                  lvaluePath.push.apply(lvaluePath, scopeLvaluePaths[slice]);
                } else {
                  var v = indirectValueCacheVisitor_2(slice);
                  lvaluePath.push(typeof v === 'number' ? v : v.toString());
                }
              } else {
                lvaluePath.push(slice);
              }
            }
          }

          return [value, lvaluePath];
        }

        return [valueType, null];
      };

      var dataValueToString = function (v) {
        if (v === null || v === undefined) {
          return '';
        }

        return v.toString();
      };

      var dataValueToStringOrNumber = function (v) {
        if (typeof v === 'number') {
          return v;
        }

        if (v === null || v === undefined) {
          return '';
        }

        return v.toString();
      };

      ;
      var STYLE_SEGMENT_INDEX;

      (function (STYLE_SEGMENT_INDEX) {
        STYLE_SEGMENT_INDEX[STYLE_SEGMENT_INDEX["ATTR"] = 0] = "ATTR";
      })(STYLE_SEGMENT_INDEX || (STYLE_SEGMENT_INDEX = {}));

      var dashToCamelCase = function (dash) {
        var ret = dash.indexOf('-') <= 0 ? dash : dash.replace(/-[a-z]/g, function (s) {
          return s[1].toUpperCase();
        });
        return ret;
      };

      var applyPropertyInner = function (node, propName, exprRes, lvaluePath, nodeDataProxy, isComponentNode, pendingModelBindings) {
        var propValue = exparser.dataUtils.deepCopy(exprRes);

        if (node instanceof exparser.VirtualNode && node.is === 'slot' && propName === 'name') {
          exparser.Element.setSlotName(node, dataValueToString(propValue));
          return false;
        }

        if (propName === 'id') {
          node.id = dataValueToString(propValue);
          return false;
        }

        if (propName === 'slot') {
          node.slot = dataValueToString(propValue);
          return false;
        }

        if (propName === 'class') {
          if (isComponentNode) {
            var hasExternalClass_1 = node.hasExternalClass('class');

            if (hasExternalClass_1) {
              node.setExternalClass('class', dataValueToString(propValue));
            } else {
              node.class = dataValueToString(propValue);
            }
          } else {
            node.class = dataValueToString(propValue);
          }

          return false;
        }

        if (isComponentNode) {
          var camelName = dashToCamelCase(propName);
          var hasProperty = exparser.Component.hasPublicProperty(node, camelName);

          if (hasProperty) {
            nodeDataProxy.scheduleReplace([camelName], propValue, null);
            return true;
          }

          if (propName.slice(0, 6) === 'model:') {
            if (!lvaluePath) {
              console.warn("Cannot apply reverse binding to property \"" + propName + "\" because the binding expression is not a valid lvalue");
            }

            var camelModelName = camelName.slice(6);
            var hasProperty_1 = exparser.Component.hasPublicProperty(node, camelModelName);

            if (hasProperty_1) {
              nodeDataProxy.scheduleReplace([camelModelName], propValue, null);
              pendingModelBindings.push([camelModelName, lvaluePath]);
              return true;
            }
          }
        }

        if (propName === 'style') {
          node.setNodeStyle(dataValueToString(propValue), STYLE_SEGMENT_INDEX.ATTR);
          return false;
        }

        if (/^data:/.test(propName)) {
          var setName = propName.slice(5);
          node.dataset[setName] = propValue;

          if (node.__componentOptions && node.__componentOptions.domain === '//') {
            var methodCaller = exparser.Element.getMethodCaller(node);
            var f = methodCaller.onPropertyUpdate;

            if (typeof f === 'function') {
              f.call(methodCaller, 'dataset', setName, propValue);
            }
          }

          return false;
        }

        if (/^data-/.test(propName)) {
          var setName = dashToCamelCase(propName.slice(5).toLowerCase());
          node.dataset[setName] = propValue;

          if (node.__componentOptions && node.__componentOptions.domain === '//') {
            var _methodCaller = exparser.Element.getMethodCaller(node);

            var _f = _methodCaller.onPropertyUpdate;

            if (typeof _f === 'function') {
              _f.call(_methodCaller, 'dataset', setName, propValue);
            }
          }

          return false;
        }

        var eventMatches = /^(capture-)?(mut-)?(bind|catch):?(.+)$/.exec(propName);

        if (eventMatches) {
          var handlerName_1 = dataValueToString(propValue);
          node.addListener(eventMatches[4], function (ev) {
            var host = node.ownerShadowRoot.getHostNode();
            var ret;

            if (typeof host === 'object') {
              var methodCaller = exparser.Element.getMethodCaller(host) || host;
              var f = methodCaller[handlerName_1];

              if (typeof f === 'function') {
                ret = f.call(methodCaller, ev);
              }
            }

            return ret;
          });

          if (typeof node.__domElement.setListenerOption === 'function') {
            var bindName = eventMatches[4];
            var bubble = eventMatches[3] !== 'catch';
            var capture = eventMatches[1] !== undefined;

            node.__domElement.setListenerOption(bindName, bubble, capture);
          }

          if (typeof node.__eventHandlerChangeListener__ === 'function') {
            node.__eventHandlerChangeListener__(bindName, handlerName_1, capture);
          }

          return false;
        }

        if (/^mark:/.test(propName)) {
          node.setMark(propName.slice(5), propValue);
          return false;
        }

        var hasExternalClass = isComponentNode && node.hasExternalClass(propName);

        if (hasExternalClass) {
          node.setExternalClass(propName, dataValueToString(propValue));
          return false;
        }

        if (node instanceof exparser.NativeNode) {
          if (typeof propValue === 'boolean') {
            if (propValue === true) {
              node.setAttribute(propName, '');
            } else {
              node.removeAttribute(propName);
            }
          } else {
            node.setAttribute(propName, propValue);
          }

          return false;
        }

        return false;
      };

      var applyProperties = function (node, props, data, scopes, scopeLvaluePaths, dataUpdatePathTree, scopeUpdatePathTrees) {
        var _a;

        node.dataset = node.dataset || {};
        var needDoUpdates = false;
        var pendingModelBindings = [];
        var isComponentNode = node instanceof exparser.Component;
        var nodeDataProxy = isComponentNode ? exparser.Component.getDataProxy(node) : null;

        for (var propName in props) {
          if (!Object.prototype.hasOwnProperty.call(props, propName)) continue;
          var propValueType = props[propName];
          var exprRes = void 0;
          var lvaluePath = null;

          if (scopeUpdatePathTrees) {
            var res = evaluateExprWithUpdateCheck(propValueType, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, false);
            if (!res) continue;
            exprRes = res[0];
            lvaluePath = res[2];
          } else {
            _a = evaluateExpr(propValueType, data, scopes, scopeLvaluePaths), exprRes = _a[0], lvaluePath = _a[1];
          }

          var needDoUpdatesForThisProp = applyPropertyInner(node, propName, exprRes, lvaluePath, nodeDataProxy, isComponentNode, pendingModelBindings);
          if (needDoUpdatesForThisProp) needDoUpdates = true;
        }

        if (needDoUpdates) {
          nodeDataProxy.doUpdates(null, true);
        }

        if (isComponentNode) {
          var _loop_1 = function (i) {
            var _b = pendingModelBindings[i],
                propName = _b[0],
                lvaluePath = _b[1];
            node.setPropertyChangeListener(propName, function (value) {
              var host = node.ownerShadowRoot.getHostNode();
              var nodeDataProxy = exparser.Component.getDataProxy(host);
              nodeDataProxy.scheduleReplace(lvaluePath, value, null);
              nodeDataProxy.doUpdates(null, false);
            });
          };

          for (var i = 0; i < pendingModelBindings.length; i += 1) {
            _loop_1(i);
          }
        }
      };

      var applyPropertyInBindingMap = function (node, propName, propValueType, data) {
        node.dataset = node.dataset || {};
        var pendingModelBindings = [];
        var isComponentNode = node instanceof exparser.Component;
        var nodeDataProxy = isComponentNode ? exparser.Component.getDataProxy(node) : null;

        var _a = evaluateExpr(propValueType, data, null, null),
            exprRes = _a[0],
            lvaluePath = _a[1];

        var needDoUpdatesForThisProp = applyPropertyInner(node, propName, exprRes, lvaluePath, nodeDataProxy, isComponentNode, pendingModelBindings);

        if (needDoUpdatesForThisProp) {
          nodeDataProxy.doUpdates(null, true);
        }

        if (isComponentNode) {
          var _loop_2 = function (i) {
            var _b = pendingModelBindings[i],
                propName_1 = _b[0],
                lvaluePath_1 = _b[1];
            node.setPropertyChangeListener(propName_1, function (value) {
              var host = node.ownerShadowRoot.getHostNode();
              var nodeDataProxy = exparser.Component.getDataProxy(host);
              nodeDataProxy.scheduleReplace(lvaluePath_1, value, null);
              nodeDataProxy.doUpdates(null, false);
            });
          };

          for (var i = 0; i < pendingModelBindings.length; i += 1) {
            _loop_2(i);
          }
        }
      };

      ;

      var collectKeys = function (list) {
        var keyIndexes = {};

        for (var index = 0; index < list.length; index += 1) {
          var itemKey = list[index];

          if (!itemKey) {
            if (Number.isNaN(itemKey)) {
              list[index] = undefined;
            }
          } else if (Object.prototype.hasOwnProperty.call(keyIndexes, itemKey)) {
            list[index] = undefined;
          } else {
            keyIndexes[dataValueToString(itemKey)] = index;
          }
        }

        return keyIndexes;
      };

      var collectKeysAndFreeIndexes = function (list) {
        var keyIndexes = {};
        var freeIndexes = [];

        for (var index = 0; index < list.length; index += 1) {
          var itemKey = list[index];

          if (!itemKey) {
            if (Number.isNaN(itemKey)) {
              list[index] = undefined;
            }

            freeIndexes.push(index);
          } else if (Object.prototype.hasOwnProperty.call(keyIndexes, itemKey)) {
            list[index] = undefined;
            freeIndexes.push(index);
          } else {
            keyIndexes[dataValueToString(itemKey)] = index;
          }
        }

        return [keyIndexes, freeIndexes];
      };

      var listDiff = function (oldList, newList, dataList) {
        var oldKeyIndexes = collectKeys(oldList);

        var _a = collectKeysAndFreeIndexes(newList),
            newKeyIndexes = _a[0],
            newFreeIndexes = _a[1];

        var currentList = [];
        var children = new Array(oldList.length);
        var indexChanged = new Array(oldList.length);
        var removes = [];
        var inserts = [];
        var freeIndex = 0;
        var deletedItemCount = 0;

        for (var i = 0; i < oldList.length; i += 1) {
          var itemKey = oldList[i];

          if (itemKey) {
            if (Object.prototype.hasOwnProperty.call(newKeyIndexes, itemKey)) {
              var itemIndex = newKeyIndexes[dataValueToString(itemKey)];
              currentList.push(newList[itemIndex]);
              children[i] = dataList[itemIndex];
              indexChanged[i] = i !== itemIndex;
            } else {
              removes.push(i - deletedItemCount);
              deletedItemCount += 1;
              currentList.push(null);
              children[i] = null;
            }
          } else {
            if (freeIndex < newFreeIndexes.length) {
              var itemIndex = newFreeIndexes[freeIndex];
              currentList.push(newList[itemIndex]);
              children[i] = dataList[itemIndex];
              freeIndex += 1;
              indexChanged[i] = i !== itemIndex;
            } else {
              removes.push(i - deletedItemCount);
              deletedItemCount += 1;
              currentList.push(null);
              children[i] = null;
            }
          }
        }

        var currentIndex = 0;
        var stables = [];

        for (var newIndex = 0; newIndex < newList.length;) {
          var newItemKey = newList[newIndex];
          var currentItemKey = currentList[currentIndex];

          while (currentItemKey === null) {
            currentIndex += 1;
            currentItemKey = currentList[currentIndex];
          }

          if (currentIndex >= currentList.length) {
            inserts.push({
              oldIndex: oldKeyIndexes[dataValueToString(newItemKey)],
              index: newIndex,
              pos: -1
            });
            currentIndex += 1;
            newIndex += 1;
          } else if (currentItemKey === newItemKey) {
            stables.push(currentIndex);
            currentIndex += 1;
            newIndex += 1;
          } else if (newItemKey) {
            if (currentItemKey) {
              if (newKeyIndexes[dataValueToString(currentItemKey)] === newIndex + 1) {
                inserts.push({
                  oldIndex: oldKeyIndexes[dataValueToString(newItemKey)],
                  index: newIndex,
                  pos: currentIndex
                });
              } else {
                currentIndex += 1;
                currentItemKey = currentList[currentIndex];

                if (currentItemKey === newItemKey) {
                  stables.push(currentIndex);
                  currentIndex += 1;
                } else {
                  currentIndex -= 1;
                  inserts.push({
                    oldIndex: oldKeyIndexes[dataValueToString(newItemKey)],
                    index: newIndex,
                    pos: currentIndex
                  });
                }
              }
            } else {
              inserts.push({
                oldIndex: oldKeyIndexes[dataValueToString(newItemKey)],
                index: newIndex,
                pos: currentIndex
              });
            }

            newIndex += 1;
          } else {
            currentIndex += 1;
          }
        }

        var stableIndex = 0;

        for (var i = 0; i < inserts.length; i += 1) {
          var currentIndex_1 = inserts[i].pos;
          if (currentIndex_1 === -1) break;

          while (stableIndex < stables.length && currentIndex_1 > stables[stableIndex]) {
            stableIndex += 1;
          }

          if (stableIndex >= stables.length) {
            inserts[i].pos = -1;
          } else {
            inserts[i].pos = stables[stableIndex];
          }
        }

        return {
          children: children,
          indexChanged: indexChanged,
          removes: removes,
          inserts: inserts
        };
      };

      var applyListDiff = function (removes, inserts, exparserNode, dataList, baseLvaluePath, newListItemFunc) {
        var exparserChildren = exparserNode.childNodes;
        var insertNodes = [];

        for (var i = 0; i < inserts.length; i += 1) {
          var insert = inserts[i];
          insertNodes.push({
            node: insert.oldIndex !== undefined ? exparserChildren[insert.oldIndex] : null,
            before: insert.pos >= 0 ? exparserChildren[insert.pos] : undefined,
            index: insert.index
          });
        }

        for (var i = 0; i < removes.length; i += 1) {
          var index = removes[i];
          var node = exparserChildren[index];
          exparserNode.removeChild(node);
        }

        for (var i = 0; i < insertNodes.length; i += 1) {
          var _a = insertNodes[i],
              before = _a.before,
              index = _a.index;
          var node = insertNodes[i].node;

          if (node === null) {
            var _b = dataList[index],
                item = _b.item,
                key = _b.index;
            if (baseLvaluePath) baseLvaluePath.push(key);
            node = newListItemFunc(item, key, baseLvaluePath);
            if (baseLvaluePath) baseLvaluePath.pop();
          }

          exparserNode.insertBefore(node, before);
        }
      };

      ;
      var VIRTUAL_NODE_TYPES;

      (function (VIRTUAL_NODE_TYPES) {
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["PURE"] = 0] = "PURE";
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["IF"] = 1] = "IF";
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["FOR"] = 2] = "FOR";
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["TEMPLATE_IS"] = 3] = "TEMPLATE_IS";
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["SHADOW_ROOT"] = 4] = "SHADOW_ROOT";
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["SLOT"] = 5] = "SLOT";
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["INCLUDE"] = 6] = "INCLUDE";
        VIRTUAL_NODE_TYPES[VIRTUAL_NODE_TYPES["BLOCK_SLOT"] = 7] = "BLOCK_SLOT";
      })(VIRTUAL_NODE_TYPES || (VIRTUAL_NODE_TYPES = {}));

      var insertChildren = function (genObjectGroup, exparserNode, children, data, scopes, scopeLvaluePaths, shadowRoot) {
        if (!children) return;

        for (var i = 0; i < children.length; i += 1) {
          var child = children[i];
          if (child == null) continue;

          if (child.S === undefined) {
            var childNode = genObjectToExparserNode(genObjectGroup, child, data, scopes, scopeLvaluePaths, null, shadowRoot);
            exparserNode.appendChild(childNode);
          } else {
            var content = evaluateExpr(child.S, data, scopes, scopeLvaluePaths)[0];
            var childNode = shadowRoot.createTextNode(dataValueToString(content));
            exparserNode.appendChild(childNode);
          }
        }
      };

      var genObjectToExparserNode = function (genObjectGroup, genObj, data, scopes, scopeLvaluePaths, shadowRootHost, shadowRoot) {
        var exparserNode = null;

        if (typeof genObj.V !== 'undefined') {
          var vObj_1 = genObj;

          if (vObj_1.V === VIRTUAL_NODE_TYPES.IF) {
            var virtualTagName = 'wx:if';
            var exparserNode_1 = shadowRoot.createVirtualNode(virtualTagName);
            exparserNode_1.__templateArgs = {};
            exparser.Element.setInheritSlots(exparserNode_1);
            var branches = vObj_1.B;

            for (var i = 0; i < branches.length; i += 1) {
              var branch = branches[i];
              var res = evaluateExpr(branch.B, data, scopes, scopeLvaluePaths);

              if (res[0]) {
                insertChildren(genObjectGroup, exparserNode_1, branch.C, data, scopes, scopeLvaluePaths, shadowRoot);
                exparserNode_1.__templateArgs.key = i;
                break;
              }
            }

            return exparserNode_1;
          } else if (vObj_1.V === VIRTUAL_NODE_TYPES.FOR) {
            var virtualTagName = 'wx:for';
            var exparserNode_2 = shadowRoot.createVirtualNode(virtualTagName);
            exparserNode_2.__templateArgs = {};
            exparser.Element.setInheritSlots(exparserNode_2);
            var keyList_1 = exparserNode_2.__templateArgs.keyList = [];
            var keyName_1 = vObj_1.K;

            var appendListItem = function (item, index, lvaluePath) {
              if (keyName_1 === '*this') {
                keyList_1.push(item);
              } else {
                keyList_1.push(item == null ? undefined : item[keyName_1]);
              }

              var virtualTagName = 'wx:for-item';
              var childNode = shadowRoot.createVirtualNode(virtualTagName);
              exparser.Element.setInheritSlots(childNode);
              scopes.push(item);
              scopes.push(index);
              scopeLvaluePaths.push(lvaluePath);
              scopeLvaluePaths.push(null);
              insertChildren(genObjectGroup, childNode, vObj_1.C, data, scopes, scopeLvaluePaths, shadowRoot);
              scopeLvaluePaths.pop();
              scopeLvaluePaths.pop();
              scopes.pop();
              scopes.pop();
              exparserNode_2.appendChild(childNode);
            };

            var _a = evaluateExpr(vObj_1.L, data, scopes, scopeLvaluePaths),
                list = _a[0],
                lvaluePath = _a[1];

            if (list instanceof Array) {
              for (var i = 0; i < list.length; i += 1) {
                if (lvaluePath) lvaluePath.push(i);
                appendListItem(list[i], i, lvaluePath);
                if (lvaluePath) lvaluePath.pop();
              }
            } else if (typeof list === 'object') {
              for (var key in list) {
                if (Object.prototype.hasOwnProperty.call(list, key)) {
                  if (lvaluePath) lvaluePath.push(key);
                  appendListItem(list[key], key, lvaluePath);
                  if (lvaluePath) lvaluePath.pop();
                }
              }
            } else if (typeof list === 'string') {
              for (var i = 0; i < list.length; i += 1) {
                if (lvaluePath) lvaluePath.push(i);
                appendListItem(list[i], i, lvaluePath);
                if (lvaluePath) lvaluePath.pop();
              }
            } else if (typeof list === 'number') {
              for (var i = 0; i < list; i += 1) {
                if (lvaluePath) lvaluePath.push(i);
                appendListItem(i, i, lvaluePath);
                if (lvaluePath) lvaluePath.pop();
              }
            }

            return exparserNode_2;
          } else if (vObj_1.V === VIRTUAL_NODE_TYPES.TEMPLATE_IS) {
            var exparserNode_3 = shadowRoot.createVirtualNode('template');
            exparserNode_3.__templateArgs = {};
            exparser.Element.setInheritSlots(exparserNode_3);
            var name_1 = evaluateExpr(vObj_1.N, data, scopes, scopeLvaluePaths)[0];
            var is = exparserNode_3.__templateArgs.key = dataValueToString(name_1);
            var target = genObjectGroup(is);

            if (target) {
              var subData = evaluateExpr(vObj_1.D, data, scopes, scopeLvaluePaths)[0];
              insertChildren(genObjectGroup, exparserNode_3, target.C, subData, [], [], shadowRoot);
            }

            return exparserNode_3;
          } else if (vObj_1.V === VIRTUAL_NODE_TYPES.INCLUDE) {
            var exparserNode_4 = shadowRoot.createVirtualNode('include');
            exparser.Element.setInheritSlots(exparserNode_4);
            return exparserNode_4;
          } else if (vObj_1.V === VIRTUAL_NODE_TYPES.SHADOW_ROOT) {
            exparserNode = shadowRoot = exparser.ShadowRoot.create(shadowRootHost);
          } else if (vObj_1.V === VIRTUAL_NODE_TYPES.SLOT) {
            var n = exparserNode = shadowRoot.createVirtualNode('slot');
            var name_2 = evaluateExpr(vObj_1.N, data, scopes, scopeLvaluePaths)[0];
            exparser.Element.setSlotName(n, dataValueToString(name_2));
          } else if (vObj_1.V === VIRTUAL_NODE_TYPES.BLOCK_SLOT) {
            var n = exparserNode = shadowRoot.createVirtualNode('virtual');
            var name_3 = evaluateExpr(vObj_1.N, data, scopes, scopeLvaluePaths)[0];
            n.slot = dataValueToString(name_3);
          } else if (vObj_1.V === VIRTUAL_NODE_TYPES.PURE) {
            var n = exparserNode = shadowRoot.createVirtualNode('virtual');
            exparser.Element.setInheritSlots(n);
          }
        } else {
          var compObj = genObj;
          var domTag = compObj.T;

          if (shadowRoot.tagNameUsed(domTag) || domTag.indexOf('-') >= 0) {
            exparserNode = shadowRoot.createComponent(domTag, undefined, compObj.G);
          } else {
            exparserNode = shadowRoot.createNativeNode(domTag);
          }
        }

        if (exparserNode instanceof exparser.Element) {
          var scopeData = genObj.SD;

          if (scopeData !== undefined) {
            if (!exparserNode.__templateArgs) exparserNode.__templateArgs = {};
            var sd = evaluateExpr(scopeData, data, scopes, scopeLvaluePaths)[0];
            exparserNode.__templateArgs.scopeData = sd;
          }

          var compObj = genObj;

          if (compObj.EA) {
            for (var k in compObj.EA) {
              exparserNode.setAttribute(k, compObj.EA[k]);
            }
          }

          var attr = compObj.A;

          if (attr) {
            applyProperties(exparserNode, attr, data, scopes, scopeLvaluePaths);
          }

          var children = genObj.C;

          if (children) {
            insertChildren(genObjectGroup, exparserNode, children, data, scopes, scopeLvaluePaths, shadowRoot);
          }
        }

        return exparserNode;
      };

      var updateChildren = function (exparserNode, genObjectGroup, children, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, shadowRoot) {
        if (!children) return;

        for (var i = 0; i < children.length; i += 1) {
          var child = children[i];
          if (child == null) continue;

          if (child.S === undefined) {
            genObjectExparserNodeUpdate(exparserNode.childNodes[i], genObjectGroup, child, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, shadowRoot);
          } else {
            var res = evaluateExprWithUpdateCheck(child.S, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, false);

            if (res) {
              var content = res[0];
              exparserNode.childNodes[i].textContent = dataValueToString(content);
            }
          }
        }
      };

      var genObjectExparserNodeUpdate = function (exparserNode, genObjectGroup, genObj, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, shadowRoot) {
        if (typeof genObj.V !== 'undefined') {
          var vObj_2 = genObj;

          if (vObj_2.V === VIRTUAL_NODE_TYPES.IF) {
            var createNewNode = function (key, children) {
              var virtualTagName = 'wx:if';
              var newExparserNode = shadowRoot.createVirtualNode(virtualTagName);
              newExparserNode.__templateArgs = {};
              exparser.Element.setInheritSlots(newExparserNode);
              newExparserNode.__templateArgs.key = key;

              if (children) {
                insertChildren(genObjectGroup, newExparserNode, children, data, scopes, scopeLvaluePaths, shadowRoot);
              }

              exparserNode.parentNode.replaceChild(newExparserNode, exparserNode);
            };

            var branches = vObj_2.B;

            for (var i = 0; i < branches.length; i += 1) {
              var branch = branches[i];
              var value = evaluateExprWithUpdateCheck(branch.B, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, true)[0];

              if (value) {
                if (exparserNode.__templateArgs.key === i) {
                  genObjectExparserNodeUpdate(exparserNode, genObjectGroup, branch, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, shadowRoot);
                } else {
                  createNewNode(i, branch.C);
                }

                return;
              }
            }

            if (exparserNode.__templateArgs.key !== -1) {
              createNewNode(-1);
            }

            return;
          } else if (vObj_2.V === VIRTUAL_NODE_TYPES.FOR) {
            var oldKeyList = exparserNode.__templateArgs.keyList;
            var keyList_2 = exparserNode.__templateArgs.keyList = [];
            var keyName_2 = vObj_2.K;

            var collectKeyList = function (item) {
              if (keyName_2 === '*this') {
                keyList_2.push(item);
              } else {
                keyList_2.push(item == null ? undefined : item[keyName_2]);
              }
            };

            var newListItem = function (item, index, lvaluePath) {
              var virtualTagName = 'wx:for-item';
              var childNode = shadowRoot.createVirtualNode(virtualTagName);
              exparser.Element.setInheritSlots(childNode);
              scopes.push(item);
              scopes.push(index);
              scopeLvaluePaths.push(lvaluePath);
              scopeLvaluePaths.push(null);
              insertChildren(genObjectGroup, childNode, vObj_2.C, data, scopes, scopeLvaluePaths, shadowRoot);
              scopeLvaluePaths.pop();
              scopeLvaluePaths.pop();
              scopes.pop();
              scopes.pop();
              return childNode;
            };

            var updateListItem = function (item, index, updatePathTree, lvaluePath, indexChanged, exparserNode) {
              scopes.push(item);
              scopes.push(index);
              scopeUpdatePathTrees.push(updatePathTree);
              scopeUpdatePathTrees.push(indexChanged ? true : undefined);
              scopeLvaluePaths.push(lvaluePath);
              scopeLvaluePaths.push(null);
              var children = vObj_2.C;
              updateChildren(exparserNode, genObjectGroup, children, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, shadowRoot);
              scopeLvaluePaths.pop();
              scopeLvaluePaths.pop();
              scopeUpdatePathTrees.pop();
              scopeUpdatePathTrees.pop();
              scopes.pop();
              scopes.pop();
            };

            var _a = evaluateExprWithUpdateCheck(vObj_2.L, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, true),
                list = _a[0],
                listUpdatePathTree = _a[1],
                baseLvaluePath = _a[2];

            var objectKeyAsIndex = false;
            var dataList = [];

            if (list instanceof Array) {
              for (var i = 0; i < list.length; i += 1) {
                collectKeyList(list[i]);
                dataList.push({
                  item: list[i],
                  index: i
                });
              }
            } else if (typeof list === 'object') {
              objectKeyAsIndex = true;

              for (var key in list) {
                collectKeyList(list[key]);
                dataList.push({
                  item: list[key],
                  index: key
                });
              }
            } else if (typeof list === 'string') {
              for (var i = 0; i < list.length; i += 1) {
                collectKeyList(list[i]);
                dataList.push({
                  item: list[i],
                  index: i
                });
              }
            } else if (typeof list === 'number') {
              for (var i = 0; i < list; i += 1) {
                collectKeyList(i);
                dataList.push({
                  item: i,
                  index: i
                });
              }
            }

            var _b = listDiff(oldKeyList, keyList_2, dataList),
                children = _b.children,
                indexChanged = _b.indexChanged,
                inserts = _b.inserts,
                removes = _b.removes;

            for (var i = 0; i < children.length; i += 1) {
              var newChild = children[i];

              if (newChild) {
                var updatePathTree = void 0;
                if (listUpdatePathTree === true) updatePathTree = true;else if (listUpdatePathTree) updatePathTree = listUpdatePathTree[newChild.index];
                if (baseLvaluePath) baseLvaluePath.push(newChild.index);
                updateListItem(newChild.item, newChild.index, updatePathTree, baseLvaluePath, objectKeyAsIndex || indexChanged[i], exparserNode.childNodes[i]);
                if (baseLvaluePath) baseLvaluePath.pop();
              }
            }

            applyListDiff(removes, inserts, exparserNode, dataList, baseLvaluePath, newListItem);
            return;
          } else if (vObj_2.V === VIRTUAL_NODE_TYPES.TEMPLATE_IS) {
            var res = evaluateExprWithUpdateCheck(vObj_2.N, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, false);

            if (res && exparserNode.__templateArgs.key !== res[0]) {
              var newExparserNode = genObjectToExparserNode(genObjectGroup, vObj_2, data, scopes, scopeLvaluePaths, null, shadowRoot);
              exparserNode.parentNode.replaceChild(newExparserNode, exparserNode);
            } else {
              var is = exparserNode.__templateArgs.key;
              var target = genObjectGroup(is);

              var _c = evaluateExprWithUpdateCheck(vObj_2.D, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, true),
                  subData = _c[0],
                  subUpdatePathTree = _c[1];

              updateChildren(exparserNode, genObjectGroup, target.C, subData, [], subUpdatePathTree, [], [], shadowRoot);
            }

            return;
          } else if (vObj_2.V === VIRTUAL_NODE_TYPES.SLOT) {
            var res = evaluateExprWithUpdateCheck(vObj_2.N, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, false);

            if (res) {
              exparser.Element.setSlotName(exparserNode, dataValueToString(res[0]));
            }
          } else if (vObj_2.V === VIRTUAL_NODE_TYPES.INCLUDE) {
            return;
          } else if (vObj_2.V === VIRTUAL_NODE_TYPES.BLOCK_SLOT) {
            var res = evaluateExprWithUpdateCheck(vObj_2.N, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, false);

            if (res) {
              exparserNode.slot = dataValueToString(res[0]);
            }
          }
        }

        if (exparserNode instanceof exparser.Element) {
          var compObj = genObj;
          var attr = compObj.A;

          if (attr) {
            applyProperties(exparserNode, attr, data, scopes, scopeLvaluePaths, dataUpdatePathTree, scopeUpdatePathTrees);
          }

          var children = genObj.C;

          if (children) {
            updateChildren(exparserNode, genObjectGroup, children, data, scopes, dataUpdatePathTree, scopeUpdatePathTrees, scopeLvaluePaths, shadowRoot);
          }
        }
      };

      ;

      var DEFAULT_GEN_OBJECT_GROUP_LIST = function () {
        return {
          P: '',
          C: [{
            V: VIRTUAL_NODE_TYPES.SLOT,
            N: '',
            C: []
          }]
        };
      };

      var GlassEaselTemplateNative = function () {
        function GlassEaselTemplateNative(behavior, data, innerData, _componentOptions) {
          this.data = data;
          this.innerData = innerData;

          if (typeof behavior.template === 'string') {
            this.genObjectGroup = exparser.precompileTemplate(behavior.template).content[''];
          } else {
            var c = behavior.template || {
              content: DEFAULT_GEN_OBJECT_GROUP_LIST
            };
            this.genObjectGroup = c.content;
          }

          this.updateMode = '';
        }

        GlassEaselTemplateNative.create = function (behavior, data, innerData, componentOptions) {
          return new GlassEaselTemplateNative(behavior, data, innerData, componentOptions);
        };

        GlassEaselTemplateNative.prototype.createInstance = function (elem, _updateOptions) {
          var inst = new GlassEaselTemplateNativeInstance();
          inst.template = this;
          var genObjectRoot = inst.template.genObjectGroup('');
          inst.genObject = {
            V: VIRTUAL_NODE_TYPES.SHADOW_ROOT,
            C: genObjectRoot.C
          };
          inst.bindingMap = genObjectRoot.BM;
          inst.data = exparser.dataUtils.deepCopy(this.data);
          inst.idMap = Object.create(null);
          var slots = Object.create(null);
          slots[''] = null;
          var shadowRoot = genObjectToInitTree(elem, inst.genObject, inst.data, inst.idMap, slots);

          if (slots[''] === null && shadowRoot.childNodes.length > 0) {
            var slot = document.createElement('virtual');
            shadowRoot.appendChild(slot);
            slots[''] = slot;
          }

          elem.__treeManager__ = _updateOptions;
          inst.shadowRoot = shadowRoot;
          inst.shadowRoot.__treeManager__ = _updateOptions;
          inst.slots = slots;
          inst.listeners = [];
          return inst;
        };

        return GlassEaselTemplateNative;
      }();

      var GlassEaselTemplateNativeInstance = function () {
        function GlassEaselTemplateNativeInstance() {}

        GlassEaselTemplateNativeInstance.prototype.updateValues = function (elem, data, changedPaths, _changedValues, _changes, _updateOptions) {
          if (!this.bindingMapInstance) {
            var bm_1 = {};

            for (var k in this.bindingMap) {
              if (Object.prototype.hasOwnProperty.call(this.bindingMap, k)) {
                var bindingPathList = this.bindingMap[k];
                var bindingTargets = new Array(bindingPathList.length);

                for (var i = 0; i < bindingPathList.length; i += 1) {
                  var pathIndexes = bindingPathList[i];
                  var curNode = elem.shadowRoot;
                  var curGenObjectNode = this.genObject;
                  var propName = null;

                  for (var j = 0; j < pathIndexes.length; j += 1) {
                    var index = pathIndexes[j];

                    if (typeof index === 'number') {
                      curNode = curNode.childNodes[index];
                      curGenObjectNode = curGenObjectNode.C[index];
                    } else {
                      propName = index;
                      break;
                    }
                  }

                  var propValueType = propName === null ? curGenObjectNode.S : curGenObjectNode.A[propName];

                  if (propName && (propName === 'id' || propName.indexOf(':') >= 0)) {
                    bindingTargets[i] = [curNode, "illegal-update:" + propName, propValueType];
                  } else {
                    bindingTargets[i] = [curNode, propName, propValueType];
                  }
                }

                bm_1[k] = bindingTargets;
              }
            }

            this.bindingMapInstance = bm_1;
          }

          var bm = this.bindingMapInstance;

          for (var i = 0; i < changedPaths.length; i += 1) {
            var path = changedPaths[i];
            var dataField = path[0];
            var targets = bm[dataField];
            if (targets === undefined) continue;

            for (var j = 0; j < targets.length; j += 1) {
              var _a = targets[j],
                  node = _a[0],
                  propName = _a[1],
                  propValueType = _a[2];
              var exprRes = evaluateExpr(propValueType, data, null, null)[0];

              if (propName !== null) {
                if (typeof exprRes === 'boolean') {
                  if (exprRes === true) {
                    node.setAttribute(propName, '');
                  } else {
                    node.removeAttribute(propName);
                  }
                } else {
                  node.setAttribute(propName, dataValueToString(exprRes));
                }
              } else {
                node.textContent = dataValueToString(exprRes);
              }
            }
          }
        };

        return GlassEaselTemplateNativeInstance;
      }();

      var genObjectToInitTree = function (host, genObj, data, idMap, slots) {
        var elem;
        var isRoot = false;

        if (typeof genObj.V !== 'undefined') {
          var vObj = genObj;

          if (vObj.V === VIRTUAL_NODE_TYPES.SHADOW_ROOT) {
            elem = document.createDocumentFragment();
            isRoot = true;
          }

          if (vObj.V === VIRTUAL_NODE_TYPES.SLOT) {
            var elem_1 = slots[''] = document.createElement('virtual');
            return elem_1;
          }
        } else {
          var compObj = genObj;
          var domTag = compObj.T;
          elem = document.createElement(domTag);
          var props = compObj.A;

          var _loop_1 = function (propName) {
            if (!Object.prototype.hasOwnProperty.call(props, propName)) return "continue";
            var propValueType = props[propName];
            var exprRes = evaluateExpr(propValueType, data, null, null)[0];

            if (propName === 'id') {
              idMap[dataValueToString(exprRes)] = elem;
            } else {
              var _a = propName.split(':', 2),
                  directive = _a[0],
                  p = _a[1];

              if (p) {
                if (directive === 'bind') {
                  var handlerName_1 = dataValueToString(exprRes);
                  exparser.addListenerToElement(elem, p, function (ev) {
                    var ret;

                    if (typeof host === 'object') {
                      var f = host[handlerName_1];

                      if (typeof f === 'function') {
                        ret = f.call(host, ev);
                      }
                    }

                    return ret;
                  });
                }
              } else {
                if (typeof exprRes === 'boolean') {
                  if (exprRes === true) {
                    elem.setAttribute(propName, '');
                  } else {
                    elem.removeAttribute(propName);
                  }
                } else {
                  elem.setAttribute(directive, dataValueToString(exprRes));
                }
              }
            }
          };

          for (var propName in props) {
            _loop_1(propName);
          }
        }

        var children = genObj.C;

        if (children.length === 1 && children[0].V === VIRTUAL_NODE_TYPES.SLOT) {
          if (!isRoot) {
            slots[''] = elem;
          }
        } else {
          for (var i = 0; i < children.length; i += 1) {
            var child = children[i];

            if (child.S === undefined) {
              var childNode = genObjectToInitTree(host, child, data, idMap, slots);
              elem.appendChild(childNode);
            } else {
              var content = evaluateExpr(child.S, data, null, null)[0];
              var childNode = document.createTextNode(dataValueToString(content));
              elem.appendChild(childNode);
            }
          }
        }

        return elem;
      };

      ;
      var BINDING_MAP_UPDATE_SET_DATA_FIELDS_LIMIT = 1;

      var src_DEFAULT_GEN_OBJECT_GROUP_LIST = function () {
        return {
          P: '',
          C: [{
            V: VIRTUAL_NODE_TYPES.SLOT,
            N: '',
            C: []
          }]
        };
      };

      var collectIdMapAndSlots = function (elem, idMap, slots) {
        var children = elem.childNodes;

        for (var i = 0; i < children.length; i += 1) {
          var child = children[i];

          if (child instanceof exparser.Element) {
            if (child.__id) idMap[child.__id] = child;
            if (child.__slotName !== undefined) slots[child.__slotName] = child;
            collectIdMapAndSlots(child, idMap, slots);
          }
        }
      };

      var GlassEaselTemplate = function () {
        function GlassEaselTemplate(behavior, data, innerData, _componentOptions) {
          this.data = data;
          this.innerData = innerData;

          if (typeof behavior.template === 'string') {
            this.genObjectGroup = exparser.precompileTemplate(behavior.template).content[''];
            this.updateMode = '';
          } else {
            var c = behavior.template || {
              content: src_DEFAULT_GEN_OBJECT_GROUP_LIST
            };
            this.genObjectGroup = c.content;
            this.updateMode = c.updateMode || '';
          }
        }

        GlassEaselTemplate.create = function (behavior, data, innerData, componentOptions) {
          if (componentOptions.renderingMode === 'native') {
            return new GlassEaselTemplateNative(behavior, data, innerData, componentOptions);
          }

          return new GlassEaselTemplate(behavior, data, innerData, componentOptions);
        };

        GlassEaselTemplate.prototype.createInstance = function (elem, _updateOptions) {
          var inst = new GlassEaselTemplateInstance();
          inst.template = this;
          var genObjectRoot = inst.template.genObjectGroup('');
          inst.genObject = {
            V: VIRTUAL_NODE_TYPES.SHADOW_ROOT,
            C: genObjectRoot.C
          };

          if (this.updateMode === '' || this.updateMode === 'bindingMap') {
            inst.bindingMap = genObjectRoot.BM;

            if (this.updateMode === 'bindingMap') {
              inst.forceBindingMapUpdate = true;
            }
          }

          inst.data = exparser.dataUtils.deepCopy(this.data);
          inst.idMap = Object.create(null);
          inst.slots = Object.create(null);
          inst.shadowRoot = genObjectToExparserNode(inst.template.genObjectGroup, inst.genObject, this.innerData, [], [], elem, null);
          collectIdMapAndSlots(inst.shadowRoot, inst.idMap, inst.slots);
          inst.listeners = [];
          elem.__treeManager__ = _updateOptions;
          inst.shadowRoot.__treeManager__ = _updateOptions;
          return inst;
        };

        return GlassEaselTemplate;
      }();

      var GlassEaselTemplateInstance = function () {
        function GlassEaselTemplateInstance() {}

        GlassEaselTemplateInstance.prototype.updateValues = function (elem, data, changedPaths, _changedValues, _changes, _updateOptions) {
          if (this.forceBindingMapUpdate) {
            this.tryBindingMapUpdate(elem, data, changedPaths);
            return;
          }

          if (changedPaths.length <= BINDING_MAP_UPDATE_SET_DATA_FIELDS_LIMIT) {
            if (this.bindingMap) {
              if (this.tryBindingMapUpdate(elem, data, changedPaths)) {
                return;
              }
            }
          }

          var dataUpdataPathTree = Object.create(null);

          for (var i = 0; i < changedPaths.length; i += 1) {
            var p = changedPaths[i];
            var cur = dataUpdataPathTree;

            for (var j = 0; j < p.length; j += 1) {
              var field = p[j];
              if (cur[field] === true) break;

              if (j === p.length - 1) {
                cur[field] = true;
                break;
              }

              if (!cur[field]) {
                cur[field] = Object.create(null);
              }

              cur = cur[field];
            }
          }

          genObjectExparserNodeUpdate(this.shadowRoot, this.template.genObjectGroup, this.genObject, data, [], dataUpdataPathTree, [], [], elem.shadowRoot);
        };

        GlassEaselTemplateInstance.prototype.tryBindingMapUpdate = function (elem, data, changedPaths) {
          if (!this.bindingMapInstance) {
            var bm_1 = {};

            for (var k in this.bindingMap) {
              if (Object.prototype.hasOwnProperty.call(this.bindingMap, k)) {
                var bindingPathList = this.bindingMap[k];
                var bindingTargets = new Array(bindingPathList.length);

                for (var i = 0; i < bindingPathList.length; i += 1) {
                  var pathIndexes = bindingPathList[i];
                  var curNode = elem.shadowRoot;
                  var curGenObjectNode = this.genObject;
                  var propName = null;

                  for (var j = 0; j < pathIndexes.length; j += 1) {
                    var index = pathIndexes[j];

                    if (typeof index === 'number') {
                      curNode = curNode.childNodes[index];
                      curGenObjectNode = curGenObjectNode.C[index];
                    } else {
                      propName = index;
                      break;
                    }
                  }

                  var propValueType = propName === null ? curGenObjectNode.S : curGenObjectNode.A[propName];
                  bindingTargets[i] = [curNode, propName, propValueType];
                }

                bm_1[k] = bindingTargets;
              }
            }

            this.bindingMapInstance = bm_1;
          }

          var bm = this.bindingMapInstance;

          for (var i = 0; i < changedPaths.length; i += 1) {
            var path = changedPaths[i];
            if (path.length !== 1) return false;
            var dataField = path[0];
            var targets = bm[dataField];
            if (targets === undefined) return false;
          }

          for (var i = 0; i < changedPaths.length; i += 1) {
            var path = changedPaths[i];
            var dataField = path[0];
            var targets = bm[dataField];

            for (var j = 0; j < targets.length; j += 1) {
              var _a = targets[j],
                  node = _a[0],
                  propName = _a[1],
                  propValueType = _a[2];

              if (propName !== null) {
                applyPropertyInBindingMap(node, propName, propValueType, data);
              } else {
                var content = evaluateExpr(propValueType, data, null, null)[0];
                node.textContent = dataValueToString(content);
              }
            }
          }

          return true;
        };

        return GlassEaselTemplateInstance;
      }();
    }
  };
  var __webpack_module_cache__ = {};

  function __nested_webpack_require_54412__(moduleId) {
    if (__webpack_module_cache__[moduleId]) {
      return __webpack_module_cache__[moduleId].exports;
    }

    var module = __webpack_module_cache__[moduleId] = {
      exports: {}
    };

    __webpack_modules__[moduleId](module, module.exports, __nested_webpack_require_54412__);

    return module.exports;
  }
  /* webpack/runtime/define property getters */


  (function () {
    __nested_webpack_require_54412__.d = function (exports, definition) {
      for (var key in definition) {
        if (__nested_webpack_require_54412__.o(definition, key) && !__nested_webpack_require_54412__.o(exports, key)) {
          Object.defineProperty(exports, key, {
            enumerable: true,
            get: definition[key]
          });
        }
      }
    };
  })();
  /* webpack/runtime/hasOwnProperty shorthand */


  (function () {
    __nested_webpack_require_54412__.o = function (obj, prop) {
      return Object.prototype.hasOwnProperty.call(obj, prop);
    };
  })();
  /* webpack/runtime/make namespace object */


  (function () {
    __nested_webpack_require_54412__.r = function (exports) {
      if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
        Object.defineProperty(exports, Symbol.toStringTag, {
          value: 'Module'
        });
      }

      Object.defineProperty(exports, '__esModule', {
        value: true
      });
    };
  })();

  return __nested_webpack_require_54412__(674);
};

/***/ }),

/***/ "./src/behaviors/base.ts":
/*!*******************************!*\
  !*** ./src/behaviors/base.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var skyline_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/runtime */ "./src/runtime/index.ts");

var {
  ReanimatedModule: ReanimatedModule
} = SkylineGlobal;
var IS_DEVTOOLS = false;
var base = {
  is: 'wx-base',
  properties: {
    hidden: {
      type: Boolean,
      public: true,
      observer: function (newVal) {
        this.classList.toggle('__wx_builtin_component_hidden__', newVal);
      }
    },
    animationStyle: {
      type: Object,
      observer: 'animationStyleChanged'
    }
  },
  data: {
    mapperIds: []
  },
  detached: function () {
    var self = this;
    self.stopMappers();
  },
  methods: {
    publish: function (event, params) {
      if (this.__publish === undefined) {
        this.__publish = wx.publishAsPage(this.getPageId());
      }

      return this.__publish(event, params);
    },
    subscribe: function (name, callback) {
      if (this.__subscribe === undefined) {
        this.__subscribe = wx.subscribeAsPage(this.getPageId());
      }

      return this.__subscribe(name, callback);
    },
    invoke: function (method, args, callback) {
      if (this.__invoke === undefined) {
        var pageId = this.getPageId();
        var pluginId = this.getPluginId();
        this.__invoke = wx.invokeAs({
          pageId: pageId,
          pluginId: pluginId
        });
      }

      this.__invoke(method, args, callback);
    },
    getNodeId: function () {
      this.__nodeId = this.__nodeId || (this.ownerShadowRoot ? __virtualDOM__.getNodeId(this.ownerShadowRoot.__wxHost) : '');
      return this.__nodeId;
    },
    getPageId: function () {
      this.__pageId = this.__pageId || __virtualDOM__.getPageId(this) || __virtualDOM__.getPageId(this.ownerShadowRoot.__wxHost);
      return this.__pageId;
    },
    getPluginId: function () {
      if (!this.ownerShadowRoot) return '';
      var host = this.ownerShadowRoot.__wxHost;
      var domain;

      for (;;) {
        var exparser = skyline_runtime__WEBPACK_IMPORTED_MODULE_0__.default.getInstance().getExparser();
        domain = exparser.Component.getComponentOptions(host).domain;
        if (domain !== '//') break;
        if (!host.ownerShadowRoot) return '';
        host = host.ownerShadowRoot.__wxHost;
      }

      return domain === '/' ? '' : domain;
    },
    getRealRoute: function (src, currentRoute = '') {
      if (!(/^wxfile:\/\//.test(src) || /^(http|https):\/\//.test(src) || /^\s*data:image\//.test(src))) {
        if (this.ownerShadowRoot) {
          var domain = this.ownerShadowRoot.__wxHost.__componentOptions.domain;

          if (domain && domain !== '/' && domain.indexOf('simple://') === -1) {
            var route = this.ownerShadowRoot.__wxHost.is.replace(/^plugin-private:\/\/wx[^/]+\//, '');

            var pluginId = domain.split('/')[0];
            src = __virtualDOM__.getPluginRoutePrefix(pluginId) + wx.getRealRoute(route, src);
          } else {
            var currentPkg = (window.__subPackages || __wxConfig.subPackages || []).filter(function (pkg) {
              return (window.__route__ || '').indexOf(pkg.root) === 0;
            });
            var currentPkgName = currentPkg[0] ? currentPkg[0].root || '' : '';
            var allExtendedComponents = currentPkg[0] ? currentPkg[0].allExtendedComponents || [] : [];
            var compPath = this.ownerShadowRoot.__wxHost.is;
            compPath = allExtendedComponents.indexOf(compPath) > -1 ? currentPkgName + compPath : compPath;
            src = wx.getRealRoute(compPath, src);
          }

          if (IS_DEVTOOLS) {
            src = '/' + src;
          }
        } else if (!IS_DEVTOOLS && currentRoute) {
          src = wx.getRealRoute(currentRoute, src);
        }
      }

      return src;
    },
    bindMethod: function (methods = []) {
      var _this = this;

      methods.forEach(function (method) {
        _this[`bind${method}`] = '';
      });
      this._eventHandlers = {};

      this.__eventHandlerChangeListener__ = function (eventName, handlerName) {
        _this._eventHandlers[eventName] = handlerName;

        if (methods.indexOf(eventName) >= 0) {
          _this[`bind${eventName}`] = handlerName;
        }
      };
    },
    animationStyleChanged: function (newVal) {
      var self = this;
      self.stopMappers();
      var animationStyles = [];

      if (Array.isArray(newVal)) {
        animationStyles.push(...newVal);
      } else {
        animationStyles.push(newVal);
      }

      animationStyles.forEach(function (style) {
        var mapperId = style.mapperId;
        self.data.mapperIds.push(mapperId);
        self.$$.addAnimatedStyle(style);
      });
    },
    stopMappers: function () {
      var self = this;
      var mapperIds = self.data.mapperIds;
      mapperIds.forEach(function (mapperId) {
        ReanimatedModule.stopMapper(mapperId);
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (base);

/***/ }),

/***/ "./src/behaviors/cloud.ts":
/*!********************************!*\
  !*** ./src/behaviors/cloud.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "init": () => (/* binding */ init)
/* harmony export */ });
var _this = globalThis;
var INIT_STATUS = {
  NONE: 0,
  INITIALIZING: 1,
  DONE: 2
};
var initStatus = INIT_STATUS.NONE;
var reportQueue = [];
var _networkType = 'unknown';

var clearQueue = function () {
  for (var i = 0, imax = reportQueue.length; i < imax; i++) {
    var fn = reportQueue[i];

    try {
      fn();
    } catch (err) {
      wxConsole.log('[cloud] clearQueue error: ', err);
    }
  }

  reportQueue = [];
};

var init = function () {
  if (initStatus !== INIT_STATUS.NONE) {
    return;
  }

  initStatus = INIT_STATUS.INITIALIZING;

  try {
    wx.getNetworkType({
      success: function (res) {
        _networkType = res.networkType;
      },
      complete: function () {
        initStatus = INIT_STATUS.DONE;
        clearQueue();
      }
    });

    _this.subscribe('onNetworkStatusChange', function (res) {
      if (initStatus !== INIT_STATUS.DONE) {
        initStatus = INIT_STATUS.DONE;
        clearQueue();
      }

      _networkType = res.networkType;
    });
  } catch (err) {
    wxConsole.log('[cloud] report init failed: ', err);

    if (initStatus !== INIT_STATUS.DONE) {
      initStatus = INIT_STATUS.DONE;
    }
  }
};

function reportTimeCost(api, totalTime, totalTimeNoCSNetCost) {
  wxConsole.log('reportTimeCost', api, totalTime, totalTimeNoCSNetCost);

  if (initStatus !== INIT_STATUS.DONE) {
    if (initStatus !== INIT_STATUS.INITIALIZING) {
      init();
    }

    if (reportQueue.length < 50) {
      reportQueue.push(reportTimeCost.bind(this, api, totalTime, totalTimeNoCSNetCost));
      return;
    } else {
      clearQueue();
    }
  }

  var value = [0, 'comp.cloud.getTempFileURL', totalTime, totalTime, 0, _networkType, totalTimeNoCSNetCost, totalTimeNoCSNetCost, 0].join(',');
  wxConsole.log('[reportTimeCost] Reporter.reportKeyValue', value);
  Reporter.reportKeyValue({
    key: 'CloudReport',
    value: value,
    force: true
  });
}

var wait = 50;
var CB_INFO = {
  image: [],
  audio: [],
  video: []
};

function throttle(func, wait, options) {
  var context;
  var args;
  var result;
  var timeout = null;
  var previous = 0;
  if (!options) options = {};

  var later = function () {
    previous = options.leading === false ? 0 : new Date().getTime();
    timeout = null;
    result = func.apply(context, args);
    if (!timeout) context = args = null;
  };

  return function () {
    var now = new Date().getTime();
    if (!previous && options.leading === false) previous = now;
    var remaining = wait - (now - previous);
    context = this;
    args = arguments;

    if (remaining <= 0 || remaining > wait) {
      clearTimeout(timeout);
      timeout = null;
      previous = now;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    } else if (!timeout && options.trailing !== false) {
      timeout = setTimeout(later, remaining);
    }

    return result;
  };
}

function getTempUrl(type) {
  var cbInfo = CB_INFO[type].slice();
  CB_INFO[type] = [];
  var fileIds = [];
  cbInfo.forEach(function (item) {
    fileIds.push(item.src);
  });
  var startTime = Date.now();
  wx.getCloudFileUrl({
    data: {
      fileid_list: fileIds,
      type: type
    },
    success: function (res) {
      wxNativeConsole.info('getCloudFileUrl success', res);
      var list = res.data;
      var map = new Map();
      list.forEach(function (item, ind) {
        if (item.code) {
          wxNativeConsole.error(`getCloudFileUrl error fileId "${fileIds[ind]}": ${item.code} ${item.msg}`);
        }

        map.set(fileIds[ind], item);
      });
      cbInfo.forEach(function (item) {
        var tempInfo = map.get(item.src);
        var tempUrl = tempInfo.url;
        item.callback && item.callback(tempUrl || item.src);
      });

      if (res.cost) {
        reportTimeCost('component.cloud.getTempFileURL', Date.now() - startTime, res.cost);
      }
    },
    fail: function () {
      cbInfo.forEach(function (item) {
        item.callback && item.callback(item.src);
      });
    },
    complete: function (res) {
      wxNativeConsole.info('getCloudFileUrl callback', res);
    }
  });
}

var getImageUrl = throttle(getTempUrl, wait);
var getAudioUrl = throttle(getTempUrl, wait);
var getVideoUrl = throttle(getTempUrl, wait);
var PROCEDURE = {
  image: getImageUrl,
  audio: getAudioUrl,
  video: getVideoUrl
};
var cloud = {
  is: 'wx-cloud',
  methods: {
    getCloudFileUrl: function (src, type, callback) {
      if (!/^(cloud):\/\//.test(src)) return callback(src);
      CB_INFO[type].push({
        src: src,
        callback: callback
      });
      PROCEDURE[type](type);
    },
    getCloudFileUrls: function (fileIds = [], type, callback) {
      if (fileIds.length === 0) {
        typeof callback === 'function' && callback(fileIds);
        return;
      }

      wx.getCloudFileUrl({
        data: {
          fileid_list: fileIds,
          type: type
        },
        success: function (res) {
          var list = res.data;
          callback(list.map(function (info, ind) {
            if (info.code) {
              wxNativeConsole.error(`getCloudFileUrl error fileId "${fileIds[ind]}": ${info.code} ${info.msg}`);
            }

            return info.url;
          }));
        },
        fail: function () {
          typeof callback === 'function' && callback(fileIds);
        },
        complete: function (res) {
          wxNativeConsole.info('getCloudFileUrls callback', res);
        }
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (cloud);

/***/ }),

/***/ "./src/behaviors/data-component.ts":
/*!*****************************************!*\
  !*** ./src/behaviors/data-component.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var dataComponent = {
  is: 'wx-data-component',
  properties: {
    name: {
      type: String,
      public: true
    },
    autoFill: {
      type: String,
      public: true
    }
  },
  methods: {
    getFormData: function () {
      return this.value || '';
    },
    resetFormData: function () {}
  }
};
/* harmony default export */ __webpack_exports__["default"] = (dataComponent);

/***/ }),

/***/ "./src/behaviors/hover.ts":
/*!********************************!*\
  !*** ./src/behaviors/hover.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var hover = {
  is: 'wx-hover',
  properties: {
    hoverStartTime: {
      type: Number,
      value: 50,
      public: true
    },
    hoverStayTime: {
      type: Number,
      value: 400,
      public: true
    },
    hoverClass: {
      type: String,
      value: '',
      public: true,
      observer: '_hoverClassChange'
    },
    hoverStopPropagation: {
      type: Boolean,
      value: false,
      public: true,
      observer: '_hoverStopChange'
    },
    hover: {
      type: Boolean,
      value: false,
      public: true,
      observer: '_hoverChanged'
    }
  },
  created: function () {
    this.__hoverClassStyle = '';
    this._hoverClass = [];
  },
  attached: function () {
    if ((this.hoverClass || this._defaultHoverClass) && this.hoverClass !== 'none') {
      this._hoverClassChange(this.hoverClass);
    }
  },
  detached: function () {
    this.unbindHover();
  },
  methods: {
    _hoverChanged: function (newValue) {
      if (newValue) {
        this.bindHover();
      } else {
        this.unbindHover();
      }
    },
    _hoverClassChange: function (newVal) {
      if (newVal) this._defaultHoverClass = '';
      var list = newVal.split(/\s/);
      this._hoverClass = [];

      if (newVal === 'none' && !this.hoverStopPropagation) {
        return;
      }

      for (var i = 0; i < list.length; i++) {
        if (list[i]) {
          this._hoverClass.push(list[i]);
        }
      }

      this.bindHover();
    },
    _hoverStopChange: function (newVal) {
      if (!newVal) {
        this.unbindHover();
      } else {
        this.bindHover();
      }
    },
    bindHover: function () {
      if (this._bindHover) {
        return;
      }

      this._bindHover = true;
      this.addListener('touchstart', this.hoverTouchStart);
      this.addListener('canceltap', this.hoverCancel);
      this.addListener('touchcancel', this.hoverCancel);
      this.addListener('touchend', this.hoverTouchEnd);
    },
    unbindHover: function () {
      if (!this._bindHover) {
        return;
      }

      this._bindHover = false;
      this.removeListener('touchstart', this.hoverTouchStart);
      this.removeListener('canceltap', this.hoverCancel);
      this.removeListener('touchcancel', this.hoverCancel);
      this.removeListener('touchend', this.hoverTouchEnd);
    },
    hoverTouchStart: function (e) {
      var _this = this;

      if (e._hoverPropagationStopped) return;
      if (this.hoverStopPropagation) e._hoverPropagationStopped = true;
      this._hoverTouch = true;

      if (this.hoverClass === 'none' || this.disabled) {} else {
        if (e.touches.length > 1) {
          return;
        }

        this._hoverStyleTimeId = setTimeout(function () {
          _this._hovering = true;

          if (_this._defaultHoverClass) {
            _this.classList.toggle(_this._defaultHoverClass, true);
          } else if (_this._hoverClass.length > 0) {
            for (var i = 0; i < _this._hoverClass.length; i++) {
              _this.classList.toggle(_this._hoverClass[i], true);
            }
          }

          if (!_this._hoverTouch) {
            clearTimeout(_this._hoverStayTimeId);
            _this._hoverStayTimeId = setTimeout(function () {
              _this._hoverReset();
            }, _this.hoverStayTime);
          }
        }, this.hoverStartTime);
      }
    },
    hoverTouchEnd: function () {
      var _this2 = this;

      this._hoverTouch = false;

      if (this._hovering) {
        clearTimeout(this._hoverStayTimeId);
        this._hoverStayTimeId = setTimeout(function () {
          _this2._hoverReset();
        }, this.hoverStayTime);
      }
    },
    hoverCancel: function () {
      this._hoverTouch = false;
      clearTimeout(this._hoverStyleTimeId);
      this._hoverStyleTimeId = undefined;

      this._hoverReset();
    },
    _hoverReset: function () {
      if (this._hovering) {
        this._hovering = false;

        if (this.hoverClass === 'none') {} else if (this._defaultHoverClass) {
          this.classList.toggle(this._defaultHoverClass, false);
        } else if (this._hoverClass.length > 0) {
          for (var i = 0; i < this._hoverClass.length; i++) {
            if (this.classList.contains(this._hoverClass[i])) {
              this.classList.toggle(this._hoverClass[i], false);
            }
          }
        }
      }
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (hover);

/***/ }),

/***/ "./src/behaviors/index.ts":
/*!********************************!*\
  !*** ./src/behaviors/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "registerBuiltinBehaviors": () => (/* binding */ registerBuiltinBehaviors)
/* harmony export */ });
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ "./src/behaviors/base.ts");
/* harmony import */ var _positioning__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./positioning */ "./src/behaviors/positioning.ts");
/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./player */ "./src/behaviors/player.ts");
/* harmony import */ var _public__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./public */ "./src/behaviors/public.ts");
/* harmony import */ var _cloud__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cloud */ "./src/behaviors/cloud.ts");
/* harmony import */ var _hover__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hover */ "./src/behaviors/hover.ts");
/* harmony import */ var _native__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./native */ "./src/behaviors/native.ts");
/* harmony import */ var _data_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./data-component */ "./src/behaviors/data-component.ts");
/* harmony import */ var _worklet_handler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./worklet-handler */ "./src/behaviors/worklet-handler.ts");









function registerBuiltinBehaviors(exparser) {
  exparser.registerBehavior(_base__WEBPACK_IMPORTED_MODULE_0__.default);
  exparser.registerBehavior(_positioning__WEBPACK_IMPORTED_MODULE_1__.default);
  exparser.registerBehavior(_public__WEBPACK_IMPORTED_MODULE_3__.requestFileter);
  exparser.registerBehavior(_public__WEBPACK_IMPORTED_MODULE_3__.requestSender);
  exparser.registerBehavior(_player__WEBPACK_IMPORTED_MODULE_2__.default);
  exparser.registerBehavior(_cloud__WEBPACK_IMPORTED_MODULE_4__.default);
  exparser.registerBehavior(_hover__WEBPACK_IMPORTED_MODULE_5__.default);
  exparser.registerBehavior(_native__WEBPACK_IMPORTED_MODULE_6__.default);
  exparser.registerBehavior(_data_component__WEBPACK_IMPORTED_MODULE_7__.default);
  exparser.registerBehavior(_worklet_handler__WEBPACK_IMPORTED_MODULE_8__.default);
}

/***/ }),

/***/ "./src/behaviors/native.ts":
/*!*********************************!*\
  !*** ./src/behaviors/native.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var noop = function () {};

var localPermisstions = {};
var native = {
  is: 'wx-native',
  properties: {
    hidden: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'hiddenChanged'
    }
  },
  created: function () {
    this._isReady = false;
    this._deferred = [];
    this._isError = false;
    this._size = {
      width: 0,
      height: 0
    };
  },
  attached: function () {
    var _this = this;

    var firstLayoutCb = true;
    this.$$.setLayoutCallback(function (rect) {
      _this._size.width = rect.width;
      _this._size.height = rect.height;

      if (firstLayoutCb) {
        _this._initNativeView(_this._size);
      } else {
        _this._updatePosition(_this._size);
      }

      firstLayoutCb = false;
    });
  },
  detached: function () {},
  methods: {
    delay: function (method, newVal, oldVal) {
      this._deferred.push({
        callback: method,
        args: [newVal, oldVal]
      });
    },
    ready: function () {
      var _this2 = this;

      this._isReady = true;

      this._deferred.forEach(function (item) {
        _this2[item.callback].apply(_this2, item.args);
      });

      this._deferred = [];
    },
    unready: function () {
      this._isReady = false;
    },
    hiddenChanged: function () {},
    _guardPermissions: function (fn = noop) {
      var _this3 = this;

      if (this._shouldEnablePermCheckAndGetTask && typeof this._shouldEnablePermCheckAndGetTask === 'function') {
        var task = this._shouldEnablePermCheckAndGetTask();

        if (!task || !task.indices) {
          fn.call(this);
          return;
        }

        var {
          reporterKey: reporterKey,
          errMsg: errMsg
        } = task;
        reporterKey = reporterKey || '';
        errMsg = errMsg || '接口系统维护中';
        var cachedPermission = localPermisstions[task.indices[0]];

        if (typeof cachedPermission !== 'number') {}

        if (typeof cachedPermission === 'number') {
          if (cachedPermission === 0) {
            fn.call(this);
          } else {
            this.triggerEvent('error', {
              errMsg: errMsg
            });
          }

          return;
        }

        wx.getPermissionBytes({
          indexes: task.indices,
          success: function (res) {
            if (res.permissionBytes && res.permissionBytes[0] === 0) {
              fn.call(_this3);
            } else {
              _this3.triggerEvent('error', {
                errMsg: errMsg
              });
            }

            _this3.publish('media_banned', {
              index: task.indices[0],
              permissionByte: res.permissionBytes && res.permissionBytes[0]
            });

            localPermisstions[task.indices[0]] = res.permissionBytes && res.permissionBytes[0];
          },
          fail: function () {
            _this3.triggerEvent('error', {
              errMsg: errMsg
            });
          }
        });
      } else {
        fn.call(this);
      }
    },
    insertNativeView: function (method, args, fn) {
      var _this4 = this;

      this._guardPermissions(function () {
        _this4.invoke(method, args, function (res) {
          if (/:ok/.test(res.errMsg)) {
            _this4.ready();

            if (typeof fn === 'function') {
              fn.call(_this4, res);
            }
          }
        });
      });
    },
    updateNativeView: function (method, args, fn) {
      var _this5 = this;

      this.invoke(method, args, function (res) {
        if (typeof fn === 'function') {
          fn.call(_this5, res);
        }
      });
    },
    removeNativeView: function (method, args, fn) {
      var _this6 = this;

      this.invoke(method, args, function (res) {
        _this6.unready();

        if (typeof fn === 'function') {
          fn.call(_this6, res);
        }
      });
    },
    _getPluginPermissionBytes: function (method, args, cb) {
      var pluginId = this._nativeViewPluginCheckPluginId;

      if (pluginId) {
        wx.getPluginPermissionBytes(pluginId, method, function (bytes) {
          args.permissionBytes = bytes;
          cb();
        });
      } else {
        cb();
      }
    },
    insertNativeViewWithPluginCheck: function (method, args, fn) {
      var _this7 = this;

      this._nativeViewPluginCheckPluginId = this.getPluginId();

      this._getPluginPermissionBytes(method, args, function () {
        _this7.insertNativeView(method, args, fn);
      });
    },
    updateNativeViewWithPluginCheck: function (method, args, fn) {
      var _this8 = this;

      this._getPluginPermissionBytes(method, args, function () {
        _this8.updateNativeView(method, args, fn);
      });
    },
    removeNativeViewWithPluginCheck: function (method, args, fn) {
      var _this9 = this;

      this._getPluginPermissionBytes(method, args, function () {
        _this9.removeNativeView(method, args, fn);
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (native);

/***/ }),

/***/ "./src/behaviors/player.ts":
/*!*********************************!*\
  !*** ./src/behaviors/player.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var player = {
  is: 'wx-player',
  methods: {
    _formatTime: function (t, showHour = true) {
      if (t === Infinity) {
        return '00:00';
      }

      t = Math.floor(t);
      var h = Math.floor(t / 3600);
      var m = Math.floor((t - 3600 * h) / 60);
      var s = t - 3600 * h - 60 * m;

      if (h === 0 || !showHour) {
        m += h * 60;
        return `${m >= 10 ? m : '0' + m}:${s >= 10 ? s : '0' + s}`;
      }

      return `${h >= 10 ? h : '0' + h}:${m >= 10 ? m : '0' + m}:${s >= 10 ? s : '0' + s}`;
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (player);

/***/ }),

/***/ "./src/behaviors/positioning.ts":
/*!**************************************!*\
  !*** ./src/behaviors/positioning.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var assignedPositioningId = {};

var generatePositioningId = function () {
  for (;;) {
    var newId = Math.floor(Math.random() * 0x7fff) + 10;

    if (!assignedPositioningId[newId]) {
      assignedPositioningId[newId] = true;
      return newId;
    }
  }
};

var positioning = {
  is: 'wx-positioning-target',
  created: function () {
    this._positioningId = generatePositioningId();
  },
  methods: {
    getPositioningId: function () {
      return this._positioningId;
    },
    regeneratePositioningId: function () {
      this._positioningId = generatePositioningId();
      return this._positioningId;
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (positioning);

/***/ }),

/***/ "./src/behaviors/public.ts":
/*!*********************************!*\
  !*** ./src/behaviors/public.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "requestFileter": () => (/* binding */ requestFileter),
/* harmony export */   "requestSender": () => (/* binding */ requestSender)
/* harmony export */ });
var filed = {
  is: 'wx://form-field',
  properties: {
    name: {
      type: String,
      public: true
    },
    value: {
      type: null,
      public: true
    }
  }
};
var styleFilter = {
  is: 'wx://style-filter',
  methods: {
    _styleFilter: function () {
      return '';
    }
  }
};
var requestFileter = {
  is: 'wx://request-filter',
  relations: {
    'wx://request-sender': {
      type: 'shadowContent'
    }
  },
  methods: {
    _srcFilter: function (src) {
      if (src.indexOf('://') !== -1 || src.indexOf('//') === 0) {
        if (src.indexOf('https://wx.qlogo.cn') === 0) {
          return src;
        }

        return null;
      }

      return src;
    }
  }
};
var requestSender = {
  is: 'wx://request-sender',
  relations: {
    'wx://request-filter': {
      type: 'shadowHost',
      linked: function (target) {
        this._hasCheckedLinked = true;
        this._filterTarget = target;

        this._checkDeferredFuncList();
      },
      linkFailed: function () {
        this._hasCheckedLinked = true;

        this._checkDeferredFuncList();
      }
    }
  },
  methods: {
    checkProp: function (value, propName = 'src') {
      value = value === undefined ? this[propName] : value;

      if (this._filterTarget) {
        return this._filterTarget._srcFilter(value);
      }

      return value;
    },
    deferredSetProp: function (func) {
      if (this._hasCheckedLinked) return func && func();
      this._deferredFuncList = this._deferredFuncList || [];

      this._deferredFuncList.push(func);
    },
    _checkDeferredFuncList: function () {
      var func;
      var deferredFuncList = this._deferredFuncList;
      if (!deferredFuncList || !deferredFuncList.length) return;

      while (func = deferredFuncList.shift()) {
        func();
      }
    }
  }
};


/***/ }),

/***/ "./src/behaviors/worklet-handler.ts":
/*!******************************************!*\
  !*** ./src/behaviors/worklet-handler.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_exparser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/exparser */ "./lib/exparser.js");
/* harmony import */ var _lib_exparser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lib_exparser__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_worklet_event_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/worklet_event_handler */ "./src/components/worklet_event_handler.ts");


var workletHandler = {
  is: 'wx-worklet-handler',
  created: function () {
    this.workletHandlers = [];
  },
  attached: function () {},
  detached: function () {
    this.detachNativeEvents();
  },
  methods: {
    attachNativeEvents: function () {},
    detachNativeEvents: function () {
      this.workletHandlers.forEach(function (handler) {
        handler.unregister();
      });
    },
    obtainWorkletFunc: function (methodName) {
      if (!methodName) return null;
      var host = this.ownerShadowRoot.getHostNode();
      var caller = _lib_exparser__WEBPACK_IMPORTED_MODULE_0___default().Element.getMethodCaller(host);
      var workletFactory = caller[`_${methodName}_worklet_factory_`];
      if (!workletFactory) return null;
      return workletFactory.call(host);
    },
    addWorkeltEventHandler: function (eventName, worklet) {
      if (typeof worklet !== 'function') return;
      var handler = new _components_worklet_event_handler__WEBPACK_IMPORTED_MODULE_1__.default(worklet, eventName);
      this.workletHandlers.push(handler);
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (workletHandler);

/***/ }),

/***/ "./src/components/events/appservice.ts":
/*!*********************************************!*\
  !*** ./src/components/events/appservice.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "triggerEvent": () => (/* binding */ triggerEvent)
/* harmony export */ });
/* harmony import */ var _runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../runtime */ "./src/runtime/index.ts");
/* harmony import */ var _bridge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bridge */ "./src/components/events/bridge.ts");


var triggerEvent = function (id, evName, detail, options) {
  var root = __virtualDOM__.getRootNode(id);

  console.log(`id=${id}, evName=${evName}, detail=${JSON.stringify(detail)}, options=${JSON.stringify(options)}`);
  console.log(root);
  _runtime__WEBPACK_IMPORTED_MODULE_0__.default.getInstance().getExparser().triggerEvent(root, evName, detail, options);
};
(0,_bridge__WEBPACK_IMPORTED_MODULE_1__.subscribe)('operateMap', function (res) {
  triggerEvent(res.pageId, 'operateMap', res, {
    bubbles: true
  });
});

/***/ }),

/***/ "./src/components/events/bridge.ts":
/*!*****************************************!*\
  !*** ./src/components/events/bridge.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "subscribe": () => (/* binding */ subscribe)
/* harmony export */ });
var subscribe = function (name, callback) {
  if (false) {}
};



/***/ }),

/***/ "./src/components/events/index.ts":
/*!****************************************!*\
  !*** ./src/components/events/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _appservice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./appservice */ "./src/components/events/appservice.ts");


/***/ }),

/***/ "./src/components/index.ts":
/*!*********************************!*\
  !*** ./src/components/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "registerBuiltinComponents": () => (/* binding */ registerBuiltinComponents)
/* harmony export */ });
/* harmony import */ var _wx_image__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./wx-image */ "./src/components/wx-image/index.ts");
/* harmony import */ var _wx_scroll_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wx-scroll-view */ "./src/components/wx-scroll-view/index.ts");
/* harmony import */ var _wx_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wx-map */ "./src/components/wx-map/index.ts");
/* harmony import */ var _wx_video__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wx-video */ "./src/components/wx-video/index.ts");
/* harmony import */ var _wx_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./wx-button */ "./src/components/wx-button/index.ts");
/* harmony import */ var _wx_navigator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./wx-navigator */ "./src/components/wx-navigator/index.ts");
/* harmony import */ var _wx_voip_room__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./wx-voip-room */ "./src/components/wx-voip-room/index.ts");
/* harmony import */ var _wx_canvas__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./wx-canvas */ "./src/components/wx-canvas/index.ts");
/* harmony import */ var _wx_input__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./wx-input */ "./src/components/wx-input/index.ts");
/* harmony import */ var _wx_hero__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./wx-hero */ "./src/components/wx-hero/index.ts");
/* harmony import */ var _wx_swiper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./wx-swiper */ "./src/components/wx-swiper/index.ts");
/* harmony import */ var _wx_swiper_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./wx-swiper/item */ "./src/components/wx-swiper/item.ts");
/* harmony import */ var _wx_textarea__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./wx-textarea */ "./src/components/wx-textarea/index.ts");
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./events */ "./src/components/events/index.ts");
/* harmony import */ var _wx_gesture__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./wx-gesture */ "./src/components/wx-gesture/index.ts");
/* harmony import */ var _components_less__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components.less */ "./src/components/components.less");
/* harmony import */ var _components_dark_less__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components-dark.less */ "./src/components/components-dark.less");
/* harmony import */ var _components_v2_less__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components-v2.less */ "./src/components/components-v2.less");
/* harmony import */ var _components_v2_dark_less__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./components-v2-dark.less */ "./src/components/components-v2-dark.less");



















function registerBuiltinComponents(exparser, runtime) {
  if (true) {
    runtime.appendGlobalStylesheet(_components_less__WEBPACK_IMPORTED_MODULE_15__.default);
  }

  exparser.registerElement(_wx_button__WEBPACK_IMPORTED_MODULE_4__.default);
  exparser.registerElement(_wx_image__WEBPACK_IMPORTED_MODULE_0__.image);
  exparser.registerElement(_wx_image__WEBPACK_IMPORTED_MODULE_0__.coverImage);
  exparser.registerElement(_wx_scroll_view__WEBPACK_IMPORTED_MODULE_1__.default);
  exparser.registerElement(_wx_map__WEBPACK_IMPORTED_MODULE_2__.default);
  exparser.registerElement(_wx_video__WEBPACK_IMPORTED_MODULE_3__.default);
  exparser.registerElement(_wx_navigator__WEBPACK_IMPORTED_MODULE_5__.default);
  exparser.registerElement(_wx_voip_room__WEBPACK_IMPORTED_MODULE_6__.default);
  exparser.registerElement(_wx_canvas__WEBPACK_IMPORTED_MODULE_7__.default);
  exparser.registerElement(_wx_input__WEBPACK_IMPORTED_MODULE_8__.default);
  exparser.registerElement(_wx_hero__WEBPACK_IMPORTED_MODULE_9__.default);
  exparser.registerElement(_wx_swiper__WEBPACK_IMPORTED_MODULE_10__.default);
  exparser.registerElement(_wx_swiper_item__WEBPACK_IMPORTED_MODULE_11__.default);
  exparser.registerElement(_wx_textarea__WEBPACK_IMPORTED_MODULE_12__.default);
  _wx_gesture__WEBPACK_IMPORTED_MODULE_14__.default.forEach(function (handler) {
    return exparser.registerElement(handler);
  });
}

/***/ }),

/***/ "./src/components/utils/type.ts":
/*!**************************************!*\
  !*** ./src/components/utils/type.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "toNumber": () => (/* binding */ toNumber)
/* harmony export */ });
function toNumber(n) {
  n = Number(n);
  return isNaN(n) ? -1 : n;
}

/***/ }),

/***/ "./src/components/utils/virtual-node.ts":
/*!**********************************************!*\
  !*** ./src/components/utils/virtual-node.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "findNonVirtualNode": () => (/* binding */ findNonVirtualNode)
/* harmony export */ });
var findNonVirtualNode = function (node) {
  if (node.childNodes.length !== 1) return null;
  var child = node.childNodes[0];
  if (!child.__virtual) return child;
  return findNonVirtualNode(child);
};

/***/ }),

/***/ "./src/components/worklet_event_handler.ts":
/*!*************************************************!*\
  !*** ./src/components/worklet_event_handler.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ WorkletEventHandler)
/* harmony export */ });
var {
  ReanimatedModule: ReanimatedModule
} = SkylineGlobal;
class WorkletEventHandler {
  constructor(worklet, eventName) {
    this.eventName = void 0;
    this.eventHash = void 0;
    this.worklet = void 0;
    this.worklet = worklet;
    this.eventName = eventName;
  }

  register(tag) {
    this.eventHash = `${this.eventName}-${tag}`;
    ReanimatedModule.registerEventHandler(this.eventHash, this.worklet);
  }

  unregister() {
    if (this.eventHash) {
      ReanimatedModule.unregisterEventHandler(this.eventHash);
    }
  }

}

/***/ }),

/***/ "./src/components/wx-button/index.ts":
/*!*******************************************!*\
  !*** ./src/components/wx-button/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var skyline_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/runtime */ "./src/runtime/index.ts");

var IS_IOS = true;

var checkMGRIdState = function () {
  var map = {};
  return function (id) {
    var _wxConfig$appContact, _wxConfig$appContact$, _wxConfig$appContact$2;

    if (map[id] !== undefined) {
      return map[id];
    }

    if ((_wxConfig$appContact = __wxConfig.appContactInfo) !== null && _wxConfig$appContact !== void 0 && (_wxConfig$appContact$ = _wxConfig$appContact.passThroughInfo) !== null && _wxConfig$appContact$ !== void 0 && (_wxConfig$appContact$2 = _wxConfig$appContact$.wxa_mgr) !== null && _wxConfig$appContact$2 !== void 0 && _wxConfig$appContact$2.mgr_list) {
      var mgritem = __wxConfig.appContactInfo.passThroughInfo.wxa_mgr.mgr_list.find(function (item) {
        return item.id === id;
      });

      if (mgritem) {
        map[mgritem.id] = mgritem.value;
        return mgritem.value;
      }

      return undefined;
    }

    return undefined;
  };
}();

var button = {
  is: 'wx-button',
  behaviors: ['wx-base', 'wx-hover'],
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          V: 5,
          N: "",
          C: []
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  properties: {
    type: {
      type: String,
      value: '',
      public: true,
      observer: function (val) {
        if (this.classList.contains(this._buttonType)) {
          this.classList.toggle(this._buttonType, false);
        }

        var buttonType = 'wx-button-type-none';

        switch (val) {
          case 'primary':
            buttonType = 'wx-button-type-primary';
            break;

          case 'warn':
            buttonType = 'wx-button-type-warn';
            break;

          case 'default':
            buttonType = 'wx-button-type-default';
            break;
        }

        this._buttonType = buttonType;
        this.classList.toggle(this._buttonType, true);
      }
    },
    size: {
      type: String,
      value: 'default',
      public: true,
      observer: function (val) {
        if (this.classList.contains(this._buttonSize)) {
          this.classList.toggle(this._buttonSize, false);
        }

        var buttonSize = '';

        if (val === 'mini') {
          buttonSize = 'wx-button-size-mini';
        }

        this._buttonSize = buttonSize;
        this.classList.toggle(this._buttonSize, true);
      }
    },
    plain: {
      type: Boolean,
      public: true,
      value: false,
      observer: function (val) {
        this.classList.toggle('wx-button-plain', val);
      }
    },
    loading: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (val) {
        this.classList.toggle('wx-button-loading', val);
      }
    },
    disabled: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (val) {
        this.classList.toggle('wx-button-disabled', val);
      }
    },
    formType: {
      type: String,
      public: true
    },
    openType: {
      value: '',
      type: String,
      public: true
    },
    appParameter: {
      value: '',
      type: String,
      public: true
    },
    launchAppid: {
      value: '',
      type: String,
      public: true
    },
    withCredentials: {
      value: true,
      type: Boolean,
      public: true
    },
    lang: {
      value: 'en',
      type: String,
      public: true
    },
    hoverStartTime: {
      type: Number,
      value: 20,
      public: true
    },
    hoverStayTime: {
      type: Number,
      value: 70,
      public: true
    },
    sessionFrom: {
      type: String,
      value: 'wxapp',
      public: true
    },
    businessId: {
      type: String,
      value: '',
      public: true
    },
    sendMessageTitle: {
      type: String,
      value: '',
      public: true
    },
    sendMessagePath: {
      type: String,
      value: '',
      public: true
    },
    sendMessageImg: {
      type: String,
      value: '',
      public: true
    },
    showMessageCard: {
      type: Boolean,
      value: false,
      public: true
    },
    categoryId: {
      type: Array,
      value: [],
      public: true
    },
    needPhoneNumber: {
      type: Boolean,
      value: false,
      public: true
    }
  },
  created: function () {
    this._defaultHoverClass = 'button-hover';
    this._isOpenTypeInvalid = false;
    this._buttonType = 'wx-button-type-none';
    this._buttonSize = '';
  },
  attached: function () {
    this.classList.toggle(this._buttonType, true);

    if (this.ownerShadowRoot) {
      var exparser = skyline_runtime__WEBPACK_IMPORTED_MODULE_0__.default.getInstance().getExparser();
      var domain = exparser.Component.getComponentOptions(this.ownerShadowRoot.__wxHost).domain;
      var isInPluginDomain = domain !== '' && domain !== '/' && domain !== '//';

      if (isInPluginDomain) {
        if (['contact', 'getPhoneNumber', 'getUserInfo', 'realnameAuth', 'getRealnameAuthInfo', 'authorizeWeRunWeeklyData'].indexOf(this.openType) > -1) {
          this._isOpenTypeInvalid = true;
          console.error(`<button/> 中的 open-type 为 ${this.openType} 特性不能在插件中使用。`);
        }
      }
    }
  },
  listeners: {
    tap: '_preventTapOnDisabled',
    longtap: '_preventTapOnDisabled',
    canceltap: '_preventTapOnDisabled',
    'this.tap': '_onThisTap'
  },
  methods: {
    _preventTapOnDisabled: function () {
      if (this.disabled) {
        return false;
      }
    },
    _onThisTap: function (e) {
      var _this = this;

      if (false) {}

      if (this.formType === 'submit') {
        if (!e.__originalEvent._formId) {
          e.__originalEvent._formId = wx.generateFormId();
          e.__originalEvent._formPluginId = this.getPluginId();
        }

        this.triggerEvent('formSubmit', {
          formId: e.__originalEvent._formId,
          formPluginId: e.__originalEvent._formPluginId
        }, {
          bubbles: true
        });
      } else if (this.formType === 'reset') {
        this.triggerEvent('formReset', undefined, {
          bubbles: true
        });
      }

      if (this._isOpenTypeInvalid) {
        return;
      }

      if (this._lock) {
        return;
      }

      this._lock = true;
      setTimeout(function () {
        _this._lock = false;
      }, 1000);

      if (this.openType === 'contact') {
        wx.enterContact({
          sessionFrom: this.sessionFrom,
          businessId: this.businessId,
          sendMessageTitle: this.sendMessageTitle,
          sendMessagePath: this.sendMessagePath,
          sendMessageImg: this.sendMessageImg,
          showMessageCard: this.showMessageCard,
          complete: function (res) {
            _this.triggerEvent('contact', res);
          }
        });
      } else if (this.openType === 'subscribe') {
        wx.subscribeMessage({
          success: function (res) {
            _this.triggerEvent('subscribe', res);
          },
          fail: function (res) {
            _this.triggerEvent('subscribe', res);
          }
        });
      } else if (this.openType === 'getPhoneNumber') {
        wx.getPhoneNumber({
          complete: function (res) {
            _this.triggerEvent('getphonenumber', res.public);
          }
        });
      } else if (this.openType === 'shareTimeLine') {
        var pluginId = this.getPluginId();
        var apiName = 'enableShareTimeLine';
        wx.getPluginPermissionBytes(pluginId, apiName, function (bytes) {
          if (bytes[0]) {
            _this.publish('tapShareTimeLineButton', {
              detail: {},
              target: {
                id: _this.id,
                dataset: _this.dataset,
                offsetTop: _this.$$.offsetTop,
                offsetLeft: _this.$$.offsetLeft
              }
            });
          } else {
            console.warn('For developer:plugin has no permission to share timeline');
          }
        });
      } else if (this.openType === 'shareToChatroom' || this.openType === 'share') {
        this.publish('tapShareButton', {
          detail: {
            openType: this.openType
          },
          target: {
            id: this.id,
            dataset: this.dataset,
            offsetTop: this.$$.offsetTop,
            offsetLeft: this.$$.offsetLeft
          }
        });
      } else if (this.openType === 'handoff') {
        this.publish('tapHandoffButton');
      } else if (this.openType === 'getUserInfo') {
        var _wx, _wx$version;

        wx.getUserInfo({
          withCredentials: this.withCredentials,
          lang: this.lang,
          version: ((_wx = wx) === null || _wx === void 0 ? void 0 : (_wx$version = _wx.version) === null || _wx$version === void 0 ? void 0 : _wx$version.version) || '',
          complete: function (res) {
            _this.triggerEvent('getuserinfo', res);
          }
        });
      } else if (this.openType === 'realnameAuth') {
        this.invoke('openRealnameAuth', {
          categoryId: this.categoryId
        }, function (res) {
          _this.triggerEvent('realnameauth', res);
        });
      } else if (this.openType === 'getRealnameAuthInfo') {
        var type = 1 << 0;

        if (this.needPhoneNumber) {
          type += 1 << 1;
        }

        this.invoke('openRealnameAuth', {
          categoryId: this.categoryId,
          authType: type
        }, function (res) {
          _this.triggerEvent('getrealnameauthinfo', res);
        });
      } else if (this.openType === 'launchApp') {
        wx.getLaunchAppInfo({
          success: function (res) {
            var sceneHistory = res.sceneHistory;
            var appId = res.appId;
            var launchAppid;
            var canLaunchApp = false;
            var method = 'launchApplication';
            var scene1036enable = checkMGRIdState(833) !== 1;
            var scene1069enable = checkMGRIdState(834) !== 1;
            sceneHistory.forEach(function (item) {
              if (item === 1036 && scene1036enable) {
                canLaunchApp = true;
                method = 'launchApplication';
                launchAppid = _this.launchAppid;
              } else if (item === 1069 && scene1069enable) {
                canLaunchApp = true;
                method = 'navigateBackApplication';
              } else if (!(item === 1089 || item === 1090 || item === 1038 || item === 1041 || item === 1001 || item === 1131 || item === 1187)) {
                canLaunchApp = false;
              }
            });

            if (!canLaunchApp) {
              _this.triggerEvent('error', {
                errMsg: 'invalid scene'
              });

              return;
            }

            var args = {
              appId: launchAppid || appId,
              success: function (res) {
                return _this.triggerEvent('launchapp', res);
              },
              fail: function (res) {
                _this.publish('tapAnyWhere', {
                  timeStamp: Date.now()
                });

                _this.triggerEvent('error', res);
              }
            };

            if (method === 'navigateBackApplication') {
              args.extraData = _this.appParameter;
            } else if (IS_IOS) {
              args.messageExt = _this.appParameter;
            } else {
              args.extInfo = _this.appParameter;
            }

            ;
            wx[method](args);
          },
          fail: function () {
            _this.triggerEvent('error', {
              errMsg: "can't get scene history"
            });
          }
        });
      } else if (this.openType === 'openSetting') {
        wx.openSetting({
          success: function (res) {
            res.authSetting = res.authSetting.reduce(function (ret, item) {
              ret[item.scope] = item.state === 1;
              return ret;
            }, {});
          },
          complete: function (res) {
            _this.triggerEvent('opensetting', res);
          }
        });
      } else if (this.openType === 'feedback') {
        this.invoke('private_openUrl', {
          url: `https://mp.weixin.qq.com/wxawap/wapreportwxadevlog?action=complain_feedback&appid=${window.__appId__}&from=3#wechat_redirect`,
          isNativeStyle: true
        }, function () {});
      } else if (this.openType === 'authorizeWeRunWeeklyData') {
        wx.authorizeWeRunWeeklyData({
          withCredentials: this.withCredentials,
          lang: this.lang,
          complete: function (res) {
            _this.triggerEvent('authorizewerunweeklydata', {
              errMsg: res.errMsg
            });
          }
        });
      }
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (button);

/***/ }),

/***/ "./src/components/wx-canvas/index.ts":
/*!*******************************************!*\
  !*** ./src/components/wx-canvas/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var skyline_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/runtime */ "./src/runtime/index.ts");
/* harmony import */ var skyline_utils_unique_id__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! skyline/utils/unique-id */ "./src/utils/unique-id.ts");
/* harmony import */ var _events_appservice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events/appservice */ "./src/components/events/appservice.ts");
/* harmony import */ var _events_bridge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../events/bridge */ "./src/components/events/bridge.ts");




var touchEventNames = ['touchstart', 'touchmove', 'touchend', 'touchcancel', 'longtap'];
var touchEventMap = {
  touchstart: 'onTouchStart',
  touchmove: 'onTouchMove',
  touchend: 'onTouchEnd',
  touchcancel: 'onTouchCancel',
  longtap: 'onLongPress'
};
(0,_events_bridge__WEBPACK_IMPORTED_MODULE_3__.subscribe)('xwebWebGLSetOpaqueBackground', function (res) {
  (0,_events_appservice__WEBPACK_IMPORTED_MODULE_2__.triggerEvent)(res.pageId, 'xwebWebGLSetOpaqueBackground', res, {
    bubbles: true
  });
});
var canvas = {
  is: 'wx-canvas',
  behaviors: ['wx-base', 'wx-native'],
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          V: 1,
          B: [{
            B: {
              L: function (D, S, T) {
                return !!D.embedType || undefined;
              },
              F: function (D, S, T, W) {
                return D.embedType === "webgl";
              }
            },
            C: [{
              T: "view",
              A: {
                "id": "backlayer",
                "style": "position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none;"
              },
              C: []
            }]
          }]
        }, {
          T: "texture",
          A: {
            "id": "texture",
            "style": "position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
          },
          C: []
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  properties: {
    bindtouchstart: {
      type: String,
      value: '',
      public: true
    },
    bindtouchmove: {
      type: String,
      value: '',
      public: true
    },
    bindtouchend: {
      type: String,
      value: '',
      public: true
    },
    bindtouchcancel: {
      type: String,
      value: '',
      public: true
    },
    bindlongtap: {
      type: String,
      value: '',
      public: true
    },
    type: {
      type: String,
      value: '',
      public: true
    },
    viewId: {
      type: Number,
      value: 0
    },
    embedType: {
      type: String,
      value: 'canvas'
    }
  },
  created: function () {
    this.viewId = (0,skyline_utils_unique_id__WEBPACK_IMPORTED_MODULE_1__.default)();
  },
  attached: function () {
    var _this = this;

    if (this.isBindingCanvas()) {
      this.embedType = 'canvas';
    } else if (this.isWebGL()) {
      this.embedType = 'webgl';

      var root = __virtualDOM__.getRootNode(this.getPageId());

      var exparser = skyline_runtime__WEBPACK_IMPORTED_MODULE_0__.default.getInstance().getExparser();
      this._xwebWebGLSetOpaqueBackgroundListener = exparser.addListenerToElement(root, 'xwebWebGLSetOpaqueBackground', function (e) {
        if (e.detail.canvasNumber === _this._canvasNumber) {
          if (_this.$.backlayer && _this.$.backlayer.$$) {
            _this.$.backlayer.$$.appendStyle('display: flex; background-color: #000');
          }
        }
      });
    }

    this.$.texture.$$.setAttributes({
      type: this.embedType,
      viewId: this.viewId
    });
  },
  detached: function () {
    var _this2 = this;

    var nodeId = this.getNodeId();

    if (this._xwebWebGLSetOpaqueBackgroundListener) {
      var root = __virtualDOM__.getRootNode(this.getPageId());

      var exparser = skyline_runtime__WEBPACK_IMPORTED_MODULE_0__.default.getInstance().getExparser();
      exparser.removeListenerFromElement(root, 'xwebWebGLSetOpaqueBackground', this._xwebWebGLSetOpaqueBackgroundListener);
    }

    this._detached = true;

    if (this.isWebGL()) {
      var removeAPIName = 'removeXWebWebGLCanvas';
      this.removeNativeView(removeAPIName, {
        canvasId: this.viewId
      }, function () {
        _this2.publish('webGLRemoved', {
          canvasNumber: _this2._canvasNumber
        });
      });
      return;
    } else if (this.isBindingCanvas()) {
      this.publish('skiaCanvasRemove', {
        viewId: this.viewId,
        canvasId: this.canvasId,
        canvasNumber: this.viewId,
        pluginId: this.getPluginId(),
        nodeId: nodeId
      });
      (0,_events_bridge__WEBPACK_IMPORTED_MODULE_3__.subscribe)(`skiaCanvasRemoved_${this.viewId}`, function () {
        var removeAPIName = 'removeXWebCanvas';

        _this2.removeNativeView(removeAPIName, {
          viewId: _this2.viewId,
          canvasId: _this2._canvasNumber
        }, function (res) {
          wxConsole.log('remove canvas callback, res: ' + JSON.stringify(res));
        });
      });
    }
  },
  methods: {
    _initNativeView: function (size) {
      var _this3 = this;

      var nodeId = this.getNodeId();
      var data = {
        target: {
          id: this.id,
          target: this.id,
          dataset: this.dataset,
          offsetTop: this.$$.offsetTop,
          offsetLeft: this.$$.offsetLeft
        },
        handlers: touchEventNames.reduce(function (data, eventName) {
          data[`bind${eventName}`] = _this3[`bind${eventName}`];
          return data;
        }, {}),
        nodeId: this.getNodeId(),
        startTime: Date.now()
      };
      touchEventNames.forEach(function (eventName) {
        if (_this3[`bind${eventName}`]) {
          data[touchEventMap[eventName]] = _this3[`bind${eventName}`];
        }
      });

      if (this.isWebGL()) {
        if (size.width === 0) size.width = 1;
        if (size.height === 0) size.height = 1;
        var args = {
          canvasId: this.viewId,
          parentId: 0,
          position: size,
          data: {
            type: 'android-webgl',
            canvasNumber: this.viewId
          }
        };
        var insertAPIName = 'insertXWebWebGLCanvas';
        this.insertNativeView(insertAPIName, args, function (res) {
          wxConsole.log('insert webgl canvas callback, res: ' + JSON.stringify(res));

          if (/:ok/.test(res.errMsg)) {
            _this3.publish('webGLInserted', {
              canvasNumber: _this3.viewId,
              width: 0,
              height: 0,
              pluginId: _this3.getPluginId(),
              nodeId: nodeId,
              data: data
            });
          }
        });
      } else if (this.isBindingCanvas()) {
        var _insertAPIName = 'insertXWebCanvas';
        this.insertNativeView(_insertAPIName, {
          parentId: 0,
          viewId: this.viewId,
          canvasId: this.viewId,
          position: size,
          data: JSON.stringify({
            type: 'canvas',
            webviewId: this.getPageId(),
            canvasNumber: this.viewId,
            nodeId: nodeId,
            viewId: this.viewId,
            skia: this.isBindingCanvas()
          }),
          hide: this.hidden,
          skia: true
        }, function (res) {
          wxConsole.log('insert canvas callback, res: ' + JSON.stringify(res));

          _this3.publish('skiaCanvasInsert', {
            viewId: _this3.viewId,
            canvasId: _this3.canvasId,
            canvasNumber: _this3.viewId,
            pluginId: _this3.getPluginId(),
            nodeId: nodeId,
            data: data,
            position: size,
            compPath: _this3.ownerShadowRoot ? _this3.ownerShadowRoot.__wxHost.is.replace(/^plugin-private:\/\/wx[^\/]+\//, '') : ''
          });
        });
      } else {}
    },
    _updatePosition: function (size) {
      if (this.hidden || this._detached) {
        return;
      }

      this.publish('canvasUpdate', {
        canvasId: this.canvasId,
        canvasNumber: this._canvasNumber,
        viewId: this.viewId,
        pluginId: this.getPluginId(),
        nodeId: this.getNodeId(),
        position: size
      });

      if (this.isWebGL()) {
        if (size.width === 0) size.width = 1;
        if (size.height === 0) size.height = 1;

        this._updateWebGLCanvas({
          canvasId: this._canvasNumber,
          position: size
        }, function () {});
      } else if (this.isBindingCanvas()) {
        this.publish('skiaCanvasSizeChangedBinding', {
          canvasNumber: this.viewId,
          pluginId: this.getPluginId(),
          nodeId: this.getNodeId(),
          position: size
        });

        this._updateCanvas({
          canvasId: this.viewId,
          viewId: this.viewId,
          position: size
        }, function () {});
      }
    },
    _hiddenChanged: function (newVal) {
      if (this.isWebGL()) {
        this._updateWebGLCanvas({
          canvasId: this.viewId,
          hide: newVal
        }, function () {});
      } else if (this.isBindingCanvas()) {
        this._updateCanvas({
          canvasId: this.viewId,
          viewId: this.viewId,
          hide: newVal
        }, function () {});
      }
    },
    _updateCanvas: function (args, cb) {
      if (!this._isReady) {
        this._delay('_updateCanvas', args, cb);

        return;
      }

      var updaetAPIName = 'updateXWebCanvas';
      this.updateNativeView(updaetAPIName, args, cb);
    },
    _updateWebGLCanvas: function (args, cb) {
      if (!this._isReady) {
        this._delay('_updateWebGLCanvas', args, cb);

        return;
      }

      var updaetAPIName = 'updateXWebWebGLCanvas';
      this.updateNativeView(updaetAPIName, args, cb);
    },
    getContextId: function () {
      return this.viewId;
    },
    isWebGL: function () {
      return this.type === 'webgl';
    },
    isBindingCanvas: function () {
      return this.type === '2d';
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (canvas);

/***/ }),

/***/ "./src/components/wx-gesture/index.ts":
/*!********************************************!*\
  !*** ./src/components/wx-gesture/index.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GestureTypes": () => (/* binding */ GestureTypes),
/* harmony export */   "GestureState": () => (/* binding */ GestureState),
/* harmony export */   "genGestureTag": () => (/* binding */ genGestureTag)
/* harmony export */ });
/* harmony import */ var _reanimated_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../reanimated/core */ "./src/reanimated/core.ts");
/* harmony import */ var _utils_virtual_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/virtual-node */ "./src/components/utils/virtual-node.ts");
/* harmony import */ var _utils_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/emitter */ "./src/utils/emitter.ts");



var warn = console.warn;
var {
  GestureHandlerModule: GestureHandlerModule
} = SkylineGlobal;
var GestureTypes = {
  tap: 0,
  'double-tap': 1,
  'long-press': 2,
  pan: 3,
  scale: 4,
  'force-press': 5,
  'vertical-drag': 6,
  'horizontal-drag': 7
};
var GestureState;

(function (GestureState) {
  GestureState[GestureState["POSSIBLE"] = 0] = "POSSIBLE";
  GestureState[GestureState["BEGIN"] = 1] = "BEGIN";
  GestureState[GestureState["ACTIVE"] = 2] = "ACTIVE";
  GestureState[GestureState["END"] = 3] = "END";
  GestureState[GestureState["CANCELLED"] = 4] = "CANCELLED";
})(GestureState || (GestureState = {}));

var VALID_NATIVE_VIEW = ['scroll-view'];
var handlerTag = 1;
var handlerIDToTag = {};
var handlerEmitter = (0,_utils_emitter__WEBPACK_IMPORTED_MODULE_2__.createManyEmitter)();
var genGestureTag = function () {
  return handlerTag++;
};

var isObjectEqual = function (a, b) {
  return JSON.stringify(a) === JSON.stringify(b);
};

function transformIntoHandlerTags(handlerIDs) {
  if (!Array.isArray(handlerIDs)) {
    handlerIDs = [handlerIDs];
  }

  return handlerIDs.map(function (handlerID) {
    return handlerIDToTag[handlerID] || -1;
  }).filter(function (handlerTag) {
    return handlerTag > 0;
  });
}

function filterConfig(props = {}, validProps) {
  var result = {};
  validProps.forEach(function (key) {
    var value = props[key];

    if (key === 'simultaneousHandlers') {
      value = transformIntoHandlerTags(value);
    }

    result[key] = value;
  });
  return result;
}

var gestureHandlers = Object.keys(GestureTypes).map(function (key) {
  var option = {
    is: `wx-${key}-gesture-handler`,
    behaviors: ['wx-worklet-handler'],
    options: {
      virtualHost: true
    },
    properties: {
      onGestureEvent: {
        type: String,
        public: true
      },
      shouldResponseOnMove: {
        type: String,
        public: true
      },
      shouldAcceptGesture: {
        type: String,
        public: true
      },
      simultaneousHandlers: {
        type: Array,
        value: [],
        public: true,
        observer: function (val) {
          if (val !== null && val !== void 0 && val.length) {
            this._onGestureHandlerChange = this.update.bind(this);
            handlerEmitter.on(this._onGestureHandlerChange);
          }

          this.update();
        }
      },
      nativeView: {
        type: String,
        public: true
      }
    },
    lifetimes: {
      created: function () {
        this.config = {};
        this.hostNode = null;
        this.handlerTag = handlerTag++;
        this.allowedProps = ['simultaneousHandlers'];
      },
      attached: function () {
        if (this.id) {
          if (handlerIDToTag[this.id] !== undefined) {
            throw new Error(`Handler with ID "${this.id}" already registered`);
          }

          handlerIDToTag[this.id] = this.handlerTag;
          handlerEmitter.emit({});
        }

        if (this.childNodes.length > 1) {
          warn(`[gesture-handler] can only have one child node`);
          return;
        }

        var childNode = (0,_utils_virtual_node__WEBPACK_IMPORTED_MODULE_1__.findNonVirtualNode)(this);

        if (!childNode) {
          warn('[gesture-handelr] can not find non-virtual child node');
          return;
        }

        this._attached = true;
        this.attachGestureHandler(childNode, filterConfig(this.data, this.allowedProps));
        this.initDataSet();
        this.attachNativeEvents();
      },
      detached: function () {
        this.dropGestureHandler();
        var handlerID = this.id;

        if (handlerID) {
          delete handlerIDToTag[handlerID];
        }

        if (this._onGestureHandlerChange) {
          handlerEmitter.off(this._onGestureHandlerChange);
        }
      }
    },
    methods: {
      initDataSet: function () {
        var initialDataset = Object.assign({}, this.dataset);
        this.shareableDataset = (0,_reanimated_core__WEBPACK_IMPORTED_MODULE_0__.makeMutable)(initialDataset);
      },
      attachGestureHandler: function (childNode, newConfig) {
        this.config = newConfig;
        var nativeView = this.data.nativeView;
        var gestureType = GestureTypes[key];

        if (nativeView) {
          if (VALID_NATIVE_VIEW.indexOf(nativeView) < 0) {
            warn(`[gesture-handler] native must be one of ${VALID_NATIVE_VIEW}`);
            return;
          }

          if (nativeView === 'scroll-view') {
            if (childNode.is !== 'wx-scroll-view') {
              warn(`[gesture-handler] childNode must be ${nativeView} component`);
              return;
            }

            if (key !== 'vertical-drag' && key !== 'horizontal-drag') {
              warn(`[gesture-handler] ${key} is not match with ${nativeView} component`);
              return;
            }

            this.hostNode = childNode.$.scrollView.$$;
            GestureHandlerModule.proxyScrollViewGestureHandler(this.handlerTag, gestureType, newConfig, this.hostNode);
          } else {
            warn(`[gesture-handler] ${this.data.native} not support yet`);
            return;
          }
        } else {
          this.hostNode = childNode.$$;
          GestureHandlerModule.attachGestureHandler(this.handlerTag, gestureType, newConfig, this.hostNode);
        }
      },
      updateGestureHandler: function (newConfig) {
        this.config = newConfig;
        if (!this.hostNode) return;
        GestureHandlerModule.updateGestureHandler(this.handlerTag, this.hostNode, newConfig);
      },
      dropGestureHandler: function () {
        if (!this.hostNode) return;
        GestureHandlerModule.dropGestureHandler(this.handlerTag, this.hostNode);
      },
      update: function () {
        if (!this._attached) return;
        var newConfig = filterConfig(this.data, this.allowedProps);

        if (!isObjectEqual(this.config, newConfig)) {
          this.updateGestureHandler(newConfig);
        }
      },
      attachNativeEvents: function () {
        var _this = this;

        var nativeEvents = [{
          eventName: 'shouldResponseOnMove',
          methodName: this.data.shouldResponseOnMove
        }, {
          eventName: 'shouldAcceptGesture',
          methodName: this.data.shouldAcceptGesture
        }, {
          eventName: 'onGestureHandlerEvent',
          methodName: this.data.onGestureEvent
        }];
        nativeEvents.forEach(function (item) {
          var worklet = _this.obtainWorkletFunc(item.methodName);

          if (typeof worklet !== 'function') return;

          if (item.eventName === 'onGestureHandlerEvent') {
            var context = (0,_reanimated_core__WEBPACK_IMPORTED_MODULE_0__.makeRemote)({});
            var shareableDataset = _this.shareableDataset;

            var wrpWorklet = function () {
              var _f = function (evt) {
                Object.assign(evt, {
                  currentTarget: {
                    dataset: shareableDataset.value
                  }
                });
                worklet(evt, context);
              };

              _f._closure = {
                shareableDataset: shareableDataset,
                worklet: worklet,
                context: context
              };
              _f.asString = "function _f(evt){const{shareableDataset,worklet,context}=jsThis._closure;{Object.assign(evt,{currentTarget:{dataset:shareableDataset.value}});worklet(evt,context);}}";
              _f.__workletHash = 9410264516789;
              _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/components/wx-gesture/index.ts (264:31)";
              _f.__worklet = true;
              return _f;
            }();

            _this.addWorkeltEventHandler(item.eventName, wrpWorklet);
          } else {
            _this.addWorkeltEventHandler(item.eventName, worklet);
          }
        });
        this.workletHandlers.forEach(function (handler) {
          handler.register(_this.handlerTag);
        });
      },
      onPropertyUpdate: function (prop, key, value) {
        if (this._attached && prop === 'dataset') {
          var oldValue = this.shareableDataset.value;
          var newValue = Object.assign({}, oldValue, {
            [key]: value
          });
          this.shareableDataset.value = newValue;
        }
      }
    }
  };
  return option;
});
/* harmony default export */ __webpack_exports__["default"] = (gestureHandlers);

/***/ }),

/***/ "./src/components/wx-hero/index.ts":
/*!*****************************************!*\
  !*** ./src/components/wx-hero/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_virtual_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/virtual-node */ "./src/components/utils/virtual-node.ts");

var hero = {
  is: 'wx-hero',
  options: {
    virtualHost: false
  },
  behaviors: ['wx-base'],
  properties: {
    tag: {
      type: String,
      public: true,
      observer: 'tagChanged'
    },
    transitionOnGesture: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'gestureChanged'
    }
  },
  lifetimes: {
    created: function () {
      this._attached = false;
    },
    attached: function () {
      if (this.childNodes.length != 1) {
        console.error(`[hero] can only have one child node`);
        return;
      }

      if (!this.data.tag) {
        console.error('tag properpty can not be empty');
        return;
      }

      var child = (0,_utils_virtual_node__WEBPACK_IMPORTED_MODULE_0__.findNonVirtualNode)(this);

      if (!child) {
        return;
      }

      child.$$.appendStyle('width: 100%; height: 100%;');
      this.$$.setAttributes({
        tag: this.data.tag,
        transitionOnGesture: this.data.transitionOnGesture
      });
      this._attached = true;
    }
  },
  methods: {
    srcChanged: function (newVal, oldVal) {
      if (!this._attached) return;
      this.$$.setAttributes({
        tag: newVal
      });
    },
    gestureChanged: function (newVal, oldVal) {
      if (!this._attached) return;
      this.$$.setAttributes({
        transitionOnGesture: newVal
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (hero);

/***/ }),

/***/ "./src/components/wx-image/index.ts":
/*!******************************************!*\
  !*** ./src/components/wx-image/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "image": () => (/* binding */ image),
/* harmony export */   "coverImage": () => (/* binding */ coverImage)
/* harmony export */ });
/* harmony import */ var skyline_runtime_observer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/runtime/observer */ "./src/runtime/observer.ts");

var IS_DEVTOOLS = false;
var BoxFit = {
  fill: 0,
  contain: 1,
  cover: 2,
  fitWidth: 3,
  fitHeight: 4,
  none: 5,
  scaleDown: 6
};
var image = {
  is: 'wx-image',
  options: {
    virtualHost: false
  },
  behaviors: ['wx-base', 'wx-cloud'],
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  properties: {
    src: {
      type: String,
      observer: 'srcChanged',
      public: true,
      value: ''
    },
    mode: {
      type: String,
      observer: 'modeChanged',
      public: true,
      value: 'scaleToFill'
    },
    lazyLoad: {
      type: Boolean,
      value: false,
      observer: 'lazyLoadChanged',
      public: true
    },
    showMenuByLongpress: {
      type: Boolean,
      value: false,
      public: true
    },
    fadeIn: {
      type: Boolean,
      value: false,
      public: true
    },
    lazyLoadMargin: {
      type: Number,
      value: 2,
      public: true,
      observer: 'lazyLoadMarginChanged'
    },
    referrerPolicy: {
      type: String,
      value: 'unsafe-url',
      public: true
    }
  },
  listeners: {
    longpress: '_onLongPress'
  },
  lifetimes: {
    created: function () {
      this._attached = false;
      this._loaded = false;
      this._finalSrc = '';
      this._actualWidth = 0;
      this._actualHeight = 0;
      this._rect = {
        x: 0,
        y: 0,
        width: 0,
        height: 0
      };
    },
    attached: function () {
      var _this = this;

      this.$$.onLoadEvent(function (width, height) {
        _this.loaded = true;
        _this._actualWidth = width;
        _this._actualHeight = height;

        _this.triggerEvent('load', {
          width: width,
          height: height
        });
      });
      this.$$.onErrorEvent(function () {
        _this.triggerEvent('error', {
          errMsg: `load ${_this._finalSrc} failed`
        });
      });
      this.$$.setLayoutCallback(function (rect) {
        _this._rect = rect;
      });
      var clientHeight = this.getBackendContext().clientHeight;
      this._observer = new skyline_runtime_observer__WEBPACK_IMPORTED_MODULE_0__.default(function (entries) {
        if (entries[0].isIntersecting) {
          _this._showImage();
        }
      }, {
        rootMargin: [clientHeight, 0, clientHeight, 0]
      });

      if (this.lazyLoad) {
        this._observer.observe(this.$$);
      } else if (this.src) {
        this._showImage();
      }

      this.$$.setAttributes({
        fadeIn: this.fadeIn
      });
      this._attached = true;
    },
    detached: function () {
      this._observer.unobserve(this.$$);
    }
  },
  methods: {
    _getImagePath: function (src) {
      if (typeof src === 'undefined' || src === '') return '';
      src = src.trim();

      if (/^\/\//.test(src)) {
        // #3550
        src = `http:${src}`;
      }

      src = this.getRealRoute(src);
      return src;
    },
    _showImage: function () {
      var _this2 = this;

      this.getCloudFileUrl(this.src, 'image', function (src) {
        var _finalSrc = _this2._finalSrc = _this2._getImagePath(src) || src;

        _this2.loaded = false;

        _this2.$$.setAttributes({
          src: _finalSrc
        });

        _this2._observer.unobserve(_this2.$$);
      });
    },
    srcChanged: function (newVal, oldVal) {
      if (!this._attached || newVal === oldVal) return;
      if (!this.lazyLoad) this._showImage();
    },
    modeChanged: function (newVal) {
      var validMode = ['widthFix', 'heightFix', 'scaleToFill', 'aspectFit', 'aspectFill', 'top', 'bottom', 'center', 'left', 'right', 'top left', 'top right', 'bottom left', 'bottom right'];

      if (validMode.indexOf(newVal) === -1) {
        return;
      }

      var modeMapToBoxFit = {
        scaleToFill: BoxFit.fill,
        aspectFit: BoxFit.contain,
        aspectFill: BoxFit.cover,
        widthFix: BoxFit.fitWidth,
        heightFix: BoxFit.fitHeight,
        top: BoxFit.none,
        bottom: BoxFit.none,
        center: BoxFit.none,
        left: BoxFit.none,
        right: BoxFit.none,
        'top left': BoxFit.none,
        'top right': BoxFit.none,
        'bottom left': BoxFit.none,
        'bottom right': BoxFit.none
      };
      this.$$.setAttributes({
        fit: modeMapToBoxFit[newVal]
      });
      this.classList.toggle('__wx_image_height_auto__', false);
      this.classList.toggle('__wx_image_width_auto__', false);

      if (newVal === 'widthFix') {
        this.classList.toggle('__wx_image_height_auto__', true);
      } else if (newVal === 'heightFix') {
        this.classList.toggle('__wx_image_width_auto__', true);
      }
    },
    lazyLoadChanged: function (newVal, oldVal) {
      if (!this._attached || newVal === oldVal) return;
      if (!newVal) this._showImage();
    },
    _onLongPress: function () {
      if (!this.showMenuByLongpress || !this.loaded) {
        return;
      }

      if (IS_DEVTOOLS) {
        wx.showActionSheet({
          itemList: ['发送给朋友', '收藏', '保存图片', '识别图片的小程序码']
        });
        return;
      }

      var src = this.src;

      if (/^(cloud):\/\//.test(src)) {
        src = this._src;
      }

      src = src.trim();
      var imageBase64 = '';
      var imageUrl = '';

      if (/^data:image\//.test(src)) {
        imageBase64 = (src.split(',')[1] || '').trim();
      } else {
        imageUrl = this.getRealRoute(src, window.__route__);
      }

      wx.invoke('showImageOperateSheet', {
        imageBase64: imageBase64,
        imageUrl: imageUrl,
        imageWidth: this._actualWidth,
        imageHeight: this._actualHeight,
        elementLeft: this._rect.x,
        elementTop: this._rect.y,
        elementWidth: this._rect.width,
        elementHeight: this._rect.height
      });
    }
  }
};
var coverImage = Object.assign({}, image, {
  is: 'wx-cover-image'
});


/***/ }),

/***/ "./src/components/wx-input/index.ts":
/*!******************************************!*\
  !*** ./src/components/wx-input/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var skyline_utils_unique_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/utils/unique-id */ "./src/utils/unique-id.ts");
/* harmony import */ var _events_bridge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/bridge */ "./src/components/events/bridge.ts");
/* harmony import */ var _utils_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/type */ "./src/components/utils/type.ts");



var INPUT_CONFIRM_TYPE = ['send', 'search', 'next', 'go', 'done'];
var input = {
  is: 'wx-input',
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          T: "input",
          A: {
            "id": "input",
            "style": "width: 100%; height: 100%;"
          },
          C: []
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  behaviors: ['wx-base', 'wx-data-component'],
  properties: {
    focus: {
      type: Boolean,
      value: false,
      public: true,
      filter: function (val) {
        this.$.input.$$.setAttributes({
          focus: val
        });
        return val;
      }
    },
    placeholder: {
      type: String,
      value: '',
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          placeholder: val
        });
      }
    },
    placeholderStyle: {
      type: Object,
      value: {},
      public: true,
      observer: function (style) {
        this.$.input.$$.setAttributes({
          placeholderStyle: JSON.stringify({
            fontSize: parseFloat(style.fontSize) || 16,
            fontWeight: style.fontWeight || 'normal',
            color: style.color || '#000000'
          })
        });
      }
    },
    value: {
      type: String,
      value: '',
      public: true,
      filter: function (val) {
        this.$.input.$$.setAttributes({
          value: val
        });
        this._value = val;
        return val;
      }
    },
    maxlength: {
      type: Number,
      value: 140,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          maxLength: val
        });
      }
    },
    type: {
      type: String,
      value: 'text',
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          type: val
        });
      }
    },
    password: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          password: val
        });
      }
    },
    disabled: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          disabled: val
        });
      }
    },
    cursorSpacing: {
      type: String,
      value: 0,
      public: true
    },
    confirmHold: {
      type: Boolean,
      value: false,
      public: true
    },
    confirmType: {
      type: String,
      value: 'done',
      public: true,
      observer: function (val) {
        var confirmType = val;

        if (!INPUT_CONFIRM_TYPE.includes(val)) {
          confirmType = 'done';
        }

        this.$.input.$$.setAttributes({
          confirmType: confirmType
        });
      }
    },
    cursor: {
      type: null,
      value: -1,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          selectionStart: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val),
          selectionEnd: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val)
        });
      }
    },
    selectionStart: {
      type: null,
      value: -1,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          selectionStart: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val)
        });
      }
    },
    selectionEnd: {
      type: null,
      value: -1,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          selectionEnd: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val)
        });
      }
    },
    adjustPosition: {
      type: Boolean,
      value: true,
      public: true
    },
    holdKeyboard: {
      type: Boolean,
      value: false,
      public: true
    }
  },
  created: function () {
    var _this = this;

    this.bindMethod(['input']);
    this.viewId = (0,skyline_utils_unique_id__WEBPACK_IMPORTED_MODULE_0__.default)();
    this._keyboardShow = false;
    (0,_events_bridge__WEBPACK_IMPORTED_MODULE_1__.subscribe)(`setKeyboardValue_${this.viewId}`, function (res) {
      _this.value = _this._value = res.value;
      _this.cursor = res.cursor;
    });
  },
  attached: function () {
    this._attached = true;
    this._value = this.value;
    this.$.input.$$.onKeyboardComplete(this.onKeyboardComplete.bind(this));
    this.$.input.$$.onKeyboardConfirm(this.onKeyboardConfirm.bind(this));
    this.$.input.$$.onKeyboardShow(this.onKeyboardShow.bind(this));
    this.$.input.$$.onKeyboardValueChange(this.onKeyboardValueChange.bind(this));
    this.$.input.$$.onKeyboardHeightChange(this.onKeyboardHeightChange.bind(this));
  },
  detached: function () {
    this._attached = false;
    (0,_events_bridge__WEBPACK_IMPORTED_MODULE_1__.subscribe)(`setKeyboardValue_${this.viewId}`, function () {});
  },
  methods: {
    resetFormData: function () {
      this.value = '';
    },
    getFormData: function (cb) {
      if (this._keyboardShow) {
        this.__formCallback = cb;
      } else {
        typeof cb === 'function' && cb(this._value);
      }
    },
    formatEventTarget: function () {
      var _this$__modelValueNam;

      var modelValue = (_this$__modelValueNam = this.__modelValueName) === null || _this$__modelValueNam === void 0 ? void 0 : _this$__modelValueNam.value;
      var event = {
        bindinput: this.bindinput,
        target: {
          id: this.id,
          dataset: this.dataset,
          offsetTop: this.$$.offsetTop,
          offsetLeft: this.$$.offsetLeft
        },
        setKeyboardValue: true,
        modelValueName: modelValue
      };
      event.currentTarget = event.target;
      event.nodeId = this.getNodeId();
      return this.bindinput || modelValue ? JSON.stringify(event) : '';
    },
    onKeyboardComplete: function (value) {
      this._value = value;

      if (typeof this.__formCallback === 'function') {
        this.__formCallback(this._value);

        this.__formCallback = undefined;
      }

      this.triggerEvent('change', {
        value: this._value
      });
      this.triggerEvent('blur', {
        value: this._value,
        cursor: this.cursor
      });
      this._keyboardShow = false;
    },
    onKeyboardConfirm: function (value) {
      this._value = value;
      this.triggerEvent('confirm', {
        value: this._value
      });
    },
    onKeyboardShow: function (value, height) {
      this._keyboardShow = true;
      this.triggerEvent('focus', {
        value: this._value,
        height: height
      });
    },
    onKeyboardValueChange: function (value, cursor, keyCode) {
      this._value = value;
      this.cursor = cursor;
      var data = this.formatEventTarget();

      if (data) {
        this.publish('onKeyboardValueChange', {
          value: value,
          cursor: cursor,
          keyCode: keyCode,
          data: data
        });
      }
    },
    onKeyboardHeightChange: function (height, duration) {
      this.triggerEvent('keyboardheightchange', {
        height: height,
        duration: duration
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (input);

/***/ }),

/***/ "./src/components/wx-map/index.ts":
/*!****************************************!*\
  !*** ./src/components/wx-map/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var skyline_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/utils/env */ "./src/utils/env.ts");
/* harmony import */ var _runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../runtime */ "./src/runtime/index.ts");


var map = {
  is: 'wx-map',
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          T: "view",
          A: {
            "id": "container",
            "style": "position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
          },
          C: [{
            T: "texture",
            A: {
              "id": "map",
              "type": "map",
              "disable_touch": "1",
              "view_id": {
                L: function (D, S, T) {
                  return D.viewId;
                },
                F: function (D, S, T, W) {
                  return D.viewId;
                }
              },
              "style": "position: absolute; top: 0; left: 0; width: 100%; height: 100%;",
              "role": "application"
            },
            C: []
          }]
        }],
        BM: {
          viewId: [[0, 0, "view_id"]]
        }
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  behaviors: ['wx-base', 'wx-positioning-target'],
  options: {
    renderingMode: 'full',
    multipleSlots: true
  },
  properties: {
    latitude: {
      type: Number,
      public: true,
      filter: 'latitudeChanged',
      value: 39.92
    },
    longitude: {
      type: Number,
      public: true,
      filter: 'longitudeChanged',
      value: 116.46
    },
    scale: {
      type: Number,
      public: true,
      filter: 'scaleChanged',
      value: 16
    },
    minScale: {
      type: Number,
      public: true,
      observer: 'minScaleChanged',
      value: 3
    },
    maxScale: {
      type: Number,
      public: true,
      observer: 'maxScaleChanged',
      value: 22
    },
    markers: {
      type: Array,
      value: [],
      public: true,
      observer: 'markersChanged'
    },
    covers: {
      type: Array,
      value: [],
      public: true,
      observer: 'coversChanged'
    },
    includePoints: {
      type: Array,
      value: [],
      public: true,
      observer: 'pointsChanged'
    },
    polyline: {
      type: Array,
      value: [],
      public: true,
      observer: 'linesChanged'
    },
    circles: {
      type: Array,
      value: [],
      public: true,
      observer: 'circlesChanged'
    },
    controls: {
      type: Array,
      value: [],
      public: true,
      observer: 'controlsChanged'
    },
    polygons: {
      type: Array,
      value: [],
      public: true,
      observer: 'polygonsChanged'
    },
    showLocation: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'showLocationChanged'
    },
    showScale: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'showScaleChanged'
    },
    theme: {
      type: String,
      value: 'normal',
      public: true
    },
    subkey: {
      type: String,
      value: '',
      public: true
    },
    layerStyle: {
      type: Number,
      value: 1,
      public: true,
      observer: 'layerStyleChanged'
    },
    usePluginId: {
      type: Boolean,
      value: false,
      public: true
    },
    enableZoom: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'enableZoomChanged'
    },
    enableScroll: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'enableScrollChanged'
    },
    enableRotate: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enableRotateChanged'
    },
    showCompass: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'showCompassChanged'
    },
    enable3D: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enable3DChanged'
    },
    enableOverlooking: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enableOverlookingChanged'
    },
    enableSatellite: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enableSatelliteChanged'
    },
    enableTraffic: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enableTrafficChanged'
    },
    enablePoi: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'enablePoiChanged'
    },
    enableBuilding: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'enableBuildingChanged'
    },
    enableIndoor: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enableIndoorChanged'
    },
    enableIndoorBuildingPick: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enableIndoorBuildingPickChanged'
    },
    enableIndoorLevelPick: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'enableIndoorLevelPickChanged'
    },
    rotate: {
      type: Number,
      value: 0,
      public: true,
      filter: 'rotateChanged'
    },
    skew: {
      type: Number,
      value: 0,
      public: true,
      filter: 'skewChanged'
    },
    setting: {
      type: Object,
      value: {},
      public: true,
      filter: 'settingChanged'
    },
    _anticipatedEnforcedXWebMap: {
      type: Boolean,
      value: false
    },
    viewId: {
      type: Number,
      value: 0
    },
    _ariaLanguage: {
      type: String,
      value: 'zh'
    }
  },
  created: function () {
    this.viewId = this.getPositioningId();
  },
  attached: function () {
    if (this.latitude > 90 || this.latitude < -90) {
      console.warn('latitude 字段取值有误，纬度范围 -90 ~ 90');
      return;
    }

    if (this.longitude > 180 || this.longitude < -180) {
      console.warn('longitude 字段取值有误，经度范围 -180 ~ 180');
      return;
    }

    console.log(`createMap ${this.viewId}`);
    this.$.map.$$.setAttributes({
      type: 'map',
      viewId: this.viewId
    });

    this._insertNativeMap();
  },
  detached: function () {
    var _this = this;

    this.invoke('removeXWebMap', {
      viewId: this.viewId,
      mapId: this.viewId
    }, function () {
      _this.publish('mapRemove', {
        domId: _this.id,
        mapId: _this.viewId,
        nodeId: _this.getNodeId(),
        pluginId: ''
      });
    });
  },
  methods: {
    _insertNativeMap: function () {
      var _this2 = this;

      var parentId = 0;
      var args = {
        position: {
          width: 0,
          height: 0
        },
        centerLongitude: this.longitude,
        centerLatitude: this.latitude,
        scale: this.scale,
        minScale: this.minScale,
        maxScale: this.maxScale,
        covers: this.covers || [],
        hide: this.hidden,
        showLocation: this.showLocation,
        showScale: this.showScale,
        keepCenter: this.keepCenter,
        theme: this.theme,
        subKey: this.subkey,
        styleId: this.layerStyle,
        mapId: this.viewId,
        viewId: this.viewId,
        parentId: parentId,
        rotate: this.rotate,
        skew: this.skew,
        enableIndoor: this.enableIndoor,
        enableIndoorBuildingPick: this.enableIndoorBuildingPick,
        enableIndoorLevelPick: this.enableIndoorLevelPick,
        enableZoom: this.enableZoom,
        enableScroll: this.enableScroll,
        enableRotate: this.enableRotate,
        showCompass: this.showCompass,
        enable3D: this.enable3D,
        enableOverlooking: this.enableOverlooking,
        enableSatellite: this.enableSatellite,
        enableTraffic: this.enableTraffic,
        enableDarkMode: true,
        enablePoi: this.enablePoi,
        enableBuilding: this.enableBuilding,
        zIndex: 0,
        pluginId: this.usePluginId ? '' : ''
      };

      var callback = function () {
        console.log(`pubilsh mapInsert ${_this2.id} ${_this2.viewId}`);

        _this2.publish('mapInsert', {
          domId: _this2.id,
          mapId: _this2.viewId,
          nodeId: _this2.getNodeId(),
          pluginId: '',
          showLocation: _this2.showLocation,
          target: {
            id: _this2.id,
            dataset: _this2.dataset,
            offsetTop: _this2.$$.offsetTop,
            offsetLeft: _this2.$$.offsetLeft
          }
        });

        var root = __virtualDOM__.getRootNode(_this2.getPageId());

        _this2._operateMapId = _runtime__WEBPACK_IMPORTED_MODULE_1__.default.getInstance().getExparser().addListenerToElement(root, 'operateMap', function (evt) {
          var mapId = evt.detail.mapId;
          if (mapId !== _this2.viewId) return;

          _this2.operateMapHandler(evt.detail);
        });
      };

      this.invoke('insertXWebMap', args, callback);
    },
    operateMapHandler: function (args) {
      var _this3 = this;

      var {
        mapId: mapId,
        callbackId: callbackId,
        method: method
      } = args;

      switch (method) {
        case 'includeMapPoints':
          {
            this.invoke('includeMapPoints', {
              mapId: mapId,
              points: args.points,
              padding: args.padding
            }, function (res) {
              _this3.publish('operateMapCallback', {
                errMsg: res.errMsg,
                mapId: mapId,
                callbackId: callbackId,
                method: method
              });
            });
            break;
          }

        case 'getMapMarker':
          {
            var res = null;
            this.markers.forEach(function (m) {
              if (m.id === args.markerId) {
                res = {
                  longitude: m.longitude,
                  latitude: m.latitude
                };
              }
            });
            this.publish('operateMapCallback', {
              errMsg: res ? 'getMapMarker:ok' : 'getMapMarker:fail',
              mapId: mapId,
              callbackId: callbackId,
              method: method,
              pos: res || {}
            });
            break;
          }
      }
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (map);

/***/ }),

/***/ "./src/components/wx-navigator/index.ts":
/*!**********************************************!*\
  !*** ./src/components/wx-navigator/index.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var navigator = {
  is: 'wx-navigator',
  behaviors: ['wx-base', 'wx-hover'],
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          V: 5,
          N: "",
          C: []
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  properties: {
    url: {
      type: String,
      public: true
    },
    delta: {
      type: Number,
      public: true,
      value: 1
    },
    redirect: {
      type: Boolean,
      value: false,
      public: true
    },
    target: {
      type: String,
      value: 'self',
      public: true
    },
    openType: {
      type: String,
      value: 'navigate',
      public: true
    },
    hover: {
      type: Boolean,
      value: true
    },
    hoverStayTime: {
      type: Number,
      value: 600,
      public: true
    },
    appId: {
      type: String,
      value: '',
      public: true
    },
    path: {
      type: String,
      value: '',
      public: true
    },
    shortLink: {
      type: String,
      value: '',
      public: true
    },
    extraData: {
      type: Object,
      value: '',
      public: true
    },
    version: {
      type: String,
      value: 'release',
      public: true
    },
    scene: {
      type: Number,
      value: 1037,
      public: true
    },
    sceneNote: {
      type: String,
      value: '',
      public: true
    }
  },
  listeners: {
    tap: 'navigateTo'
  },
  created: function () {
    this._defaultHoverClass = 'navigator-hover';
  },
  attached: function () {
    this._lock = false;
  },
  methods: {
    error: function (message) {
      console.error(message);
      this.triggerEvent('fail', message);
      this.triggerEvent('complete', message);
    },
    navigateInMiniPrograms: function () {
      var _this = this;

      switch (this.openType) {
        case 'navigate':
          var args = {
            appId: this.appId,
            path: this.path,
            shortLink: this.shortLink,
            extraData: this.extraData,
            envVersion: this.version,
            success: function (res) {
              _this.triggerEvent('success', res);
            },
            fail: function (res) {
              _this.triggerEvent('fail', res);
            },
            complete: function (res) {
              _this.triggerEvent('complete', res);
            }
          };

          if (__wxConfig.appType === 7) {
            args.scene = this.scene;
            args.sceneNote = this.sceneNote;
          }

          wx.navigateToMiniProgram(args);
          return;

        case 'exit':
          wx.exitMiniProgram();
          return;

        default:
          this.error(`<navigator/> using invalid openType ${this.openType} with miniProgram target`);
      }
    },
    navigateTo: function (e) {
      var _this2 = this;

      if (this.target === 'miniProgram') {
        if (this.openType === 'navigate' && !this.appId && !this.shortLink) {
          this.error('<navigator/> should have app-id or short-link attribute when using navigate with miniProgram target');
          return;
        }
      } else if (this.openType !== 'navigateBack' && !this.url) {
        this.error('<navigator/> should have url attribute when using navigateTo, redirectTo or switchTab');
        return;
      }

      var LOCK_TIMEOUT = 1000;
      if (this._lock) return;
      this._lock = true;
      setTimeout(function () {
        _this2._lock = false;
      }, LOCK_TIMEOUT);

      if (this.target === 'miniProgram') {
        this.navigateInMiniPrograms();
        return;
      }

      var relativePath = window.__route__;
      var defaultCallback = {
        success: function (res) {
          return _this2.triggerEvent('success', res);
        },
        fail: function (res) {
          return _this2.triggerEvent('fail', res);
        },
        cancel: function (res) {
          return _this2.triggerEvent('cancel', res);
        },
        complete: function (res) {
          return _this2.triggerEvent('complete', res);
        }
      };

      if (this.redirect) {
        wx.redirectTo({
          url: this.url,
          _relativePath: relativePath,
          ...defaultCallback
        });
        return;
      }

      switch (this.openType) {
        case 'navigate':
        case 'navigateTo':
          wx.navigateToWithRelatedInfo({
            url: this.url,
            _relatedInfo: e._relatedInfo,
            _relativePath: relativePath,
            ...defaultCallback
          });
          return;

        case 'redirect':
        case 'redirectTo':
          wx.redirectTo({
            url: this.url,
            _relativePath: relativePath,
            ...defaultCallback
          });
          return;

        case 'switchTab':
          wx.switchTab({
            url: this.url,
            _relativePath: relativePath,
            ...defaultCallback
          });
          return;

        case 'navigateBack':
          wx.navigateBack({
            delta: this.delta,
            ...defaultCallback
          });
          return;

        case 'reLaunch':
          wx.reLaunch({
            url: this.url,
            _relativePath: relativePath,
            ...defaultCallback
          });
          return;

        default:
          this.error(`<navigator/> with invalid openType ${this.openType}`);
      }
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (navigator);

/***/ }),

/***/ "./src/components/wx-scroll-view/index.ts":
/*!************************************************!*\
  !*** ./src/components/wx-scroll-view/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_size__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/size */ "./src/utils/size.ts");

var scrollView = {
  is: 'wx-scroll-view',
  behaviors: ['wx-base', 'wx-worklet-handler'],
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          T: "view",
          A: {
            "id": "refresher"
          },
          C: [{
            V: 5,
            N: "refresher",
            C: []
          }]
        }, {
          T: "scrollview",
          A: {
            "id": "scrollView",
            "style": "width: 100%; height: 100%;"
          },
          C: [{
            V: 1,
            B: [{
              B: {
                L: function (D, S, T) {
                  return !!D.type || undefined;
                },
                F: function (D, S, T, W) {
                  return D.type == "default";
                }
              },
              C: [{
                T: "view",
                A: {
                  "id": "container",
                  "class": "wx-scroll-view-container"
                },
                C: [{
                  V: 5,
                  N: "",
                  C: []
                }]
              }]
            }]
          }, {
            V: 5,
            N: "",
            C: []
          }]
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  options: {
    multipleSlots: true
  },
  properties: {
    type: {
      type: String,
      value: 'default',
      public: true
    },
    scrollX: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (newVal) {
        this.node.setAttributes({
          scrollX: newVal
        });

        if (this.type === 'default') {
          this.$.container.$$.setStyle('flex-direction: row;');
        }
      }
    },
    scrollY: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (newVal) {
        this.node.setAttributes({
          scrollY: newVal
        });

        if (this.type === 'default') {
          this.$.container.$$.setStyle('flex-direction: column;');
        }
      }
    },
    scrollTop: {
      type: Number,
      value: 0,
      public: true,
      filter: function (val) {
        var scrollTop = (0,_utils_size__WEBPACK_IMPORTED_MODULE_0__.normalizeSize)(val);
        this.node.setAttributes({
          scrollTop: scrollTop
        });
      }
    },
    scrollLeft: {
      type: Number,
      value: 0,
      public: true,
      filter: function (val) {
        var scrollLeft = (0,_utils_size__WEBPACK_IMPORTED_MODULE_0__.normalizeSize)(val);
        this.node.setAttributes({
          scrollLeft: scrollLeft
        });
      }
    },
    scrollIntoView: {
      type: String,
      value: '',
      public: true,
      filter: function (newVal) {
        this.node.setAttributes({
          scrollIntoView: newVal
        });
      }
    },
    scrollWithAnimation: {
      type: Boolean,
      public: true,
      value: false,
      observer: function (newVal) {
        this.node.setAttributes({
          scrollWithAnimation: newVal
        });
      }
    },
    enableBackToTop: {
      type: Boolean,
      public: true,
      value: false,
      observer: function (newVal) {
        this.node.setAttributes({
          enableBackToTop: newVal
        });
      }
    },
    lowerThreshold: {
      type: String,
      public: true,
      value: 50,
      observer: function (newVal) {
        var lowerThreshold = parseFloat(newVal);

        if (isNaN(lowerThreshold)) {
          lowerThreshold = 50;
        }

        this.node.setAttributes({
          lowerThreshold: lowerThreshold
        });
      }
    },
    upperThreshold: {
      type: String,
      public: true,
      value: 50,
      observer: function (newVal) {
        var upperThreshold = parseFloat(newVal);

        if (isNaN(upperThreshold)) {
          upperThreshold = 50;
        }

        this.node.setAttributes({
          upperThreshold: upperThreshold
        });
      }
    },
    refresherEnabled: {
      type: Boolean,
      public: true,
      value: false,
      observer: function (newVal) {
        this.node.setAttributes({
          refresherEnabled: newVal
        });
      }
    },
    refresherThreshold: {
      type: Number,
      public: true,
      value: 45,
      observer: function (newVal) {
        this.node.setAttributes({
          refresherThreshold: newVal
        });
      }
    },
    refresherBackground: {
      type: String,
      public: true,
      value: '#fff',
      observer: function (newVal) {
        this.node.setAttributes({
          refresherBackground: newVal
        });
      }
    },
    refresherDefaultStyle: {
      type: String,
      public: true,
      value: 'black',
      observer: function (newVal) {
        this.node.setAttributes({
          refresherDefaultStyle: newVal
        });
      }
    },
    refresherTriggered: {
      type: Boolean,
      public: true,
      value: false,
      observer: function (newVal) {
        this.node.setAttributes({
          refresherTriggered: newVal
        });
      }
    },
    scrollEnabled: {
      type: Boolean,
      public: true,
      value: true,
      observer: function (newVal) {
        this.node.setAttributes({
          scrollEnabled: newVal
        });
      }
    },
    bounces: {
      type: Boolean,
      public: true,
      value: true,
      observer: function (newVal) {
        this.node.setAttributes({
          bounces: newVal
        });
      }
    },
    showScrollbar: {
      type: Boolean,
      public: true,
      value: true,
      observer: function (newVal) {
        this.node.setAttributes({
          showScrollbar: newVal
        });
      }
    },
    fastDeceleration: {
      type: Boolean,
      public: true,
      value: false,
      observer: function (newVal) {
        this.node.setAttributes({
          fastDeceleration: newVal
        });
      }
    },
    adjustDecelerationVelocity: {
      type: String,
      public: true,
      observer: function (newVal) {
        this.node.setAttributes({
          adjustDecelerationVelocity: newVal
        });
      }
    }
  },
  lifetimes: {
    created: function () {
      this.node = this.$.scrollView.$$;
      this.bindMethod(['scroll', 'scrolltoupper', 'scrolltolower', 'scrolltoupper', 'refresherpulling', 'refresherrefresh', 'refresherrestore']);
      this.$.container.$$.setAttributes({
        viewport: true
      });
      this.hasUIOnScroll = false;
    },
    attached: function () {
      var _this = this;

      this.attachNativeEvents();
      var refresher = this.$.refresher.$$;
      refresher.forceDetached();
      this.node.setRefresherHeader(refresher);

      if (!this.hasUIOnScroll && this.bindscroll) {
        this.node.onScrollEvent(function (scrollTop, scrollLeft, scrollWidth, scrollHeight, deltaX, deltaY) {
          _this.triggerEvent('scroll', {
            scrollTop: scrollTop,
            scrollLeft: scrollLeft,
            scrollWidth: scrollWidth,
            scrollHeight: scrollHeight,
            deltaX: deltaX,
            deltaY: deltaY
          });
        });
      }

      if (this.bindscrolltolower) {
        this.node.onScrollToLowerEvent(function () {
          _this.triggerEvent('scrolltolower', {
            direction: _this.scrollY ? 'bottom' : 'right'
          });
        });
      }

      if (this.bindscrolltoupper) {
        this.node.onScrollToUpperEvent(function () {
          _this.triggerEvent('scrolltoupper', {
            direction: _this.scrollY ? 'top' : 'left'
          });
        });
      }

      if (this.bindrefresherpulling) {
        this.node.onRefresherPullingEvent(function (dy) {
          _this.triggerEvent('refresherpulling', {
            dy: dy
          });
        });
      }

      if (this.bindrefresherrefresh) {
        this.node.onRefresherRefreshEvent(function (dy) {
          _this.triggerEvent('refresherrefresh', {
            dy: dy
          });
        });
      }

      if (this.bindrefresherrestore) {
        this.node.onRefresherRestoreEvent(function (dy) {
          _this.triggerEvent('refresherrestore', {
            dy: dy
          });
        });
      }

      this.node.setAttributes({
        type: this.type,
        scrollX: this.scrollX,
        scrollY: this.scrollY,
        scrollTop: this.scrollTop,
        scrollLeft: this.scrollLeft,
        scrollIntoView: this.scrollIntoView,
        scrollWithAnimation: this.scrollWithAnimation,
        enableBackToTop: this.enableBackToTop,
        scrollEnabled: this.scrollEnabled,
        bounces: this.bounces,
        showScrollbar: this.showScrollbar,
        fastDeceleration: this.fastDeceleration,
        refresherEnabled: this.refresherEnabled,
        refresherThreshold: this.refresherThreshold,
        refresherDefaultStyle: this.refresherDefaultStyle,
        refresherBackground: this.refresherBackground,
        refresherTriggered: this.refresherTriggered,
        hasUIOnScroll: this.hasUIOnScroll
      });
    }
  },
  methods: {
    attachNativeEvents: function () {
      var _this2 = this;

      var nativeEvents = [{
        eventName: 'onScroll',
        methodName: this.bindscroll
      }, {
        eventName: 'adjustDecelerationVelocity',
        methodName: this.data.adjustDecelerationVelocity
      }];
      nativeEvents.forEach(function (item) {
        var worklet = _this2.obtainWorkletFunc(item.methodName);

        if (typeof worklet !== 'function') return;

        if (item.eventName === 'onScroll') {
          _this2.hasUIOnScroll = true;
        }

        _this2.addWorkeltEventHandler(item.eventName, worklet);
      });
      this.workletHandlers.forEach(function (handler) {
        handler.register(_this2.node.viewTag);
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (scrollView);

/***/ }),

/***/ "./src/components/wx-swiper/index.ts":
/*!*******************************************!*\
  !*** ./src/components/wx-swiper/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var ChangeReason = ['touch', 'autoplay'];
var swiper = {
  is: 'wx-swiper',
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          V: 5,
          N: "",
          C: []
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  behaviors: ['wx-base', 'wx-worklet-handler'],
  properties: {
    indicatorDots: {
      type: Boolean,
      value: false,
      observer: function (val) {
        this.$$.setAttributes({
          indicatorDots: val
        });
      },
      public: true
    },
    vertical: {
      type: Boolean,
      value: false,
      observer: function (val) {
        this.$$.setAttributes({
          vertical: val
        });
      },
      public: true
    },
    autoplay: {
      type: Boolean,
      value: false,
      observer: function (val) {
        this.$$.setAttributes({
          autoplay: val
        });
      },
      public: true
    },
    circular: {
      type: Boolean,
      value: false,
      observer: function (val) {
        this.$$.setAttributes({
          circular: val
        });
      },
      public: true
    },
    interval: {
      type: Number,
      value: 5000,
      observer: function (val) {
        this.$$.setAttributes({
          interval: val
        });
      },
      public: true
    },
    duration: {
      type: Number,
      value: 500,
      observer: function (val) {
        this.$$.setAttributes({
          duration: val
        });
      },
      public: true
    },
    current: {
      type: Number,
      value: 0,
      observer: function (val) {
        this.$$.setAttributes({
          current: val
        });
      },
      public: true
    },
    indicatorColor: {
      type: String,
      value: '',
      observer: function (val) {
        this.$$.setAttributes({
          indicatorColor: val
        });
      },
      public: true
    },
    indicatorActiveColor: {
      type: String,
      value: '',
      observer: function (val) {
        this.$$.setAttributes({
          indicatorActiveColor: val
        });
      },
      public: true
    },
    previousMargin: {
      type: String,
      value: '',
      observer: '_updateMargin',
      public: true
    },
    nextMargin: {
      type: String,
      value: '',
      observer: '_updateMargin',
      public: true
    },
    snapToEdge: {
      type: Boolean,
      value: false,
      observer: '_updateMargin',
      public: true
    },
    currentItemId: {
      type: String,
      value: '',
      observer: function (newVal) {
        if (newVal === '') return;
        this.current = this._getPositionFromCurrent();
      },
      public: true
    },
    displayMultipleItems: {
      type: Number,
      value: 1,
      observer: '_updateDisplayMultipleItems',
      public: true
    },
    easingFunction: {
      type: String,
      value: 'default',
      observer: function (val) {
        this.$$.setAttributes({
          easingFunction: val
        });
      },
      public: true
    }
  },
  relations: {
    'wx-swiper-item': {
      type: 'descendant',
      linked: function () {
        this._itemListChanged();
      },
      linkChanged: function () {
        this._itemListChanged();
      },
      unlinked: function () {
        this._itemListChanged();
      }
    }
  },
  created: function () {
    this.bindMethod(['transition']);
    this._itemIdItemMap = {};
    this._items = [];
    this._itemListDirty = false;
    this.hasUIOnScroll = false;
  },
  attached: function () {
    var _this = this;

    this.attachNativeEvents();
    this.$$.onChangeEvent(function (current, reason) {
      var newItem = _this._getItems()[current];

      if (newItem) {
        _this.triggerEvent('change', {
          current: current,
          currentItemId: newItem.itemId,
          source: ChangeReason[reason] || ''
        });
      }
    });

    if (!this.hasUIOnScroll && this.bindtransition) {
      this.$$.onScrollEvent(function (deltaPixels) {
        var dx = 0;
        var dy = 0;

        if (_this.vertical) {
          dy = deltaPixels;
        } else {
          dx = deltaPixels;
        }

        _this.triggerEvent('transition', {
          dx: dx,
          dy: dy
        });
      });
    }

    this.$$.setAttributes({
      hasUIOnScroll: this.hasUIOnScroll
    });
  },
  methods: {
    _getPositionFromCurrent: function () {
      var position = -2;

      if (this.currentItemId) {
        position = this._getItems().indexOf(this._getItemByItemId(this.currentItemId));
      } else {
        position = this.current;
      }

      return position;
    },
    _itemListChanged: function () {
      this._itemListDirty = true;
    },
    _updateItemList: function () {
      var _this2 = this;

      this._itemListDirty = false;
      var items = this._items = this.getRelationNodes('wx-swiper-item');
      items.forEach(function (item) {
        if (!item.itemId) return;

        if (!_this2._itemIdItemMap[item.itemId]) {
          _this2._itemIdItemMap[item.itemId] = item;
        }
      });
    },
    _getItems: function () {
      if (this._itemListDirty) this._updateItemList();
      return this._items;
    },
    _getItemByItemId: function (itemId) {
      if (this._itemListDirty) this._updateItemList();
      return this._itemIdItemMap[itemId];
    },
    attachNativeEvents: function () {
      var _this3 = this;

      var nativeEvents = [{
        eventName: 'onTransition',
        methodName: this.bindtransition
      }];
      nativeEvents.forEach(function (item) {
        var worklet = _this3.obtainWorkletFunc(item.methodName);

        if (typeof worklet !== 'function') return;

        if (item.eventName === 'onTransition') {
          _this3.hasUIOnScroll = true;
        }

        _this3.addWorkeltEventHandler(item.eventName, worklet);
      });
      this.workletHandlers.forEach(function (handler) {
        handler.register(_this3.$$.viewTag);
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (swiper);

/***/ }),

/***/ "./src/components/wx-swiper/item.ts":
/*!******************************************!*\
  !*** ./src/components/wx-swiper/item.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var swiperItem = {
  is: 'wx-swiper-item',
  behaviors: ['wx-base'],
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          V: 5,
          N: "",
          C: []
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  properties: {
    itemId: {
      type: String,
      value: '',
      observer: function (newVal, oldVal) {
        var parent = this.getRelationNodes('wx-swiper')[0];
        if (parent) parent._itemIdUpdated(this, newVal, oldVal);
      },
      public: true
    }
  },
  relations: {
    'wx-swiper': {
      type: 'ancestor'
    }
  },
  attached: function () {
    this._attachedCb();
  },
  moved: function () {
    this._detachedCb();

    this._attachedCb();
  },
  detached: function () {
    this._detachedCb();
  },
  methods: {
    _attachedCb: function () {
      if (this._attached) return;
      this._attached = true;
      this.$$.appendStyle('position: absolute; width: 100%; height: 100%;');
    },
    _detachedCb: function () {
      this._attached = false;
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (swiperItem);

/***/ }),

/***/ "./src/components/wx-textarea/index.ts":
/*!*********************************************!*\
  !*** ./src/components/wx-textarea/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var skyline_utils_unique_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/utils/unique-id */ "./src/utils/unique-id.ts");
/* harmony import */ var _events_bridge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/bridge */ "./src/components/events/bridge.ts");
/* harmony import */ var _utils_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/type */ "./src/components/utils/type.ts");



var TEXTAREA_CONFIRM_TYPE = ['send', 'search', 'next', 'go', 'done', 'return'];
var textarea = {
  is: 'wx-textarea',
  behaviors: ['wx-base', 'wx-data-component'],
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          T: "input",
          A: {
            "id": "input",
            "style": "width: 100%; height: 100%;"
          },
          C: []
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  properties: {
    value: {
      type: String,
      value: '',
      public: true,
      filter: function (val) {
        this.$.input.$$.setAttributes({
          value: val
        });
        this._value = val;
        return val;
      }
    },
    maxlength: {
      type: Number,
      value: 140,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          maxLength: val
        });
      }
    },
    placeholder: {
      type: String,
      value: '',
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          placeholder: val
        });
      }
    },
    disabled: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          disabled: val
        });
      }
    },
    focus: {
      type: Boolean,
      value: false,
      public: true,
      filter: function (val) {
        this.$.input.$$.setAttributes({
          focus: val
        });
        return val;
      }
    },
    placeholderStyle: {
      type: Object,
      value: {},
      public: true,
      observer: function (style) {
        this.$.input.$$.setAttributes({
          placeholderStyle: JSON.stringify({
            fontSize: parseFloat(style.fontSize) || 16,
            fontWeight: style.fontWeight || 'normal',
            color: style.color || '#000000'
          })
        });
      }
    },
    autoHeight: {
      type: Boolean,
      value: false,
      public: true,
      observer: function (val) {
        this.$.input.$$.setAttributes({
          autoHeight: val
        });
      }
    },
    confirm: {
      type: Boolean,
      value: true,
      public: true
    },
    cursorSpacing: {
      type: String,
      value: 0,
      public: true
    },
    showConfirmBar: {
      type: Boolean,
      value: true,
      public: true
    },
    confirmHold: {
      type: Boolean,
      value: false,
      public: true
    },
    confirmType: {
      type: String,
      value: 'return',
      public: true,
      observer: function (val) {
        var confirmType = val;

        if (!TEXTAREA_CONFIRM_TYPE.includes(val)) {
          confirmType = 'return';
        }

        this.$.input.$$.setAttributes({
          confirmType: confirmType
        });
      },
      cursor: {
        type: null,
        value: -1,
        public: true,
        observer: function (val) {
          this.$.input.$$.setAttributes({
            selectionStart: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val),
            selectionEnd: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val)
          });
        }
      },
      selectionStart: {
        type: null,
        value: -1,
        public: true,
        observer: function (val) {
          this.$.input.$$.setAttributes({
            selectionStart: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val)
          });
        }
      },
      selectionEnd: {
        type: null,
        value: -1,
        public: true,
        observer: function (val) {
          this.$.input.$$.setAttributes({
            selectionEnd: (0,_utils_type__WEBPACK_IMPORTED_MODULE_2__.toNumber)(val)
          });
        }
      },
      adjustPosition: {
        type: Boolean,
        value: true,
        public: true
      },
      holdKeyboard: {
        type: Boolean,
        value: false,
        public: true
      }
    }
  },
  created: function () {
    var _this = this;

    this.bindMethod(['input']);
    this.$.input.$$.setAttributes({
      maxLines: true
    });
    this.viewId = (0,skyline_utils_unique_id__WEBPACK_IMPORTED_MODULE_0__.default)();
    this._scale = 750 / this.getBackendContext().clientWidth;
    this._keyboardShow = false;
    (0,_events_bridge__WEBPACK_IMPORTED_MODULE_1__.subscribe)(`setKeyboardValue_${this.viewId}`, function (res) {
      _this.value = _this._value = res.value;
      _this.cursor = res.cursor;
    });
  },
  attached: function () {
    this._attached = true;
    this._value = this.value;
    this.$.input.$$.onKeyboardComplete(this.onKeyboardComplete.bind(this));
    this.$.input.$$.onKeyboardConfirm(this.onKeyboardConfirm.bind(this));
    this.$.input.$$.onKeyboardShow(this.onKeyboardShow.bind(this));
    this.$.input.$$.onKeyboardValueChange(this.onKeyboardValueChange.bind(this));
    this.$.input.$$.onKeyboardHeightChange(this.onKeyboardHeightChange.bind(this));
  },
  detached: function () {
    this._attached = false;
    (0,_events_bridge__WEBPACK_IMPORTED_MODULE_1__.subscribe)(`setKeyboardValue_${this.viewId}`, function () {});
  },
  methods: {
    resetFormData: function () {
      this.value = '';
      this._value = '';
    },
    getFormData: function (cb) {
      if (this._keyboardShow) {
        this.__formCallback = cb;
      } else {
        typeof cb === 'function' && cb(this._value);
      }
    },
    formatEventTarget: function () {
      var _this$__modelValueNam;

      var modelValue = (_this$__modelValueNam = this.__modelValueName) === null || _this$__modelValueNam === void 0 ? void 0 : _this$__modelValueNam.value;
      var event = {
        bindinput: this.bindinput,
        target: {
          id: this.id,
          dataset: this.dataset,
          offsetTop: this.$$.offsetTop,
          offsetLeft: this.$$.offsetLeft
        },
        setKeyboardValue: true,
        modelValueName: modelValue
      };
      event.currentTarget = event.target;
      event.nodeId = this.getNodeId();
      return this.bindinput || modelValue ? JSON.stringify(event) : '';
    },
    onTextAreaHeightChange: function (lineCount, height) {
      this.triggerEvent('linechange', {
        lineCount: lineCount,
        height: height,
        heightRpx: height * this._scale
      });
    },
    onKeyboardComplete: function (value) {
      if (!this._attached) return;
      this._value = value;

      if (typeof this.__formCallback === 'function') {
        this.__formCallback(this._value);

        this.__formCallback = undefined;
      }

      this.triggerEvent('blur', {
        value: value,
        cursor: this.cursor
      });
      this._keyboardShow = false;
    },
    onKeyboardConfirm: function (value) {
      this._value = value;
      this.triggerEvent('confirm', {
        value: this._value
      });
    },
    onKeyboardShow: function (value, height) {
      this._keyboardShow = true;
      this.triggerEvent('focus', {
        value: this._value,
        height: height
      });
    },
    onKeyboardValueChange: function (value, cursor, keyCode) {
      this._value = value;
      this.cursor = cursor;
      var data = this.formatEventTarget();

      if (data) {
        this.publish('onKeyboardValueChange', {
          value: value,
          cursor: cursor,
          keyCode: keyCode,
          data: data
        });
      }
    },
    onKeyboardHeightChange: function (height, duration) {
      this.triggerEvent('keyboardheightchange', {
        height: height,
        duration: duration
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (textarea);

/***/ }),

/***/ "./src/components/wx-video/index.ts":
/*!******************************************!*\
  !*** ./src/components/wx-video/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var EventMap = new Map();

function triggerEvent(name, res) {
  if (EventMap.has(name)) {
    EventMap.get(name)(res);
  }
}

if (false) {}

var HIDE_BAR_TIMEOUT = 5000;
var DOUBLE_TAP_TIME = 200;
var BRIGHTNESS_ICON = 'http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJImnicPYg0bWuOjc6iamficFoagznjibNzG5SMl8ibdictU1gVDm3lZ7Tn7pzkAicVc9qyt3g/0';
var VOLUME_ICON = 'http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJImnicPYg0bWu9ZBfySr4icWEAJYNbWp1XzXbXwemp4x0vUmLzKtdXgn2pa2YcBPFJ8A/0';
var video = {
  is: 'wx-video',
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          T: "view",
          A: {
            "id": "container",
            "class": "wx-video-container"
          },
          C: [{
            T: "texture",
            A: {
              "id": "video",
              "type": "video",
              "view_id": {
                L: function (D, S, T) {
                  return D.viewId;
                },
                F: function (D, S, T, W) {
                  return D.viewId;
                }
              },
              "style": "background-color: red; position: absolute; top: 0; left: 0; width: 100%; height: 100%;",
              "role": "application"
            },
            C: []
          }, {
            T: "view",
            A: {
              "id": "wx-video-poster-container",
              "class": "wx-video-empty-mask"
            },
            C: []
          }, {
            V: 1,
            B: [{
              B: {
                L: function (D, S, T) {
                  return !!(D.controls || D._showControls || D._playInBackground) || undefined;
                },
                F: function (D, S, T, W) {
                  return D.controls && D._showControls && !D._playInBackground;
                }
              },
              C: [{
                T: "view",
                A: {
                  "class": "wx-video-top-right-buttons"
                },
                C: [{
                  V: 1,
                  B: [{
                    B: {
                      L: function (D, S, T) {
                        return !!(D.showCastingButton || D._underCasting || D._showCastingBtn) || undefined;
                      },
                      F: function (D, S, T, W) {
                        return D.showCastingButton && !D._underCasting && D._showCastingBtn;
                      }
                    },
                    C: [{
                      T: "view",
                      A: {
                        "id": "castingBtn",
                        "class": "wx-video-casting-button",
                        "bindtap": "_handleTapCasting",
                        "role": "button"
                      },
                      C: []
                    }]
                  }]
                }, {
                  V: 1,
                  B: [{
                    B: {
                      L: function (D, S, T) {
                        return !!(D.showBackgroundPlaybackButton || D._showBGPlayBtn) || undefined;
                      },
                      F: function (D, S, T, W) {
                        return D.showBackgroundPlaybackButton && D._showBGPlayBtn;
                      }
                    },
                    C: [{
                      T: "view",
                      A: {
                        "id": "bgPlayBtn",
                        "class": "wx-video-background-button",
                        "bindtap": "_handleTapBGPlay",
                        "role": "button"
                      },
                      C: []
                    }]
                  }]
                }, {
                  V: 1,
                  B: [{
                    B: {
                      L: function (D, S, T) {
                        return !!(D._hasPlayed || D._showScreenLockButton || D.showScreenLockButton || D._isFullscreen || D._playInBackground) || undefined;
                      },
                      F: function (D, S, T, W) {
                        return D._hasPlayed && D._showScreenLockButton && D.showScreenLockButton && D._isFullscreen && !D._playInBackground;
                      }
                    },
                    C: [{
                      T: "view",
                      A: {
                        "id": "lockBtn",
                        "class": {
                          L: function (D, S, T) {
                            return !!D._screenLocked || undefined;
                          },
                          F: function (D, S, T, W) {
                            return "wx-video-screen-locker " + (D._screenLocked ? "wx-video-screen-locked" : "");
                          }
                        },
                        "role": "button"
                      },
                      C: []
                    }]
                  }]
                }, {
                  V: 1,
                  B: [{
                    B: {
                      L: function (D, S, T) {
                        return !!(D.stopped || D.showCenterPlayBtn || D._hasPlayed || D._playError || D.controls || D._showControls) || undefined;
                      },
                      F: function (D, S, T, W) {
                        return (!D.stopped || !D.showCenterPlayBtn || D._hasPlayed || D._playError) && D.controls && D._showControls;
                      }
                    },
                    C: [{
                      T: "view",
                      A: {
                        "id": "bar",
                        "class": {
                          L: function (D, S, T) {
                            return !!(D._isFullscreen || D._fullscreenCls || D._underCasting) || undefined;
                          },
                          F: function (D, S, T, W) {
                            return "wx-video-bar " + (D._isFullscreen ? D._fullscreenCls : "") + " " + (D._underCasting ? "wx-video-under-casting-bar" : "");
                          }
                        }
                      },
                      C: [{
                        T: "view",
                        A: {
                          "class": "wx-video-controls",
                          "style": {
                            L: function (D, S, T) {
                              return !!(D._showProgress || D._controlMargin) || undefined;
                            },
                            F: function (D, S, T, W) {
                              return "margin-right: " + (D._showProgress ? D._controlMargin + "px" : "");
                            }
                          }
                        },
                        C: [{
                          V: 1,
                          B: [{
                            B: {
                              L: function (D, S, T) {
                                return !!(D.showPlayBtn || D.playBtnPosition || D._playError) || undefined;
                              },
                              F: function (D, S, T, W) {
                                return D.showPlayBtn && D.playBtnPosition === "bottom" && !D._playError;
                              }
                            },
                            C: [{
                              T: "view",
                              A: {
                                "class": {
                                  L: function (D, S, T) {
                                    return !!(D.paused || D.stopped) || undefined;
                                  },
                                  F: function (D, S, T, W) {
                                    return "wx-video-control-button " + (D.paused || D.stopped ? "wx-video-play" : "wx-video-pause");
                                  }
                                },
                                "style": {
                                  L: function (D, S, T) {
                                    return !!(D._showProgress || D._controlMargin) || undefined;
                                  },
                                  F: function (D, S, T, W) {
                                    return "margin-right: " + (D._showProgress ? D._controlMargin + "px" : "");
                                  }
                                },
                                "role": "button"
                              },
                              C: []
                            }]
                          }]
                        }, {
                          V: 1,
                          B: [{
                            B: {
                              L: function (D, S, T) {
                                return !!(D._live || D._showProgress) || undefined;
                              },
                              F: function (D, S, T, W) {
                                return !D._live && D._showProgress;
                              }
                            },
                            C: [{
                              T: "view",
                              A: {
                                "class": "wx-video-current-time"
                              },
                              C: [{
                                S: {
                                  L: function (D, S, T) {
                                    return !!D._currentTime || undefined;
                                  },
                                  F: function (D, S, T, W) {
                                    return D._currentTime || "00:00";
                                  }
                                }
                              }]
                            }]
                          }]
                        }, {
                          V: 1,
                          B: [{
                            B: {
                              L: function (D, S, T) {
                                return !!(D._live || D._showProgress) || undefined;
                              },
                              F: function (D, S, T, W) {
                                return !D._live && D._showProgress;
                              }
                            },
                            C: [{
                              T: "view",
                              A: {
                                "class": {
                                  L: function (D, S, T) {
                                    return !!D._extraPadding || undefined;
                                  },
                                  F: function (D, S, T, W) {
                                    return "wx-video-progress-container " + (D._extraPadding ? "wx-video-progress-padding" : "");
                                  }
                                },
                                "role": "button"
                              },
                              C: []
                            }]
                          }]
                        }, {
                          V: 1,
                          B: [{
                            B: {
                              L: function (D, S, T) {
                                return !!(D._live || D._showProgress) || undefined;
                              },
                              F: function (D, S, T, W) {
                                return !D._live && D._showProgress;
                              }
                            },
                            C: [{
                              T: "view",
                              A: {
                                "class": "wx-video-duration"
                              },
                              C: [{
                                S: {
                                  L: function (D, S, T) {
                                    return !!D._duration || undefined;
                                  },
                                  F: function (D, S, T, W) {
                                    return D._duration || "00:00";
                                  }
                                }
                              }]
                            }]
                          }]
                        }]
                      }]
                    }]
                  }]
                }]
              }]
            }]
          }]
        }],
        BM: {
          viewId: [[0, 0, "view_id"]]
        }
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  behaviors: ['wx-base', 'wx-positioning-target', 'wx-player', 'wx://request-sender'],
  options: {
    renderingMode: 'full'
  },
  properties: {
    src: {
      type: String,
      observer: '_srcChanged',
      public: true
    },
    poster: {
      type: String,
      value: '',
      public: true,
      observer: '_posterChanged'
    },
    referrerPolicy: {
      type: String,
      value: 'no-referrer',
      public: true
    },
    autoplay: {
      type: Boolean,
      value: false,
      public: true,
      observer: '_autoplayChanged'
    },
    bindplay: {
      type: String,
      value: '',
      public: true
    },
    bindpause: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindtimeupdate: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindfullscreenchange: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    binderror: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindwaiting: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindloadeddata: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindloadedmetadata: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindloadstart: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindseeked: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindseeking: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    bindprogress: {
      type: String,
      value: '',
      public: true,
      observer: 'handlersChanged'
    },
    danmuBtn: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'danmuBtnChanged'
    },
    enableDanmu: {
      type: Boolean,
      value: false,
      observer: 'enableDanmuChanged',
      public: true
    },
    controls: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'controlsChanged'
    },
    danmuList: {
      type: Array,
      value: [],
      public: true,
      observer: '_danmuListChanged'
    },
    objectFit: {
      type: String,
      value: 'contain',
      public: true
    },
    initialTime: {
      type: Number,
      value: 0,
      public: true,
      observer: 'initialTimeChanged'
    },
    duration: {
      type: Number,
      value: 0,
      public: true
    },
    live: {
      type: Number,
      value: false,
      public: true,
      observer: 'liveChanged'
    },
    muted: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'mutedChanged'
    },
    loop: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'loopChanged'
    },
    pageGesture: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'pageGestureChanged'
    },
    direction: {
      type: Number,
      value: -1,
      public: true,
      observer: 'directionChanged'
    },
    _videoId: {
      type: Number
    },
    customCache: {
      type: Boolean,
      value: true,
      public: true
    },
    showLiveBtn: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'showLiveBtnChanged'
    },
    showProgress: {
      type: Boolean,
      value: true,
      public: true,
      filter: 'showProgressChanged'
    },
    showFullscreenBtn: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'showFullscreenBtnChanged'
    },
    showPlayBtn: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'showPlayBtnChanged'
    },
    showCenterPlayBtn: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'showCenterPlayBtnChanged'
    },
    enableProgressGesture: {
      type: Boolean,
      value: true,
      public: true,
      observer: 'enableProgressGestureChanged'
    },
    showMuteBtn: {
      type: Boolean,
      value: false,
      public: true,
      observer: '_showMuteBtnChanged'
    },
    title: {
      type: String,
      value: '',
      public: true,
      observer: '_titleChanged'
    },
    playBtnPosition: {
      type: String,
      value: 'bottom',
      public: true,
      observer: '_playBtnPositionChanged'
    },
    enablePlayGesture: {
      type: Boolean,
      value: false,
      public: true,
      observer: '_enablePlayGestureChanged'
    },
    autoPauseIfNavigate: {
      type: Boolean,
      value: true,
      public: true,
      observer: '_autoPauseIfNavigateChanged'
    },
    autoPauseIfOpenNative: {
      type: Boolean,
      value: true,
      public: true,
      observer: '_autoPauseIfOpenNativeChanged'
    },
    vslideGesture: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'pageGestureChanged'
    },
    vslideGestureInFullscreen: {
      type: Boolean,
      value: true,
      public: true,
      observer: '_vslideGestureInFullscreenChanged'
    },
    showCastingButton: {
      type: Boolean,
      value: false,
      public: true
    },
    enableAutoRotation: {
      type: Boolean,
      value: false,
      public: true,
      observer: '_enableAutoRotationChanged'
    },
    showScreenLockButton: {
      type: Boolean,
      value: false,
      public: true
    },
    showSnapshotButton: {
      type: Boolean,
      value: false,
      public: true
    },
    seekType: {
      type: String,
      value: 'accurate',
      public: true
    },
    pictureInPictureMode: {
      value: '',
      public: true,
      observer: 'pictureInPictureModeChanged'
    },
    pictureInPictureShowProgress: {
      type: Boolean,
      value: false,
      public: true,
      observer: 'pictureInPictureShowProgressChanged'
    },
    backgroundPoster: {
      type: String,
      value: '',
      public: true,
      observer: '_bgPosterChanged'
    },
    showBackgroundPlaybackButton: {
      type: Boolean,
      value: false,
      public: true
    },
    bindenterpictureinpicture: {
      type: String,
      value: '',
      public: true
    },
    bindleavepictureinpicture: {
      type: String,
      value: '',
      public: true
    },
    _insert2WebLayer: {
      type: Boolean,
      value: false
    },
    _progressLeft: {
      type: Number,
      value: 0
    },
    _bufferedWidth: {
      type: Number,
      value: 0
    },
    _playedWidth: {
      type: Number,
      value: 0
    },
    _showProgressPanel: {
      type: Boolean,
      value: false
    },
    _toastHidden: {
      type: Boolean,
      value: true
    },
    _toastType: {
      type: String,
      value: ''
    },
    _poster: {
      type: String,
      value: ''
    },
    _showProgress: {
      type: Boolean,
      value: true
    },
    _isFullscreen: {
      type: Boolean,
      value: false
    },
    _isMuted: {
      type: Boolean,
      value: false
    },
    _live: {
      type: Boolean,
      value: false
    },
    _showBottomProgress: {
      type: Boolean,
      value: false
    },
    _showTopBar: {
      type: Boolean,
      value: false
    },
    _showCenterPlayBtn: {
      type: Boolean,
      value: false
    },
    _showControls: {
      type: Boolean,
      value: true
    },
    _showLoading: {
      type: Boolean,
      value: false
    },
    _showExitFullscreenIcon: {
      type: Boolean,
      value: false
    },
    _showVolumeBar: {
      type: Boolean,
      value: false
    },
    _volumeBarLeft: {
      type: String,
      value: ''
    },
    _volumeBarTop: {
      type: String,
      value: ''
    },
    _volumeBarDragging: {
      type: Boolean,
      value: false
    },
    _volumeLevelHeight: {
      type: String,
      value: ''
    },
    _toTransparent: {
      type: Boolean,
      value: false
    },
    _rawDuration: {
      type: Number,
      value: 0
    },
    _needPlayAd: {
      type: Boolean,
      value: false
    },
    _webLayerFailed: {
      type: Boolean,
      value: false
    },
    _playError: {
      type: Boolean,
      value: false
    },
    _hasPlayed: {
      type: Boolean,
      value: false
    },
    _controlMargin: {
      type: Number,
      value: 8
    },
    _fullscreenCls: {
      type: String,
      value: ''
    },
    _createAfterFirstShow: {
      type: Boolean,
      value: false
    },
    _underCasting: {
      type: Boolean,
      value: false
    },
    _castingState: {
      type: String,
      value: ''
    },
    _triangleHeight: {
      type: Number,
      value: 0
    },
    _triangleWidth: {
      type: Number,
      value: 0
    },
    _showScreenLockButton: {
      type: Boolean,
      value: false
    },
    _showSnapshotButton: {
      type: Boolean,
      value: false
    },
    _showSnapBtnPlatform: {
      type: Boolean,
      value: true
    },
    _snapshotUrl: {
      type: String,
      value: ''
    },
    _screenLocked: {
      type: Boolean,
      value: false
    },
    _brightnessIcon: {
      type: String,
      value: ''
    },
    _volumeIcon: {
      type: String,
      value: ''
    },
    _playInBackground: {
      type: Boolean,
      value: false
    },
    _showCastingBtn: {
      type: Boolean,
      value: true
    },
    _showBGPlayBtn: {
      type: Boolean,
      value: true
    },
    _ariaLanguage: {
      type: String,
      value: 'zh'
    },
    _direction: {
      type: String,
      value: ''
    }
  },
  created: function () {
    this.createdTimestamp = Date.now();
    this._rawCurrentTime = 0;
    this._rawDuration = 0;
    this._buffered = 0;
    this._videoId = this.getPositioningId();
    this.viewId = this.getPositioningId();
    this._direction = 'horizontal';
    this._lastTapVideoTs = 0;
    this._lastDuration = 0;
    this._lastPosition = -1;
    this._danmuObject = {};
    this._lastOrientation = 'portrait';
    this._brightnessIcon = BRIGHTNESS_ICON;
    this._volumeIcon = VOLUME_ICON;
    this._hasPlayedAd = false;
  },
  attached: function () {
    this._attached = true;
    this.$.video.$$.setAttributes({
      type: 'video',
      viewId: this.viewId
    });

    this._insertNativeVideo();

    this._isMuted = this.muted;
    this._isControlsShow = null;

    this._initView();

    this._autoplayChanged(this.autoplay);
  },
  detached: function () {
    this._detached = true;

    this._removeVideo();

    this.triggerEvent('innerVideoDetached');
  },
  methods: {
    play: function () {
      this.invoke('operateXWebVideo', {
        viewId: this.viewId,
        type: 'play',
        data: []
      }, function (res) {
        console.log('operateXWebVideo callback ' + res);
      });
    },
    reset: function (resetPoster = true) {
      this._showLoading = false;

      this._setProgress(0);

      this._currentTime = '00:00';
      this._lastPosition = -1;
      this._lastTimeUpdateTimeStamp = 0;

      if (!this.loop && resetPoster) {
        this._posterChanged(this.poster);
      }

      this._showBar(true);

      this.stopped = true;
    },
    onWindowResize: function () {
      var _this = this;

      this.$$.setLayoutCallback(function (frame) {
        var width = frame.width;

        if (!_this._showProgressSet) {
          _this._showProgress = width > 240;
        }

        _this._controlMargin = width > 320 ? 16 : Math.floor((width - 240) / 10) + 6;
      });
    },
    onPreloadedMetaData: function (res) {
      var {
        preloadSize: preloadSize
      } = res;
      this.triggerEvent('preloadedmetadata', {
        preloadSize: preloadSize
      });
    },
    onPlay: function () {
      this.stopped = false;
      this.paused = false;
      this._showLoading = false;

      this._showBar();

      this._isLockHideBar = false;
      this._poster = '';
      this._playError = false;
      this._hasPlayed = true;
    },
    onPause: function () {
      this.stopped = false;
      this.paused = true;
      this._showLoading = false;

      this._showBar();

      this._lastTimeUpdateTimeStamp = 0;
      clearTimeout(this._hideBarTimer);
    },
    onLoadedMetaData: function (res) {
      var duration = this.duration || res.duration;

      if (duration > 0) {
        this._duration = this._formatTime(duration, false);
        this._lastDuration = duration;
        this._rawDuration = duration;

        if (!this.autoplay) {
          this._showLoading = false;
        }

        var initialTime = Math.min(duration, Math.max(0, this.initialTime));
        var rate = initialTime / duration;

        this._setProgress(rate);

        this._currentTime = this._formatTime(initialTime, false);
      } else {
        this._duration = '';
      }

      this._direction = res.width / res.height > 1 ? 'horizontal' : 'vertical';

      if (duration <= 0) {
        this._live = true;
      } else {
        this._live = false;
      }
    },
    onTimeUpdate: function (res) {
      if (!res.duration) {
        return;
      }

      if (this._underCasting && Date.now() - this._lastTimeUpdateTimeStamp < 1000) {
        this.stopped = false;
        this.paused = false;
      }

      this.stopped = false;
      var duration = this.duration || res.duration;

      if (!this._haveSeek && res.position <= this._lastPosition) {
        this._lastPosition = res.position;
        return;
      }

      this._haveSeek = false;

      if (!this._isLockTimeUpdateProgress && !this._live) {
        var rate = res.position / duration;

        this._setProgress(rate);

        this._currentTime = this._formatTime(res.position, false);
        this._rawCurrentTime = res.position;
        this._showLoading = false;
      }

      if (this._live) {
        this._showLoading = false;
      }

      if (this._lastDuration !== duration) {
        this._duration = this._formatTime(duration, false);
        this._lastDuration = duration;
        this._rawDuration = duration;
      }

      this._lastPosition = res.position;
      this._lastTimeUpdateTimeStamp = Date.now();
    },
    onProgress: function (res) {
      this._bufferedWidth = Math.min(res.buffered, 100);
    },
    onWaiting: function () {
      if (this._underCasting) {
        return;
      }

      if (!this.stopped || this.autoplay) {
        this._showLoading = true;
      }
    },
    onEnded: function () {
      this.reset();
      this.triggerEvent('ended', {});
      this.exitBackgroundPlayback();
    },
    onError: function () {
      this._playError = true;
    },
    onCastingUserSelect: function (res) {
      var {
        state: state,
        type: type
      } = res;
    },
    onCastingStateChange: function (res) {
      var {
        state: state
      } = res;
    },
    onCastingInterrupt: function () {
      this._underCasting = false;
      this.onTimeUpdate({
        detail: this._savePlayState
      });
      this.play();
    },
    onVideoSeekCompelete: function (res) {
      var position = res.position;
      this.triggerEvent('seekcomplete', {
        position: position
      });
    },
    onOrientationChanged: function (res) {
      var _this2 = this;

      var orientation = res.orientation;
      clearTimeout(this._orientationChangedTimer);
      this._orientationChangedTimer = setTimeout(function () {
        if (_this2._lastOrientation === orientation) {
          return;
        }

        if (_this2._lastOrientation === 'portrait') {
          _this2._alwaysFullscreen = _this2._isFullscreen;
        }
      }, 0);
    },
    onBackgroundPlaybackChange: function (res) {
      this._playInBackground = res.playInBackground;
    },
    getContextId: function () {
      return this.viewId;
    },
    _update: function (_arg = {}) {
      if (this._isError) {
        return;
      }

      this._updateVideo(_arg);
    },
    _setProgress: function (rate) {
      rate = Math.min(1, rate);
      this._progressLeft = rate * 100;
      this._playedWidth = rate * 100;
    },
    _autoplayChanged: function (newVal) {
      if ((this.stopped || this.paused) && newVal && this._needPlayAd) {
        if (this._hasPlayedAd || this.adPlayTime !== 0) {
          this.play();
        } else {}
      }

      this._update({
        autoplay: newVal
      });
    },
    _initView: function () {
      if (this.showCenterPlayBtn) {
        this._hideBar();
      } else {
        this._showBar(true);
      }

      this.onWindowResize();
    },
    _addListeners: function () {
      var that = this;

      var addListener = function (eventName, handler) {
        EventMap.set(eventName, function (res) {
          if (res.viewId === that.viewId) {
            handler(res);
          }
        });
      };

      addListener('onVideoPreloadedMetaData', this.onPreloadedMetaData.bind(this));
      addListener('onVideoPlay', this.onPlay.bind(this));
      addListener('onVideoPause', this.onPause.bind(this));
      addListener('onVideoLoadedMetaData', this.onLoadedMetaData.bind(this));
      addListener('onVideoTimeUpdate', this.onTimeUpdate.bind(this));
      addListener('onVideoProgress', this.onProgress.bind(this));
      addListener('onVideoWaiting', this.onWaiting.bind(this));
      addListener('onVideoEnded', this.onEnded.bind(this));
      addListener('onVideoOrientationChanged', this.onOrientationChanged.bind(this));
      addListener('onVideoError', this.onError.bind(this));
      addListener('onVideoCastingUserSelect', this.onCastingUserSelect.bind(this));
      addListener('onVideoCastingStateChange', this.onCastingStateChange.bind(this));
      addListener('onVideoCastingInterrupt', this.onCastingInterrupt.bind(this));
      addListener('onVideoBackgroundPlaybackChange', this.onBackgroundPlaybackChange.bind(this));
      addListener('onVideoSeekCompelete', this.onVideoSeekCompelete.bind(this));
    },
    _removeListeners: function () {
      EventMap.clear();
    },
    _showBar: function (lock) {
      var _this3 = this;

      this._isBarShow = true;
      this._showScreenLockButton = true;
      clearTimeout(this._hideBarTimer);
      this._hideBarTimer = setTimeout(function () {
        _this3._hideBar(true);
      }, HIDE_BAR_TIMEOUT);

      if (!this.$.bar) {
        return;
      }

      if (lock) {
        this._isLockHideBar = true;
      }

      this._showTopBar = true;
      this._showCenterPlayBtn = true;
      this._showBottomProgress = false;
      this._showCastingBtn = true;
      this._showBGPlayBtn = true;
      this._showSnapshotButton = true;
      this.$.bar.setStyle('');

      if (this._isControlsShow !== true) {
        this.triggerEvent('controlstoggle', {
          show: true
        });
        this._isControlsShow = true;
      }
    },
    _hideBar: function (fade = false) {
      var _this4 = this;

      if (fade) {
        setTimeout(function () {
          _this4.$.bar && (_this4.$.bar.$$.style.zIndex = '-1');
          _this4._showTopBar = false;
          _this4._showCenterPlayBtn = false;
          _this4._showScreenLockButton = false;
          _this4._showCastingBtn = false;
          _this4._showBGPlayBtn = false;
          _this4._showVolumeBar = false;
        }, 400);
      }

      if (this.$.bar) {
        if (fade) {
          this.$.bar.$$.setStyle('transition: 400ms;');
        } else {
          this.$.bar.$$.setStyle('z-index: -1;');
        }

        this.$.bar.$$.setStyle('opacity: 0;');

        if (this._isControlsShow !== false) {
          this.triggerEvent('controlstoggle', {
            show: false
          });
          this._isControlsShow = false;
        }
      }

      ;
      [['topbar', '_showTopBar'], ['centerPlayBtn', '_showCenterPlayBtn'], ['lockBtn', '_showScreenLockButton'], ['castingBtn', '_showCastingBtn'], ['bgPlayBtn', '_showBGPlayBtn'], ['snapshot', '_showSnapshotButton'], ['volumeBar', '_showVolumeBar']].forEach(function (item) {
        var elem = _this4.$[item[0]];

        if (!elem) {
          return;
        }

        if (fade) {
          elem.setStyle('transition: 400ms; opacity: 0;');
        } else {
          _this4[item[1]] = false;
        }
      });
      this._showBottomProgress = true;
    },
    _posterChanged: function (newVal) {
      if (!newVal) {
        return;
      }

      this.deferredSetProp(function () {});
    },
    _getData: function () {
      return {
        event: {
          target: {
            dataset: this.dataset,
            id: this.id,
            offsetTop: this.$$.offsetTop,
            offsetLeft: this.$$.offsetLeft
          },
          currentTarget: {
            dataset: this.dataset,
            id: this.id,
            offsetTop: this.$$.offsetTop,
            offsetLeft: this.$$.offsetLeft
          },
          createdTimestamp: this.createdTimestamp,
          nodeId: this.getNodeId(),
          videoPlayerId: this._videoId
        }
      };
    },
    _updateVideo: function (_args) {
      var _this5 = this;

      var args = Object.assign({
        viewId: this.viewId,
        data: JSON.stringify(this._getData()),
        needEvent: true,
        title: this.title
      }, _args);
      if (this._needPlayAd) args.autoplay = false;
      this.invoke('updateXWebVideo', args, function (res) {
        if (!/:ok/.test(res.errMsg)) {
          _this5.triggerEvent('rendererror', {
            errMsg: res.errMsg
          });
        }

        _this5._toTransparent = false;
      });
    },
    _removeVideo: function () {
      var _this6 = this;

      this.invoke('removeXWebVideo', {
        viewId: this.viewId
      }, function () {
        _this6.publish('xWebVideoRemoved', {
          domId: _this6.id,
          viewId: _this6.viewId,
          pluginId: '',
          nodeId: _this6.getNodeId()
        });
      });
    },
    _insertNativeVideo: function () {
      var _this7 = this;

      var data = this._getData();

      var args = {
        data: JSON.stringify(data),
        hide: this.hidden,
        objectFit: this.objectFit,
        autoplay: this.autoplay,
        muted: this.muted,
        loop: this.loop,
        viewId: this.viewId,
        initialTime: this.initialTime,
        position: {
          width: 0,
          height: 0
        },
        title: this.title,
        autoPauseIfNavigate: this.autoPauseIfNavigate,
        autoPauseIfOpenNative: this.autoPauseIfOpenNative,
        filePath: (this.src || '').trim(),
        referrerPolicy: this.referrerPolicy
      };
      this.invoke('insertXWebVideo', args, function (res) {
        if (/:ok/.test(res.errMsg)) {
          _this7.publish('xWebVideoInserted', {
            domId: _this7.id,
            viewId: _this7.viewId,
            pluginId: _this7.getPluginId(),
            nodeId: _this7.getNodeId(),
            data: data
          });

          if (_this7._detached) {
            _this7.removeXWebView('removeXWebVideo', {
              viewId: _this7.viewId
            });

            return;
          }
        }
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (video);

/***/ }),

/***/ "./src/components/wx-voip-room/index.ts":
/*!**********************************************!*\
  !*** ./src/components/wx-voip-room/index.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var skyline_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! skyline/runtime */ "./src/runtime/index.ts");
/* harmony import */ var _events_appservice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../events/appservice */ "./src/components/events/appservice.ts");
/* harmony import */ var _events_bridge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../events/bridge */ "./src/components/events/bridge.ts");



var hasJoinedRoom = false;
(0,_events_bridge__WEBPACK_IMPORTED_MODULE_2__.subscribe)('joinVoIPChat', function (res) {
  if (!hasJoinedRoom) (0,_events_appservice__WEBPACK_IMPORTED_MODULE_1__.triggerEvent)(res.pageId, 'onJoinVoIPChat', res, {
    bubbles: true
  });
  hasJoinedRoom = true;
});
(0,_events_bridge__WEBPACK_IMPORTED_MODULE_2__.subscribe)('exitVoIPChat', function (res) {
  if (hasJoinedRoom) (0,_events_appservice__WEBPACK_IMPORTED_MODULE_1__.triggerEvent)(res.pageId, 'onExitVoIPChat', res, {
    bubbles: true
  });
  hasJoinedRoom = false;
});
var VoIPRoom = {
  is: 'wx-voip-room',
  template: {
    content: function () {
      var P = "";
      var R = {};
      var T = {
        P: P,
        C: [{
          T: "texture",
          A: {
            "id": "texture",
            "style": "position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
          },
          C: []
        }, {
          T: "div",
          A: {
            "style": "position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden;"
          },
          C: [{
            V: 5,
            N: "",
            C: []
          }]
        }],
        BM: {}
      };

      R[""] = function () {
        return T;
      };

      return function (a) {
        var b = R[a];
        return b ? b() : null;
      };
    }()
  },
  behaviors: ['wx-base', 'wx-positioning-target'],
  properties: {
    openid: {
      type: String,
      value: '',
      public: true,
      observer: 'openidChanged'
    },
    mode: {
      type: String,
      value: 'camera',
      public: true
    },
    devicePosition: {
      type: String,
      value: 'front',
      public: true,
      observer: 'devicePositionChanged'
    },
    objectFit: {
      type: String,
      value: 'fill',
      public: true,
      observer: 'objectFitChanged'
    },
    _viewId: {
      type: Number,
      value: 0
    }
  },
  created: function () {
    this._createdTimeStamp = Date.now();
    this._viewId = this.getPositioningId();
    this._rect = {
      x: 0,
      y: 0,
      width: 0,
      height: 0
    };
  },
  attached: function () {
    this._attachedCb();
  },
  detached: function () {
    this._detachedCb();
  },
  methods: {
    _attachedCb: function () {
      this._attached = true;
      this.$.texture.$$.setAttributes({
        type: 'voiproom',
        viewId: this._viewId
      });

      var root = __virtualDOM__.getRootNode(this.getPageId());

      var exparser = skyline_runtime__WEBPACK_IMPORTED_MODULE_0__.default.getInstance().getExparser();
      this._onJoinId = exparser.addListenerToElement(root, 'onJoinVoIPChat', this.onJoin.bind(this));
      this._onExitId = exparser.addListenerToElement(root, 'onExitVoIPChat', this.onExit.bind(this));
      if (!hasJoinedRoom) return;

      this._insert();
    },
    onExit: function () {
      this._remove();
    },
    onJoin: function () {
      this._insert();
    },
    _insert: function () {
      var _this = this;

      this.$.texture.$$.setLayoutCallback(function (rect) {
        _this._rect = rect;
        var args = _this._args = {
          viewId: _this._viewId,
          openId: _this.openid,
          position: {
            width: _this._rect.width,
            height: _this._rect.height
          },
          objectFit: _this.objectFit,
          type: _this.mode,
          config: {
            camera: _this.devicePosition
          }
        };
        var apiName = 'insertXWebVoIPView';

        _this.invoke(apiName, args, function (res) {
          console.log('insertVoIPView callback', res);

          if (/:ok/.test(res.errMsg)) {
            _this._hasInsert = true;
          }
        });
      });
    },
    _update: function (args = {}, callback) {
      var _this2 = this;

      if (!this._attached) {
        return;
      }

      if (!this._hasInsert) return;
      var apiName = 'updateXWebVoIPView';
      var updatedArgs = Object.assign({}, this._args, args);
      this.invoke(apiName, updatedArgs, function (res) {
        if (/:ok/.test(res.errMsg)) {
          _this2._args = updatedArgs;
          callback && callback();
        }
      });
    },
    _remove: function () {
      if (!this._hasInsert) return;
      this._hasInsert = false;
      var apiName = 'removeXWebVoIPView';
      this.invoke(apiName, {
        viewId: this._viewId,
        openId: this.openid
      });
    },
    _detachedCb: function () {
      this._attached = false;

      this._remove();

      var root = __virtualDOM__.getRootNode(this.getPageId());

      var exparser = skyline_runtime__WEBPACK_IMPORTED_MODULE_0__.default.getInstance().getExparser();
      exparser.removeListenerFromElement(root, 'onJoinVoIPChat', this._onJoinId);
      exparser.removeListenerFromElement(root, 'onExitVoIPChat', this._onExitId);
    },
    openidChanged: function (newVal) {
      this._update({
        openId: newVal
      });
    },
    devicePositionChanged: function (newVal) {
      if (newVal !== 'front' && newVal !== 'back') return;

      this._update({
        config: {
          camera: newVal
        }
      });
    },
    objectFitChanged: function (newVal) {
      if (newVal !== 'fill' && newVal !== 'contain') return;

      this._update({
        objectFit: newVal
      });
    }
  }
};
/* harmony default export */ __webpack_exports__["default"] = (VoIPRoom);

/***/ }),

/***/ "./src/example/routeBuilder.ts":
/*!*************************************!*\
  !*** ./src/example/routeBuilder.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RouteType": () => (/* binding */ RouteType)
/* harmony export */ });
/* harmony import */ var _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/wx-gesture */ "./src/components/wx-gesture/index.ts");
/* harmony import */ var _reanimated__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../reanimated */ "./src/reanimated/index.ts");
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util */ "./src/example/util.ts");
/* harmony import */ var skyline_reanimated_route__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! skyline/reanimated/route */ "./src/reanimated/route.ts");
/* harmony import */ var skyline_reanimated_routeManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! skyline/reanimated/routeManager */ "./src/reanimated/routeManager.ts");






var lerp = function () {
  var _f = function (begin, end, t) {
    return begin + (end - begin) * t;
  };

  _f._closure = {};
  _f.asString = "function _f(begin,end,t){return begin+(end-begin)*t;}";
  _f.__workletHash = 9953309036832;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (14:13)";
  _f.__worklet = true;
  return _f;
}();

var clamp = function () {
  var _f = function (cur, lowerBound, upperBound) {
    if (cur > upperBound) return upperBound;
    if (cur < lowerBound) return lowerBound;
    return cur;
  };

  _f._closure = {};
  _f.asString = "function _f(cur,lowerBound,upperBound){if(cur>upperBound)return upperBound;if(cur<lowerBound)return lowerBound;return cur;}";
  _f.__workletHash = 14690360740265;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (19:14)";
  _f.__worklet = true;
  return _f;
}();

function CurveAnimation({
  animation: animation,
  animationStatus: animationStatus,
  curve: curve,
  reverseCurve: reverseCurve
}) {
  return (0,_reanimated__WEBPACK_IMPORTED_MODULE_1__.createDerivedValue)(function () {
    const _f = function () {
      var useForwardCurve = !reverseCurve || animationStatus.value != skyline_reanimated_route__WEBPACK_IMPORTED_MODULE_3__.AnimationStatus.reverse;
      var activeCurve = useForwardCurve ? curve : reverseCurve;
      var t = animation.value;
      if (!activeCurve) return t;
      if (t == 0 || t == 1) return t;
      return activeCurve(t);
    };

    _f._closure = {
      reverseCurve,
      animationStatus,
      AnimationStatus: skyline_reanimated_route__WEBPACK_IMPORTED_MODULE_3__.AnimationStatus,
      curve,
      animation
    };
    _f.asString = "function _f(){const{reverseCurve,animationStatus,AnimationStatus,curve,animation}=jsThis._closure;{var useForwardCurve=!reverseCurve||animationStatus.value!=AnimationStatus.reverse;var activeCurve=useForwardCurve?curve:reverseCurve;var t=animation.value;if(!activeCurve)return t;if(t==0||t==1)return t;return activeCurve(t);}}";
    _f.__workletHash = 16971278808718;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (27:28)";
    _f.__worklet = true;
    return _f;
  }());
}

var Curves = {
  fastLinearToSlowEaseIn: _reanimated__WEBPACK_IMPORTED_MODULE_1__.Easing.bezier(0.18, 1.0, 0.04, 1.0),
  linearToEaseOut: _reanimated__WEBPACK_IMPORTED_MODULE_1__.Easing.bezier(0.35, 0.91, 0.33, 0.97),
  easeInToLinear: _reanimated__WEBPACK_IMPORTED_MODULE_1__.Easing.bezier(0.67, 0.03, 0.65, 0.09),
  fastOutSlowIn: _reanimated__WEBPACK_IMPORTED_MODULE_1__.Easing.bezier(0.4, 0.0, 0.2, 1.0)
};

var CupertinoRouteBuilder = function ({
  primaryAnimation: primaryAnimation,
  secondaryAnimation: secondaryAnimation,
  primaryAnimationStatus: primaryAnimationStatus,
  secondaryAnimationStatus: secondaryAnimationStatus,
  userGestureInProgress: userGestureInProgress,
  startUserGesture: startUserGesture,
  stopUserGesture: stopUserGesture,
  didPop: didPop
}) {
  var _kMinFlingVelocity = 1.0;
  var _kMaxPageBackAnimationTime = 300;
  var _kMaxDroppedSwipePageForwardAnimationTime = 800;
  var {
    windowWidth: windowWidth
  } = _util__WEBPACK_IMPORTED_MODULE_2__.default.getSystemInfoSync();

  var _curvePrimaryAnimation = CurveAnimation({
    animation: primaryAnimation,
    animationStatus: primaryAnimationStatus,
    curve: Curves.linearToEaseOut,
    reverseCurve: Curves.easeInToLinear
  });

  var handlePrimaryAnimation = function () {
    var _f = function () {
      var t = primaryAnimation.value;

      if (!userGestureInProgress.value) {
        t = _curvePrimaryAnimation.value;
      }

      return {
        transform: [{
          translateX: windowWidth * (1 - t)
        }]
      };
    };

    _f._closure = {
      primaryAnimation: primaryAnimation,
      userGestureInProgress: userGestureInProgress,
      _curvePrimaryAnimation: _curvePrimaryAnimation,
      windowWidth: windowWidth
    };
    _f.asString = "function _f(){const{primaryAnimation,userGestureInProgress,_curvePrimaryAnimation,windowWidth}=jsThis._closure;{var t=primaryAnimation.value;if(!userGestureInProgress.value){t=_curvePrimaryAnimation.value;}return{transform:[{translateX:windowWidth*(1-t)}]};}}";
    _f.__workletHash = 10024359164804;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (74:33)";
    _f.__worklet = true;
    return _f;
  }();

  var _curveSecondaryAnimation = CurveAnimation({
    animation: secondaryAnimation,
    animationStatus: secondaryAnimationStatus,
    curve: Curves.linearToEaseOut,
    reverseCurve: Curves.easeInToLinear
  });

  var handleSecondaryAnimation = function () {
    var _f = function () {
      var t = secondaryAnimation.value;

      if (!userGestureInProgress.value) {
        t = _curveSecondaryAnimation.value;
      }

      return {
        transform: [{
          translateX: -1 / 3 * windowWidth * t
        }]
      };
    };

    _f._closure = {
      secondaryAnimation: secondaryAnimation,
      userGestureInProgress: userGestureInProgress,
      _curveSecondaryAnimation: _curveSecondaryAnimation,
      windowWidth: windowWidth
    };
    _f.asString = "function _f(){const{secondaryAnimation,userGestureInProgress,_curveSecondaryAnimation,windowWidth}=jsThis._closure;{var t=secondaryAnimation.value;if(!userGestureInProgress.value){t=_curveSecondaryAnimation.value;}return{transform:[{translateX:-1/3*windowWidth*t}]};}}";
    _f.__workletHash = 16528560141747;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (99:35)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragStart = function () {
    var _f = function () {
      startUserGesture();
    };

    _f._closure = {
      startUserGesture: startUserGesture
    };
    _f.asString = "function _f(){const{startUserGesture}=jsThis._closure;{startUserGesture();}}";
    _f.__workletHash = 16243958170781;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (112:26)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragUpdate = function () {
    var _f = function (delta) {
      var newVal = primaryAnimation.value - delta;
      primaryAnimation.value = clamp(newVal, 0.0, 1.0);
    };

    _f._closure = {
      primaryAnimation: primaryAnimation,
      clamp: clamp
    };
    _f.asString = "function _f(delta){const{primaryAnimation,clamp}=jsThis._closure;{var newVal=primaryAnimation.value-delta;primaryAnimation.value=clamp(newVal,0.0,1.0);}}";
    _f.__workletHash = 6659100588921;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (117:27)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragEnd = function () {
    var _f = function (velocity) {
      var animateForward = false;

      if (Math.abs(velocity) >= _kMinFlingVelocity) {
        animateForward = velocity <= 0;
      } else {
        animateForward = primaryAnimation.value > 0.5;
      }

      var t = primaryAnimation.value;
      var animationCurve = Curves.fastLinearToSlowEaseIn;

      if (animateForward) {
        var droppedPageForwardAnimationTime = Math.min(Math.floor(lerp(_kMaxDroppedSwipePageForwardAnimationTime, 0, t)), _kMaxPageBackAnimationTime);
        primaryAnimation.value = (0,_reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming)(1.0, {
          duration: droppedPageForwardAnimationTime,
          easing: animationCurve
        }, function () {
          var _f = function () {
            stopUserGesture();
          };

          _f._closure = {
            stopUserGesture: stopUserGesture
          };
          _f.asString = "function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}";
          _f.__workletHash = 15462961775869;
          _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (141:9)";
          _f.__worklet = true;
          return _f;
        }());
      } else {
        var droppedPageBackAnimationTime = Math.floor(lerp(0, _kMaxDroppedSwipePageForwardAnimationTime, t));
        primaryAnimation.value = (0,_reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming)(0.0, {
          duration: droppedPageBackAnimationTime,
          easing: animationCurve
        }, function () {
          var _f = function () {
            didPop();
            stopUserGesture();
          };

          _f._closure = {
            didPop: didPop,
            stopUserGesture: stopUserGesture
          };
          _f.asString = "function _f(){const{didPop,stopUserGesture}=jsThis._closure;{didPop();stopUserGesture();}}";
          _f.__workletHash = 3231963602411;
          _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (151:9)";
          _f.__worklet = true;
          return _f;
        }());
      }
    };

    _f._closure = {
      _kMinFlingVelocity: _kMinFlingVelocity,
      primaryAnimation: primaryAnimation,
      Curves: {
        fastLinearToSlowEaseIn: Curves.fastLinearToSlowEaseIn
      },
      lerp: lerp,
      _kMaxDroppedSwipePageForwardAnimationTime: _kMaxDroppedSwipePageForwardAnimationTime,
      _kMaxPageBackAnimationTime: _kMaxPageBackAnimationTime,
      withTiming: _reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming,
      stopUserGesture: stopUserGesture,
      didPop: didPop
    };
    _f.asString = "function _f(velocity){const{_kMinFlingVelocity,primaryAnimation,Curves,lerp,_kMaxDroppedSwipePageForwardAnimationTime,_kMaxPageBackAnimationTime,withTiming,stopUserGesture,didPop}=jsThis._closure;{var animateForward=false;if(Math.abs(velocity)>=_kMinFlingVelocity){animateForward=velocity<=0;}else{animateForward=primaryAnimation.value>0.5;}var t=primaryAnimation.value;var animationCurve=Curves.fastLinearToSlowEaseIn;if(animateForward){var droppedPageForwardAnimationTime=Math.min(Math.floor(lerp(_kMaxDroppedSwipePageForwardAnimationTime,0,t)),_kMaxPageBackAnimationTime);primaryAnimation.value=withTiming(1.0,{duration:droppedPageForwardAnimationTime,easing:animationCurve},function(){const _f=function(){stopUserGesture();};_f._closure={stopUserGesture};_f.asString=\"function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}\";_f.__workletHash=15462961775869;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (141:9)\";_f.__worklet=true;return _f;}());}else{var droppedPageBackAnimationTime=Math.floor(lerp(0,_kMaxDroppedSwipePageForwardAnimationTime,t));primaryAnimation.value=withTiming(0.0,{duration:droppedPageBackAnimationTime,easing:animationCurve},function(){const _f=function(){didPop();stopUserGesture();};_f._closure={didPop,stopUserGesture};_f.asString=\"function _f(){const{didPop,stopUserGesture}=jsThis._closure;{didPop();stopUserGesture();}}\";_f.__workletHash=3231963602411;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (151:9)\";_f.__worklet=true;return _f;}());}}}";
    _f.__workletHash = 11762082518983;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (123:24)";
    _f.__worklet = true;
    return _f;
  }();

  var handleHorizontalDrag = function () {
    var _f = function (gestureEvent) {
      if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.BEGIN) {
        handleDragStart();
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.ACTIVE) {
        var delta = gestureEvent.deltaX / windowWidth;
        handleDragUpdate(delta);
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.END) {
        var velocity = gestureEvent.velocityX / windowWidth;
        handleDragEnd(velocity);
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.CANCELLED) {
        handleDragEnd(0.0);
      }
    };

    _f._closure = {
      GestureState: {
        BEGIN: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.BEGIN,
        ACTIVE: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.ACTIVE,
        END: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.END,
        CANCELLED: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.CANCELLED
      },
      handleDragStart: handleDragStart,
      windowWidth: windowWidth,
      handleDragUpdate: handleDragUpdate,
      handleDragEnd: handleDragEnd
    };
    _f.asString = "function _f(gestureEvent){const{GestureState,handleDragStart,windowWidth,handleDragUpdate,handleDragEnd}=jsThis._closure;{if(gestureEvent.state===GestureState.BEGIN){handleDragStart();}else if(gestureEvent.state===GestureState.ACTIVE){var delta=gestureEvent.deltaX/windowWidth;handleDragUpdate(delta);}else if(gestureEvent.state===GestureState.END){var velocity=gestureEvent.velocityX/windowWidth;handleDragEnd(velocity);}else if(gestureEvent.state===GestureState.CANCELLED){handleDragEnd(0.0);}}}";
    _f.__workletHash = 12869770139890;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (158:31)";
    _f.__worklet = true;
    return _f;
  }();

  return {
    opaque: true,
    handlePrimaryAnimation: handlePrimaryAnimation,
    handleSecondaryAnimation: handleSecondaryAnimation,
    transitionDuration: 300,
    reverseTransitionDuration: 300,
    canTransitionTo: true,
    canTransitionFrom: true,
    gestureDetector: [{
      type: 'horizontal-drag',
      onEvent: handleHorizontalDrag
    }]
  };
};

var ScaleTransitionRouteBuilder = function ({
  primaryAnimation: primaryAnimation,
  secondaryAnimation: secondaryAnimation,
  primaryAnimationStatus: primaryAnimationStatus,
  secondaryAnimationStatus: secondaryAnimationStatus,
  userGestureInProgress: userGestureInProgress,
  startUserGesture: startUserGesture,
  stopUserGesture: stopUserGesture,
  didPop: didPop
}) {
  var _kMinFlingVelocity = 1.0;
  var _kMaxPageBackAnimationTime = 300;
  var _kMaxDroppedSwipePageForwardAnimationTime = 800;
  var {
    windowWidth: windowWidth
  } = _util__WEBPACK_IMPORTED_MODULE_2__.default.getSystemInfoSync();

  var _curvePrimaryAnimation = CurveAnimation({
    animation: primaryAnimation,
    animationStatus: primaryAnimationStatus,
    curve: Curves.linearToEaseOut,
    reverseCurve: Curves.easeInToLinear
  });

  var handlePrimaryAnimation = function () {
    var _f = function () {
      var t = primaryAnimation.value;

      if (!userGestureInProgress.value) {
        t = _curvePrimaryAnimation.value;
      }

      return {
        borderRadius: 12,
        transform: [{
          translateX: windowWidth * (1 - t)
        }]
      };
    };

    _f._closure = {
      primaryAnimation: primaryAnimation,
      userGestureInProgress: userGestureInProgress,
      _curvePrimaryAnimation: _curvePrimaryAnimation,
      windowWidth: windowWidth
    };
    _f.asString = "function _f(){const{primaryAnimation,userGestureInProgress,_curvePrimaryAnimation,windowWidth}=jsThis._closure;{var t=primaryAnimation.value;if(!userGestureInProgress.value){t=_curvePrimaryAnimation.value;}return{borderRadius:12,transform:[{translateX:windowWidth*(1-t)}]};}}";
    _f.__workletHash = 9066893580069;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (217:33)";
    _f.__worklet = true;
    return _f;
  }();

  var _curveSecondaryAnimation = CurveAnimation({
    animation: secondaryAnimation,
    animationStatus: secondaryAnimationStatus,
    curve: Curves.fastOutSlowIn
  });

  var handleSecondaryAnimation = function () {
    var _f = function () {
      var t = secondaryAnimation.value;

      if (!userGestureInProgress.value) {
        t = _curveSecondaryAnimation.value;
      }

      return {
        transform: [{
          scale: 1 - 0.08 * t
        }]
      };
    };

    _f._closure = {
      secondaryAnimation: secondaryAnimation,
      userGestureInProgress: userGestureInProgress,
      _curveSecondaryAnimation: _curveSecondaryAnimation
    };
    _f.asString = "function _f(){const{secondaryAnimation,userGestureInProgress,_curveSecondaryAnimation}=jsThis._closure;{var t=secondaryAnimation.value;if(!userGestureInProgress.value){t=_curveSecondaryAnimation.value;}return{transform:[{scale:1-0.08*t}]};}}";
    _f.__workletHash = 2324239235289;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (242:35)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragStart = function () {
    var _f = function () {
      startUserGesture();
    };

    _f._closure = {
      startUserGesture: startUserGesture
    };
    _f.asString = "function _f(){const{startUserGesture}=jsThis._closure;{startUserGesture();}}";
    _f.__workletHash = 16243958170781;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (255:26)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragUpdate = function () {
    var _f = function (delta) {
      var newVal = primaryAnimation.value - delta;
      primaryAnimation.value = clamp(newVal, 0.0, 1.0);
    };

    _f._closure = {
      primaryAnimation: primaryAnimation,
      clamp: clamp
    };
    _f.asString = "function _f(delta){const{primaryAnimation,clamp}=jsThis._closure;{var newVal=primaryAnimation.value-delta;primaryAnimation.value=clamp(newVal,0.0,1.0);}}";
    _f.__workletHash = 6659100588921;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (260:27)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragEnd = function () {
    var _f = function (velocity) {
      var animateForward = false;

      if (Math.abs(velocity) >= _kMinFlingVelocity) {
        animateForward = velocity <= 0;
      } else {
        animateForward = primaryAnimation.value > 0.5;
      }

      var t = primaryAnimation.value;
      var animationCurve = Curves.fastLinearToSlowEaseIn;

      if (animateForward) {
        var droppedPageForwardAnimationTime = Math.min(Math.floor(lerp(_kMaxDroppedSwipePageForwardAnimationTime, 0, t)), _kMaxPageBackAnimationTime);
        primaryAnimation.value = (0,_reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming)(1.0, {
          duration: droppedPageForwardAnimationTime,
          easing: animationCurve
        }, function () {
          var _f = function () {
            stopUserGesture();
          };

          _f._closure = {
            stopUserGesture: stopUserGesture
          };
          _f.asString = "function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}";
          _f.__workletHash = 15462961775869;
          _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (284:9)";
          _f.__worklet = true;
          return _f;
        }());
      } else {
        var droppedPageBackAnimationTime = Math.floor(lerp(0, _kMaxDroppedSwipePageForwardAnimationTime, t));
        primaryAnimation.value = (0,_reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming)(0.0, {
          duration: droppedPageBackAnimationTime,
          easing: animationCurve
        }, function () {
          var _f = function () {
            didPop();
            stopUserGesture();
          };

          _f._closure = {
            didPop: didPop,
            stopUserGesture: stopUserGesture
          };
          _f.asString = "function _f(){const{didPop,stopUserGesture}=jsThis._closure;{didPop();stopUserGesture();}}";
          _f.__workletHash = 3231963602411;
          _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (294:9)";
          _f.__worklet = true;
          return _f;
        }());
      }
    };

    _f._closure = {
      _kMinFlingVelocity: _kMinFlingVelocity,
      primaryAnimation: primaryAnimation,
      Curves: {
        fastLinearToSlowEaseIn: Curves.fastLinearToSlowEaseIn
      },
      lerp: lerp,
      _kMaxDroppedSwipePageForwardAnimationTime: _kMaxDroppedSwipePageForwardAnimationTime,
      _kMaxPageBackAnimationTime: _kMaxPageBackAnimationTime,
      withTiming: _reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming,
      stopUserGesture: stopUserGesture,
      didPop: didPop
    };
    _f.asString = "function _f(velocity){const{_kMinFlingVelocity,primaryAnimation,Curves,lerp,_kMaxDroppedSwipePageForwardAnimationTime,_kMaxPageBackAnimationTime,withTiming,stopUserGesture,didPop}=jsThis._closure;{var animateForward=false;if(Math.abs(velocity)>=_kMinFlingVelocity){animateForward=velocity<=0;}else{animateForward=primaryAnimation.value>0.5;}var t=primaryAnimation.value;var animationCurve=Curves.fastLinearToSlowEaseIn;if(animateForward){var droppedPageForwardAnimationTime=Math.min(Math.floor(lerp(_kMaxDroppedSwipePageForwardAnimationTime,0,t)),_kMaxPageBackAnimationTime);primaryAnimation.value=withTiming(1.0,{duration:droppedPageForwardAnimationTime,easing:animationCurve},function(){const _f=function(){stopUserGesture();};_f._closure={stopUserGesture};_f.asString=\"function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}\";_f.__workletHash=15462961775869;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (284:9)\";_f.__worklet=true;return _f;}());}else{var droppedPageBackAnimationTime=Math.floor(lerp(0,_kMaxDroppedSwipePageForwardAnimationTime,t));primaryAnimation.value=withTiming(0.0,{duration:droppedPageBackAnimationTime,easing:animationCurve},function(){const _f=function(){didPop();stopUserGesture();};_f._closure={didPop,stopUserGesture};_f.asString=\"function _f(){const{didPop,stopUserGesture}=jsThis._closure;{didPop();stopUserGesture();}}\";_f.__workletHash=3231963602411;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (294:9)\";_f.__worklet=true;return _f;}());}}}";
    _f.__workletHash = 1817434196167;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (266:24)";
    _f.__worklet = true;
    return _f;
  }();

  var handleHorizontalDrag = function () {
    var _f = function (gestureEvent) {
      if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.BEGIN) {
        handleDragStart();
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.ACTIVE) {
        var delta = gestureEvent.deltaX / windowWidth;
        handleDragUpdate(delta);
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.END) {
        var velocity = gestureEvent.velocityX / windowWidth;
        handleDragEnd(velocity);
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.CANCELLED) {
        handleDragEnd(0.0);
      }
    };

    _f._closure = {
      GestureState: {
        BEGIN: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.BEGIN,
        ACTIVE: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.ACTIVE,
        END: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.END,
        CANCELLED: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.CANCELLED
      },
      handleDragStart: handleDragStart,
      windowWidth: windowWidth,
      handleDragUpdate: handleDragUpdate,
      handleDragEnd: handleDragEnd
    };
    _f.asString = "function _f(gestureEvent){const{GestureState,handleDragStart,windowWidth,handleDragUpdate,handleDragEnd}=jsThis._closure;{if(gestureEvent.state===GestureState.BEGIN){handleDragStart();}else if(gestureEvent.state===GestureState.ACTIVE){var delta=gestureEvent.deltaX/windowWidth;handleDragUpdate(delta);}else if(gestureEvent.state===GestureState.END){var velocity=gestureEvent.velocityX/windowWidth;handleDragEnd(velocity);}else if(gestureEvent.state===GestureState.CANCELLED){handleDragEnd(0.0);}}}";
    _f.__workletHash = 12869770139890;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (301:31)";
    _f.__worklet = true;
    return _f;
  }();

  return {
    opaque: true,
    handlePrimaryAnimation: handlePrimaryAnimation,
    handleSecondaryAnimation: handleSecondaryAnimation,
    transitionDuration: 300,
    reverseTransitionDuration: 300,
    canTransitionTo: true,
    canTransitionFrom: true,
    gestureDetector: [{
      type: 'horizontal-drag',
      onEvent: handleHorizontalDrag
    }]
  };
};

var HalfScreenDialogRouteBuilder = function ({
  primaryAnimation: primaryAnimation,
  secondaryAnimation: secondaryAnimation,
  primaryAnimationStatus: primaryAnimationStatus,
  secondaryAnimationStatus: secondaryAnimationStatus,
  userGestureInProgress: userGestureInProgress,
  startUserGesture: startUserGesture,
  stopUserGesture: stopUserGesture,
  didPop: didPop
}) {
  var _kMinFlingVelocity = 1.0;
  var _kMaxPageBackAnimationTime = 300;
  var _kMaxDroppedSwipePageForwardAnimationTime = 800;
  var {
    windowWidth: windowWidth,
    windowHeight: windowHeight
  } = _util__WEBPACK_IMPORTED_MODULE_2__.default.getSystemInfoSync();

  var _curvePrimaryAnimation = CurveAnimation({
    animation: primaryAnimation,
    animationStatus: primaryAnimationStatus,
    curve: Curves.linearToEaseOut,
    reverseCurve: Curves.easeInToLinear
  });

  var handlePrimaryAnimation = function () {
    var _f = function () {
      var t = primaryAnimation.value;

      if (!userGestureInProgress.value) {
        t = _curvePrimaryAnimation.value;
      }

      var top = 0.06;
      var selfHeight = (1 - top) * windowHeight;
      var marginTop = top * windowHeight;
      return {
        borderRadius: 12,
        marginTop: marginTop,
        height: selfHeight,
        transform: [{
          translateY: selfHeight * (1 - t)
        }]
      };
    };

    _f._closure = {
      primaryAnimation: primaryAnimation,
      userGestureInProgress: userGestureInProgress,
      _curvePrimaryAnimation: _curvePrimaryAnimation,
      windowHeight: windowHeight
    };
    _f.asString = "function _f(){const{primaryAnimation,userGestureInProgress,_curvePrimaryAnimation,windowHeight}=jsThis._closure;{var t=primaryAnimation.value;if(!userGestureInProgress.value){t=_curvePrimaryAnimation.value;}var top=0.06;var selfHeight=(1-top)*windowHeight;var marginTop=top*windowHeight;return{borderRadius:12,marginTop:marginTop,height:selfHeight,transform:[{translateY:selfHeight*(1-t)}]};}}";
    _f.__workletHash = 13819318046003;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (355:33)";
    _f.__worklet = true;
    return _f;
  }();

  var _curveSecondaryAnimation = CurveAnimation({
    animation: secondaryAnimation,
    animationStatus: secondaryAnimationStatus,
    curve: Curves.linearToEaseOut,
    reverseCurve: Curves.linearToEaseOut
  });

  var handleSecondaryAnimation = function () {
    var _f = function () {
      var t = secondaryAnimation.value;

      if (!userGestureInProgress.value) {
        t = _curveSecondaryAnimation.value;
      }

      return {};
    };

    _f._closure = {
      secondaryAnimation: secondaryAnimation,
      userGestureInProgress: userGestureInProgress,
      _curveSecondaryAnimation: _curveSecondaryAnimation
    };
    _f.asString = "function _f(){const{secondaryAnimation,userGestureInProgress,_curveSecondaryAnimation}=jsThis._closure;{var t=secondaryAnimation.value;if(!userGestureInProgress.value){t=_curveSecondaryAnimation.value;}return{};}}";
    _f.__workletHash = 716412216345;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (386:35)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragStart = function () {
    var _f = function () {
      startUserGesture();
    };

    _f._closure = {
      startUserGesture: startUserGesture
    };
    _f.asString = "function _f(){const{startUserGesture}=jsThis._closure;{startUserGesture();}}";
    _f.__workletHash = 16243958170781;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (398:26)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragUpdate = function () {
    var _f = function (delta) {
      var newVal = primaryAnimation.value - delta;
      primaryAnimation.value = clamp(newVal, 0.0, 1.0);
    };

    _f._closure = {
      primaryAnimation: primaryAnimation,
      clamp: clamp
    };
    _f.asString = "function _f(delta){const{primaryAnimation,clamp}=jsThis._closure;{var newVal=primaryAnimation.value-delta;primaryAnimation.value=clamp(newVal,0.0,1.0);}}";
    _f.__workletHash = 6659100588921;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (403:27)";
    _f.__worklet = true;
    return _f;
  }();

  var handleDragEnd = function () {
    var _f = function (velocity) {
      var animateForward = false;

      if (Math.abs(velocity) >= _kMinFlingVelocity) {
        animateForward = velocity <= 0;
      } else {
        animateForward = primaryAnimation.value > 0.7;
      }

      var t = primaryAnimation.value;
      var animationCurve = Curves.fastLinearToSlowEaseIn;

      if (animateForward) {
        var droppedPageForwardAnimationTime = Math.min(Math.floor(lerp(_kMaxDroppedSwipePageForwardAnimationTime, 0, t)), _kMaxPageBackAnimationTime);
        primaryAnimation.value = (0,_reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming)(1.0, {
          duration: droppedPageForwardAnimationTime,
          easing: animationCurve
        }, function () {
          var _f = function () {
            stopUserGesture();
          };

          _f._closure = {
            stopUserGesture: stopUserGesture
          };
          _f.asString = "function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}";
          _f.__workletHash = 15462961775869;
          _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (427:9)";
          _f.__worklet = true;
          return _f;
        }());
      } else {
        var droppedPageBackAnimationTime = Math.floor(lerp(0, _kMaxDroppedSwipePageForwardAnimationTime, t));
        primaryAnimation.value = (0,_reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming)(0.0, {
          duration: droppedPageBackAnimationTime,
          easing: animationCurve
        }, function () {
          var _f = function () {
            didPop();
            stopUserGesture();
          };

          _f._closure = {
            didPop: didPop,
            stopUserGesture: stopUserGesture
          };
          _f.asString = "function _f(){const{didPop,stopUserGesture}=jsThis._closure;{didPop();stopUserGesture();}}";
          _f.__workletHash = 3231963602411;
          _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (437:9)";
          _f.__worklet = true;
          return _f;
        }());
      }
    };

    _f._closure = {
      _kMinFlingVelocity: _kMinFlingVelocity,
      primaryAnimation: primaryAnimation,
      Curves: {
        fastLinearToSlowEaseIn: Curves.fastLinearToSlowEaseIn
      },
      lerp: lerp,
      _kMaxDroppedSwipePageForwardAnimationTime: _kMaxDroppedSwipePageForwardAnimationTime,
      _kMaxPageBackAnimationTime: _kMaxPageBackAnimationTime,
      withTiming: _reanimated__WEBPACK_IMPORTED_MODULE_1__.withTiming,
      stopUserGesture: stopUserGesture,
      didPop: didPop
    };
    _f.asString = "function _f(velocity){const{_kMinFlingVelocity,primaryAnimation,Curves,lerp,_kMaxDroppedSwipePageForwardAnimationTime,_kMaxPageBackAnimationTime,withTiming,stopUserGesture,didPop}=jsThis._closure;{var animateForward=false;if(Math.abs(velocity)>=_kMinFlingVelocity){animateForward=velocity<=0;}else{animateForward=primaryAnimation.value>0.7;}var t=primaryAnimation.value;var animationCurve=Curves.fastLinearToSlowEaseIn;if(animateForward){var droppedPageForwardAnimationTime=Math.min(Math.floor(lerp(_kMaxDroppedSwipePageForwardAnimationTime,0,t)),_kMaxPageBackAnimationTime);primaryAnimation.value=withTiming(1.0,{duration:droppedPageForwardAnimationTime,easing:animationCurve},function(){const _f=function(){stopUserGesture();};_f._closure={stopUserGesture};_f.asString=\"function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}\";_f.__workletHash=15462961775869;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (427:9)\";_f.__worklet=true;return _f;}());}else{var droppedPageBackAnimationTime=Math.floor(lerp(0,_kMaxDroppedSwipePageForwardAnimationTime,t));primaryAnimation.value=withTiming(0.0,{duration:droppedPageBackAnimationTime,easing:animationCurve},function(){const _f=function(){didPop();stopUserGesture();};_f._closure={didPop,stopUserGesture};_f.asString=\"function _f(){const{didPop,stopUserGesture}=jsThis._closure;{didPop();stopUserGesture();}}\";_f.__workletHash=3231963602411;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (437:9)\";_f.__worklet=true;return _f;}());}}}";
    _f.__workletHash = 2266367258213;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (409:24)";
    _f.__worklet = true;
    return _f;
  }();

  var handleVerticalDrag = function () {
    var _f = function (gestureEvent) {
      if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.BEGIN) {
        handleDragStart();
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.ACTIVE) {
        var delta = gestureEvent.deltaY / windowHeight;
        handleDragUpdate(delta);
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.END) {
        var velocity = gestureEvent.velocityY / windowHeight;
        handleDragEnd(velocity);
      } else if (gestureEvent.state === _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.CANCELLED) {
        handleDragEnd(0.0);
      }
    };

    _f._closure = {
      GestureState: {
        BEGIN: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.BEGIN,
        ACTIVE: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.ACTIVE,
        END: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.END,
        CANCELLED: _components_wx_gesture__WEBPACK_IMPORTED_MODULE_0__.GestureState.CANCELLED
      },
      handleDragStart: handleDragStart,
      windowHeight: windowHeight,
      handleDragUpdate: handleDragUpdate,
      handleDragEnd: handleDragEnd
    };
    _f.asString = "function _f(gestureEvent){const{GestureState,handleDragStart,windowHeight,handleDragUpdate,handleDragEnd}=jsThis._closure;{if(gestureEvent.state===GestureState.BEGIN){handleDragStart();}else if(gestureEvent.state===GestureState.ACTIVE){var delta=gestureEvent.deltaY/windowHeight;handleDragUpdate(delta);}else if(gestureEvent.state===GestureState.END){var velocity=gestureEvent.velocityY/windowHeight;handleDragEnd(velocity);}else if(gestureEvent.state===GestureState.CANCELLED){handleDragEnd(0.0);}}}";
    _f.__workletHash = 16543354649963;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/example/routeBuilder.ts (444:29)";
    _f.__worklet = true;
    return _f;
  }();

  return {
    opaque: false,
    handlePrimaryAnimation: handlePrimaryAnimation,
    handleSecondaryAnimation: handleSecondaryAnimation,
    transitionDuration: 300,
    reverseTransitionDuration: 300,
    canTransitionTo: true,
    canTransitionFrom: true,
    gestureDetector: [{
      type: 'vertical-drag',
      onEvent: handleVerticalDrag
    }]
  };
};

skyline_reanimated_routeManager__WEBPACK_IMPORTED_MODULE_4__.RouteManager.addRouteBuilder('Cupertino', CupertinoRouteBuilder);
skyline_reanimated_routeManager__WEBPACK_IMPORTED_MODULE_4__.RouteManager.addRouteBuilder('ScaleTransition', ScaleTransitionRouteBuilder);
skyline_reanimated_routeManager__WEBPACK_IMPORTED_MODULE_4__.RouteManager.addRouteBuilder('HalfScreenDialog', HalfScreenDialogRouteBuilder);
var RouteType = {
  Cupertino: 'Cupertino',
  ScaleTransition: 'ScaleTransition',
  HalfScreenDialog: 'HalfScreenDialog'
};

/***/ }),

/***/ "./src/example/spa.ts":
/*!****************************!*\
  !*** ./src/example/spa.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../runtime */ "./src/runtime/index.ts");
/* harmony import */ var _routeBuilder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./routeBuilder */ "./src/example/routeBuilder.ts");



/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {
  return _ref.apply(this, arguments);
}

function _ref() {
  _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(function* () {
    var globalPageId = 0;
    var pageA = 0,
        pageB = 0;
    var runtime = _runtime__WEBPACK_IMPORTED_MODULE_1__.default.getInstance();
    var exparser = runtime.getExparser();
    var pageStack = [];
    exparser.registerElement({
      is: 'page-a',
      template: {
        content: function () {
          var P = "";
          var R = {};
          var T = {
            P: P,
            C: [{
              T: "view",
              A: {
                "class": "center",
                "bind:tap": "onTap"
              },
              C: [{
                S: "I am PageA "
              }]
            }, {
              T: "view",
              A: {
                "class": "empty-tips__foot"
              },
              C: [{
                T: "view",
                A: {
                  "class": "empty-tips__btn  extern_margin",
                  "bind:tap": "match"
                },
                C: [{
                  S: "匹配新队友"
                }]
              }, {
                T: "view",
                A: {
                  "class": "empty-tips__btn ",
                  "bind:tap": "match"
                },
                C: [{
                  S: "匹配新队友"
                }]
              }]
            }, {
              T: "view",
              A: {
                "class": "center"
              },
              C: [{
                T: "view",
                A: {
                  "class": "btn center",
                  "bind:tap": "routeTo"
                },
                C: [{
                  S: "Jump To PageB"
                }]
              }]
            }],
            BM: {}
          };

          R[""] = function () {
            return T;
          };

          return function (a) {
            var b = R[a];
            return b ? b() : null;
          };
        }()
      },
      using: {
        view: 'wx-view',
        text: 'wx-text',
        image: 'wx-image'
      },
      options: {
        renderingMode: 'full'
      },
      data: {
        change: false,
        color: 'red'
      },
      lifetimes: {
        attached: function () {
          console.warn('PageA attached');
        },
        detached: function () {
          console.warn('PageA detached');
        }
      },
      methods: {
        onTap: function () {
          console.warn('@@@@ taptap');
          this.setData({
            color: this.data.color === 'red' ? 'yellow' : 'red'
          });
        },
        routeTo: function () {
          var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(function* () {
            var nextPageId = globalPageId++;
            pageB = nextPageId;
            runtime.notifyNavigateTo(nextPageId, _routeBuilder__WEBPACK_IMPORTED_MODULE_2__.RouteType.ScaleTransition, false);
            var context = yield runtime.pageReady(nextPageId);
            exparser.globalOptions.customContext = context;
            context.appendStyleSheet(styles, 1);
            var element = exparser.createElement('page-b');
            runtime.attachRootElement(element, nextPageId);
            pageStack.push(nextPageId);
          });

          return function routeTo() {
            return _ref2.apply(this, arguments);
          };
        }()
      }
    });
    exparser.registerElement({
      is: 'page-b',
      template: {
        content: function () {
          var P = "";
          var R = {};
          var T = {
            P: P,
            C: [{
              T: "view",
              A: {
                "class": "center",
                "style": "margin-bottom: 200px;"
              },
              C: [{
                S: "I am PageB "
              }]
            }, {
              T: "view",
              A: {
                "class": "center"
              },
              C: [{
                T: "view",
                A: {
                  "class": "btn center",
                  "bind:tap": "routeTo"
                },
                C: [{
                  S: "Jump into PageC"
                }]
              }, {
                T: "view",
                A: {
                  "class": "btn center",
                  "bind:tap": "back"
                },
                C: [{
                  S: "Jump back PageA"
                }]
              }]
            }],
            BM: {}
          };

          R[""] = function () {
            return T;
          };

          return function (a) {
            var b = R[a];
            return b ? b() : null;
          };
        }()
      },
      using: {
        view: 'wx-view',
        text: 'wx-text',
        image: 'wx-image'
      },
      options: {
        renderingMode: 'full'
      },
      data: {},
      lifetimes: {
        attached: function () {
          console.warn('PageB attached');
        },
        detached: function () {
          console.warn('PageB detached');
        }
      },
      methods: {
        routeTo: function () {
          var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(function* () {
            try {
              var _nextPageId = globalPageId++;

              runtime.notifyNavigateTo(_nextPageId, _routeBuilder__WEBPACK_IMPORTED_MODULE_2__.RouteType.HalfScreenDialog, false);

              var _context = yield runtime.pageReady(_nextPageId);

              exparser.globalOptions.customContext = _context;

              _context.appendStyleSheet(styles, 1);

              var _element = exparser.createElement('page-c');

              runtime.attachRootElement(_element, _nextPageId);
              pageStack.push(_nextPageId);
            } catch (error) {
              console.error('@@@ ', error);
            }
          });

          return function routeTo() {
            return _ref3.apply(this, arguments);
          };
        }(),
        back: function () {
          var lastPageId = pageStack.pop();
          runtime.notifyNavigateBack(lastPageId);
        }
      }
    });
    exparser.registerElement({
      is: 'page-c',
      template: {
        content: function () {
          var P = "";
          var R = {};
          var T = {
            P: P,
            C: [{
              T: "view",
              A: {
                "class": "center",
                "style": "margin-bottom: 200px;"
              },
              C: [{
                S: "I am PageC "
              }]
            }, {
              T: "view",
              A: {
                "class": "center"
              },
              C: [{
                T: "view",
                A: {
                  "class": "btn center",
                  "bind:tap": "back"
                },
                C: [{
                  S: "Jump back PageB"
                }]
              }]
            }],
            BM: {}
          };

          R[""] = function () {
            return T;
          };

          return function (a) {
            var b = R[a];
            return b ? b() : null;
          };
        }()
      },
      using: {
        view: 'wx-view',
        text: 'wx-text',
        image: 'wx-image'
      },
      options: {
        renderingMode: 'full'
      },
      data: {},
      lifetimes: {
        attached: function () {
          console.warn('PageC attached');
        },
        detached: function () {
          console.warn('PageC detached');
        }
      },
      methods: {
        back: function () {
          var lastPageId = pageStack.pop();
          runtime.notifyNavigateBack(lastPageId);
        }
      }
    });
    var styles = `
  .empty-tips__foot {
    flex-direction: row;
    justify-content: center;
  
    
    
   
  }

  .empty-tips__btn {
    font-size: 14px;
    color: #FFB740;
    line-height: 14px;
    border-radius: 5px;
    border: 1px solid #FFB740;
    padding: 6px 10px;
    font-weight: 400;
    width: auto;
    margin: 0;
  }
  .extern_margin {
    margin-right: 20px;
  }

  .empty-tips__btn_orange {
    background: #FFB740;
    color: #FFFFFF;
  }
    .suolue  {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 60px;
    }
    .btn {
      width: 60%;
      height: 60px;
      background: green;
      font-size: 24px;
    }

    .cicle {
      border-radius: 25px;
      background: green;
      font-size: 14px;
    }

    .rect-wrp {
      width: 200px;
      height: 200px;
    }

    .rect {
      width: 100%;
      height: 100%;
      background: pink;
      border-radius: 40px;
      font-size: 24px;
    }

    .center {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 20px 0;
    }
    .changeOpacity {
      opacity: 0.7
    }
  `;
    var tabBarStyles = `
    .tab-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 48px;
      background: yellow;
      flex-direction: row;
    }

    .tab-item {
      height: 100%;
      flex: 1;
      justify-content: center;
      align-items: center;
    }
`;
    exparser.registerElement({
      is: 'custom-tab-bar',
      template: {
        content: function () {
          var P = "";
          var R = {};
          var T = {
            P: P,
            C: [{
              T: "view",
              A: {
                "class": "tab-bar"
              },
              C: [{
                T: "view",
                A: {
                  "class": "tab-item",
                  "bind:tap": "goToA"
                },
                C: [{
                  S: " A "
                }]
              }, {
                T: "view",
                A: {
                  "class": "tab-item",
                  "bind:tap": "goToB"
                },
                C: [{
                  S: " B "
                }]
              }]
            }],
            BM: {}
          };

          R[""] = function () {
            return T;
          };

          return function (a) {
            var b = R[a];
            return b ? b() : null;
          };
        }()
      },
      using: {
        view: 'wx-view',
        text: 'wx-text',
        image: 'wx-image'
      },
      options: {
        renderingMode: 'full'
      },
      data: {},
      lifetimes: {
        attached: function () {
          console.warn('custom-tab-bar attached');
        },
        detached: function () {
          console.warn('custom-tab-bar detached');
        }
      },
      methods: {
        goToA: function () {
          runtime.notifySwitchTab(pageA);
        },
        goToB: function () {
          runtime.notifySwitchTab(pageB);
        }
      }
    });
    var nextPageId = globalPageId++;
    pageA = nextPageId;
    var context = yield runtime.pageReady(nextPageId);
    exparser.globalOptions.customContext = context;
    exparser.initBackend();
    context.appendStyleSheet(styles, 1);
    var element = exparser.createElement('page-a');
    runtime.attachRootElement(element, nextPageId);
    pageStack.push(nextPageId);
  });
  return _ref.apply(this, arguments);
}

/***/ }),

/***/ "./src/example/util.ts":
/*!*****************************!*\
  !*** ./src/example/util.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var getSystemInfoSync = function () {
  return {
    windowHeight: 736,
    windowWidth: 414
  };
};

var wx = {
  getSystemInfoSync: getSystemInfoSync
};
/* harmony default export */ __webpack_exports__["default"] = (wx);

/***/ }),

/***/ "./src/reanimated/Bezier.ts":
/*!**********************************!*\
  !*** ./src/reanimated/Bezier.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Bezier": () => (/* binding */ Bezier)
/* harmony export */ });
var Bezier = function () {
  var _f = function (mX1, mY1, mX2, mY2) {
    var NEWTON_ITERATIONS = 4;
    var NEWTON_MIN_SLOPE = 0.001;
    var SUBDIVISION_PRECISION = 0.0000001;
    var SUBDIVISION_MAX_ITERATIONS = 10;
    var kSplineTableSize = 11;
    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);

    var A = function () {
      var _f = function (aA1, aA2) {
        return 1.0 - 3.0 * aA2 + 3.0 * aA1;
      };

      _f._closure = {};
      _f.asString = "function A(aA1,aA2){return 1.0-3.0*aA2+3.0*aA1;}";
      _f.__workletHash = 7696928702327;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (20:2)";
      _f.__worklet = true;
      return _f;
    }();

    var B = function () {
      var _f = function (aA1, aA2) {
        return 3.0 * aA2 - 6.0 * aA1;
      };

      _f._closure = {};
      _f.asString = "function B(aA1,aA2){return 3.0*aA2-6.0*aA1;}";
      _f.__workletHash = 3169786778773;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (24:2)";
      _f.__worklet = true;
      return _f;
    }();

    var C = function () {
      var _f = function (aA1) {
        return 3.0 * aA1;
      };

      _f._closure = {};
      _f.asString = "function C(aA1){return 3.0*aA1;}";
      _f.__workletHash = 6399610653367;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (28:2)";
      _f.__worklet = true;
      return _f;
    }();

    var calcBezier = function () {
      var _f = function (aT, aA1, aA2) {
        return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;
      };

      _f._closure = {
        A: A,
        B: B,
        C: C
      };
      _f.asString = "function calcBezier(aT,aA1,aA2){const{A,B,C}=jsThis._closure;{return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT;}}";
      _f.__workletHash = 3153137150968;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (34:2)";
      _f.__worklet = true;
      return _f;
    }();

    var getSlope = function () {
      var _f = function (aT, aA1, aA2) {
        return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);
      };

      _f._closure = {
        A: A,
        B: B,
        C: C
      };
      _f.asString = "function getSlope(aT,aA1,aA2){const{A,B,C}=jsThis._closure;{return 3.0*A(aA1,aA2)*aT*aT+2.0*B(aA1,aA2)*aT+C(aA1);}}";
      _f.__workletHash = 17050227570308;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (40:2)";
      _f.__worklet = true;
      return _f;
    }();

    var binarySubdivide = function () {
      var _f = function (aX, aA, aB, mX1, mX2) {
        var currentX;
        var currentT;
        var i = 0;

        do {
          currentT = aA + (aB - aA) / 2.0;
          currentX = calcBezier(currentT, mX1, mX2) - aX;

          if (currentX > 0.0) {
            aB = currentT;
          } else {
            aA = currentT;
          }
        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);

        return currentT;
      };

      _f._closure = {
        SUBDIVISION_PRECISION: SUBDIVISION_PRECISION,
        SUBDIVISION_MAX_ITERATIONS: SUBDIVISION_MAX_ITERATIONS,
        calcBezier: calcBezier
      };
      _f.asString = "function binarySubdivide(aX,aA,aB,mX1,mX2){const{SUBDIVISION_PRECISION,SUBDIVISION_MAX_ITERATIONS,calcBezier}=jsThis._closure;{var currentX;var currentT;var i=0;do{currentT=aA+(aB-aA)/2.0;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0.0){aB=currentT;}else{aA=currentT;}}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT;}}";
      _f.__workletHash = 8216390185547;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (45:2)";
      _f.__worklet = true;
      return _f;
    }();

    var newtonRaphsonIterate = function () {
      var _f = function (aX, aGuessT, mX1, mX2) {
        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {
          var currentSlope = getSlope(aGuessT, mX1, mX2);

          if (currentSlope === 0.0) {
            return aGuessT;
          }

          var currentX = calcBezier(aGuessT, mX1, mX2) - aX;
          aGuessT -= currentX / currentSlope;
        }

        return aGuessT;
      };

      _f._closure = {
        NEWTON_ITERATIONS: NEWTON_ITERATIONS,
        getSlope: getSlope,
        calcBezier: calcBezier
      };
      _f.asString = "function newtonRaphsonIterate(aX,aGuessT,mX1,mX2){const{NEWTON_ITERATIONS,getSlope,calcBezier}=jsThis._closure;{for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0.0){return aGuessT;}var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope;}return aGuessT;}}";
      _f.__workletHash = 5901993849860;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (62:2)";
      _f.__worklet = true;
      return _f;
    }();

    var LinearEasing = function () {
      var _f = function (x) {
        return x;
      };

      _f._closure = {};
      _f.asString = "function LinearEasing(x){return x;}";
      _f.__workletHash = 3962143445177;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (75:2)";
      _f.__worklet = true;
      return _f;
    }();

    if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1)) {
      throw new Error('bezier x values must be in [0, 1] range');
    }

    if (mX1 === mY1 && mX2 === mY2) {
      return LinearEasing;
    }

    var sampleValues = new Array(kSplineTableSize);

    for (var i = 0; i < kSplineTableSize; ++i) {
      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);
    }

    var getTForX = function () {
      var _f = function (aX) {
        var intervalStart = 0.0;
        var currentSample = 1;
        var lastSample = kSplineTableSize - 1;

        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {
          intervalStart += kSampleStepSize;
        }

        --currentSample;
        var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);
        var guessForT = intervalStart + dist * kSampleStepSize;
        var initialSlope = getSlope(guessForT, mX1, mX2);

        if (initialSlope >= NEWTON_MIN_SLOPE) {
          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);
        } else if (initialSlope === 0.0) {
          return guessForT;
        } else {
          return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);
        }
      };

      _f._closure = {
        kSplineTableSize: kSplineTableSize,
        sampleValues: sampleValues,
        kSampleStepSize: kSampleStepSize,
        getSlope: getSlope,
        mX1: mX1,
        mX2: mX2,
        NEWTON_MIN_SLOPE: NEWTON_MIN_SLOPE,
        newtonRaphsonIterate: newtonRaphsonIterate,
        binarySubdivide: binarySubdivide
      };
      _f.asString = "function getTForX(aX){const{kSplineTableSize,sampleValues,kSampleStepSize,getSlope,mX1,mX2,NEWTON_MIN_SLOPE,newtonRaphsonIterate,binarySubdivide}=jsThis._closure;{var intervalStart=0.0;var currentSample=1;var lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&sampleValues[currentSample]<=aX;++currentSample){intervalStart+=kSampleStepSize;}--currentSample;var dist=(aX-sampleValues[currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample]);var guessForT=intervalStart+dist*kSampleStepSize;var initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=NEWTON_MIN_SLOPE){return newtonRaphsonIterate(aX,guessForT,mX1,mX2);}else if(initialSlope===0.0){return guessForT;}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2);}}}";
      _f.__workletHash = 10148290284160;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (102:2)";
      _f.__worklet = true;
      return _f;
    }();

    return function () {
      var _f = function (x) {
        if (mX1 === mY1 && mX2 === mY2) {
          return x;
        }

        if (x === 0) {
          return 0;
        }

        if (x === 1) {
          return 1;
        }

        return calcBezier(getTForX(x), mY1, mY2);
      };

      _f._closure = {
        mX1: mX1,
        mY1: mY1,
        mX2: mX2,
        mY2: mY2,
        calcBezier: calcBezier,
        getTForX: getTForX
      };
      _f.asString = "function BezierEasing(x){const{mX1,mY1,mX2,mY2,calcBezier,getTForX}=jsThis._closure;{if(mX1===mY1&&mX2===mY2){return x;}if(x===0){return 0;}if(x===1){return 1;}return calcBezier(getTForX(x),mY1,mY2);}}";
      _f.__workletHash = 8676971518933;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (127:9)";
      _f.__worklet = true;
      return _f;
    }();
  };

  _f._closure = {};
  _f.asString = "function Bezier(mX1,mY1,mX2,mY2){var NEWTON_ITERATIONS=4;var NEWTON_MIN_SLOPE=0.001;var SUBDIVISION_PRECISION=0.0000001;var SUBDIVISION_MAX_ITERATIONS=10;var kSplineTableSize=11;var kSampleStepSize=1.0/(kSplineTableSize-1.0);var A=function(){var _f=function(aA1,aA2){return 1.0-3.0*aA2+3.0*aA1;};_f._closure={};_f.asString=\"function A(aA1,aA2){return 1.0-3.0*aA2+3.0*aA1;}\";_f.__workletHash=7696928702327;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (20:2)\";_f.__worklet=true;return _f;}();var B=function(){var _f=function(aA1,aA2){return 3.0*aA2-6.0*aA1;};_f._closure={};_f.asString=\"function B(aA1,aA2){return 3.0*aA2-6.0*aA1;}\";_f.__workletHash=3169786778773;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (24:2)\";_f.__worklet=true;return _f;}();var C=function(){var _f=function(aA1){return 3.0*aA1;};_f._closure={};_f.asString=\"function C(aA1){return 3.0*aA1;}\";_f.__workletHash=6399610653367;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (28:2)\";_f.__worklet=true;return _f;}();var calcBezier=function(){var _f=function(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT;};_f._closure={A:A,B:B,C:C};_f.asString=\"function calcBezier(aT,aA1,aA2){const{A,B,C}=jsThis._closure;{return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT;}}\";_f.__workletHash=3153137150968;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (34:2)\";_f.__worklet=true;return _f;}();var getSlope=function(){var _f=function(aT,aA1,aA2){return 3.0*A(aA1,aA2)*aT*aT+2.0*B(aA1,aA2)*aT+C(aA1);};_f._closure={A:A,B:B,C:C};_f.asString=\"function getSlope(aT,aA1,aA2){const{A,B,C}=jsThis._closure;{return 3.0*A(aA1,aA2)*aT*aT+2.0*B(aA1,aA2)*aT+C(aA1);}}\";_f.__workletHash=17050227570308;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (40:2)\";_f.__worklet=true;return _f;}();var binarySubdivide=function(){var _f=function(aX,aA,aB,mX1,mX2){var currentX;var currentT;var i=0;do{currentT=aA+(aB-aA)/2.0;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0.0){aB=currentT;}else{aA=currentT;}}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT;};_f._closure={SUBDIVISION_PRECISION:SUBDIVISION_PRECISION,SUBDIVISION_MAX_ITERATIONS:SUBDIVISION_MAX_ITERATIONS,calcBezier:calcBezier};_f.asString=\"function binarySubdivide(aX,aA,aB,mX1,mX2){const{SUBDIVISION_PRECISION,SUBDIVISION_MAX_ITERATIONS,calcBezier}=jsThis._closure;{var currentX;var currentT;var i=0;do{currentT=aA+(aB-aA)/2.0;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0.0){aB=currentT;}else{aA=currentT;}}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT;}}\";_f.__workletHash=8216390185547;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (45:2)\";_f.__worklet=true;return _f;}();var newtonRaphsonIterate=function(){var _f=function(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0.0){return aGuessT;}var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope;}return aGuessT;};_f._closure={NEWTON_ITERATIONS:NEWTON_ITERATIONS,getSlope:getSlope,calcBezier:calcBezier};_f.asString=\"function newtonRaphsonIterate(aX,aGuessT,mX1,mX2){const{NEWTON_ITERATIONS,getSlope,calcBezier}=jsThis._closure;{for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0.0){return aGuessT;}var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope;}return aGuessT;}}\";_f.__workletHash=5901993849860;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (62:2)\";_f.__worklet=true;return _f;}();var LinearEasing=function(){var _f=function(x){return x;};_f._closure={};_f.asString=\"function LinearEasing(x){return x;}\";_f.__workletHash=3962143445177;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (75:2)\";_f.__worklet=true;return _f;}();if(!(mX1>=0&&mX1<=1&&mX2>=0&&mX2<=1)){throw new Error('bezier x values must be in [0, 1] range');}if(mX1===mY1&&mX2===mY2){return LinearEasing;}var sampleValues=new Array(kSplineTableSize);for(var i=0;i<kSplineTableSize;++i){sampleValues[i]=calcBezier(i*kSampleStepSize,mX1,mX2);}var getTForX=function(){var _f=function(aX){var intervalStart=0.0;var currentSample=1;var lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&sampleValues[currentSample]<=aX;++currentSample){intervalStart+=kSampleStepSize;}--currentSample;var dist=(aX-sampleValues[currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample]);var guessForT=intervalStart+dist*kSampleStepSize;var initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=NEWTON_MIN_SLOPE){return newtonRaphsonIterate(aX,guessForT,mX1,mX2);}else if(initialSlope===0.0){return guessForT;}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2);}};_f._closure={kSplineTableSize:kSplineTableSize,sampleValues:sampleValues,kSampleStepSize:kSampleStepSize,getSlope:getSlope,mX1:mX1,mX2:mX2,NEWTON_MIN_SLOPE:NEWTON_MIN_SLOPE,newtonRaphsonIterate:newtonRaphsonIterate,binarySubdivide:binarySubdivide};_f.asString=\"function getTForX(aX){const{kSplineTableSize,sampleValues,kSampleStepSize,getSlope,mX1,mX2,NEWTON_MIN_SLOPE,newtonRaphsonIterate,binarySubdivide}=jsThis._closure;{var intervalStart=0.0;var currentSample=1;var lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&sampleValues[currentSample]<=aX;++currentSample){intervalStart+=kSampleStepSize;}--currentSample;var dist=(aX-sampleValues[currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample]);var guessForT=intervalStart+dist*kSampleStepSize;var initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=NEWTON_MIN_SLOPE){return newtonRaphsonIterate(aX,guessForT,mX1,mX2);}else if(initialSlope===0.0){return guessForT;}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2);}}}\";_f.__workletHash=10148290284160;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (102:2)\";_f.__worklet=true;return _f;}();return function(){var _f=function(x){if(mX1===mY1&&mX2===mY2){return x;}if(x===0){return 0;}if(x===1){return 1;}return calcBezier(getTForX(x),mY1,mY2);};_f._closure={mX1:mX1,mY1:mY1,mX2:mX2,mY2:mY2,calcBezier:calcBezier,getTForX:getTForX};_f.asString=\"function BezierEasing(x){const{mX1,mY1,mX2,mY2,calcBezier,getTForX}=jsThis._closure;{if(mX1===mY1&&mX2===mY2){return x;}if(x===0){return 0;}if(x===1){return 1;}return calcBezier(getTForX(x),mY1,mY2);}}\";_f.__workletHash=8676971518933;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (127:9)\";_f.__worklet=true;return _f;}();}";
  _f.__workletHash = 10944322178492;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Bezier.ts (9:7)";
  _f.__worklet = true;
  return _f;
}();

/***/ }),

/***/ "./src/reanimated/Colors.ts":
/*!**********************************!*\
  !*** ./src/reanimated/Colors.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Platform": () => (/* binding */ Platform),
/* harmony export */   "opacity": () => (/* binding */ opacity),
/* harmony export */   "red": () => (/* binding */ red),
/* harmony export */   "green": () => (/* binding */ green),
/* harmony export */   "blue": () => (/* binding */ blue),
/* harmony export */   "rgbaColor": () => (/* binding */ rgbaColor),
/* harmony export */   "hsvToColor": () => (/* binding */ hsvToColor),
/* harmony export */   "processColorInitially": () => (/* binding */ processColorInitially),
/* harmony export */   "isColor": () => (/* binding */ isColor),
/* harmony export */   "processColor": () => (/* binding */ processColor),
/* harmony export */   "convertToHSVA": () => (/* binding */ convertToHSVA),
/* harmony export */   "toRGBA": () => (/* binding */ toRGBA)
/* harmony export */ });
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ "./src/reanimated/core.ts");

var Platform = {
  OS: 'ios'
};
var NUMBER = '[-+]?\\d*\\.?\\d+';
var PERCENTAGE = NUMBER + '%';

var call = function () {
  var _f = function (...args) {
    return '\\(\\s*(' + args.join(')\\s*,\\s*(') + ')\\s*\\)';
  };

  _f._closure = {};
  _f.asString = "function call(...args){return'\\\\(\\\\s*('+args.join(')\\\\s*,\\\\s*(')+')\\\\s*\\\\)';}";
  _f.__workletHash = 17112204286815;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (32:0)";
  _f.__worklet = true;
  return _f;
}();

var jsCachedMatchers = {};
var uiCachedMatchers = (0,_core__WEBPACK_IMPORTED_MODULE_0__.makeRemote)({});

var getMatchers = function () {
  var _f = function () {
    var cachedMatchers = _WORKLET ? uiCachedMatchers : jsCachedMatchers;

    if (cachedMatchers.rgb === undefined) {
      cachedMatchers.rgb = new RegExp('rgb' + call(NUMBER, NUMBER, NUMBER));
      cachedMatchers.rgba = new RegExp('rgba' + call(NUMBER, NUMBER, NUMBER, NUMBER));
      cachedMatchers.hsl = new RegExp('hsl' + call(NUMBER, PERCENTAGE, PERCENTAGE));
      cachedMatchers.hsla = new RegExp('hsla' + call(NUMBER, PERCENTAGE, PERCENTAGE, NUMBER));
      cachedMatchers.hex3 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;
      cachedMatchers.hex4 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;
      cachedMatchers.hex6 = /^#([0-9a-fA-F]{6})$/;
      cachedMatchers.hex8 = /^#([0-9a-fA-F]{8})$/;
    }

    return cachedMatchers;
  };

  _f._closure = {
    uiCachedMatchers: uiCachedMatchers,
    jsCachedMatchers: jsCachedMatchers,
    call: call,
    NUMBER: NUMBER,
    PERCENTAGE: PERCENTAGE
  };
  _f.asString = "function getMatchers(){const{uiCachedMatchers,jsCachedMatchers,call,NUMBER,PERCENTAGE}=jsThis._closure;{var cachedMatchers=_WORKLET?uiCachedMatchers:jsCachedMatchers;if(cachedMatchers.rgb===undefined){cachedMatchers.rgb=new RegExp('rgb'+call(NUMBER,NUMBER,NUMBER));cachedMatchers.rgba=new RegExp('rgba'+call(NUMBER,NUMBER,NUMBER,NUMBER));cachedMatchers.hsl=new RegExp('hsl'+call(NUMBER,PERCENTAGE,PERCENTAGE));cachedMatchers.hsla=new RegExp('hsla'+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER));cachedMatchers.hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;cachedMatchers.hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;cachedMatchers.hex6=/^#([0-9a-fA-F]{6})$/;cachedMatchers.hex8=/^#([0-9a-fA-F]{8})$/;}return cachedMatchers;}}";
  _f.__workletHash = 7716380072712;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (53:0)";
  _f.__worklet = true;
  return _f;
}();

getMatchers();

var hue2rgb = function () {
  var _f = function (p, q, t) {
    if (t < 0) {
      t += 1;
    }

    if (t > 1) {
      t -= 1;
    }

    if (t < 1 / 6) {
      return p + (q - p) * 6 * t;
    }

    if (t < 1 / 2) {
      return q;
    }

    if (t < 2 / 3) {
      return p + (q - p) * (2 / 3 - t) * 6;
    }

    return p;
  };

  _f._closure = {};
  _f.asString = "function hue2rgb(p,q,t){if(t<0){t+=1;}if(t>1){t-=1;}if(t<1/6){return p+(q-p)*6*t;}if(t<1/2){return q;}if(t<2/3){return p+(q-p)*(2/3-t)*6;}return p;}";
  _f.__workletHash = 3618366985414;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (73:0)";
  _f.__worklet = true;
  return _f;
}();

var hslToRgb = function () {
  var _f = function (h, s, l) {
    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    var p = 2 * l - q;
    var r = hue2rgb(p, q, h + 1 / 3);
    var g = hue2rgb(p, q, h);
    var b = hue2rgb(p, q, h - 1 / 3);
    return Math.round(r * 255) << 24 | Math.round(g * 255) << 16 | Math.round(b * 255) << 8;
  };

  _f._closure = {
    hue2rgb: hue2rgb
  };
  _f.asString = "function hslToRgb(h,s,l){const{hue2rgb}=jsThis._closure;{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;var r=hue2rgb(p,q,h+1/3);var g=hue2rgb(p,q,h);var b=hue2rgb(p,q,h-1/3);return Math.round(r*255)<<24|Math.round(g*255)<<16|Math.round(b*255)<<8;}}";
  _f.__workletHash = 2134669154055;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (93:0)";
  _f.__worklet = true;
  return _f;
}();

var parse255 = function () {
  var _f = function (str) {
    var int = Number.parseInt(str, 10);

    if (int < 0) {
      return 0;
    }

    if (int > 255) {
      return 255;
    }

    return int;
  };

  _f._closure = {};
  _f.asString = "function parse255(str){var int=Number.parseInt(str,10);if(int<0){return 0;}if(int>255){return 255;}return int;}";
  _f.__workletHash = 11793634778162;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (104:0)";
  _f.__worklet = true;
  return _f;
}();

var parse360 = function () {
  var _f = function (str) {
    var int = Number.parseFloat(str);
    return (int % 360 + 360) % 360 / 360;
  };

  _f._closure = {};
  _f.asString = "function parse360(str){var int=Number.parseFloat(str);return(int%360+360)%360/360;}";
  _f.__workletHash = 16816192231836;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (116:0)";
  _f.__worklet = true;
  return _f;
}();

var parse1 = function () {
  var _f = function (str) {
    var num = Number.parseFloat(str);

    if (num < 0) {
      return 0;
    }

    if (num > 1) {
      return 255;
    }

    return Math.round(num * 255);
  };

  _f._closure = {};
  _f.asString = "function parse1(str){var num=Number.parseFloat(str);if(num<0){return 0;}if(num>1){return 255;}return Math.round(num*255);}";
  _f.__workletHash = 12235184089721;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (122:0)";
  _f.__worklet = true;
  return _f;
}();

var parsePercentage = function () {
  var _f = function (str) {
    var int = Number.parseFloat(str);

    if (int < 0) {
      return 0;
    }

    if (int > 100) {
      return 1;
    }

    return int / 100;
  };

  _f._closure = {};
  _f.asString = "function parsePercentage(str){var int=Number.parseFloat(str);if(int<0){return 0;}if(int>100){return 1;}return int/100;}";
  _f.__workletHash = 11936566645320;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (134:0)";
  _f.__worklet = true;
  return _f;
}();

var names = (0,_core__WEBPACK_IMPORTED_MODULE_0__.makeShareable)({
  transparent: 0x00000000,
  aliceblue: 0xf0f8ffff,
  antiquewhite: 0xfaebd7ff,
  aqua: 0x00ffffff,
  aquamarine: 0x7fffd4ff,
  azure: 0xf0ffffff,
  beige: 0xf5f5dcff,
  bisque: 0xffe4c4ff,
  black: 0x000000ff,
  blanchedalmond: 0xffebcdff,
  blue: 0x0000ffff,
  blueviolet: 0x8a2be2ff,
  brown: 0xa52a2aff,
  burlywood: 0xdeb887ff,
  burntsienna: 0xea7e5dff,
  cadetblue: 0x5f9ea0ff,
  chartreuse: 0x7fff00ff,
  chocolate: 0xd2691eff,
  coral: 0xff7f50ff,
  cornflowerblue: 0x6495edff,
  cornsilk: 0xfff8dcff,
  crimson: 0xdc143cff,
  cyan: 0x00ffffff,
  darkblue: 0x00008bff,
  darkcyan: 0x008b8bff,
  darkgoldenrod: 0xb8860bff,
  darkgray: 0xa9a9a9ff,
  darkgreen: 0x006400ff,
  darkgrey: 0xa9a9a9ff,
  darkkhaki: 0xbdb76bff,
  darkmagenta: 0x8b008bff,
  darkolivegreen: 0x556b2fff,
  darkorange: 0xff8c00ff,
  darkorchid: 0x9932ccff,
  darkred: 0x8b0000ff,
  darksalmon: 0xe9967aff,
  darkseagreen: 0x8fbc8fff,
  darkslateblue: 0x483d8bff,
  darkslategray: 0x2f4f4fff,
  darkslategrey: 0x2f4f4fff,
  darkturquoise: 0x00ced1ff,
  darkviolet: 0x9400d3ff,
  deeppink: 0xff1493ff,
  deepskyblue: 0x00bfffff,
  dimgray: 0x696969ff,
  dimgrey: 0x696969ff,
  dodgerblue: 0x1e90ffff,
  firebrick: 0xb22222ff,
  floralwhite: 0xfffaf0ff,
  forestgreen: 0x228b22ff,
  fuchsia: 0xff00ffff,
  gainsboro: 0xdcdcdcff,
  ghostwhite: 0xf8f8ffff,
  gold: 0xffd700ff,
  goldenrod: 0xdaa520ff,
  gray: 0x808080ff,
  green: 0x008000ff,
  greenyellow: 0xadff2fff,
  grey: 0x808080ff,
  honeydew: 0xf0fff0ff,
  hotpink: 0xff69b4ff,
  indianred: 0xcd5c5cff,
  indigo: 0x4b0082ff,
  ivory: 0xfffff0ff,
  khaki: 0xf0e68cff,
  lavender: 0xe6e6faff,
  lavenderblush: 0xfff0f5ff,
  lawngreen: 0x7cfc00ff,
  lemonchiffon: 0xfffacdff,
  lightblue: 0xadd8e6ff,
  lightcoral: 0xf08080ff,
  lightcyan: 0xe0ffffff,
  lightgoldenrodyellow: 0xfafad2ff,
  lightgray: 0xd3d3d3ff,
  lightgreen: 0x90ee90ff,
  lightgrey: 0xd3d3d3ff,
  lightpink: 0xffb6c1ff,
  lightsalmon: 0xffa07aff,
  lightseagreen: 0x20b2aaff,
  lightskyblue: 0x87cefaff,
  lightslategray: 0x778899ff,
  lightslategrey: 0x778899ff,
  lightsteelblue: 0xb0c4deff,
  lightyellow: 0xffffe0ff,
  lime: 0x00ff00ff,
  limegreen: 0x32cd32ff,
  linen: 0xfaf0e6ff,
  magenta: 0xff00ffff,
  maroon: 0x800000ff,
  mediumaquamarine: 0x66cdaaff,
  mediumblue: 0x0000cdff,
  mediumorchid: 0xba55d3ff,
  mediumpurple: 0x9370dbff,
  mediumseagreen: 0x3cb371ff,
  mediumslateblue: 0x7b68eeff,
  mediumspringgreen: 0x00fa9aff,
  mediumturquoise: 0x48d1ccff,
  mediumvioletred: 0xc71585ff,
  midnightblue: 0x191970ff,
  mintcream: 0xf5fffaff,
  mistyrose: 0xffe4e1ff,
  moccasin: 0xffe4b5ff,
  navajowhite: 0xffdeadff,
  navy: 0x000080ff,
  oldlace: 0xfdf5e6ff,
  olive: 0x808000ff,
  olivedrab: 0x6b8e23ff,
  orange: 0xffa500ff,
  orangered: 0xff4500ff,
  orchid: 0xda70d6ff,
  palegoldenrod: 0xeee8aaff,
  palegreen: 0x98fb98ff,
  paleturquoise: 0xafeeeeff,
  palevioletred: 0xdb7093ff,
  papayawhip: 0xffefd5ff,
  peachpuff: 0xffdab9ff,
  peru: 0xcd853fff,
  pink: 0xffc0cbff,
  plum: 0xdda0ddff,
  powderblue: 0xb0e0e6ff,
  purple: 0x800080ff,
  rebeccapurple: 0x663399ff,
  red: 0xff0000ff,
  rosybrown: 0xbc8f8fff,
  royalblue: 0x4169e1ff,
  saddlebrown: 0x8b4513ff,
  salmon: 0xfa8072ff,
  sandybrown: 0xf4a460ff,
  seagreen: 0x2e8b57ff,
  seashell: 0xfff5eeff,
  sienna: 0xa0522dff,
  silver: 0xc0c0c0ff,
  skyblue: 0x87ceebff,
  slateblue: 0x6a5acdff,
  slategray: 0x708090ff,
  slategrey: 0x708090ff,
  snow: 0xfffafaff,
  springgreen: 0x00ff7fff,
  steelblue: 0x4682b4ff,
  tan: 0xd2b48cff,
  teal: 0x008080ff,
  thistle: 0xd8bfd8ff,
  tomato: 0xff6347ff,
  turquoise: 0x40e0d0ff,
  violet: 0xee82eeff,
  wheat: 0xf5deb3ff,
  white: 0xffffffff,
  whitesmoke: 0xf5f5f5ff,
  yellow: 0xffff00ff,
  yellowgreen: 0x9acd32ff
});

var normalizeColor = function () {
  var _f = function (color) {
    if (typeof color === 'number') {
      if (color >>> 0 === color && color >= 0 && color <= 0xffffffff) {
        return color;
      }

      return null;
    }

    if (typeof color !== 'string') {
      return null;
    }

    var matchers = getMatchers();
    var match;

    if (match = matchers.hex6.exec(color)) {
      return Number.parseInt(match[1] + 'ff', 16) >>> 0;
    }

    if (names[color] !== undefined) {
      return names[color];
    }

    if (match = matchers.rgb.exec(color)) {
      return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | 0x000000ff) >>> 0;
    }

    if (match = matchers.rgba.exec(color)) {
      return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | parse1(match[4])) >>> 0;
    }

    if (match = matchers.hex3.exec(color)) {
      return Number.parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + 'ff', 16) >>> 0;
    }

    if (match = matchers.hex8.exec(color)) {
      return Number.parseInt(match[1], 16) >>> 0;
    }

    if (match = matchers.hex4.exec(color)) {
      return Number.parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + match[4] + match[4], 16) >>> 0;
    }

    if (match = matchers.hsl.exec(color)) {
      return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | 0x000000ff) >>> 0;
    }

    if (match = matchers.hsla.exec(color)) {
      return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | parse1(match[4])) >>> 0;
    }

    return null;
  };

  _f._closure = {
    getMatchers: getMatchers,
    names: names,
    parse255: parse255,
    parse1: parse1,
    hslToRgb: hslToRgb,
    parse360: parse360,
    parsePercentage: parsePercentage
  };
  _f.asString = "function normalizeColor(color){const{getMatchers,names,parse255,parse1,hslToRgb,parse360,parsePercentage}=jsThis._closure;{if(typeof color==='number'){if(color>>>0===color&&color>=0&&color<=0xffffffff){return color;}return null;}if(typeof color!=='string'){return null;}var matchers=getMatchers();var match;if(match=matchers.hex6.exec(color)){return Number.parseInt(match[1]+'ff',16)>>>0;}if(names[color]!==undefined){return names[color];}if(match=matchers.rgb.exec(color)){return(parse255(match[1])<<24|parse255(match[2])<<16|parse255(match[3])<<8|0x000000ff)>>>0;}if(match=matchers.rgba.exec(color)){return(parse255(match[1])<<24|parse255(match[2])<<16|parse255(match[3])<<8|parse1(match[4]))>>>0;}if(match=matchers.hex3.exec(color)){return Number.parseInt(match[1]+match[1]+match[2]+match[2]+match[3]+match[3]+'ff',16)>>>0;}if(match=matchers.hex8.exec(color)){return Number.parseInt(match[1],16)>>>0;}if(match=matchers.hex4.exec(color)){return Number.parseInt(match[1]+match[1]+match[2]+match[2]+match[3]+match[3]+match[4]+match[4],16)>>>0;}if(match=matchers.hsl.exec(color)){return(hslToRgb(parse360(match[1]),parsePercentage(match[2]),parsePercentage(match[3]))|0x000000ff)>>>0;}if(match=matchers.hsla.exec(color)){return(hslToRgb(parse360(match[1]),parsePercentage(match[2]),parsePercentage(match[3]))|parse1(match[4]))>>>0;}return null;}}";
  _f.__workletHash = 3604990110820;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (302:0)";
  _f.__worklet = true;
  return _f;
}();

var opacity = function () {
  var _f = function (c) {
    return (c >> 24 & 255) / 255;
  };

  _f._closure = {};
  _f.asString = "function _f(c){return(c>>24&255)/255;}";
  _f.__workletHash = 14708696455524;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (414:23)";
  _f.__worklet = true;
  return _f;
}();
var red = function () {
  var _f = function (c) {
    return c >> 16 & 255;
  };

  _f._closure = {};
  _f.asString = "function _f(c){return c>>16&255;}";
  _f.__workletHash = 12808130152281;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (419:19)";
  _f.__worklet = true;
  return _f;
}();
var green = function () {
  var _f = function (c) {
    return c >> 8 & 255;
  };

  _f._closure = {};
  _f.asString = "function _f(c){return c>>8&255;}";
  _f.__workletHash = 3499836539046;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (424:21)";
  _f.__worklet = true;
  return _f;
}();
var blue = function () {
  var _f = function (c) {
    return c & 255;
  };

  _f._closure = {};
  _f.asString = "function _f(c){return c&255;}";
  _f.__workletHash = 14770248723134;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (429:20)";
  _f.__worklet = true;
  return _f;
}();
var rgbaColor = function () {
  var _f = function (r, g, b, alpha = 1) {
    var a = Math.round(alpha * 255);
    var c = a * (1 << 24) + Math.round(r) * (1 << 16) + Math.round(g) * (1 << 8) + Math.round(b);

    if (Platform.OS === 'android') {
      return c < 1 << 31 >>> 0 ? c : c - Math.pow(2, 32);
    }

    return c;
  };

  _f._closure = {
    Platform: {
      OS: Platform.OS
    }
  };
  _f.asString = "function _f(r,g,b,alpha=1){const{Platform}=jsThis._closure;{var a=Math.round(alpha*255);var c=a*(1<<24)+Math.round(r)*(1<<16)+Math.round(g)*(1<<8)+Math.round(b);if(Platform.OS==='android'){return c<1<<31>>>0?c:c-Math.pow(2,32);}return c;}}";
  _f.__workletHash = 16203229226409;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (434:25)";
  _f.__worklet = true;
  return _f;
}();

var RGBtoHSV = function () {
  var _f = function (r, g, b) {
    if (arguments.length === 1) {
      g = r.g;
      b = r.b;
      r = r.r;
    }

    var max = Math.max(r, g, b);
    var min = Math.min(r, g, b);
    var d = max - min;
    var s = max === 0 ? 0 : d / max;
    var v = max / 255;
    var h;

    switch (max) {
      default:
      case min:
        h = 0;
        break;

      case r:
        h = g - b + d * (g < b ? 6 : 0);
        h /= 6 * d;
        break;

      case g:
        h = b - r + d * 2;
        h /= 6 * d;
        break;

      case b:
        h = r - g + d * 4;
        h /= 6 * d;
        break;
    }

    return {
      h: h,
      s: s,
      v: v
    };
  };

  _f._closure = {};
  _f.asString = "function RGBtoHSV(r,g,b){if(arguments.length===1){g=r.g;b=r.b;r=r.r;}var max=Math.max(r,g,b);var min=Math.min(r,g,b);var d=max-min;var s=max===0?0:d/max;var v=max/255;var h;switch(max){default:case min:h=0;break;case r:h=g-b+d*(g<b?6:0);h/=6*d;break;case g:h=b-r+d*2;h/=6*d;break;case b:h=r-g+d*4;h/=6*d;break;}return{h:h,s:s,v:v};}";
  _f.__workletHash = 7477294065049;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (454:0)";
  _f.__worklet = true;
  return _f;
}();

var HSVtoRGB = function () {
  var _f = function (h, s, v) {
    var r, g, b, i, f, p, q, t;

    if (arguments.length === 1) {
      s = h.s;
      v = h.v;
      h = h.h;
    }

    i = Math.floor(h * 6);
    f = h * 6 - i;
    p = v * (1 - s);
    q = v * (1 - f * s);
    t = v * (1 - (1 - f) * s);

    switch (i % 6) {
      case 0:
        r = v, g = t, b = p;
        break;

      case 1:
        r = q, g = v, b = p;
        break;

      case 2:
        r = p, g = v, b = t;
        break;

      case 3:
        r = p, g = q, b = v;
        break;

      case 4:
        r = t, g = p, b = v;
        break;

      case 5:
        r = v, g = p, b = q;
        break;
    }

    return {
      r: Math.round(r * 255),
      g: Math.round(g * 255),
      b: Math.round(b * 255)
    };
  };

  _f._closure = {};
  _f.asString = "function HSVtoRGB(h,s,v){var r,g,b,i,f,p,q,t;if(arguments.length===1){s=h.s;v=h.v;h=h.h;}i=Math.floor(h*6);f=h*6-i;p=v*(1-s);q=v*(1-f*s);t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q;break;}return{r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)};}";
  _f.__workletHash = 8891027662548;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (507:0)";
  _f.__worklet = true;
  return _f;
}();

var hsvToColor = function () {
  var _f = function (h, s, v) {
    var {
      r: r,
      g: g,
      b: b
    } = HSVtoRGB(h, s, v);
    return rgbaColor(r, g, b);
  };

  _f._closure = {
    HSVtoRGB: HSVtoRGB,
    rgbaColor: rgbaColor
  };
  _f.asString = "function _f(h,s,v){const{HSVtoRGB,rgbaColor}=jsThis._closure;{var{r:r,g:g,b:b}=HSVtoRGB(h,s,v);return rgbaColor(r,g,b);}}";
  _f.__workletHash = 1655428666930;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (549:26)";
  _f.__worklet = true;
  return _f;
}();
var processColorInitially = function () {
  var _f = function (color) {
    if (color === null || color === undefined || typeof color === 'number') {
      return color;
    }

    var normalizedColor = normalizeColor(color);

    if (normalizedColor === null || normalizedColor === undefined) {
      return undefined;
    }

    if (typeof normalizedColor !== 'number') {
      return null;
    }

    normalizedColor = (normalizedColor << 24 | normalizedColor >>> 8) >>> 0;
    return normalizedColor;
  };

  _f._closure = {
    normalizeColor: normalizeColor
  };
  _f.asString = "function processColorInitially(color){const{normalizeColor}=jsThis._closure;{if(color===null||color===undefined||typeof color==='number'){return color;}var normalizedColor=normalizeColor(color);if(normalizedColor===null||normalizedColor===undefined){return undefined;}if(typeof normalizedColor!=='number'){return null;}normalizedColor=(normalizedColor<<24|normalizedColor>>>8)>>>0;return normalizedColor;}}";
  _f.__workletHash = 2610780956833;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (555:7)";
  _f.__worklet = true;
  return _f;
}();
var isColor = function () {
  var _f = function (value) {
    if (typeof value !== 'string') {
      return false;
    }

    return processColorInitially(value) != null;
  };

  _f._closure = {
    processColorInitially: processColorInitially
  };
  _f.asString = "function isColor(value){const{processColorInitially}=jsThis._closure;{if(typeof value!=='string'){return false;}return processColorInitially(value)!=null;}}";
  _f.__workletHash = 1808885354308;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (575:7)";
  _f.__worklet = true;
  return _f;
}();
var processColor = function () {
  var _f = function (color) {
    var normalizedColor = processColorInitially(color);

    if (normalizedColor === null || normalizedColor === undefined) {
      return undefined;
    }

    if (typeof normalizedColor !== 'number') {
      return null;
    }

    if (Platform.OS === 'android') {
      normalizedColor = normalizedColor | 0x0;
    }

    return normalizedColor;
  };

  _f._closure = {
    processColorInitially: processColorInitially,
    Platform: {
      OS: Platform.OS
    }
  };
  _f.asString = "function processColor(color){const{processColorInitially,Platform}=jsThis._closure;{var normalizedColor=processColorInitially(color);if(normalizedColor===null||normalizedColor===undefined){return undefined;}if(typeof normalizedColor!=='number'){return null;}if(Platform.OS==='android'){normalizedColor=normalizedColor|0x0;}return normalizedColor;}}";
  _f.__workletHash = 5222930667238;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (583:7)";
  _f.__worklet = true;
  return _f;
}();
var convertToHSVA = function () {
  var _f = function (color) {
    var processedColor = processColorInitially(color);
    var a = (processedColor >>> 24) / 255;
    var r = processedColor << 8 >>> 24;
    var g = processedColor << 16 >>> 24;
    var b = processedColor << 24 >>> 24;
    var {
      h: h,
      s: s,
      v: v
    } = RGBtoHSV(r, g, b);
    return [h, s, v, a];
  };

  _f._closure = {
    processColorInitially: processColorInitially,
    RGBtoHSV: RGBtoHSV
  };
  _f.asString = "function convertToHSVA(color){const{processColorInitially,RGBtoHSV}=jsThis._closure;{var processedColor=processColorInitially(color);var a=(processedColor>>>24)/255;var r=processedColor<<8>>>24;var g=processedColor<<16>>>24;var b=processedColor<<24>>>24;var{h:h,s:s,v:v}=RGBtoHSV(r,g,b);return[h,s,v,a];}}";
  _f.__workletHash = 571479478474;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (605:7)";
  _f.__worklet = true;
  return _f;
}();
var toRGBA = function () {
  var _f = function (HSVA) {
    var {
      r: r,
      g: g,
      b: b
    } = HSVtoRGB(HSVA[0], HSVA[1], HSVA[2]);
    return `rgba(${r}, ${g}, ${b}, ${HSVA[3]})`;
  };

  _f._closure = {
    HSVtoRGB: HSVtoRGB
  };
  _f.asString = "function toRGBA(HSVA){const{HSVtoRGB}=jsThis._closure;{var{r:r,g:g,b:b}=HSVtoRGB(HSVA[0],HSVA[1],HSVA[2]);return`rgba(${r}, ${g}, ${b}, ${HSVA[3]})`;}}";
  _f.__workletHash = 4622836028956;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Colors.ts (616:7)";
  _f.__worklet = true;
  return _f;
}();

/***/ }),

/***/ "./src/reanimated/Easing.ts":
/*!**********************************!*\
  !*** ./src/reanimated/Easing.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Easing": () => (/* binding */ Easing)
/* harmony export */ });
/* harmony import */ var _Bezier__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Bezier */ "./src/reanimated/Bezier.ts");


var linear = function () {
  var _f = function (t) {
    return t;
  };

  _f._closure = {};
  _f.asString = "function linear(t){return t;}";
  _f.__workletHash = 7988822508142;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (62:0)";
  _f.__worklet = true;
  return _f;
}();

var ease = function () {
  var _f = function (t) {
    return (0,_Bezier__WEBPACK_IMPORTED_MODULE_0__.Bezier)(0.42, 0, 1, 1)(t);
  };

  _f._closure = {
    Bezier: _Bezier__WEBPACK_IMPORTED_MODULE_0__.Bezier
  };
  _f.asString = "function ease(t){const{Bezier}=jsThis._closure;{return Bezier(0.42,0,1,1)(t);}}";
  _f.__workletHash = 13039945852153;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (73:0)";
  _f.__worklet = true;
  return _f;
}();

var quad = function () {
  var _f = function (t) {
    return t * t;
  };

  _f._closure = {};
  _f.asString = "function quad(t){return t*t;}";
  _f.__workletHash = 8628631460172;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (84:0)";
  _f.__worklet = true;
  return _f;
}();

var cubic = function () {
  var _f = function (t) {
    return t * t * t;
  };

  _f._closure = {};
  _f.asString = "function cubic(t){return t*t*t;}";
  _f.__workletHash = 9374441307661;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (95:0)";
  _f.__worklet = true;
  return _f;
}();

var poly = function () {
  var _f = function (n) {
    return function (t) {
      return Math.pow(t, n);
    };
  };

  _f._closure = {};
  _f.asString = "function poly(n){return function(t){return Math.pow(t,n);};}";
  _f.__workletHash = 8669070629046;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (106:0)";
  _f.__worklet = true;
  return _f;
}();

var sin = function () {
  var _f = function (t) {
    return 1 - Math.cos(t * Math.PI / 2);
  };

  _f._closure = {};
  _f.asString = "function sin(t){return 1-Math.cos(t*Math.PI/2);}";
  _f.__workletHash = 8621899987563;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (116:0)";
  _f.__worklet = true;
  return _f;
}();

var circle = function () {
  var _f = function (t) {
    return 1 - Math.sqrt(1 - t * t);
  };

  _f._closure = {};
  _f.asString = "function circle(t){return 1-Math.sqrt(1-t*t);}";
  _f.__workletHash = 15893365817828;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (126:0)";
  _f.__worklet = true;
  return _f;
}();

var exp = function () {
  var _f = function (t) {
    return Math.pow(2, 10 * (t - 1));
  };

  _f._closure = {};
  _f.asString = "function exp(t){return Math.pow(2,10*(t-1));}";
  _f.__workletHash = 15907471981377;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (136:0)";
  _f.__worklet = true;
  return _f;
}();

var elastic = function () {
  var _f = function (bounciness = 1) {
    var p = bounciness * Math.PI;
    return function () {
      var _f = function (t) {
        return 1 - Math.pow(Math.cos(t * Math.PI / 2), 3) * Math.cos(t * p);
      };

      _f._closure = {
        p: p
      };
      _f.asString = "function _f(t){const{p}=jsThis._closure;{return 1-Math.pow(Math.cos(t*Math.PI/2),3)*Math.cos(t*p);}}";
      _f.__workletHash = 8897284077766;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (154:9)";
      _f.__worklet = true;
      return _f;
    }();
  };

  _f._closure = {};
  _f.asString = "function elastic(bounciness=1){var p=bounciness*Math.PI;return function(){var _f=function(t){return 1-Math.pow(Math.cos(t*Math.PI/2),3)*Math.cos(t*p);};_f._closure={p:p};_f.asString=\"function _f(t){const{p}=jsThis._closure;{return 1-Math.pow(Math.cos(t*Math.PI/2),3)*Math.cos(t*p);}}\";_f.__workletHash=8897284077766;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (154:9)\";_f.__worklet=true;return _f;}();}";
  _f.__workletHash = 971723817498;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (151:0)";
  _f.__worklet = true;
  return _f;
}();

var back = function () {
  var _f = function (s = 1.70158) {
    return function (t) {
      return t * t * ((s + 1) * t - s);
    };
  };

  _f._closure = {};
  _f.asString = "function back(s=1.70158){return function(t){return t*t*((s+1)*t-s);};}";
  _f.__workletHash = 17568679017755;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (168:0)";
  _f.__worklet = true;
  return _f;
}();

var bounce = function () {
  var _f = function (t) {
    if (t < 1 / 2.75) {
      return 7.5625 * t * t;
    }

    if (t < 2 / 2.75) {
      var _t = t - 1.5 / 2.75;

      return 7.5625 * _t * _t + 0.75;
    }

    if (t < 2.5 / 2.75) {
      var _t2 = t - 2.25 / 2.75;

      return 7.5625 * _t2 * _t2 + 0.9375;
    }

    var t2 = t - 2.625 / 2.75;
    return 7.5625 * t2 * t2 + 0.984375;
  };

  _f._closure = {};
  _f.asString = "function bounce(t){if(t<1/2.75){return 7.5625*t*t;}if(t<2/2.75){var _t=t-1.5/2.75;return 7.5625*_t*_t+0.75;}if(t<2.5/2.75){var _t2=t-2.25/2.75;return 7.5625*_t2*_t2+0.9375;}var t2=t-2.625/2.75;return 7.5625*t2*t2+0.984375;}";
  _f.__workletHash = 12239512606821;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (178:0)";
  _f.__worklet = true;
  return _f;
}();

var bezier = function () {
  var _f = function (x1, y1, x2, y2) {
    return (0,_Bezier__WEBPACK_IMPORTED_MODULE_0__.Bezier)(x1, y1, x2, y2);
  };

  _f._closure = {
    Bezier: _Bezier__WEBPACK_IMPORTED_MODULE_0__.Bezier
  };
  _f.asString = "function bezier(x1,y1,x2,y2){const{Bezier}=jsThis._closure;{return Bezier(x1,y1,x2,y2);}}";
  _f.__workletHash = 17502368919373;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (205:0)";
  _f.__worklet = true;
  return _f;
}();

var in_ = function () {
  var _f = function (easing) {
    return easing;
  };

  _f._closure = {};
  _f.asString = "function in_(easing){return easing;}";
  _f.__workletHash = 1837493474379;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (213:0)";
  _f.__worklet = true;
  return _f;
}();

var out = function () {
  var _f = function (easing) {
    return function () {
      var _f = function (t) {
        return 1 - easing(1 - t);
      };

      _f._closure = {
        easing: easing
      };
      _f.asString = "function _f(t){const{easing}=jsThis._closure;{return 1-easing(1-t);}}";
      _f.__workletHash = 5726884014519;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (223:9)";
      _f.__worklet = true;
      return _f;
    }();
  };

  _f._closure = {};
  _f.asString = "function out(easing){return function(){var _f=function(t){return 1-easing(1-t);};_f._closure={easing:easing};_f.asString=\"function _f(t){const{easing}=jsThis._closure;{return 1-easing(1-t);}}\";_f.__workletHash=5726884014519;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (223:9)\";_f.__worklet=true;return _f;}();}";
  _f.__workletHash = 12545507364637;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (221:0)";
  _f.__worklet = true;
  return _f;
}();

var inOut = function () {
  var _f = function (easing) {
    return function () {
      var _f = function (t) {
        if (t < 0.5) {
          return easing(t * 2) / 2;
        }

        return 1 - easing((1 - t) * 2) / 2;
      };

      _f._closure = {
        easing: easing
      };
      _f.asString = "function _f(t){const{easing}=jsThis._closure;{if(t<0.5){return easing(t*2)/2;}return 1-easing((1-t)*2)/2;}}";
      _f.__workletHash = 2325007799982;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (236:9)";
      _f.__worklet = true;
      return _f;
    }();
  };

  _f._closure = {};
  _f.asString = "function inOut(easing){return function(){var _f=function(t){if(t<0.5){return easing(t*2)/2;}return 1-easing((1-t)*2)/2;};_f._closure={easing:easing};_f.asString=\"function _f(t){const{easing}=jsThis._closure;{if(t<0.5){return easing(t*2)/2;}return 1-easing((1-t)*2)/2;}}\";_f.__workletHash=2325007799982;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (236:9)\";_f.__worklet=true;return _f;}();}";
  _f.__workletHash = 14068466681521;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Easing.ts (234:0)";
  _f.__worklet = true;
  return _f;
}();

var EasingObject = {
  linear: linear,
  ease: ease,
  quad: quad,
  cubic: cubic,
  poly: poly,
  sin: sin,
  circle: circle,
  exp: exp,
  elastic: elastic,
  back: back,
  bounce: bounce,
  bezier: bezier,
  in: in_,
  out: out,
  inOut: inOut
};
var Easing = EasingObject;

/***/ }),

/***/ "./src/reanimated/Hooks.ts":
/*!*********************************!*\
  !*** ./src/reanimated/Hooks.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createSharedValue": () => (/* binding */ createSharedValue),
/* harmony export */   "createDerivedValue": () => (/* binding */ createDerivedValue),
/* harmony export */   "useAnimatedStyle": () => (/* binding */ useAnimatedStyle)
/* harmony export */ });
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ "./src/reanimated/core.ts");
/* harmony import */ var _UpdateProps__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UpdateProps */ "./src/reanimated/UpdateProps.ts");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./animations */ "./src/reanimated/animations.ts");



function createSharedValue(init) {
  return (0,_core__WEBPACK_IMPORTED_MODULE_0__.makeMutable)(init);
}
function createDerivedValue(processor) {
  var inputs = Object.values(processor._closure);
  var sharedValue = (0,_core__WEBPACK_IMPORTED_MODULE_0__.makeMutable)((0,_animations__WEBPACK_IMPORTED_MODULE_2__.initialUpdaterRun)(processor));

  var fun = function () {
    var _f = function () {
      sharedValue.value = processor();
    };

    _f._closure = {
      sharedValue: sharedValue,
      processor: processor
    };
    _f.asString = "function _f(){const{sharedValue,processor}=jsThis._closure;{sharedValue.value=processor();}}";
    _f.__workletHash = 12308083001289;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Hooks.ts (15:14)";
    _f.__worklet = true;
    return _f;
  }();

  var mapperId = (0,_core__WEBPACK_IMPORTED_MODULE_0__.startMapper)(fun, inputs, [sharedValue]);
  return sharedValue;
}

var prepareAnimation = function () {
  var _f = function (animatedProp, lastAnimation, lastValue) {
    function prepareAnimation(animatedProp, lastAnimation, lastValue) {
      if (Array.isArray(animatedProp)) {
        animatedProp.forEach(function (prop, index) {
          return prepareAnimation(prop, lastAnimation && lastAnimation[index], lastValue && lastValue[index]);
        });
        return animatedProp;
      }

      if (typeof animatedProp === 'object' && animatedProp.onFrame) {
        var animation = animatedProp;
        var value = animation.current;

        if (lastValue !== undefined) {
          if (typeof lastValue === 'object') {
            if (lastValue.value !== undefined) {
              value = lastValue.value;
            } else if (lastValue.onFrame !== undefined) {
              if ((lastAnimation === null || lastAnimation === void 0 ? void 0 : lastAnimation.current) !== undefined) {
                value = lastAnimation.current;
              } else if ((lastValue === null || lastValue === void 0 ? void 0 : lastValue.current) !== undefined) {
                value = lastValue.current;
              }
            }
          } else {
            value = lastValue;
          }
        }

        animation.callStart = function (timestamp) {
          animation.onStart(animation, value, timestamp, lastAnimation);
        };

        animation.callStart((0,_core__WEBPACK_IMPORTED_MODULE_0__.getTimestamp)());
        animation.callStart = null;
      } else if (typeof animatedProp === 'object') {
        Object.keys(animatedProp).forEach(function (key) {
          return prepareAnimation(animatedProp[key], lastAnimation && lastAnimation[key], lastValue && lastValue[key]);
        });
      }
    }

    return prepareAnimation(animatedProp, lastAnimation, lastValue);
  };

  _f._closure = {
    getTimestamp: _core__WEBPACK_IMPORTED_MODULE_0__.getTimestamp
  };
  _f.asString = "function prepareAnimation(animatedProp,lastAnimation,lastValue){const{getTimestamp}=jsThis._closure;{function prepareAnimation(animatedProp,lastAnimation,lastValue){if(Array.isArray(animatedProp)){animatedProp.forEach(function(prop,index){return prepareAnimation(prop,lastAnimation&&lastAnimation[index],lastValue&&lastValue[index]);});return animatedProp;}if(typeof animatedProp==='object'&&animatedProp.onFrame){var animation=animatedProp;var value=animation.current;if(lastValue!==undefined){if(typeof lastValue==='object'){if(lastValue.value!==undefined){value=lastValue.value;}else if(lastValue.onFrame!==undefined){if((lastAnimation===null||lastAnimation===void 0?void 0:lastAnimation.current)!==undefined){value=lastAnimation.current;}else if((lastValue===null||lastValue===void 0?void 0:lastValue.current)!==undefined){value=lastValue.current;}}}else{value=lastValue;}}animation.callStart=function(timestamp){animation.onStart(animation,value,timestamp,lastAnimation);};animation.callStart(getTimestamp());animation.callStart=null;}else if(typeof animatedProp==='object'){Object.keys(animatedProp).forEach(function(key){return prepareAnimation(animatedProp[key],lastAnimation&&lastAnimation[key],lastValue&&lastValue[key]);});}}return prepareAnimation(animatedProp,lastAnimation,lastValue);}}";
  _f.__workletHash = 194677483998;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Hooks.ts (23:0)";
  _f.__worklet = true;
  return _f;
}();

var runAnimations = function () {
  var _f = function (animation, timestamp, key, result, animationsActive) {
    function runAnimations(animation, timestamp, key, result, animationsActive) {
      if (!animationsActive.value) {
        return true;
      }

      if (Array.isArray(animation)) {
        result[key] = [];
        var allFinished = true;
        animation.forEach(function (entry, index) {
          if (!runAnimations(entry, timestamp, index, result[key], animationsActive)) {
            allFinished = false;
          }
        });
        return allFinished;
      } else if (typeof animation === 'object' && animation.onFrame) {
        var finished = true;

        if (!animation.finished) {
          if (animation.callStart) {
            animation.callStart(timestamp);
            animation.callStart = null;
          }

          finished = animation.onFrame(animation, timestamp);
          animation.timestamp = timestamp;

          if (finished) {
            animation.finished = true;
            animation.callback && animation.callback(true);
          }
        }

        result[key] = animation.current;
        return finished;
      } else if (typeof animation === 'object') {
        result[key] = {};
        var _allFinished = true;
        Object.keys(animation).forEach(function (k) {
          if (!runAnimations(animation[k], timestamp, k, result[key], animationsActive)) {
            _allFinished = false;
          }
        });
        return _allFinished;
      } else {
        result[key] = animation;
        return true;
      }
    }

    return runAnimations(animation, timestamp, key, result, animationsActive);
  };

  _f._closure = {};
  _f.asString = "function runAnimations(animation,timestamp,key,result,animationsActive){function runAnimations(animation,timestamp,key,result,animationsActive){if(!animationsActive.value){return true;}if(Array.isArray(animation)){result[key]=[];var allFinished=true;animation.forEach(function(entry,index){if(!runAnimations(entry,timestamp,index,result[key],animationsActive)){allFinished=false;}});return allFinished;}else if(typeof animation==='object'&&animation.onFrame){var finished=true;if(!animation.finished){if(animation.callStart){animation.callStart(timestamp);animation.callStart=null;}finished=animation.onFrame(animation,timestamp);animation.timestamp=timestamp;if(finished){animation.finished=true;animation.callback&&animation.callback(true);}}result[key]=animation.current;return finished;}else if(typeof animation==='object'){result[key]={};var _allFinished=true;Object.keys(animation).forEach(function(k){if(!runAnimations(animation[k],timestamp,k,result[key],animationsActive)){_allFinished=false;}});return _allFinished;}else{result[key]=animation;return true;}}return runAnimations(animation,timestamp,key,result,animationsActive);}";
  _f.__workletHash = 15750931731485;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Hooks.ts (71:0)";
  _f.__worklet = true;
  return _f;
}();

var isAnimated = function () {
  var _f = function (prop) {
    function isAnimated(prop) {
      if (Array.isArray(prop)) {
        return prop.some(isAnimated);
      }

      if (typeof prop === 'object') {
        if (prop.onFrame) {
          return true;
        }

        return Object.keys(prop).some(function (key) {
          return isAnimated(prop[key]);
        });
      }

      return false;
    }

    return isAnimated(prop);
  };

  _f._closure = {};
  _f.asString = "function isAnimated(prop){function isAnimated(prop){if(Array.isArray(prop)){return prop.some(isAnimated);}if(typeof prop==='object'){if(prop.onFrame){return true;}return Object.keys(prop).some(function(key){return isAnimated(prop[key]);});}return false;}return isAnimated(prop);}";
  _f.__workletHash = 17049513327359;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Hooks.ts (120:0)";
  _f.__worklet = true;
  return _f;
}();

var styleDiff = function () {
  var _f = function (oldStyle, newStyle) {
    var diff = {};
    Object.keys(oldStyle).forEach(function (key) {
      if (newStyle[key] === undefined) {
        diff[key] = null;
      }
    });
    Object.keys(newStyle).forEach(function (key) {
      var value = newStyle[key];
      var oldValue = oldStyle[key];

      if (isAnimated(value)) {
        return;
      }

      if (oldValue !== value && JSON.stringify(oldValue) !== JSON.stringify(value)) {
        diff[key] = value;
      }
    });
    return diff;
  };

  _f._closure = {
    isAnimated: isAnimated
  };
  _f.asString = "function styleDiff(oldStyle,newStyle){const{isAnimated}=jsThis._closure;{var diff={};Object.keys(oldStyle).forEach(function(key){if(newStyle[key]===undefined){diff[key]=null;}});Object.keys(newStyle).forEach(function(key){var value=newStyle[key];var oldValue=oldStyle[key];if(isAnimated(value)){return;}if(oldValue!==value&&JSON.stringify(oldValue)!==JSON.stringify(value)){diff[key]=value;}});return diff;}}";
  _f.__workletHash = 12547599973310;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Hooks.ts (137:0)";
  _f.__worklet = true;
  return _f;
}();

var styleUpdater = function () {
  var _f = function (shadowNode, updater, state, adapters, animationsActive) {
    var animations = state.animations || {};
    var newValues = updater() || {};
    var oldValues = state.last;
    var hasAnimations = false;
    Object.keys(animations).forEach(function (key) {
      var value = newValues[key];

      if (!isAnimated(value)) {
        delete animations[key];
      }
    });
    Object.keys(newValues).forEach(function (key) {
      var value = newValues[key];

      if (isAnimated(value)) {
        prepareAnimation(value, animations[key], oldValues[key]);
        animations[key] = value;
        hasAnimations = true;
      }
    });

    function frame(timestamp) {
      var {
        animations: animations,
        last: last,
        isAnimationCancelled: isAnimationCancelled
      } = state;

      if (isAnimationCancelled) {
        state.isAnimationRunning = false;
        return;
      }

      var updates = {};
      var allFinished = true;
      Object.keys(animations).forEach(function (propName) {
        var finished = runAnimations(animations[propName], timestamp, propName, updates, animationsActive);

        if (finished) {
          last[propName] = updates[propName];
          delete animations[propName];
        } else {
          allFinished = false;
        }
      });

      if (Object.keys(updates).length) {
        (0,_UpdateProps__WEBPACK_IMPORTED_MODULE_1__.default)(shadowNode, updates, adapters);
      }

      if (!allFinished) {
        (0,_core__WEBPACK_IMPORTED_MODULE_0__.requestFrame)(frame);
      } else {
        state.isAnimationRunning = false;
      }
    }

    if (hasAnimations) {
      state.animations = animations;

      if (!state.isAnimationRunning) {
        state.isAnimationCancelled = false;
        state.isAnimationRunning = true;

        if (_frameTimestamp) {
          frame(_frameTimestamp);
        } else {
          (0,_core__WEBPACK_IMPORTED_MODULE_0__.requestFrame)(frame);
        }
      }
    } else {
      state.isAnimationCancelled = true;
      state.animations = {};
    }

    state.last = Object.assign({}, oldValues, newValues);
    var diff = {};
    Object.keys(newValues).forEach(function (key) {
      var value = newValues[key];
      if (isAnimated(value)) return;
      diff[key] = value;
    });

    if (Object.keys(diff).length !== 0) {
      (0,_UpdateProps__WEBPACK_IMPORTED_MODULE_1__.default)(shadowNode, diff, adapters);
    }
  };

  _f._closure = {
    isAnimated: isAnimated,
    prepareAnimation: prepareAnimation,
    runAnimations: runAnimations,
    updateProps: _UpdateProps__WEBPACK_IMPORTED_MODULE_1__.default,
    requestFrame: _core__WEBPACK_IMPORTED_MODULE_0__.requestFrame
  };
  _f.asString = "function styleUpdater(shadowNode,updater,state,adapters,animationsActive){const{isAnimated,prepareAnimation,runAnimations,updateProps,requestFrame}=jsThis._closure;{var animations=state.animations||{};var newValues=updater()||{};var oldValues=state.last;var hasAnimations=false;Object.keys(animations).forEach(function(key){var value=newValues[key];if(!isAnimated(value)){delete animations[key];}});Object.keys(newValues).forEach(function(key){var value=newValues[key];if(isAnimated(value)){prepareAnimation(value,animations[key],oldValues[key]);animations[key]=value;hasAnimations=true;}});function frame(timestamp){var{animations:animations,last:last,isAnimationCancelled:isAnimationCancelled}=state;if(isAnimationCancelled){state.isAnimationRunning=false;return;}var updates={};var allFinished=true;Object.keys(animations).forEach(function(propName){var finished=runAnimations(animations[propName],timestamp,propName,updates,animationsActive);if(finished){last[propName]=updates[propName];delete animations[propName];}else{allFinished=false;}});if(Object.keys(updates).length){updateProps(shadowNode,updates,adapters);}if(!allFinished){requestFrame(frame);}else{state.isAnimationRunning=false;}}if(hasAnimations){state.animations=animations;if(!state.isAnimationRunning){state.isAnimationCancelled=false;state.isAnimationRunning=true;if(_frameTimestamp){frame(_frameTimestamp);}else{requestFrame(frame);}}}else{state.isAnimationCancelled=true;state.animations={};}state.last=Object.assign({},oldValues,newValues);var diff={};Object.keys(newValues).forEach(function(key){var value=newValues[key];if(isAnimated(value))return;diff[key]=value;});if(Object.keys(diff).length!==0){updateProps(shadowNode,diff,adapters);}}}";
  _f.__workletHash = 241572779936;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Hooks.ts (161:0)";
  _f.__worklet = true;
  return _f;
}();

function useAnimatedStyle(updater, adapters) {
  var inputs = Object.values(updater._closure);
  adapters = !adapters || Array.isArray(adapters) ? adapters : [adapters];
  var animationsActive = (0,_core__WEBPACK_IMPORTED_MODULE_0__.makeMutable)(true);
  var initial = (0,_animations__WEBPACK_IMPORTED_MODULE_2__.initialUpdaterRun)(updater);
  var remoteState = (0,_core__WEBPACK_IMPORTED_MODULE_0__.makeRemote)({
    last: initial
  });

  var fun = function () {
    var _f = function (shadowNode) {
      styleUpdater(shadowNode, updater, remoteState, adapters, animationsActive);
    };

    _f._closure = {
      styleUpdater: styleUpdater,
      updater: updater,
      remoteState: remoteState,
      adapters: adapters,
      animationsActive: animationsActive
    };
    _f.asString = "function _f(shadowNode){const{styleUpdater,updater,remoteState,adapters,animationsActive}=jsThis._closure;{styleUpdater(shadowNode,updater,remoteState,adapters,animationsActive);}}";
    _f.__workletHash = 1373077023773;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/Hooks.ts (252:14)";
    _f.__worklet = true;
    return _f;
  }();

  var mapperId = (0,_core__WEBPACK_IMPORTED_MODULE_0__.startMapper)(fun, inputs, []);
  var wrongKey;

  var isObjectValid = function (element, key) {
    var result = typeof element === 'object' && element.value !== undefined;

    if (result) {
      wrongKey = key;
    }

    return !result;
  };

  var isError = Object.keys(initial).some(function (key) {
    var element = initial[key];
    var result = false;

    if (Array.isArray(element)) {
      for (var elementArrayItem of element) {
        if (typeof elementArrayItem !== 'object') {
          break;
        }

        var objectValue = Object.values(elementArrayItem)[0];
        result = isObjectValid(objectValue, key);

        if (!result) {
          break;
        }
      }
    } else {
      result = isObjectValid(element, key);
    }

    return !result;
  });

  if (isError && wrongKey !== undefined) {
    throw new Error(`invalid value passed to \`${wrongKey}\`, maybe you forgot to use \`.value\`?`);
  }

  return {
    mapperId: mapperId
  };
}

/***/ }),

/***/ "./src/reanimated/UpdateProps.ts":
/*!***************************************!*\
  !*** ./src/reanimated/UpdateProps.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "updateProps": () => (/* binding */ updateProps)
/* harmony export */ });
/* harmony import */ var _Colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Colors */ "./src/reanimated/Colors.ts");
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core */ "./src/reanimated/core.ts");


var colorProps = ['backgroundColor', 'borderBottomColor', 'borderColor', 'borderLeftColor', 'borderRightColor', 'borderTopColor', 'borderStartColor', 'borderEndColor', 'color', 'shadowColor', 'textDecorationColor', 'tintColor', 'textShadowColor', 'overlayColor'];
var ColorProperties = (0,_core__WEBPACK_IMPORTED_MODULE_1__.makeShareable)(colorProps);
var updateProps = function () {
  var _f = function (shadowNode, updates, adapters) {
    if (adapters) {
      adapters.forEach(function (adapter) {
        adapter(updates);
      });
    }

    Object.keys(updates).forEach(function (key) {
      if (ColorProperties.indexOf(key) !== -1) {
        updates[key] = (0,_Colors__WEBPACK_IMPORTED_MODULE_0__.processColor)(updates[key]);
      }
    });

    _updateStyle(shadowNode, updates);
  };

  _f._closure = {
    ColorProperties: ColorProperties,
    processColor: _Colors__WEBPACK_IMPORTED_MODULE_0__.processColor
  };
  _f.asString = "function _f(shadowNode,updates,adapters){const{ColorProperties,processColor}=jsThis._closure;{if(adapters){adapters.forEach(function(adapter){adapter(updates);});}Object.keys(updates).forEach(function(key){if(ColorProperties.indexOf(key)!==-1){updates[key]=processColor(updates[key]);}});_updateStyle(shadowNode,updates);}}";
  _f.__workletHash = 7249162021382;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/UpdateProps.ts (27:27)";
  _f.__worklet = true;
  return _f;
}();
/* harmony default export */ __webpack_exports__["default"] = (updateProps);

/***/ }),

/***/ "./src/reanimated/animations.ts":
/*!**************************************!*\
  !*** ./src/reanimated/animations.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "initialUpdaterRun": () => (/* binding */ initialUpdaterRun),
/* harmony export */   "transform": () => (/* binding */ transform),
/* harmony export */   "transformAnimation": () => (/* binding */ transformAnimation),
/* harmony export */   "decorateAnimation": () => (/* binding */ decorateAnimation),
/* harmony export */   "defineAnimation": () => (/* binding */ defineAnimation),
/* harmony export */   "cancelAnimation": () => (/* binding */ cancelAnimation),
/* harmony export */   "withTiming": () => (/* binding */ withTiming),
/* harmony export */   "withSpring": () => (/* binding */ withSpring),
/* harmony export */   "withDecay": () => (/* binding */ withDecay),
/* harmony export */   "withDelay": () => (/* binding */ withDelay),
/* harmony export */   "withSequence": () => (/* binding */ withSequence),
/* harmony export */   "withRepeat": () => (/* binding */ withRepeat)
/* harmony export */ });
/* harmony import */ var _Easing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Easing */ "./src/reanimated/Easing.ts");
/* harmony import */ var _Colors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Colors */ "./src/reanimated/Colors.ts");


var IN_STYLE_UPDATER = false;
function initialUpdaterRun(updater) {
  IN_STYLE_UPDATER = true;
  var result = updater();
  IN_STYLE_UPDATER = false;
  return result;
}
var transform = function () {
  var _f = function (value, handler) {
    if (value === undefined) {
      return undefined;
    }

    if (typeof value === 'string') {
      var match = value.match(/([A-Za-z]*)(-?\d*\.?\d*)([A-Za-z%]*)/);
      var prefix = match[1];
      var suffix = match[3];
      var number = match[2];
      handler.__prefix = prefix;
      handler.__suffix = suffix;
      return parseFloat(number);
    }

    if (handler.__prefix === undefined) {
      return value;
    }

    return handler.__prefix + value + handler.__suffix;
  };

  _f._closure = {};
  _f.asString = "function transform(value,handler){if(value===undefined){return undefined;}if(typeof value==='string'){var match=value.match(/([A-Za-z]*)(-?\\d*\\.?\\d*)([A-Za-z%]*)/);var prefix=match[1];var suffix=match[3];var number=match[2];handler.__prefix=prefix;handler.__suffix=suffix;return parseFloat(number);}if(handler.__prefix===undefined){return value;}return handler.__prefix+value+handler.__suffix;}";
  _f.__workletHash = 10262225681634;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (16:7)";
  _f.__worklet = true;
  return _f;
}();
var transformAnimation = function () {
  var _f = function (animation) {
    if (!animation) {
      return;
    }

    animation.toValue = transform(animation.toValue, animation);
    animation.current = transform(animation.current, animation);
    animation.startValue = transform(animation.startValue, animation);
  };

  _f._closure = {
    transform: transform
  };
  _f.asString = "function transformAnimation(animation){const{transform}=jsThis._closure;{if(!animation){return;}animation.toValue=transform(animation.toValue,animation);animation.current=transform(animation.current,animation);animation.startValue=transform(animation.startValue,animation);}}";
  _f.__workletHash = 6788872195137;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (42:7)";
  _f.__worklet = true;
  return _f;
}();
var decorateAnimation = function () {
  var _f = function (animation) {
    if (animation.isHigherOrder) {
      return;
    }

    var baseOnStart = animation.onStart;
    var baseOnFrame = animation.onFrame;
    var animationCopy = Object.assign({}, animation);
    delete animationCopy.callback;

    var prefNumberSuffOnStart = function (animation, value, timestamp, previousAnimation) {
      var val = transform(value, animation);
      transformAnimation(animation);
      if (previousAnimation !== animation) transformAnimation(previousAnimation);
      baseOnStart(animation, val, timestamp, previousAnimation);
      transformAnimation(animation);
      if (previousAnimation !== animation) transformAnimation(previousAnimation);
    };

    var prefNumberSuffOnFrame = function (animation, timestamp) {
      transformAnimation(animation);
      var res = baseOnFrame(animation, timestamp);
      transformAnimation(animation);
      return res;
    };

    var tab = ['H', 'S', 'V', 'A'];

    var colorOnStart = function (animation, value, timestamp, previousAnimation) {
      var HSVAValue;
      var HSVACurrent;
      var HSVAToValue;
      var res = [];

      if ((0,_Colors__WEBPACK_IMPORTED_MODULE_1__.isColor)(value)) {
        HSVACurrent = (0,_Colors__WEBPACK_IMPORTED_MODULE_1__.convertToHSVA)(animation.current);
        HSVAValue = (0,_Colors__WEBPACK_IMPORTED_MODULE_1__.convertToHSVA)(value);

        if (animation.toValue) {
          HSVAToValue = (0,_Colors__WEBPACK_IMPORTED_MODULE_1__.convertToHSVA)(animation.toValue);
        }
      }

      tab.forEach(function (i, index) {
        animation[i] = Object.assign({}, animationCopy);
        animation[i].current = HSVACurrent[index];
        animation[i].toValue = HSVAToValue ? HSVAToValue[index] : undefined;
        animation[i].onStart(animation[i], HSVAValue[index], timestamp, previousAnimation ? previousAnimation[i] : undefined);
        res.push(animation[i].current);
      });
      animation.current = (0,_Colors__WEBPACK_IMPORTED_MODULE_1__.toRGBA)(res);
    };

    var colorOnFrame = function (animation, timestamp) {
      var HSVACurrent = (0,_Colors__WEBPACK_IMPORTED_MODULE_1__.convertToHSVA)(animation.current);
      var res = [];
      var finished = true;
      tab.forEach(function (i, index) {
        animation[i].current = HSVACurrent[index];
        finished &= animation[i].onFrame(animation[i], timestamp);
        res.push(animation[i].current);
      });
      animation.current = (0,_Colors__WEBPACK_IMPORTED_MODULE_1__.toRGBA)(res);
      return finished;
    };

    animation.onStart = function (animation, value, timestamp, previousAnimation) {
      if ((0,_Colors__WEBPACK_IMPORTED_MODULE_1__.isColor)(value)) {
        colorOnStart(animation, value, timestamp, previousAnimation);
        animation.onFrame = colorOnFrame;
        return;
      } else if (typeof value === 'string') {
        prefNumberSuffOnStart(animation, value, timestamp, previousAnimation);
        animation.onFrame = prefNumberSuffOnFrame;
        return;
      }

      baseOnStart(animation, value, timestamp, previousAnimation);
    };
  };

  _f._closure = {
    transform: transform,
    transformAnimation: transformAnimation,
    isColor: _Colors__WEBPACK_IMPORTED_MODULE_1__.isColor,
    convertToHSVA: _Colors__WEBPACK_IMPORTED_MODULE_1__.convertToHSVA,
    toRGBA: _Colors__WEBPACK_IMPORTED_MODULE_1__.toRGBA
  };
  _f.asString = "function decorateAnimation(animation){const{transform,transformAnimation,isColor,convertToHSVA,toRGBA}=jsThis._closure;{if(animation.isHigherOrder){return;}var baseOnStart=animation.onStart;var baseOnFrame=animation.onFrame;var animationCopy=Object.assign({},animation);delete animationCopy.callback;var prefNumberSuffOnStart=function(animation,value,timestamp,previousAnimation){var val=transform(value,animation);transformAnimation(animation);if(previousAnimation!==animation)transformAnimation(previousAnimation);baseOnStart(animation,val,timestamp,previousAnimation);transformAnimation(animation);if(previousAnimation!==animation)transformAnimation(previousAnimation);};var prefNumberSuffOnFrame=function(animation,timestamp){transformAnimation(animation);var res=baseOnFrame(animation,timestamp);transformAnimation(animation);return res;};var tab=['H','S','V','A'];var colorOnStart=function(animation,value,timestamp,previousAnimation){var HSVAValue;var HSVACurrent;var HSVAToValue;var res=[];if(isColor(value)){HSVACurrent=convertToHSVA(animation.current);HSVAValue=convertToHSVA(value);if(animation.toValue){HSVAToValue=convertToHSVA(animation.toValue);}}tab.forEach(function(i,index){animation[i]=Object.assign({},animationCopy);animation[i].current=HSVACurrent[index];animation[i].toValue=HSVAToValue?HSVAToValue[index]:undefined;animation[i].onStart(animation[i],HSVAValue[index],timestamp,previousAnimation?previousAnimation[i]:undefined);res.push(animation[i].current);});animation.current=toRGBA(res);};var colorOnFrame=function(animation,timestamp){var HSVACurrent=convertToHSVA(animation.current);var res=[];var finished=true;tab.forEach(function(i,index){animation[i].current=HSVACurrent[index];finished&=animation[i].onFrame(animation[i],timestamp);res.push(animation[i].current);});animation.current=toRGBA(res);return finished;};animation.onStart=function(animation,value,timestamp,previousAnimation){if(isColor(value)){colorOnStart(animation,value,timestamp,previousAnimation);animation.onFrame=colorOnFrame;return;}else if(typeof value==='string'){prefNumberSuffOnStart(animation,value,timestamp,previousAnimation);animation.onFrame=prefNumberSuffOnFrame;return;}baseOnStart(animation,value,timestamp,previousAnimation);};}}";
  _f.__workletHash = 11374843197110;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (52:7)";
  _f.__worklet = true;
  return _f;
}();
var defineAnimation = function () {
  var _f = function (starting, factory) {
    if (IN_STYLE_UPDATER) {
      return starting;
    }

    var create = function () {
      var _f = function () {
        var animation = factory();
        decorateAnimation(animation);
        return animation;
      };

      _f._closure = {
        factory: factory,
        decorateAnimation: decorateAnimation
      };
      _f.asString = "function _f(){const{factory,decorateAnimation}=jsThis._closure;{var animation=factory();decorateAnimation(animation);return animation;}}";
      _f.__workletHash = 14637555751476;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (143:17)";
      _f.__worklet = true;
      return _f;
    }();

    if (_WORKLET) {
      return create();
    }

    return create;
  };

  _f._closure = {
    IN_STYLE_UPDATER: IN_STYLE_UPDATER,
    decorateAnimation: decorateAnimation
  };
  _f.asString = "function defineAnimation(starting,factory){const{IN_STYLE_UPDATER,decorateAnimation}=jsThis._closure;{if(IN_STYLE_UPDATER){return starting;}var create=function(){var _f=function(){var animation=factory();decorateAnimation(animation);return animation;};_f._closure={factory:factory,decorateAnimation:decorateAnimation};_f.asString=\"function _f(){const{factory,decorateAnimation}=jsThis._closure;{var animation=factory();decorateAnimation(animation);return animation;}}\";_f.__workletHash=14637555751476;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (143:17)\";_f.__worklet=true;return _f;}();if(_WORKLET){return create();}return create;}}";
  _f.__workletHash = 3522343829685;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (138:7)";
  _f.__worklet = true;
  return _f;
}();
var cancelAnimation = function () {
  var _f = function (sharedValue) {
    sharedValue.value = sharedValue.value;
  };

  _f._closure = {};
  _f.asString = "function cancelAnimation(sharedValue){sharedValue.value=sharedValue.value;}";
  _f.__workletHash = 15056882569526;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (156:7)";
  _f.__worklet = true;
  return _f;
}();
var withTiming = function () {
  var _f = function (toValue, userConfig, callback) {
    return defineAnimation(toValue, function () {
      var _f = function () {
        var config = {
          duration: 300,
          easing: _Easing__WEBPACK_IMPORTED_MODULE_0__.Easing.inOut(_Easing__WEBPACK_IMPORTED_MODULE_0__.Easing.quad)
        };

        if (userConfig) {
          Object.keys(userConfig).forEach(function (key) {
            return config[key] = userConfig[key];
          });
        }

        function timing(animation, now) {
          var {
            toValue: toValue,
            progress: progress,
            startTime: startTime,
            current: current
          } = animation;
          var runtime = now - startTime;

          if (runtime >= config.duration) {
            animation.startTime = 0;
            animation.current = toValue;
            return true;
          }

          var newProgress = config.easing(runtime / config.duration);
          var dist = (toValue - current) * (newProgress - progress) / (1 - progress);
          animation.current += dist;
          animation.progress = newProgress;
          return false;
        }

        function onStart(animation, value, now, previousAnimation) {
          if (previousAnimation && previousAnimation.type === 'timing' && previousAnimation.toValue === toValue && previousAnimation.startTime) {
            animation.startTime = previousAnimation.startTime;
            animation.progress = previousAnimation.progress;
          } else {
            animation.startTime = now;
            animation.progress = 0;
          }

          animation.current = value;
        }

        return {
          type: 'timing',
          onFrame: timing,
          onStart: onStart,
          progress: 0,
          toValue: toValue,
          current: toValue,
          callback: callback
        };
      };

      _f._closure = {
        Easing: {
          inOut: _Easing__WEBPACK_IMPORTED_MODULE_0__.Easing.inOut,
          quad: _Easing__WEBPACK_IMPORTED_MODULE_0__.Easing.quad
        },
        userConfig: userConfig,
        toValue: toValue,
        callback: callback
      };
      _f.asString = "function _f(){const{Easing,userConfig,toValue,callback}=jsThis._closure;{var config={duration:300,easing:Easing.inOut(Easing.quad)};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}function timing(animation,now){var{toValue:toValue,progress:progress,startTime:startTime,current:current}=animation;var runtime=now-startTime;if(runtime>=config.duration){animation.startTime=0;animation.current=toValue;return true;}var newProgress=config.easing(runtime/config.duration);var dist=(toValue-current)*(newProgress-progress)/(1-progress);animation.current+=dist;animation.progress=newProgress;return false;}function onStart(animation,value,now,previousAnimation){if(previousAnimation&&previousAnimation.type==='timing'&&previousAnimation.toValue===toValue&&previousAnimation.startTime){animation.startTime=previousAnimation.startTime;animation.progress=previousAnimation.progress;}else{animation.startTime=now;animation.progress=0;}animation.current=value;}return{type:'timing',onFrame:timing,onStart:onStart,progress:0,toValue:toValue,current:toValue,callback:callback};}}";
      _f.__workletHash = 6093059965943;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (165:34)";
      _f.__worklet = true;
      return _f;
    }());
  };

  _f._closure = {
    defineAnimation: defineAnimation,
    Easing: {
      inOut: _Easing__WEBPACK_IMPORTED_MODULE_0__.Easing.inOut,
      quad: _Easing__WEBPACK_IMPORTED_MODULE_0__.Easing.quad
    }
  };
  _f.asString = "function withTiming(toValue,userConfig,callback){const{defineAnimation,Easing}=jsThis._closure;{return defineAnimation(toValue,function(){var _f=function(){var config={duration:300,easing:Easing.inOut(Easing.quad)};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}function timing(animation,now){var{toValue:toValue,progress:progress,startTime:startTime,current:current}=animation;var runtime=now-startTime;if(runtime>=config.duration){animation.startTime=0;animation.current=toValue;return true;}var newProgress=config.easing(runtime/config.duration);var dist=(toValue-current)*(newProgress-progress)/(1-progress);animation.current+=dist;animation.progress=newProgress;return false;}function onStart(animation,value,now,previousAnimation){if(previousAnimation&&previousAnimation.type==='timing'&&previousAnimation.toValue===toValue&&previousAnimation.startTime){animation.startTime=previousAnimation.startTime;animation.progress=previousAnimation.progress;}else{animation.startTime=now;animation.progress=0;}animation.current=value;}return{type:'timing',onFrame:timing,onStart:onStart,progress:0,toValue:toValue,current:toValue,callback:callback};};_f._closure={Easing:{inOut:Easing.inOut,quad:Easing.quad},userConfig:userConfig,toValue:toValue,callback:callback};_f.asString=\"function _f(){const{Easing,userConfig,toValue,callback}=jsThis._closure;{var config={duration:300,easing:Easing.inOut(Easing.quad)};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}function timing(animation,now){var{toValue:toValue,progress:progress,startTime:startTime,current:current}=animation;var runtime=now-startTime;if(runtime>=config.duration){animation.startTime=0;animation.current=toValue;return true;}var newProgress=config.easing(runtime/config.duration);var dist=(toValue-current)*(newProgress-progress)/(1-progress);animation.current+=dist;animation.progress=newProgress;return false;}function onStart(animation,value,now,previousAnimation){if(previousAnimation&&previousAnimation.type==='timing'&&previousAnimation.toValue===toValue&&previousAnimation.startTime){animation.startTime=previousAnimation.startTime;animation.progress=previousAnimation.progress;}else{animation.startTime=now;animation.progress=0;}animation.current=value;}return{type:'timing',onFrame:timing,onStart:onStart,progress:0,toValue:toValue,current:toValue,callback:callback};}}\";_f.__workletHash=6093059965943;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (165:34)\";_f.__worklet=true;return _f;}());}}";
  _f.__workletHash = 5662725627976;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (162:7)";
  _f.__worklet = true;
  return _f;
}();
var withSpring = function () {
  var _f = function (toValue, userConfig, callback) {
    return defineAnimation(toValue, function () {
      var _f = function () {
        var config = {
          damping: 10,
          mass: 1,
          stiffness: 100,
          overshootClamping: false,
          restDisplacementThreshold: 0.01,
          restSpeedThreshold: 2
        };

        if (userConfig) {
          Object.keys(userConfig).forEach(function (key) {
            return config[key] = userConfig[key];
          });
        }

        function spring(animation, now) {
          var {
            toValue: toValue,
            lastTimestamp: lastTimestamp,
            current: current,
            velocity: velocity
          } = animation;
          var deltaTime = Math.min(now - lastTimestamp, 64);
          animation.lastTimestamp = now;
          var c = config.damping;
          var m = config.mass;
          var k = config.stiffness;
          var v0 = -velocity;
          var x0 = toValue - current;
          var zeta = c / (2 * Math.sqrt(k * m));
          var omega0 = Math.sqrt(k / m);
          var omega1 = omega0 * Math.sqrt(1 - zeta ** 2);
          var t = deltaTime / 1000;
          var sin1 = Math.sin(omega1 * t);
          var cos1 = Math.cos(omega1 * t);
          var underDampedEnvelope = Math.exp(-zeta * omega0 * t);
          var underDampedFrag1 = underDampedEnvelope * (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);
          var underDampedPosition = toValue - underDampedFrag1;
          var underDampedVelocity = zeta * omega0 * underDampedFrag1 - underDampedEnvelope * (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);
          var criticallyDampedEnvelope = Math.exp(-omega0 * t);
          var criticallyDampedPosition = toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);
          var criticallyDampedVelocity = criticallyDampedEnvelope * (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);

          var isOvershooting = function () {
            if (config.overshootClamping && config.stiffness !== 0) {
              return current < toValue ? animation.current > toValue : animation.current < toValue;
            } else {
              return false;
            }
          };

          var isVelocity = Math.abs(velocity) < config.restSpeedThreshold;
          var isDisplacement = config.stiffness === 0 || Math.abs(toValue - current) < config.restDisplacementThreshold;

          if (zeta < 1) {
            animation.current = underDampedPosition;
            animation.velocity = underDampedVelocity;
          } else {
            animation.current = criticallyDampedPosition;
            animation.velocity = criticallyDampedVelocity;
          }

          if (isOvershooting() || isVelocity && isDisplacement) {
            if (config.stiffness !== 0) {
              animation.velocity = 0;
              animation.current = toValue;
            }

            return true;
          }
        }

        function onStart(animation, value, now, previousAnimation) {
          animation.current = value;

          if (previousAnimation) {
            animation.velocity = previousAnimation.velocity || animation.velocity || 0;
            animation.lastTimestamp = previousAnimation.lastTimestamp || now;
          } else {
            animation.lastTimestamp = now;
          }
        }

        return {
          onFrame: spring,
          onStart: onStart,
          toValue: toValue,
          velocity: config.velocity || 0,
          current: toValue,
          callback: callback
        };
      };

      _f._closure = {
        userConfig: userConfig,
        toValue: toValue,
        callback: callback
      };
      _f.asString = "function _f(){const{userConfig,toValue,callback}=jsThis._closure;{var config={damping:10,mass:1,stiffness:100,overshootClamping:false,restDisplacementThreshold:0.01,restSpeedThreshold:2};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}function spring(animation,now){var{toValue:toValue,lastTimestamp:lastTimestamp,current:current,velocity:velocity}=animation;var deltaTime=Math.min(now-lastTimestamp,64);animation.lastTimestamp=now;var c=config.damping;var m=config.mass;var k=config.stiffness;var v0=-velocity;var x0=toValue-current;var zeta=c/(2*Math.sqrt(k*m));var omega0=Math.sqrt(k/m);var omega1=omega0*Math.sqrt(1-zeta**2);var t=deltaTime/1000;var sin1=Math.sin(omega1*t);var cos1=Math.cos(omega1*t);var underDampedEnvelope=Math.exp(-zeta*omega0*t);var underDampedFrag1=underDampedEnvelope*(sin1*((v0+zeta*omega0*x0)/omega1)+x0*cos1);var underDampedPosition=toValue-underDampedFrag1;var underDampedVelocity=zeta*omega0*underDampedFrag1-underDampedEnvelope*(cos1*(v0+zeta*omega0*x0)-omega1*x0*sin1);var criticallyDampedEnvelope=Math.exp(-omega0*t);var criticallyDampedPosition=toValue-criticallyDampedEnvelope*(x0+(v0+omega0*x0)*t);var criticallyDampedVelocity=criticallyDampedEnvelope*(v0*(t*omega0-1)+t*x0*omega0*omega0);var isOvershooting=function(){if(config.overshootClamping&&config.stiffness!==0){return current<toValue?animation.current>toValue:animation.current<toValue;}else{return false;}};var isVelocity=Math.abs(velocity)<config.restSpeedThreshold;var isDisplacement=config.stiffness===0||Math.abs(toValue-current)<config.restDisplacementThreshold;if(zeta<1){animation.current=underDampedPosition;animation.velocity=underDampedVelocity;}else{animation.current=criticallyDampedPosition;animation.velocity=criticallyDampedVelocity;}if(isOvershooting()||isVelocity&&isDisplacement){if(config.stiffness!==0){animation.velocity=0;animation.current=toValue;}return true;}}function onStart(animation,value,now,previousAnimation){animation.current=value;if(previousAnimation){animation.velocity=previousAnimation.velocity||animation.velocity||0;animation.lastTimestamp=previousAnimation.lastTimestamp||now;}else{animation.lastTimestamp=now;}}return{onFrame:spring,onStart:onStart,toValue:toValue,velocity:config.velocity||0,current:toValue,callback:callback};}}";
      _f.__workletHash = 13232297671722;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (229:34)";
      _f.__worklet = true;
      return _f;
    }());
  };

  _f._closure = {
    defineAnimation: defineAnimation
  };
  _f.asString = "function withSpring(toValue,userConfig,callback){const{defineAnimation}=jsThis._closure;{return defineAnimation(toValue,function(){var _f=function(){var config={damping:10,mass:1,stiffness:100,overshootClamping:false,restDisplacementThreshold:0.01,restSpeedThreshold:2};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}function spring(animation,now){var{toValue:toValue,lastTimestamp:lastTimestamp,current:current,velocity:velocity}=animation;var deltaTime=Math.min(now-lastTimestamp,64);animation.lastTimestamp=now;var c=config.damping;var m=config.mass;var k=config.stiffness;var v0=-velocity;var x0=toValue-current;var zeta=c/(2*Math.sqrt(k*m));var omega0=Math.sqrt(k/m);var omega1=omega0*Math.sqrt(1-zeta**2);var t=deltaTime/1000;var sin1=Math.sin(omega1*t);var cos1=Math.cos(omega1*t);var underDampedEnvelope=Math.exp(-zeta*omega0*t);var underDampedFrag1=underDampedEnvelope*(sin1*((v0+zeta*omega0*x0)/omega1)+x0*cos1);var underDampedPosition=toValue-underDampedFrag1;var underDampedVelocity=zeta*omega0*underDampedFrag1-underDampedEnvelope*(cos1*(v0+zeta*omega0*x0)-omega1*x0*sin1);var criticallyDampedEnvelope=Math.exp(-omega0*t);var criticallyDampedPosition=toValue-criticallyDampedEnvelope*(x0+(v0+omega0*x0)*t);var criticallyDampedVelocity=criticallyDampedEnvelope*(v0*(t*omega0-1)+t*x0*omega0*omega0);var isOvershooting=function(){if(config.overshootClamping&&config.stiffness!==0){return current<toValue?animation.current>toValue:animation.current<toValue;}else{return false;}};var isVelocity=Math.abs(velocity)<config.restSpeedThreshold;var isDisplacement=config.stiffness===0||Math.abs(toValue-current)<config.restDisplacementThreshold;if(zeta<1){animation.current=underDampedPosition;animation.velocity=underDampedVelocity;}else{animation.current=criticallyDampedPosition;animation.velocity=criticallyDampedVelocity;}if(isOvershooting()||isVelocity&&isDisplacement){if(config.stiffness!==0){animation.velocity=0;animation.current=toValue;}return true;}}function onStart(animation,value,now,previousAnimation){animation.current=value;if(previousAnimation){animation.velocity=previousAnimation.velocity||animation.velocity||0;animation.lastTimestamp=previousAnimation.lastTimestamp||now;}else{animation.lastTimestamp=now;}}return{onFrame:spring,onStart:onStart,toValue:toValue,velocity:config.velocity||0,current:toValue,callback:callback};};_f._closure={userConfig:userConfig,toValue:toValue,callback:callback};_f.asString=\"function _f(){const{userConfig,toValue,callback}=jsThis._closure;{var config={damping:10,mass:1,stiffness:100,overshootClamping:false,restDisplacementThreshold:0.01,restSpeedThreshold:2};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}function spring(animation,now){var{toValue:toValue,lastTimestamp:lastTimestamp,current:current,velocity:velocity}=animation;var deltaTime=Math.min(now-lastTimestamp,64);animation.lastTimestamp=now;var c=config.damping;var m=config.mass;var k=config.stiffness;var v0=-velocity;var x0=toValue-current;var zeta=c/(2*Math.sqrt(k*m));var omega0=Math.sqrt(k/m);var omega1=omega0*Math.sqrt(1-zeta**2);var t=deltaTime/1000;var sin1=Math.sin(omega1*t);var cos1=Math.cos(omega1*t);var underDampedEnvelope=Math.exp(-zeta*omega0*t);var underDampedFrag1=underDampedEnvelope*(sin1*((v0+zeta*omega0*x0)/omega1)+x0*cos1);var underDampedPosition=toValue-underDampedFrag1;var underDampedVelocity=zeta*omega0*underDampedFrag1-underDampedEnvelope*(cos1*(v0+zeta*omega0*x0)-omega1*x0*sin1);var criticallyDampedEnvelope=Math.exp(-omega0*t);var criticallyDampedPosition=toValue-criticallyDampedEnvelope*(x0+(v0+omega0*x0)*t);var criticallyDampedVelocity=criticallyDampedEnvelope*(v0*(t*omega0-1)+t*x0*omega0*omega0);var isOvershooting=function(){if(config.overshootClamping&&config.stiffness!==0){return current<toValue?animation.current>toValue:animation.current<toValue;}else{return false;}};var isVelocity=Math.abs(velocity)<config.restSpeedThreshold;var isDisplacement=config.stiffness===0||Math.abs(toValue-current)<config.restDisplacementThreshold;if(zeta<1){animation.current=underDampedPosition;animation.velocity=underDampedVelocity;}else{animation.current=criticallyDampedPosition;animation.velocity=criticallyDampedVelocity;}if(isOvershooting()||isVelocity&&isDisplacement){if(config.stiffness!==0){animation.velocity=0;animation.current=toValue;}return true;}}function onStart(animation,value,now,previousAnimation){animation.current=value;if(previousAnimation){animation.velocity=previousAnimation.velocity||animation.velocity||0;animation.lastTimestamp=previousAnimation.lastTimestamp||now;}else{animation.lastTimestamp=now;}}return{onFrame:spring,onStart:onStart,toValue:toValue,velocity:config.velocity||0,current:toValue,callback:callback};}}\";_f.__workletHash=13232297671722;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (229:34)\";_f.__worklet=true;return _f;}());}}";
  _f.__workletHash = 11593101570455;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (226:7)";
  _f.__worklet = true;
  return _f;
}();
var withDecay = function () {
  var _f = function (userConfig, callback) {
    return defineAnimation(0, function () {
      var _f = function () {
        var config = {
          deceleration: 0.998
        };

        if (userConfig) {
          Object.keys(userConfig).forEach(function (key) {
            return config[key] = userConfig[key];
          });
        }

        var VELOCITY_EPS = 5;

        function decay(animation, now) {
          var {
            lastTimestamp: lastTimestamp,
            initialVelocity: initialVelocity,
            current: current,
            velocity: velocity
          } = animation;
          var deltaTime = Math.min(now - lastTimestamp, 64);
          animation.lastTimestamp = now;
          var kv = Math.pow(config.deceleration, deltaTime);
          var kx = config.deceleration * (1 - kv) / (1 - config.deceleration);
          var v0 = velocity / 1000;
          var v = v0 * kv * 1000;
          var x = current + v0 * kx;
          animation.current = x;
          animation.velocity = v;
          var toValueIsReached = null;

          if (Array.isArray(config.clamp)) {
            if (initialVelocity < 0 && animation.current <= config.clamp[0]) {
              toValueIsReached = config.clamp[0];
            } else if (initialVelocity > 0 && animation.current >= config.clamp[1]) {
              toValueIsReached = config.clamp[1];
            }
          }

          if (Math.abs(v) < VELOCITY_EPS || toValueIsReached !== null) {
            if (toValueIsReached !== null) {
              animation.current = toValueIsReached;
            }

            return true;
          }
        }

        function onStart(animation, value, now) {
          animation.current = value;
          animation.lastTimestamp = now;
          animation.initialVelocity = config.velocity;
        }

        return {
          onFrame: decay,
          onStart: onStart,
          velocity: config.velocity || 0,
          callback: callback
        };
      };

      _f._closure = {
        userConfig: userConfig,
        callback: callback
      };
      _f.asString = "function _f(){const{userConfig,callback}=jsThis._closure;{var config={deceleration:0.998};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}var VELOCITY_EPS=5;function decay(animation,now){var{lastTimestamp:lastTimestamp,initialVelocity:initialVelocity,current:current,velocity:velocity}=animation;var deltaTime=Math.min(now-lastTimestamp,64);animation.lastTimestamp=now;var kv=Math.pow(config.deceleration,deltaTime);var kx=config.deceleration*(1-kv)/(1-config.deceleration);var v0=velocity/1000;var v=v0*kv*1000;var x=current+v0*kx;animation.current=x;animation.velocity=v;var toValueIsReached=null;if(Array.isArray(config.clamp)){if(initialVelocity<0&&animation.current<=config.clamp[0]){toValueIsReached=config.clamp[0];}else if(initialVelocity>0&&animation.current>=config.clamp[1]){toValueIsReached=config.clamp[1];}}if(Math.abs(v)<VELOCITY_EPS||toValueIsReached!==null){if(toValueIsReached!==null){animation.current=toValueIsReached;}return true;}}function onStart(animation,value,now){animation.current=value;animation.lastTimestamp=now;animation.initialVelocity=config.velocity;}return{onFrame:decay,onStart:onStart,velocity:config.velocity||0,callback:callback};}}";
      _f.__workletHash = 8868055353636;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (336:28)";
      _f.__worklet = true;
      return _f;
    }());
  };

  _f._closure = {
    defineAnimation: defineAnimation
  };
  _f.asString = "function withDecay(userConfig,callback){const{defineAnimation}=jsThis._closure;{return defineAnimation(0,function(){var _f=function(){var config={deceleration:0.998};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}var VELOCITY_EPS=5;function decay(animation,now){var{lastTimestamp:lastTimestamp,initialVelocity:initialVelocity,current:current,velocity:velocity}=animation;var deltaTime=Math.min(now-lastTimestamp,64);animation.lastTimestamp=now;var kv=Math.pow(config.deceleration,deltaTime);var kx=config.deceleration*(1-kv)/(1-config.deceleration);var v0=velocity/1000;var v=v0*kv*1000;var x=current+v0*kx;animation.current=x;animation.velocity=v;var toValueIsReached=null;if(Array.isArray(config.clamp)){if(initialVelocity<0&&animation.current<=config.clamp[0]){toValueIsReached=config.clamp[0];}else if(initialVelocity>0&&animation.current>=config.clamp[1]){toValueIsReached=config.clamp[1];}}if(Math.abs(v)<VELOCITY_EPS||toValueIsReached!==null){if(toValueIsReached!==null){animation.current=toValueIsReached;}return true;}}function onStart(animation,value,now){animation.current=value;animation.lastTimestamp=now;animation.initialVelocity=config.velocity;}return{onFrame:decay,onStart:onStart,velocity:config.velocity||0,callback:callback};};_f._closure={userConfig:userConfig,callback:callback};_f.asString=\"function _f(){const{userConfig,callback}=jsThis._closure;{var config={deceleration:0.998};if(userConfig){Object.keys(userConfig).forEach(function(key){return config[key]=userConfig[key];});}var VELOCITY_EPS=5;function decay(animation,now){var{lastTimestamp:lastTimestamp,initialVelocity:initialVelocity,current:current,velocity:velocity}=animation;var deltaTime=Math.min(now-lastTimestamp,64);animation.lastTimestamp=now;var kv=Math.pow(config.deceleration,deltaTime);var kx=config.deceleration*(1-kv)/(1-config.deceleration);var v0=velocity/1000;var v=v0*kv*1000;var x=current+v0*kx;animation.current=x;animation.velocity=v;var toValueIsReached=null;if(Array.isArray(config.clamp)){if(initialVelocity<0&&animation.current<=config.clamp[0]){toValueIsReached=config.clamp[0];}else if(initialVelocity>0&&animation.current>=config.clamp[1]){toValueIsReached=config.clamp[1];}}if(Math.abs(v)<VELOCITY_EPS||toValueIsReached!==null){if(toValueIsReached!==null){animation.current=toValueIsReached;}return true;}}function onStart(animation,value,now){animation.current=value;animation.lastTimestamp=now;animation.initialVelocity=config.velocity;}return{onFrame:decay,onStart:onStart,velocity:config.velocity||0,callback:callback};}}\";_f.__workletHash=8868055353636;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (336:28)\";_f.__worklet=true;return _f;}());}}";
  _f.__workletHash = 4572543423994;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (333:7)";
  _f.__worklet = true;
  return _f;
}();
var withDelay = function () {
  var _f = function (delayMs, _nextAnimation) {
    return defineAnimation(_nextAnimation, function () {
      var _f = function () {
        var nextAnimation = typeof _nextAnimation === 'function' ? _nextAnimation() : _nextAnimation;

        function delay(animation, now) {
          var {
            startTime: startTime,
            started: started,
            previousAnimation: previousAnimation
          } = animation;

          if (now - startTime > delayMs) {
            if (!started) {
              nextAnimation.onStart(nextAnimation, animation.current, now, previousAnimation);
              animation.previousAnimation = null;
              animation.started = true;
            }

            var finished = nextAnimation.onFrame(nextAnimation, now);
            animation.current = nextAnimation.current;
            return finished;
          } else if (previousAnimation) {
            var _finished = previousAnimation.onFrame(previousAnimation, now);

            animation.current = previousAnimation.current;

            if (_finished) {
              animation.previousAnimation = null;
            }
          }

          return false;
        }

        function onStart(animation, value, now, previousAnimation) {
          animation.startTime = now;
          animation.started = false;
          animation.current = value;
          animation.previousAnimation = previousAnimation;
        }

        var callback = function (finished) {
          if (nextAnimation.callback) {
            nextAnimation.callback(finished);
          }
        };

        return {
          isHigherOrder: true,
          onFrame: delay,
          onStart: onStart,
          current: nextAnimation.current,
          callback: callback
        };
      };

      _f._closure = {
        _nextAnimation: _nextAnimation,
        delayMs: delayMs
      };
      _f.asString = "function _f(){const{_nextAnimation,delayMs}=jsThis._closure;{var nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function delay(animation,now){var{startTime:startTime,started:started,previousAnimation:previousAnimation}=animation;if(now-startTime>delayMs){if(!started){nextAnimation.onStart(nextAnimation,animation.current,now,previousAnimation);animation.previousAnimation=null;animation.started=true;}var finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;return finished;}else if(previousAnimation){var _finished=previousAnimation.onFrame(previousAnimation,now);animation.current=previousAnimation.current;if(_finished){animation.previousAnimation=null;}}return false;}function onStart(animation,value,now,previousAnimation){animation.startTime=now;animation.started=false;animation.current=value;animation.previousAnimation=previousAnimation;}var callback=function(finished){if(nextAnimation.callback){nextAnimation.callback(finished);}};return{isHigherOrder:true,onFrame:delay,onStart:onStart,current:nextAnimation.current,callback:callback};}}";
      _f.__workletHash = 17481698533841;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (399:41)";
      _f.__worklet = true;
      return _f;
    }());
  };

  _f._closure = {
    defineAnimation: defineAnimation
  };
  _f.asString = "function withDelay(delayMs,_nextAnimation){const{defineAnimation}=jsThis._closure;{return defineAnimation(_nextAnimation,function(){var _f=function(){var nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function delay(animation,now){var{startTime:startTime,started:started,previousAnimation:previousAnimation}=animation;if(now-startTime>delayMs){if(!started){nextAnimation.onStart(nextAnimation,animation.current,now,previousAnimation);animation.previousAnimation=null;animation.started=true;}var finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;return finished;}else if(previousAnimation){var _finished=previousAnimation.onFrame(previousAnimation,now);animation.current=previousAnimation.current;if(_finished){animation.previousAnimation=null;}}return false;}function onStart(animation,value,now,previousAnimation){animation.startTime=now;animation.started=false;animation.current=value;animation.previousAnimation=previousAnimation;}var callback=function(finished){if(nextAnimation.callback){nextAnimation.callback(finished);}};return{isHigherOrder:true,onFrame:delay,onStart:onStart,current:nextAnimation.current,callback:callback};};_f._closure={_nextAnimation:_nextAnimation,delayMs:delayMs};_f.asString=\"function _f(){const{_nextAnimation,delayMs}=jsThis._closure;{var nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function delay(animation,now){var{startTime:startTime,started:started,previousAnimation:previousAnimation}=animation;if(now-startTime>delayMs){if(!started){nextAnimation.onStart(nextAnimation,animation.current,now,previousAnimation);animation.previousAnimation=null;animation.started=true;}var finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;return finished;}else if(previousAnimation){var _finished=previousAnimation.onFrame(previousAnimation,now);animation.current=previousAnimation.current;if(_finished){animation.previousAnimation=null;}}return false;}function onStart(animation,value,now,previousAnimation){animation.startTime=now;animation.started=false;animation.current=value;animation.previousAnimation=previousAnimation;}var callback=function(finished){if(nextAnimation.callback){nextAnimation.callback(finished);}};return{isHigherOrder:true,onFrame:delay,onStart:onStart,current:nextAnimation.current,callback:callback};}}\";_f.__workletHash=17481698533841;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (399:41)\";_f.__worklet=true;return _f;}());}}";
  _f.__workletHash = 5995573626301;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (397:7)";
  _f.__worklet = true;
  return _f;
}();
var withSequence = function () {
  var _f = function (..._animations) {
    return defineAnimation(_animations[0], function () {
      var _f = function () {
        var animations = _animations.map(function (a) {
          var result = typeof a === 'function' ? a() : a;
          result.finished = false;
          return result;
        });

        var firstAnimation = animations[0];

        var callback = function (finished) {
          if (finished) {
            return;
          }

          animations.forEach(function (animation) {
            if (typeof animation.callback === 'function' && !animation.finished) {
              animation.callback(finished);
            }
          });
        };

        function sequence(animation, now) {
          var currentAnim = animations[animation.animationIndex];
          var finished = currentAnim.onFrame(currentAnim, now);
          animation.current = currentAnim.current;

          if (finished) {
            if (currentAnim.callback) {
              currentAnim.callback(true);
            }

            currentAnim.finished = true;
            animation.animationIndex += 1;

            if (animation.animationIndex < animations.length) {
              var nextAnim = animations[animation.animationIndex];
              nextAnim.onStart(nextAnim, currentAnim.current, now, currentAnim);
              return false;
            }

            return true;
          }

          return false;
        }

        function onStart(animation, value, now, previousAnimation) {
          if (animations.length === 1) {
            throw Error('withSequence() animation require more than one animation as argument');
          }

          animation.animationIndex = 0;

          if (previousAnimation === undefined) {
            previousAnimation = animations[animations.length - 1];
          }

          firstAnimation.onStart(firstAnimation, value, now, previousAnimation);
        }

        return {
          isHigherOrder: true,
          onFrame: sequence,
          onStart: onStart,
          animationIndex: 0,
          current: firstAnimation.current,
          callback: callback
        };
      };

      _f._closure = {
        _animations: _animations
      };
      _f.asString = "function _f(){const{_animations}=jsThis._closure;{var animations=_animations.map(function(a){var result=typeof a==='function'?a():a;result.finished=false;return result;});var firstAnimation=animations[0];var callback=function(finished){if(finished){return;}animations.forEach(function(animation){if(typeof animation.callback==='function'&&!animation.finished){animation.callback(finished);}});};function sequence(animation,now){var currentAnim=animations[animation.animationIndex];var finished=currentAnim.onFrame(currentAnim,now);animation.current=currentAnim.current;if(finished){if(currentAnim.callback){currentAnim.callback(true);}currentAnim.finished=true;animation.animationIndex+=1;if(animation.animationIndex<animations.length){var nextAnim=animations[animation.animationIndex];nextAnim.onStart(nextAnim,currentAnim.current,now,currentAnim);return false;}return true;}return false;}function onStart(animation,value,now,previousAnimation){if(animations.length===1){throw Error('withSequence() animation require more than one animation as argument');}animation.animationIndex=0;if(previousAnimation===undefined){previousAnimation=animations[animations.length-1];}firstAnimation.onStart(firstAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:sequence,onStart:onStart,animationIndex:0,current:firstAnimation.current,callback:callback};}}";
      _f.__workletHash = 6706901109446;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (450:41)";
      _f.__worklet = true;
      return _f;
    }());
  };

  _f._closure = {
    defineAnimation: defineAnimation
  };
  _f.asString = "function withSequence(..._animations){const{defineAnimation}=jsThis._closure;{return defineAnimation(_animations[0],function(){var _f=function(){var animations=_animations.map(function(a){var result=typeof a==='function'?a():a;result.finished=false;return result;});var firstAnimation=animations[0];var callback=function(finished){if(finished){return;}animations.forEach(function(animation){if(typeof animation.callback==='function'&&!animation.finished){animation.callback(finished);}});};function sequence(animation,now){var currentAnim=animations[animation.animationIndex];var finished=currentAnim.onFrame(currentAnim,now);animation.current=currentAnim.current;if(finished){if(currentAnim.callback){currentAnim.callback(true);}currentAnim.finished=true;animation.animationIndex+=1;if(animation.animationIndex<animations.length){var nextAnim=animations[animation.animationIndex];nextAnim.onStart(nextAnim,currentAnim.current,now,currentAnim);return false;}return true;}return false;}function onStart(animation,value,now,previousAnimation){if(animations.length===1){throw Error('withSequence() animation require more than one animation as argument');}animation.animationIndex=0;if(previousAnimation===undefined){previousAnimation=animations[animations.length-1];}firstAnimation.onStart(firstAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:sequence,onStart:onStart,animationIndex:0,current:firstAnimation.current,callback:callback};};_f._closure={_animations:_animations};_f.asString=\"function _f(){const{_animations}=jsThis._closure;{var animations=_animations.map(function(a){var result=typeof a==='function'?a():a;result.finished=false;return result;});var firstAnimation=animations[0];var callback=function(finished){if(finished){return;}animations.forEach(function(animation){if(typeof animation.callback==='function'&&!animation.finished){animation.callback(finished);}});};function sequence(animation,now){var currentAnim=animations[animation.animationIndex];var finished=currentAnim.onFrame(currentAnim,now);animation.current=currentAnim.current;if(finished){if(currentAnim.callback){currentAnim.callback(true);}currentAnim.finished=true;animation.animationIndex+=1;if(animation.animationIndex<animations.length){var nextAnim=animations[animation.animationIndex];nextAnim.onStart(nextAnim,currentAnim.current,now,currentAnim);return false;}return true;}return false;}function onStart(animation,value,now,previousAnimation){if(animations.length===1){throw Error('withSequence() animation require more than one animation as argument');}animation.animationIndex=0;if(previousAnimation===undefined){previousAnimation=animations[animations.length-1];}firstAnimation.onStart(firstAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:sequence,onStart:onStart,animationIndex:0,current:firstAnimation.current,callback:callback};}}\";_f.__workletHash=6706901109446;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (450:41)\";_f.__worklet=true;return _f;}());}}";
  _f.__workletHash = 4637009584922;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (448:7)";
  _f.__worklet = true;
  return _f;
}();
var withRepeat = function () {
  var _f = function (_nextAnimation, numberOfReps = 2, reverse = false, callback) {
    return defineAnimation(_nextAnimation, function () {
      var _f = function () {
        var nextAnimation = typeof _nextAnimation === 'function' ? _nextAnimation() : _nextAnimation;

        function repeat(animation, now) {
          var finished = nextAnimation.onFrame(nextAnimation, now);
          animation.current = nextAnimation.current;

          if (finished) {
            animation.reps += 1;

            if (nextAnimation.callback) {
              nextAnimation.callback(true, animation.current);
            }

            if (numberOfReps > 0 && animation.reps >= numberOfReps) {
              return true;
            }

            var startValue = reverse ? nextAnimation.current : animation.startValue;

            if (reverse) {
              nextAnimation.toValue = animation.startValue;
              animation.startValue = startValue;
            }

            nextAnimation.onStart(nextAnimation, startValue, now, nextAnimation.previousAnimation);
            return false;
          }

          return false;
        }

        var repCallback = function (finished) {
          if (callback) {
            callback(finished);
          }

          if (!finished && nextAnimation.callback) {
            nextAnimation.callback(false);
          }
        };

        function onStart(animation, value, now, previousAnimation) {
          animation.startValue = value;
          animation.reps = 0;
          nextAnimation.onStart(nextAnimation, value, now, previousAnimation);
        }

        return {
          isHigherOrder: true,
          onFrame: repeat,
          onStart: onStart,
          reps: 0,
          current: nextAnimation.current,
          callback: repCallback
        };
      };

      _f._closure = {
        _nextAnimation: _nextAnimation,
        numberOfReps: numberOfReps,
        reverse: reverse,
        callback: callback
      };
      _f.asString = "function _f(){const{_nextAnimation,numberOfReps,reverse,callback}=jsThis._closure;{var nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function repeat(animation,now){var finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;if(finished){animation.reps+=1;if(nextAnimation.callback){nextAnimation.callback(true,animation.current);}if(numberOfReps>0&&animation.reps>=numberOfReps){return true;}var startValue=reverse?nextAnimation.current:animation.startValue;if(reverse){nextAnimation.toValue=animation.startValue;animation.startValue=startValue;}nextAnimation.onStart(nextAnimation,startValue,now,nextAnimation.previousAnimation);return false;}return false;}var repCallback=function(finished){if(callback){callback(finished);}if(!finished&&nextAnimation.callback){nextAnimation.callback(false);}};function onStart(animation,value,now,previousAnimation){animation.startValue=value;animation.reps=0;nextAnimation.onStart(nextAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:repeat,onStart:onStart,reps:0,current:nextAnimation.current,callback:repCallback};}}";
      _f.__workletHash = 10249133011380;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (519:41)";
      _f.__worklet = true;
      return _f;
    }());
  };

  _f._closure = {
    defineAnimation: defineAnimation
  };
  _f.asString = "function withRepeat(_nextAnimation,numberOfReps=2,reverse=false,callback){const{defineAnimation}=jsThis._closure;{return defineAnimation(_nextAnimation,function(){var _f=function(){var nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function repeat(animation,now){var finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;if(finished){animation.reps+=1;if(nextAnimation.callback){nextAnimation.callback(true,animation.current);}if(numberOfReps>0&&animation.reps>=numberOfReps){return true;}var startValue=reverse?nextAnimation.current:animation.startValue;if(reverse){nextAnimation.toValue=animation.startValue;animation.startValue=startValue;}nextAnimation.onStart(nextAnimation,startValue,now,nextAnimation.previousAnimation);return false;}return false;}var repCallback=function(finished){if(callback){callback(finished);}if(!finished&&nextAnimation.callback){nextAnimation.callback(false);}};function onStart(animation,value,now,previousAnimation){animation.startValue=value;animation.reps=0;nextAnimation.onStart(nextAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:repeat,onStart:onStart,reps:0,current:nextAnimation.current,callback:repCallback};};_f._closure={_nextAnimation:_nextAnimation,numberOfReps:numberOfReps,reverse:reverse,callback:callback};_f.asString=\"function _f(){const{_nextAnimation,numberOfReps,reverse,callback}=jsThis._closure;{var nextAnimation=typeof _nextAnimation==='function'?_nextAnimation():_nextAnimation;function repeat(animation,now){var finished=nextAnimation.onFrame(nextAnimation,now);animation.current=nextAnimation.current;if(finished){animation.reps+=1;if(nextAnimation.callback){nextAnimation.callback(true,animation.current);}if(numberOfReps>0&&animation.reps>=numberOfReps){return true;}var startValue=reverse?nextAnimation.current:animation.startValue;if(reverse){nextAnimation.toValue=animation.startValue;animation.startValue=startValue;}nextAnimation.onStart(nextAnimation,startValue,now,nextAnimation.previousAnimation);return false;}return false;}var repCallback=function(finished){if(callback){callback(finished);}if(!finished&&nextAnimation.callback){nextAnimation.callback(false);}};function onStart(animation,value,now,previousAnimation){animation.startValue=value;animation.reps=0;nextAnimation.onStart(nextAnimation,value,now,previousAnimation);}return{isHigherOrder:true,onFrame:repeat,onStart:onStart,reps:0,current:nextAnimation.current,callback:repCallback};}}\";_f.__workletHash=10249133011380;_f.__location=\"/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (519:41)\";_f.__worklet=true;return _f;}());}}";
  _f.__workletHash = 8015609672542;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/animations.ts (516:7)";
  _f.__worklet = true;
  return _f;
}();

/***/ }),

/***/ "./src/reanimated/core.ts":
/*!********************************!*\
  !*** ./src/reanimated/core.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "makeShareable": () => (/* binding */ makeShareable),
/* harmony export */   "makeMutable": () => (/* binding */ makeMutable),
/* harmony export */   "makeRemote": () => (/* binding */ makeRemote),
/* harmony export */   "requestFrame": () => (/* binding */ requestFrame),
/* harmony export */   "runOnUI": () => (/* binding */ runOnUI),
/* harmony export */   "runOnJS": () => (/* binding */ runOnJS),
/* harmony export */   "startMapper": () => (/* binding */ startMapper),
/* harmony export */   "stopMapper": () => (/* binding */ stopMapper),
/* harmony export */   "getTimestamp": () => (/* binding */ getTimestamp)
/* harmony export */ });
var NativeReanimated = SkylineGlobal.ReanimatedModule;

__webpack_require__.g.__reanimatedWorkletInit = function (worklet) {
  worklet.__worklet = true;
};

if (__webpack_require__.g._setGlobalConsole === undefined) {
  __webpack_require__.g._setGlobalConsole = function () {};
}

function makeShareable(value) {
  return NativeReanimated.makeShareable(value);
}
function makeMutable(val) {
  return NativeReanimated.makeMutable(val);
}
function makeRemote(val) {
  return NativeReanimated.makeRemote(val);
}
var requestFrame = function () {
  var _f = function (frame) {
    requestAnimationFrame(frame);
  };

  _f._closure = {};
  _f.asString = "function requestFrame(frame){requestAnimationFrame(frame);}";
  _f.__workletHash = 15266627376302;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/core.ts (28:7)";
  _f.__worklet = true;
  return _f;
}();
var runOnUI = function (worklet) {
  return makeShareable(worklet);
};
var runOnJS = function () {
  var _f = function (fun) {
    if (typeof fun != 'function') {
      throw new Error('The input parameter to runOnJs must be a function');
    }

    if (!_WORKLET) {
      return fun;
    }

    if (!fun.__callAsync) {
      throw new Error(`
      Attempting to call runOnJS with an object that is not a host function. 
      Using runOnJS is only possible with methods that are defined on the Javascript thread and that aren't marked as worklets`);
    } else {
      return fun.__callAsync;
    }
  };

  _f._closure = {};
  _f.asString = "function _f(fun){if(typeof fun!='function'){throw new Error('The input parameter to runOnJs must be a function');}if(!_WORKLET){return fun;}if(!fun.__callAsync){throw new Error(`\n      Attempting to call runOnJS with an object that is not a host function. \n      Using runOnJS is only possible with methods that are defined on the Javascript thread and that aren't marked as worklets`);}else{return fun.__callAsync;}}";
  _f.__workletHash = 10544039944747;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/core.ts (35:23)";
  _f.__worklet = true;
  return _f;
}();
function startMapper(mapper, inputs = [], outputs = []) {
  return NativeReanimated.startMapper(mapper, inputs, outputs);
}
function stopMapper(mapperId) {
  NativeReanimated.stopMapper(mapperId);
}
var getTimestamp = function () {
  var _f = function () {
    if (_frameTimestamp) {
      return _frameTimestamp;
    }

    return _getCurrentTime();
  };

  _f._closure = {};
  _f.asString = "function getTimestamp(){if(_frameTimestamp){return _frameTimestamp;}return _getCurrentTime();}";
  _f.__workletHash = 16100796968678;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/core.ts (61:7)";
  _f.__worklet = true;
  return _f;
}();

var workletValueSetter = function () {
  var _f = function (value) {
    var _this = this;

    var previousAnimation = this._animation;

    if (previousAnimation) {
      previousAnimation.cancelled = true;
      this._animation = null;
    }

    if (typeof value === 'function' || value !== null && typeof value === 'object' && value.onFrame) {
      var animation = typeof value === 'function' ? value() : value;

      if (this._value === animation.current && !animation.isHigherOrder) {
        return;
      }

      var initializeAnimation = function (timestamp) {
        animation.onStart(animation, _this.value, timestamp, previousAnimation);
      };

      initializeAnimation(getTimestamp());

      var step = function (timestamp) {
        if (animation.cancelled) {
          animation.callback && animation.callback(false);
          return;
        }

        var finished = animation.onFrame(animation, timestamp);
        animation.timestamp = timestamp;
        _this._value = animation.current;

        if (finished) {
          animation.callback && animation.callback(true);
        } else {
          requestAnimationFrame(step);
        }
      };

      this._animation = animation;

      if (_frameTimestamp) {
        step(_frameTimestamp);
      } else {
        requestAnimationFrame(step);
      }
    } else {
      if (this._value === value) {
        return;
      }

      this._value = value;
    }
  };

  _f._closure = {
    getTimestamp: getTimestamp
  };
  _f.asString = "function workletValueSetter(value){const{getTimestamp}=jsThis._closure;{var _this=this;var previousAnimation=this._animation;if(previousAnimation){previousAnimation.cancelled=true;this._animation=null;}if(typeof value==='function'||value!==null&&typeof value==='object'&&value.onFrame){var animation=typeof value==='function'?value():value;if(this._value===animation.current&&!animation.isHigherOrder){return;}var initializeAnimation=function(timestamp){animation.onStart(animation,_this.value,timestamp,previousAnimation);};initializeAnimation(getTimestamp());var step=function(timestamp){if(animation.cancelled){animation.callback&&animation.callback(false);return;}var finished=animation.onFrame(animation,timestamp);animation.timestamp=timestamp;_this._value=animation.current;if(finished){animation.callback&&animation.callback(true);}else{requestAnimationFrame(step);}};this._animation=animation;if(_frameTimestamp){step(_frameTimestamp);}else{requestAnimationFrame(step);}}else{if(this._value===value){return;}this._value=value;}}}";
  _f.__workletHash = 6706201647771;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/core.ts (69:0)";
  _f.__worklet = true;
  return _f;
}();

NativeReanimated.registerMutableValueSetter(workletValueSetter);

function debugEnabled() {
  if (!__wxConfig || !('debug' in __wxConfig) || typeof __wxConfig.debug === 'undefined') return undefined;
  return !!__wxConfig.debug;
}

var capturableConsole = console;
var printLog =  true || 0;
runOnUI(function () {
  var _f = function () {
    var consoleOnUI = {};
    var logMethods = ['log', 'warn', 'error', 'info', 'debug'];
    logMethods.forEach(function (method) {
      consoleOnUI[method] = printLog ? function (...args) {
        var argumentList = [`[UI]`, ...args];
        runOnJS(capturableConsole[method]).apply(null, argumentList);
      } : function () {};
    });

    _setGlobalConsole(consoleOnUI);
  };

  _f._closure = {
    printLog: printLog,
    runOnJS: runOnJS,
    capturableConsole: capturableConsole
  };
  _f.asString = "function _f(){const{printLog,runOnJS,capturableConsole}=jsThis._closure;{var consoleOnUI={};var logMethods=['log','warn','error','info','debug'];logMethods.forEach(function(method){consoleOnUI[method]=printLog?function(...args){var argumentList=[`[UI]`,...args];runOnJS(capturableConsole[method]).apply(null,argumentList);}:function(){};});_setGlobalConsole(consoleOnUI);}}";
  _f.__workletHash = 11698313594531;
  _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/core.ts (135:8)";
  _f.__worklet = true;
  return _f;
}())();

/***/ }),

/***/ "./src/reanimated/index.ts":
/*!*********************************!*\
  !*** ./src/reanimated/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "runOnJS": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.runOnJS),
/* harmony export */   "runOnUI": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.runOnUI),
/* harmony export */   "useAnimatedStyle": () => (/* reexport safe */ _Hooks__WEBPACK_IMPORTED_MODULE_1__.useAnimatedStyle),
/* harmony export */   "createSharedValue": () => (/* reexport safe */ _Hooks__WEBPACK_IMPORTED_MODULE_1__.createSharedValue),
/* harmony export */   "createDerivedValue": () => (/* reexport safe */ _Hooks__WEBPACK_IMPORTED_MODULE_1__.createDerivedValue),
/* harmony export */   "withDecay": () => (/* reexport safe */ _animations__WEBPACK_IMPORTED_MODULE_2__.withDecay),
/* harmony export */   "withDelay": () => (/* reexport safe */ _animations__WEBPACK_IMPORTED_MODULE_2__.withDelay),
/* harmony export */   "withRepeat": () => (/* reexport safe */ _animations__WEBPACK_IMPORTED_MODULE_2__.withRepeat),
/* harmony export */   "withSequence": () => (/* reexport safe */ _animations__WEBPACK_IMPORTED_MODULE_2__.withSequence),
/* harmony export */   "withSpring": () => (/* reexport safe */ _animations__WEBPACK_IMPORTED_MODULE_2__.withSpring),
/* harmony export */   "withTiming": () => (/* reexport safe */ _animations__WEBPACK_IMPORTED_MODULE_2__.withTiming),
/* harmony export */   "cancelAnimation": () => (/* reexport safe */ _animations__WEBPACK_IMPORTED_MODULE_2__.cancelAnimation),
/* harmony export */   "Easing": () => (/* reexport safe */ _Easing__WEBPACK_IMPORTED_MODULE_3__.Easing),
/* harmony export */   "createRouteContext": () => (/* reexport safe */ _route__WEBPACK_IMPORTED_MODULE_4__.createRouteContext),
/* harmony export */   "RouteManager": () => (/* reexport safe */ _routeManager__WEBPACK_IMPORTED_MODULE_5__.RouteManager)
/* harmony export */ });
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ "./src/reanimated/core.ts");
/* harmony import */ var _Hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Hooks */ "./src/reanimated/Hooks.ts");
/* harmony import */ var _animations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./animations */ "./src/reanimated/animations.ts");
/* harmony import */ var _Easing__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Easing */ "./src/reanimated/Easing.ts");
/* harmony import */ var _route__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./route */ "./src/reanimated/route.ts");
/* harmony import */ var _routeManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./routeManager */ "./src/reanimated/routeManager.ts");







/***/ }),

/***/ "./src/reanimated/route.ts":
/*!*********************************!*\
  !*** ./src/reanimated/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createRouteContext": () => (/* binding */ createRouteContext),
/* harmony export */   "AnimationStatus": () => (/* binding */ AnimationStatus)
/* harmony export */ });
/* harmony import */ var _Hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Hooks */ "./src/reanimated/Hooks.ts");

var AnimationStatus;

(function (AnimationStatus) {
  AnimationStatus[AnimationStatus["dismissed"] = 0] = "dismissed";
  AnimationStatus[AnimationStatus["forward"] = 1] = "forward";
  AnimationStatus[AnimationStatus["reverse"] = 2] = "reverse";
  AnimationStatus[AnimationStatus["completed"] = 3] = "completed";
})(AnimationStatus || (AnimationStatus = {}));

var userGestureInProgress = (0,_Hooks__WEBPACK_IMPORTED_MODULE_0__.createSharedValue)(false);

var createRouteContext = function () {
  var skylinePageId = (0,_Hooks__WEBPACK_IMPORTED_MODULE_0__.createSharedValue)(0);
  var skylineWindowId = (0,_Hooks__WEBPACK_IMPORTED_MODULE_0__.createSharedValue)(0);
  var primaryAnimation = (0,_Hooks__WEBPACK_IMPORTED_MODULE_0__.createSharedValue)(1);
  var primaryAnimationStatus = (0,_Hooks__WEBPACK_IMPORTED_MODULE_0__.createSharedValue)(AnimationStatus.completed);
  var secondaryAnimation = (0,_Hooks__WEBPACK_IMPORTED_MODULE_0__.createSharedValue)(1);
  var secondaryAnimationStatus = (0,_Hooks__WEBPACK_IMPORTED_MODULE_0__.createSharedValue)(AnimationStatus.completed);

  var startUserGesture = function () {
    var _f = function () {
      userGestureInProgress.value = true;

      _startUserGesture(skylineWindowId.value);
    };

    _f._closure = {
      userGestureInProgress: userGestureInProgress,
      skylineWindowId: skylineWindowId
    };
    _f.asString = "function startUserGesture(){const{userGestureInProgress,skylineWindowId}=jsThis._closure;{userGestureInProgress.value=true;_startUserGesture(skylineWindowId.value);}}";
    _f.__workletHash = 13183885738439;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/route.ts (40:2)";
    _f.__worklet = true;
    return _f;
  }();

  var stopUserGesture = function () {
    var _f = function () {
      userGestureInProgress.value = false;

      _stopUserGesture(skylineWindowId.value);
    };

    _f._closure = {
      userGestureInProgress: userGestureInProgress,
      skylineWindowId: skylineWindowId
    };
    _f.asString = "function stopUserGesture(){const{userGestureInProgress,skylineWindowId}=jsThis._closure;{userGestureInProgress.value=false;_stopUserGesture(skylineWindowId.value);}}";
    _f.__workletHash = 6072756150476;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/route.ts (46:2)";
    _f.__worklet = true;
    return _f;
  }();

  var didPop = function () {
    var _f = function () {
      _navigatorPop(skylineWindowId.value, skylinePageId.value);
    };

    _f._closure = {
      skylineWindowId: skylineWindowId,
      skylinePageId: skylinePageId
    };
    _f.asString = "function didPop(){const{skylineWindowId,skylinePageId}=jsThis._closure;{_navigatorPop(skylineWindowId.value,skylinePageId.value);}}";
    _f.__workletHash = 5811502121773;
    _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/reanimated/route.ts (52:2)";
    _f.__worklet = true;
    return _f;
  }();

  return {
    primaryAnimation: primaryAnimation,
    primaryAnimationStatus: primaryAnimationStatus,
    secondaryAnimation: secondaryAnimation,
    secondaryAnimationStatus: secondaryAnimationStatus,
    skylineWindowId: skylineWindowId,
    skylinePageId: skylinePageId,
    userGestureInProgress: userGestureInProgress,
    startUserGesture: startUserGesture,
    stopUserGesture: stopUserGesture,
    didPop: didPop
  };
};



/***/ }),

/***/ "./src/reanimated/routeManager.ts":
/*!****************************************!*\
  !*** ./src/reanimated/routeManager.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RouteManager": () => (/* binding */ RouteManager)
/* harmony export */ });
/* harmony import */ var _route__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./route */ "./src/reanimated/route.ts");

var routeBuilders = new Map();
var defaultRouteType = 'CupertinoPageRoute';
var defaultRouteConfig = {
  isCustomRoute: false,
  opaque: true,
  maintainState: true,
  transitionDuration: 300,
  reverseTransitionDuration: 300,
  barrierColor: '',
  barrierDismissible: false,
  barrierLabel: '',
  canTransitionTo: true,
  canTransitionFrom: true
};

class RouteManager {
  static addRouteBuilder(routeType, func) {
    routeBuilders.set(routeType, func);
  }

  static removeRouteBuilder(routeType) {
    routeBuilders.delete(routeType);
  }

  static getRouteBuilder(routeType) {
    var builder = routeBuilders.get(routeType);
    return builder;
  }

  static genRouteConfig(routeType) {
    var builder = this.getRouteBuilder(routeType);

    if (typeof builder !== 'function' || routeType === defaultRouteType) {
      return null;
    }

    var context = (0,_route__WEBPACK_IMPORTED_MODULE_0__.createRouteContext)();
    var routeConfig = builder(context);
    var mergedRouteConfig = { ...defaultRouteConfig,
      ...routeConfig,
      context: context
    };
    mergedRouteConfig.isCustomRoute = true;
    return mergedRouteConfig;
  }

}



/***/ }),

/***/ "./src/runtime/index.ts":
/*!******************************!*\
  !*** ./src/runtime/index.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RuntimeCore)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lib_exparser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/exparser */ "./lib/exparser.js");
/* harmony import */ var _lib_exparser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_lib_exparser__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_glass_easel_template_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/glass_easel_template.common */ "./lib/glass_easel_template.common.js");
/* harmony import */ var _lib_glass_easel_template_common__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_lib_glass_easel_template_common__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components */ "./src/components/index.ts");
/* harmony import */ var _behaviors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../behaviors */ "./src/behaviors/index.ts");
/* harmony import */ var _touch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./touch */ "./src/runtime/touch.ts");
/* harmony import */ var _transition__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./transition */ "./src/runtime/transition.ts");
/* harmony import */ var _reanimated__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../reanimated */ "./src/reanimated/index.ts");
/* harmony import */ var _utils_emitter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/emitter */ "./src/utils/emitter.ts");
/* harmony import */ var _reanimated_routeManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../reanimated/routeManager */ "./src/reanimated/routeManager.ts");
/* harmony import */ var _components_worklet_event_handler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/worklet_event_handler */ "./src/components/worklet_event_handler.ts");











var {
  ReanimatedModule: ReanimatedModule
} = SkylineGlobal;
var HitTestBehavior;

(function (HitTestBehavior) {
  HitTestBehavior[HitTestBehavior["kDeferToChild"] = 0] = "kDeferToChild";
  HitTestBehavior[HitTestBehavior["kOpaque"] = 1] = "kOpaque";
  HitTestBehavior[HitTestBehavior["kTranslucent"] = 2] = "kTranslucent";
})(HitTestBehavior || (HitTestBehavior = {}));

class RuntimeCore {
  constructor() {
    var _this = this;

    this.exparser = (_lib_exparser__WEBPACK_IMPORTED_MODULE_1___default());
    this.allContexts = {};
    this.anyContextEmitter = void 0;
    this.globalStylesheet = [];
    this.pageInfos = {};
    this.tabBarWindow = undefined;
    this.tabBarContexts = new Map();
    this.allWindows = new Set();
    this.windowEmitter = {};
    this.touchEventInterceptor = null;
    this.rootElement = {};

    if (RuntimeCore.instance !== undefined) {
      throw new Error('Skyline RuntimeCore is singleton, use RuntimeCore.getInstance() instead.');
    }

    this.anyContextEmitter = (0,_utils_emitter__WEBPACK_IMPORTED_MODULE_8__.createManyEmitter)();
    this.exparser.globalOptions.publicProperties = true;
    this.exparser.globalOptions.renderingMode = 'full';
    this.exparser.globalOptions.documentBackend = 'custom';
    this.exparser.globalOptions.domain = '//';
    this.exparser.globalOptions.classPrefix = '';
    this.exparser.globalOptions.listenerChangeLifeTimes = true;

    if (true) {
      var {
        GlassEaselTemplate: GlassEaselTemplate
      } = _lib_glass_easel_template_common__WEBPACK_IMPORTED_MODULE_2___default()(this.exparser);
      this.exparser.globalOptions.templateEngine = GlassEaselTemplate;
      this.exparser.updateDefaultComponent();
    }

    this.initializeComponents();
    this.registerEventCallback();
    this.registerTransitionCallback();

    if (false) {} else {
      this.allWindows.add(0);
      this.notifyNavigateTo(0, '', true);
    }

    __webpack_require__.g.__runtimeCore = this;
    this.exparser.addGlobalErrorListener(function (error, info) {
      console.error('[Skyline] ' + info.message);
    });
    this.exparser.addGlobalWarningListener(function (msg) {
      console.warn('[Skyline] ' + msg);
    });
  }

  notifyNavigateTo(id, routeType = '', isTab = false) {
    RuntimeCore.nativeGlobal.Navigator.notifyNavigateTo(0, id);
    var routeConfig = _reanimated_routeManager__WEBPACK_IMPORTED_MODULE_9__.RouteManager.genRouteConfig(routeType);
    this.setPageInfo(id, {
      windowId: 0,
      pageId: id,
      openType: 'navigateTo',
      data: {
        routeConfig: routeConfig
      },
      isTab: isTab
    });
  }

  notifySwitchTab(id) {
    RuntimeCore.nativeGlobal.Navigator.notifySwitchTab(0, id);
  }

  notifyNavigateBack(id, delta = 1, animated = true) {
    RuntimeCore.nativeGlobal.Navigator.notifyNavigateBack(0, id, delta, animated);
  }

  windowReady(windowId) {
    var _this2 = this;

    return _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(function* () {
      if (_this2.allWindows.has(windowId)) {
        return Promise.resolve();
      }

      if (_this2.windowEmitter[windowId] === undefined) {
        _this2.windowEmitter[windowId] = (0,_utils_emitter__WEBPACK_IMPORTED_MODULE_8__.createOnceEmitter)();
      }

      return new Promise(function (resolve) {
        _this2.windowEmitter[windowId].on(resolve);
      });
    })();
  }

  pageReady(id) {
    var _this3 = this;

    return _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()(function* () {
      if (typeof id === 'undefined') id = 0;
      console.warn('[SkylineJS] wait for contextReady, id=' + id);

      var existContext = _this3.getContext(id);

      if (existContext) return Promise.resolve(existContext);

      var pageInfo = _this3.getPageInfo(id);

      if (!pageInfo) {
        throw new Error(`Skyline page(${id}) can not find correspond window`);
      }

      var windowId = pageInfo.windowId;
      yield _this3.windowReady(windowId);

      var confirmExistContext = _this3.getContext(id);

      if (confirmExistContext) {
        return Promise.resolve(confirmExistContext);
      }

      var context = new RuntimeCore.nativeGlobal.PageContext(id, windowId);

      if (pageInfo.isTab) {
        console.warn('[SkylineJS] update tabBarWindow');
        _this3.tabBarWindow = windowId;
        context.setAsTab();
      }

      _this3.allContexts[id] = context;

      _this3.anyContextEmitter.emit(id);

      if (true) {
        context.appendStyleSheet(_this3.globalStylesheet.join(''), 0);
      }

      console.warn('[SkylineJS] emit contextReady ' + id);
      return Promise.resolve(context);
    })();
  }

  getTabBarContext() {
    console.warn('[SkylineJS] getTabBarContext tabBarWindow: ', this.tabBarWindow);

    if (this.tabBarWindow == undefined) {
      throw '[SkylineJS] tabBarWindow not found';
    }

    var windowId = this.tabBarWindow;

    if (this.tabBarContexts.has(windowId)) {
      return this.tabBarContexts.get(windowId);
    }

    this.tabBarContexts.clear();
    var context = new RuntimeCore.nativeGlobal.TabBarContext(0, windowId);
    this.tabBarContexts.set(windowId, context);
    return context;
  }

  removeTabBarContext() {
    this.tabBarContexts.clear();
  }

  removeContext(id) {
    this.detachCustomRoute(id);
    delete this.allContexts[id];
    delete this.rootElement[id];
  }

  detachCustomRoute(id) {
    var pageInfo = this.pageInfos[id];
    if (typeof pageInfo === 'undefined') return;
    var workletHandlers = pageInfo.workletHandlers || [];
    workletHandlers.forEach(function (handler) {
      handler.unregister();
    });
    var mapperIds = pageInfo.mapperIds || [];
    mapperIds.forEach(function (id) {
      ReanimatedModule.stopMapper(id);
    });
    delete this.pageInfos[id];
  }

  static getInstance() {
    return this.instance;
  }

  getContext(id) {
    return this.allContexts[id];
  }

  setPageInfo(id, data) {
    this.pageInfos[id] = data;
  }

  getPageInfo(id) {
    return this.pageInfos[id];
  }

  initializeComponents() {
    var exparser = this.getExparser();
    (0,_behaviors__WEBPACK_IMPORTED_MODULE_4__.registerBuiltinBehaviors)(exparser);
    (0,_components__WEBPACK_IMPORTED_MODULE_3__.registerBuiltinComponents)(exparser, this);
  }

  attachRootElement(element, id, callback) {
    this.rootElement[id] = element;
    var context = this.getContext(id);
    var root = context.createElement('empty', 'body');
    root.replaceChild(element.__domElement, 0);

    if (this.useCustomRoute(id)) {
      var host = context.createElement('empty', 'host');
      host.appendChild(root);
      root.forceDetached();
      context.attach(root, host);
      this.attachCustomRoute(id, host);
    } else {
      context.attach(root);
    }

    this.exparser.Element.pretendAttached(element);
    var cb = typeof callback === 'function' ? callback : function () {};
    context.startRender(cb);
  }

  initTabBar(element) {
    var context = this.getTabBarContext();
    var root = element.__domElement;
    root.setHitTestBehavior(HitTestBehavior.kTranslucent);
    context.attach(root);
    this.exparser.Element.pretendAttached(element);
    context.startRender(function () {
      console.log('initTabBar done');
    });
  }

  appendGlobalStylesheet(style) {
    this.globalStylesheet.push(style);
  }

  dispatchEvent(evt) {
    if (this.isInterceptingTouchEvent()) {
      console.log(`[SkylineJS] intercepted touch event ${evt.type}`);
      this.touchEventInterceptor(evt);
    } else {
      (0,_touch__WEBPACK_IMPORTED_MODULE_5__.dispatchEventToExparser)(this.exparser, evt);
    }
  }

  registerEventCallback() {
    var _this4 = this;

    SkylineGlobal.Runtime.registerEventCallback(function (evt) {
      if (typeof wx !== 'undefined') wx.traceFlag('SkylineEvent', evt.type);

      _this4.dispatchEvent(evt);

      if (evt.type === 'longpress') {
        var longTapEvent = Object.assign({}, evt);
        longTapEvent.type = 'longtap';

        _this4.dispatchEvent(longTapEvent);
      }
    });
  }

  registerTransitionCallback() {
    var _this5 = this;

    SkylineGlobal.Runtime.registerAnimationCallback(function (evt, type, target) {
      (0,_transition__WEBPACK_IMPORTED_MODULE_6__.dispatchTransitionToExparser)(_this5.exparser, evt, type, target);
    });
  }

  getExparser() {
    return this.exparser;
  }

  getRootElement(id) {
    return this.rootElement[id];
  }

  useCustomRoute(id) {
    var pageInfo = this.getPageInfo(id);
    var routeConfig = pageInfo.data.routeConfig;
    return !!routeConfig;
  }

  attachCustomRoute(id, hostNode) {
    var pageInfo = this.getPageInfo(id);
    var rConfig = pageInfo.data.routeConfig;

    if (typeof rConfig !== 'object') {
      throw new Error('can not find route config');
    }

    var mapperIds = [];
    var workletHandlers = [];
    var viewTag = hostNode.viewTag;
    pageInfo.mapperIds = mapperIds;
    pageInfo.workletHandlers = workletHandlers;

    var addWorkeltEventHandler = function (eventName, worklet) {
      if (typeof worklet !== 'function') return;
      var handler = new _components_worklet_event_handler__WEBPACK_IMPORTED_MODULE_10__.default(worklet, eventName);
      workletHandlers.push(handler);
    };

    var {
      skylinePageId: skylinePageId,
      skylineWindowId: skylineWindowId,
      userGestureInProgress: userGestureInProgress,
      primaryAnimation: primaryAnimation,
      primaryAnimationStatus: primaryAnimationStatus,
      secondaryAnimation: secondaryAnimation,
      secondaryAnimationStatus: secondaryAnimationStatus
    } = rConfig.context;
    skylinePageId.value = pageInfo.pageId;
    skylineWindowId.value = pageInfo.windowId;
    var eventName = 'onAnimationChange';
    addWorkeltEventHandler(eventName, function () {
      var _f = function (controller) {
        if (userGestureInProgress.value) return;
        primaryAnimation.value = controller.value;
        primaryAnimationStatus.value = controller.status;
      };

      _f._closure = {
        userGestureInProgress: userGestureInProgress,
        primaryAnimation: primaryAnimation,
        primaryAnimationStatus: primaryAnimationStatus
      };
      _f.asString = "function _f(controller){const{userGestureInProgress,primaryAnimation,primaryAnimationStatus}=jsThis._closure;{if(userGestureInProgress.value)return;primaryAnimation.value=controller.value;primaryAnimationStatus.value=controller.status;}}";
      _f.__workletHash = 2505478239646;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/runtime/index.ts (349:38)";
      _f.__worklet = true;
      return _f;
    }());
    var secondaryEventName = 'onSecondaryAnimationChange';
    addWorkeltEventHandler(secondaryEventName, function () {
      var _f = function (controller) {
        secondaryAnimation.value = controller.value;
        secondaryAnimationStatus.value = controller.status;
      };

      _f._closure = {
        secondaryAnimation: secondaryAnimation,
        secondaryAnimationStatus: secondaryAnimationStatus
      };
      _f.asString = "function _f(controller){const{secondaryAnimation,secondaryAnimationStatus}=jsThis._closure;{secondaryAnimation.value=controller.value;secondaryAnimationStatus.value=controller.status;}}";
      _f.__workletHash = 3619974389256;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/runtime/index.ts (358:47)";
      _f.__worklet = true;
      return _f;
    }());
    workletHandlers.forEach(function (handler) {
      handler.register(viewTag);
    });

    var addAnimatedStyle = function (updater) {
      if (typeof updater !== 'function') return;
      var style = (0,_reanimated__WEBPACK_IMPORTED_MODULE_7__.useAnimatedStyle)(updater);
      mapperIds.push(style.mapperId);
      hostNode.addAnimatedStyle(style);
    };

    addAnimatedStyle(rConfig.handlePrimaryAnimation);
    addAnimatedStyle(rConfig.handleSecondaryAnimation);

    var updateAnimationController = function () {
      var _f = function () {
        if (userGestureInProgress.value) {
          var value = primaryAnimation.value;

          _updateAnimationController(pageInfo.windowId, id, value);
        }
      };

      _f._closure = {
        userGestureInProgress: userGestureInProgress,
        primaryAnimation: primaryAnimation,
        pageInfo: {
          windowId: pageInfo.windowId
        },
        id: id
      };
      _f.asString = "function _f(){const{userGestureInProgress,primaryAnimation,pageInfo,id}=jsThis._closure;{if(userGestureInProgress.value){var value=primaryAnimation.value;_updateAnimationController(pageInfo.windowId,id,value);}}}";
      _f.__workletHash = 15367019593265;
      _f.__location = "/Users/sanford/tencent/workspace/src/skyline-js/src/runtime/index.ts (380:38)";
      _f.__worklet = true;
      return _f;
    }();

    var inputs = Object.values(updateAnimationController._closure);
    var mapperId = ReanimatedModule.startMapper(updateAnimationController, inputs, []);
    mapperIds.push(mapperId);
    this.getContext(id).attachCustomRoute(rConfig.isCustomRoute, rConfig.opaque, rConfig.maintainState, rConfig.transitionDuration, rConfig.reverseTransitionDuration, rConfig.barrierColor, rConfig.barrierDismissible, rConfig.barrierLabel, rConfig.canTransitionTo, rConfig.canTransitionFrom, `${eventName}-${viewTag}`, `${secondaryEventName}-${viewTag}`);
    console.info(`[skyline] pageId: ${id} isNewEngineHomePage: ${pageInfo.isNewEngineHomePage}`);
  }

  startTouchEventInterception(interceptor) {
    if (this.touchEventInterceptor) {
      console.log('[SkylineJS] already intercepting touch event, ignoring start request');
      return;
    }

    this.touchEventInterceptor = interceptor;
  }

  stopTouchEventInterception() {
    if (!this.touchEventInterceptor) {
      console.log('[SkylineJS] not intercepting touch event, ignoring stop request');
      return;
    }

    this.touchEventInterceptor = null;
  }

  isInterceptingTouchEvent() {
    return typeof this.touchEventInterceptor === 'function';
  }

}
RuntimeCore.nativeGlobal = SkylineGlobal;
RuntimeCore.instance = new RuntimeCore();

/***/ }),

/***/ "./src/runtime/observer.ts":
/*!*********************************!*\
  !*** ./src/runtime/observer.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
class SkylineIntersectionObserver {
  constructor(callback, options) {
    this.root = void 0;
    this.rootMargin = void 0;
    this.thresholds = void 0;
    this._callback = void 0;
    this._targets = [];
    this.root = (options === null || options === void 0 ? void 0 : options.root) || null;
    this.rootMargin = (options === null || options === void 0 ? void 0 : options.rootMargin) || [0, 0, 0, 0];
    this.thresholds = (options === null || options === void 0 ? void 0 : options.threshold) || [0];
    this._callback = callback;
  }

  disconnect() {
    var _this = this;

    this._targets.forEach(function (target) {
      return _this.unobserve(target);
    });
  }

  observe(target) {
    var _this2 = this;

    target.setIntersectionListener({
      root: null,
      rootMargin: this.rootMargin,
      thresholds: this.thresholds
    }, function (entries) {
      _this2._callback(entries, _this2);
    });

    this._targets.push(target);
  }

  unobserve(target) {
    var idx = this._targets.indexOf(target);

    if (idx > -1) {
      target.setIntersectionListener({}, null);

      this._targets.splice(idx, 1);
    }
  }

}

/* harmony default export */ __webpack_exports__["default"] = (SkylineIntersectionObserver);

/***/ }),

/***/ "./src/runtime/touch.ts":
/*!******************************!*\
  !*** ./src/runtime/touch.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "dispatchEventToExparser": () => (/* binding */ dispatchEventToExparser)
/* harmony export */ });
function trace(category, name, fn) {
  var traceId = typeof wx !== 'undefined' ? wx.traceBeginEvent(category, name) : 0;
  fn(function () {
    if (typeof wx !== 'undefined') wx.traceEndEvent(traceId);
  });
}

function wrapTapMark(evtName, cb) {
  if (evtName === 'tap' && false) {
    __virtualDOM__.wrapTapMark(cb);
  } else cb(0);
}

function dispatchEventToExparser(exparser, e) {
  var extraFields = {
    _requireActive: false,
    _relatedInfo: undefined,
    _allowWriteOnly: true,
    touches: e.touches || [],
    changedTouches: e.changedTouches || []
  };
  var exparserEvent = exparser.Event.create(e.type, {}, {
    bubbles: true,
    capturePhase: true,
    composed: true,
    extraFields: extraFields
  });
  trace('Exparser', 'dispatchEvent', function (finishTrace) {
    wrapTapMark(e.type, function () {
      exparser.Event.dispatchEvent(e.target, exparserEvent);
      finishTrace();
    });
  });
}

/***/ }),

/***/ "./src/runtime/transition.ts":
/*!***********************************!*\
  !*** ./src/runtime/transition.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "dispatchTransitionToExparser": () => (/* binding */ dispatchTransitionToExparser)
/* harmony export */ });
function dispatchTransitionToExparser(exparser, evt, type, target) {
  exparser.triggerEvent(target, type, evt, {
    originalEvent: evt,
    bubbles: true,
    capturePhase: true,
    composed: true,
    extraFields: {}
  });
}

/***/ }),

/***/ "./src/utils/emitter.ts":
/*!******************************!*\
  !*** ./src/utils/emitter.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createOnceEmitter": () => (/* binding */ createOnceEmitter),
/* harmony export */   "createManyEmitter": () => (/* binding */ createManyEmitter)
/* harmony export */ });
var createOnceEmitter = function () {
  var emitted = false;
  var res;
  var callbacks = [];
  return {
    emit: function (_res) {
      if (emitted) return;
      emitted = true;
      res = _res;
      callbacks.forEach(function (cb) {
        return cb(res);
      });
    },
    on: function (cb) {
      if (emitted) cb(res);else callbacks.push(cb);
    }
  };
};
var createManyEmitter = function () {
  var callbacks = [];
  return {
    emit: function (_res) {
      callbacks.forEach(function (cb) {
        return cb(_res);
      });
    },
    on: function (cb) {
      callbacks.push(cb);
    },
    off: function (cb) {
      var idx = callbacks.indexOf(cb);
      if (idx >= 0) callbacks.splice(idx, 1);
    }
  };
};

/***/ }),

/***/ "./src/utils/env.ts":
/*!**************************!*\
  !*** ./src/utils/env.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IS_DEV": () => (/* binding */ IS_DEV),
/* harmony export */   "IS_PROD": () => (/* binding */ IS_PROD),
/* harmony export */   "getLogMinimumLogLevel": () => (/* binding */ getLogMinimumLogLevel)
/* harmony export */ });
/* harmony import */ var _log_level__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./log_level */ "./src/utils/log_level.ts");

var IS_DEV = "dev" == 'dev';
var IS_PROD = "dev" == 'prod';
var MINIMUM_LOG_LEVEL = parseInt(0);
function getLogMinimumLogLevel() {
  if (MINIMUM_LOG_LEVEL == 0) {
    return _log_level__WEBPACK_IMPORTED_MODULE_0__.LogLevel.silence;
  }

  if (MINIMUM_LOG_LEVEL == 1) {
    return _log_level__WEBPACK_IMPORTED_MODULE_0__.LogLevel.trace;
  }

  if (MINIMUM_LOG_LEVEL == 2) {
    return _log_level__WEBPACK_IMPORTED_MODULE_0__.LogLevel.info;
  }

  if (MINIMUM_LOG_LEVEL == 3) {
    return _log_level__WEBPACK_IMPORTED_MODULE_0__.LogLevel.warning;
  }

  if (MINIMUM_LOG_LEVEL == 4) {
    return _log_level__WEBPACK_IMPORTED_MODULE_0__.LogLevel.error;
  }

  if (MINIMUM_LOG_LEVEL == 5) {
    return _log_level__WEBPACK_IMPORTED_MODULE_0__.LogLevel.fatal;
  }

  return _log_level__WEBPACK_IMPORTED_MODULE_0__.LogLevel.info;
}

/***/ }),

/***/ "./src/utils/log_level.ts":
/*!********************************!*\
  !*** ./src/utils/log_level.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LogLevel": () => (/* binding */ LogLevel)
/* harmony export */ });
var LogLevel;

(function (LogLevel) {
  LogLevel[LogLevel["silence"] = 0] = "silence";
  LogLevel[LogLevel["trace"] = 1] = "trace";
  LogLevel[LogLevel["info"] = 2] = "info";
  LogLevel[LogLevel["warning"] = 3] = "warning";
  LogLevel[LogLevel["error"] = 4] = "error";
  LogLevel[LogLevel["fatal"] = 5] = "fatal";
})(LogLevel || (LogLevel = {}));

/***/ }),

/***/ "./src/utils/size.ts":
/*!***************************!*\
  !*** ./src/utils/size.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "normalizeSize": () => (/* binding */ normalizeSize)
/* harmony export */ });
var rpxReg = /[+-]?\d+(\.\d+)?rpx/;

var isRpxString = function (str) {
  return str.match(rpxReg);
};

var pxReg = /[+-]?\d+(\.\d+)?px/;

var isPxString = function (str) {
  return str.match(pxReg);
};

function transformSize(input) {
  if (isPxString(input)) input = parseFloat(input);
  input = +input;
  if (typeof input === 'number' && !isNaN(input)) return input;
  return 0;
}

function normalizeSize(value) {
  if (typeof value === 'string') return transformSize(value);
  if (typeof value === 'number') return value;
  return 0;
}



/***/ }),

/***/ "./src/utils/unique-id.ts":
/*!********************************!*\
  !*** ./src/utils/unique-id.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
var MAX_INCREMENT_ID = 0xffff;
var MAX_RANDOM = 0x7fff;
var MASK_INCREMENT = 0x7fff8000;
var MASK_RANDOM = MAX_RANDOM;
var BIT_RANDOM = 15;

var generateRandom = function () {
  return ~~(Math.random() * MAX_RANDOM);
};

var globalIncrementId = 0;

var generateGloabllyUniqueId = function () {
  var incrementId = globalIncrementId;
  globalIncrementId = (+incrementId + 1) % MAX_INCREMENT_ID;
  var random = generateRandom();
  return +incrementId << BIT_RANDOM & MASK_INCREMENT | random & MASK_RANDOM;
};

/* harmony default export */ __webpack_exports__["default"] = (generateGloabllyUniqueId);

/***/ }),

/***/ "./src/components/components-dark.less":
/*!*********************************************!*\
  !*** ./src/components/components-dark.less ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("");

/***/ }),

/***/ "./src/components/components-v2-dark.less":
/*!************************************************!*\
  !*** ./src/components/components-v2-dark.less ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("");

/***/ }),

/***/ "./src/components/components-v2.less":
/*!*******************************************!*\
  !*** ./src/components/components-v2.less ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("wx-button {\n  padding: 8px 24px;\n  line-height: 1.41176471;\n  border-radius: 4px;\n  font-weight: 700;\n  font-size: 17px;\n  border: none;\n}\nwx-button.wx-button-type-none {\n  width: 184px;\n  margin-left: auto;\n  margin-right: auto;\n}\nwx-button.wx-button-type-default {\n  width: 184px;\n  margin-left: auto;\n  margin-right: auto;\n  color: #06ae56;\n  background-color: #f2f2f2;\n}\nwx-button.wx-button-type-default.button-hover {\n  color: #06ae56;\n  background-color: #d9d9d9;\n}\nwx-button.wx-button-type-default.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.18);\n  background-color: #fafafa;\n}\nwx-button.wx-button-type-default.wx-button-plain {\n  color: #353535;\n  border: 1px solid #353535;\n  background-color: transparent;\n}\nwx-button.wx-button-type-default.wx-button-plain.button-hover {\n  background-color: rgba(0, 0, 0, 0.1);\n}\nwx-button.wx-button-type-primary {\n  width: 184px;\n  margin-left: auto;\n  margin-right: auto;\n  background-color: #07c160;\n}\nwx-button.wx-button-type-primary.wx-button-loading {\n  color: #fff;\n  background-color: #06ad56;\n  background-image: url(\"data:image/svg+xml;charset=utf8, %3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 100 100'%3E%3Cpath fill='none' d='M0 0h100v100H0z'/%3E%3Crect xmlns='http://www.w3.org/2000/svg' width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.56)' rx='5' ry='5' transform='translate(0 -30)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.5)' rx='5' ry='5' transform='rotate(30 105.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.43)' rx='5' ry='5' transform='rotate(60 75.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.38)' rx='5' ry='5' transform='rotate(90 65 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.32)' rx='5' ry='5' transform='rotate(120 58.66 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.28)' rx='5' ry='5' transform='rotate(150 54.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.25)' rx='5' ry='5' transform='rotate(180 50 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.2)' rx='5' ry='5' transform='rotate(-150 45.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.17)' rx='5' ry='5' transform='rotate(-120 41.34 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.14)' rx='5' ry='5' transform='rotate(-90 35 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.1)' rx='5' ry='5' transform='rotate(-60 24.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='rgba(255,255,255,.03)' rx='5' ry='5' transform='rotate(-30 -5.98 65)'/%3E%3C/svg%3E\");\n}\nwx-button.wx-button-type-primary.button-hover {\n  color: #fff;\n  background-color: #06ad56;\n}\nwx-button.wx-button-type-primary.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.18);\n  background-color: #fafafa;\n}\nwx-button.wx-button-type-primary.wx-button-plain {\n  color: #06ae56;\n  border-color: #179c16;\n}\nwx-button.wx-button-type-primary.wx-button-plain.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.2);\n  border-color: rgba(0, 0, 0, 0.2);\n  background-color: transparent;\n}\nwx-button.wx-button-type-primary.wx-button-plain.button-hover {\n  background-color: rgba(0, 0, 0, 0.1);\n}\nwx-button.wx-button-type-warn {\n  width: 184px;\n  margin-left: auto;\n  margin-right: auto;\n  color: #fa5151;\n  background-color: #f2f2f2;\n}\nwx-button.wx-button-type-warn.wx-button-loading {\n  background-color: #d9d9d9;\n  color: #fa5151;\n}\nwx-button.wx-button-type-warn.button-hover {\n  color: #fa5151;\n  background-color: #d9d9d9;\n}\nwx-button.wx-button-type-warn.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.18);\n  background-color: #fafafa;\n}\nwx-button.wx-button-size-mini {\n  width: auto;\n  padding: 0 12px;\n  line-height: 2;\n  font-size: 16px;\n}\nwx-button.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.18);\n  background-color: #fafafa;\n}\nwx-button.button-hover.wx-button-type-primary.wx-button-plain {\n  background-color: rgba(0, 0, 0, 0.1);\n}\nwx-button.button-hover .button-hover.wx-button-type-default.wx-button-plain {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n");

/***/ }),

/***/ "./src/components/components.less":
/*!****************************************!*\
  !*** ./src/components/components.less ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("wx-image {\n  overflow: hidden;\n  width: 320px;\n  height: 240px;\n}\nwx-image.__wx_image_height_auto__ {\n  height: auto!important;\n}\nwx-image.__wx_image_width_auto__ {\n  width: auto!important;\n}\nwx-cover-image {\n  overflow: hidden;\n}\nwx-button {\n  position: relative;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: 14px;\n  padding-right: 14px;\n  font-size: 18px;\n  text-align: center;\n  line-height: 2.55555556;\n  border-radius: 5px;\n  border: 0.5px solid rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  color: #000000;\n  background-color: #F8F8F8;\n}\nwx-button.wx-button-type-default {\n  color: #000000;\n  background-color: #F8F8F8;\n}\nwx-button.wx-button-type-primary {\n  color: #FFFFFF;\n  background-color: #1AAD19;\n}\nwx-button.wx-button-type-warn {\n  color: #FFFFFF;\n  background-color: #E64340;\n}\nwx-button.wx-button-size-mini {\n  line-height: 2.3;\n  font-size: 13px;\n  padding: 0 17.42px;\n}\nwx-button.wx-button-loading.wx-button-type-default {\n  color: rgba(0, 0, 0, 0.6);\n  background-color: #DEDEDE;\n}\nwx-button.wx-button-loading.wx-button-type-default.wx-button-plain {\n  color: #353535;\n  background-color: transparent;\n}\nwx-button.wx-button-loading.wx-button-type-primary {\n  color: rgba(255, 255, 255, 0.6);\n  background-color: #179B16;\n}\nwx-button.wx-button-loading.wx-button-type-primary.wx-button-plain {\n  color: #1aad19;\n  background-color: transparent;\n}\nwx-button.wx-button-loading.wx-button-type-warn {\n  color: rgba(255, 255, 255, 0.6);\n  background-color: #CE3C39;\n}\nwx-button.wx-button-loading.wx-button-type-warn.wx-button-plain {\n  color: #e64340;\n  background-color: transparent;\n}\nwx-button.wx-button-loading .wx-button-loading-placeholder {\n  width: 18px;\n  height: 18px;\n  background: transparent url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iciIgd2lkdGg9JzEyMHB4JyBoZWlnaHQ9JzEyMHB4JyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICAgIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJub25lIiBjbGFzcz0iYmsiPjwvcmVjdD4KICAgIDxyZWN0IHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjRTlFOUU5JwogICAgICAgICAgdHJhbnNmb3JtPSdyb3RhdGUoMCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+CiAgICA8L3JlY3Q+CiAgICA8cmVjdCB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nIzk4OTY5NycKICAgICAgICAgIHRyYW5zZm9ybT0ncm90YXRlKDMwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4KICAgICAgICAgICAgICAgICByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyM5Qjk5OUEnCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSg2MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+CiAgICAgICAgICAgICAgICAgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz4KICAgIDwvcmVjdD4KICAgIDxyZWN0IHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjQTNBMUEyJwogICAgICAgICAgdHJhbnNmb3JtPSdyb3RhdGUoOTAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNBQkE5QUEnCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgxMjAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNCMkIyQjInCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgxNTAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNCQUI4QjknCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgxODAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNDMkMwQzEnCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgyMTAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNDQkNCQ0InCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgyNDAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNEMkQyRDInCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgyNzAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNEQURBREEnCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgzMDAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0PgogICAgPHJlY3QgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNFMkUyRTInCiAgICAgICAgICB0cmFuc2Zvcm09J3JvdGF0ZSgzMzAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPgogICAgPC9yZWN0Pgo8L3N2Zz4=) no-repeat;\n  background-size: 100%;\n}\nwx-button.wx-button-type-primary.wx-button-plain {\n  color: #1aad19;\n  border: 1px solid #1aad19;\n  background-color: transparent;\n}\nwx-button.wx-button-type-primary.wx-button-plain.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.2);\n  border-color: rgba(0, 0, 0, 0.2);\n}\nwx-button.wx-button-type-default.wx-button-plain {\n  color: #353535;\n  border: 1px solid #353535;\n  background-color: transparent;\n}\nwx-button.wx-button-type-default.wx-button-plain.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.2);\n  border-color: rgba(0, 0, 0, 0.2);\n}\nwx-button.wx-button-type-warn.wx-button-plain {\n  color: #e64340;\n  border: 1px solid #e64340;\n  background-color: transparent;\n}\nwx-button.wx-button-type-warn.wx-button-plain.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.2);\n  border-color: rgba(0, 0, 0, 0.2);\n}\nwx-button.wx-button-plain {\n  color: #353535;\n  border: 1px solid #353535;\n  background-color: transparent;\n}\nwx-button.wx-button-plain.wx-button-disabled {\n  color: rgba(0, 0, 0, 0.2);\n  border-color: rgba(0, 0, 0, 0.2);\n}\nwx-button.wx-button-disabled {\n  color: rgba(255, 255, 255, 0.6);\n}\nwx-button.wx-button-disabled.wx-button-type-default,\nwx-button.wx-button-disabled.wx-button-type-none {\n  color: rgba(0, 0, 0, 0.3);\n  background-color: #F7F7F7;\n}\nwx-button.wx-button-disabled.wx-button-type-primary {\n  background-color: #9ED99D;\n}\nwx-button.wx-button-disabled.wx-button-type-warn {\n  background-color: #EC8B89;\n}\n.button-hover {\n  color: rgba(0, 0, 0, 0.6);\n  background-color: #DEDEDE;\n}\n.button-hover.wx-button-plain {\n  color: rgba(53, 53, 53, 0.6);\n  border-color: rgba(53, 53, 53, 0.6);\n  background-color: transparent;\n}\n.button-hover.wx-button-type-primary {\n  color: rgba(255, 255, 255, 0.6);\n  background-color: #179B16;\n}\n.button-hover.wx-button-type-primary.wx-button-plain {\n  color: rgba(26, 173, 25, 0.6);\n  border-color: rgba(26, 173, 25, 0.6);\n  background-color: transparent;\n}\n.button-hover.wx-button-type-default {\n  color: rgba(0, 0, 0, 0.6);\n  background-color: #DEDEDE;\n}\n.button-hover.wx-button-type-default.wx-button-plain {\n  color: rgba(53, 53, 53, 0.6);\n  border-color: rgba(53, 53, 53, 0.6);\n  background-color: transparent;\n}\n.button-hover.wx-button-type-warn {\n  color: rgba(255, 255, 255, 0.6);\n  background-color: #CE3C39;\n}\n.button-hover.wx-button-type-warn.wx-button-plain {\n  color: rgba(230, 67, 64, 0.6);\n  border-color: rgba(230, 67, 64, 0.6);\n  background-color: transparent;\n}\n.navigator-hover {\n  background-color: rgba(0, 0, 0, 0.1);\n  opacity: 0.7;\n}\nwx-navigator {\n  height: auto;\n  width: auto;\n}\nwx-swiper {\n  height: 150px;\n}\nwx-scroll-view {\n  width: 100%;\n}\n.__wx_builtin_component_hidden__ {\n  display: none;\n}\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _example_spa__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./example/spa */ "./src/example/spa.ts");

(0,_example_spa__WEBPACK_IMPORTED_MODULE_0__.default)();
})();

/******/ })()
;